<?xml version="1.0" encoding="utf-8"?>
<artifacts_collection>
  <collection_info>
    <id>CC</id>
    <name>eTOUR Target Artifacts</name>
    <version>1.1</version>
    <description>Class code</description>
  </collection_info>
  <artifacts>
    <artifact>
      <id>CC_Autenticazione</id>
      <content>package unisa.gps.etour.control.GestioneUtentiRegistrati;

import java.rmi.RemoteException;
import java.rmi.server.UnicastRemoteObject;
import java.sql.SQLException;

import unisa.gps.etour.bean.BeanTurista;
import unisa.gps.etour.repository.DBTurista;
import unisa.gps.etour.util.ControlloDati;
import unisa.gps.etour.util.MessaggiErrore;

public class Authentication extends UnicastRemoteObject implements IAutenticazione
{

private static final long serialVersionUID = 0L;

public Authentication() throws RemoteException
{
super();
}

// Objects to manipulate data Turista
private DBTurista turista = new DBTurista();
private BeanTurista bTurista;

public int login(String pUsername, String pPassword, byte pTipologiaUtente)
throws RemoteException
{
// Check if the string username and password
if (ControlloDati.controllaStringa(pUsername, true, true, &quot;_-&quot;, null,
6, 12)
&amp;&amp; ControlloDati.controllaStringa(pPassword, true, true, &quot;_-&quot;,
null, 5, 12))
try
{
switch (pTipologiaUtente)
{
// If the type is Turista
case VISITORS:
// Invoke the method to obtain the Bean del Turista
// Given the username
bTurista = turista.ottieniTurista(pUsername);
// Check that the Bean is not null and
// Passwords match
if (bTurista != null
&amp;&amp; bTurista.getPassword().equals(pPassword))
return bTurista.getId();
// If the type and eateries
case OP_PUNTO_DI_RISTORO:
// Not implemented was the operational point of
// Refreshment
return -1;
// If not match any known type
default:
return -1;
}
}
catch (SQLException e)
{
throw new RemoteException(
MessaggiErrore.ERRORE_DBMS);
}
catch (Exception e) {
throw new RemoteException(MessaggiErrore.ERRORE_SCONOSCIUTO);
}
// If the data are incorrect returns -1
return -1;
}
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_Banner</id>
      <content>package unisa.gps.etour.gui.operatoreagenzia;

import java.awt.*;
import java.awt.event.*;
import java.io.FileNotFoundException;
import java.rmi.RemoteException;
import java.rmi.registry.LocateRegistry;
import java.rmi.registry.Registry;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.Iterator;
import javax.swing.*;
import java.util.*;
import javax.swing.tree.*;
import javax.swing.border.*;
import unisa.gps.etour.gui.operatoreagenzia.BannerDialog;
import unisa.gps.etour.gui.operatoreagenzia.Home;
import unisa.gps.etour.gui.operatoreagenzia.TagPanel;
import unisa.gps.etour.gui.operatoreagenzia.tables.BannerNode;
import unisa.gps.etour.gui.operatoreagenzia.tables.PRNode;
import unisa.gps.etour.bean.BeanBanner;
import unisa.gps.etour.bean.BeanPuntoDiRistoro;
import unisa.gps.etour.bean.BeanTag;
import unisa.gps.etour.control.GestioneAdvertisement.IGestioneAdvertisementAgenzia;
import unisa.gps.etour.control.GestionePuntiDiRistoro.IGestionePuntiDiRistoroAgenzia;
import unisa.gps.etour.control.GestioneTag.IGestioneTagComune;
import unisa.gps.etour.gui.DeskManager;
import unisa.gps.etour.gui.HelpManager;
import unisa.gps.etour.gui.operatoreagenzia.tables.BannerRenderer;

public class JInternalFrame extends Banner {

private JPanel jContentPane = null;
private JPanel rightPanel = null;
private JToolBar bannerToolbar = null;
private JButton btnInserisci = null;
private JButton btnSostituisci = null;
private JButton btnElimina = null;
private JScrollPane JScrollPane = null;
private JPanel helpPanel = null;
private JTextPane textGuida = null;
private TagPanel panelTag = null;
private JButton btnRicerca = null;
private JButton btnAzzera = null;
private JPanel panelSearch = null;
private JTextField nomePR = null;
private JTree treeBanner = null;
private JDesktopPane JDesktopPane;
private HelpManager bannerHelp;
protected DeskManager desktopManager;
protected IGestionePuntiDiRistoroAgenzia gestionePuntiRistoro;
protected IGestioneAdvertisementAgenzia gestioneBanner;
protected IGestioneTagComune tags;

/**
* This is the default constructor.
*/
public Banner() {
super(&quot;Banner&quot;);
resizable = true;
closable = true;
iconable = true;
maximizable = true;
setPreferredSize(Home.CHILD_SIZE);
frameIcon = new ImageIcon(getClass().getResource(
Home.URL_IMAGES + &quot;banner2.png&quot;));

// Setting up dell'help manager for cultural.

textGuida = new JTextPane();

try {
bannerHelp = new HelpManager(Home.URL_HELP + &quot;Banner.txt&quot;, textGuida);
} catch (FileNotFoundException e) {
textGuida.setText(&quot;&lt;html&gt;&lt;b&gt;Help not available&lt;/b&gt;&lt;/html&gt;&quot;);
}

setContentPane(getJContentPane());
addInternalFrameListener(new InternalFrameAdapter() {
/**
* Inclusion of the frame on the desktop retrieves the bread
* Link to the desktop pane.
*/
public void internalFrameOpened(InternalFrameEvent pEvent) {
JInternalFrame frame = pEvent.getInternalFrame();
JDesktopPane = frame.getDesktopPane();
desktopManager = (DeskManager) jDesktopPane.getDesktopManager();

// Setting up of remote objects for the management of cultural heritage.
try {
Registry reg = LocateRegistry.getRegistry(Home.HOST);
gestioneBanner = 
(IGestioneAdvertisementAgenzia) reg.lookup(&quot;GestioneBeniCulturaliAgenzia&quot;);
tag = 
(IGestioneTagComune) reg.lookup(&quot;GestioneTagComune&quot;);
gestionePuntiRistoro = 
(IGestionePuntiDiRistoroAgenzia) reg.lookup(&quot;GestionePuntiDiRistoroAgenzia&quot;);

// Load data.
createTree();
caricaTags();
}
/*
* Two exceptions: RemoteException and NotBoundException. The
* Result is the same. The management is not operable and
* After the error message window closes.
*/
catch (Exception ex) {
JLabel error = new JLabel(
&quot;&lt;html&gt;&lt;h2&gt;Unable to communicate with the server eTour.&lt;/h2&gt;&quot;
+ &quot;&lt;h3&gt;&lt;u&gt;The dialog management request is closed.&lt;/u&gt;&lt;/h3&gt;&quot;
+ &quot;&lt;p&gt;&lt;b&gt;Possible Causes:&lt;/b&gt;&quot;
+ &quot;&lt;ul&gt;&lt;li&gt;No connection to the network.&lt;/li&gt;&quot;
+ &quot;&lt;li&gt;Server inactive.&lt;/li&gt;&quot;
+ &quot;&lt;li&gt;Server clogged.&lt;/li&gt;&lt;/ul&gt;&quot;
+ &quot;&lt;p&gt;Please try again later.&lt;/p&gt;&quot;
+ &quot;&lt;p&gt;If the error persists, please contact technical support.&lt;/p&gt;&quot;
+ &quot;&lt;p&gt;We apologize for the inconvenience.&lt;/html&gt;&quot;);
ImageIcon err = new ImageIcon(getClass().getResource(
Home.URL_IMAGES + &quot;error48.png&quot;));
JOptionPane.showMessageDialog(JDesktopPane, error,
&quot;Error!&quot;, JOptionPane.ERROR_MESSAGE, err);
frame.dispose();
}
}
});
}

/**
* This method initializes the content pane.
*
* @return javax.swing.JPanel - the content pane.
*/
private JPanel getJContentPane() {
if (null == jContentPane) {
jContentPane = new JPanel();
jContentPane.setLayout(new BorderLayout());
jContentPane.add(getRightPanel(), BorderLayout.EAST);
jContentPane.add(getBannerToolbar(), BorderLayout.NORTH);
jContentPane.add(getTreeBanner(), BorderLayout.CENTER);
}
return jContentPane;
}

/**
* This method initializes the toolbar to the functions of management
* Banner.
*
* @return javax.swing.JToolBar - the toolbar.
*/
private JToolBar getBannerToolbar() {
if (null == bannerToolbar) {
bannerToolbar = new JToolBar();
bannerToolbar.setLayout(null);
bannerToolbar.setPreferredSize(new Dimension(1, 50));
bannerToolbar.setFloatable(false);
bannerToolbar.add(getBtnInserisci());
bannerToolbar.add(getBtnSostituisci());
bannerToolbar.add(getBtnElimina());
}
return bannerToolbar;
}

/**
* This method initializes the button to insert a banner.
*
* @return javax.swing.JButton - the button for the insertion.
*/
private JButton getBtnInserisci() {
if (null == btnInserisci) {
btnInserisci = new JButton();
btnInserisci.setBounds(5, 5, 140, 40);
btnInserisci.setText(&quot;&lt;html&gt;&lt;br&gt;Show Banner&lt;/html&gt;&quot;);
btnInserisci.setIcon(new ImageIcon(getClass().getResource(
Home.URL_IMAGES + &quot;NuovoBanner32.png&quot;)));
btnInserisci.setEnabled(false);
btnInserisci.setName(&quot;btnInserisci&quot;);
btnInserisci.addMouseListener(bannerHelp);
btnInserisci.addActionListener(new ActionListener() {
public void actionPerformed(ActionEvent arg0) {
DefaultMutableTreeNode selectedNode = (DefaultMutableTreeNode) treeBanner
.getSelectionPath().getLastPathComponent();
OpenDialog(selectedNode);
}
});
}
return btnInserisci;
}

/**
* This method initializes the button for editing a banner.
*
* @return javax.swing.JButton - the button for the change.
*/
private JButton getBtnSostituisci() {
if (null == btnSostituisci) {
btnSostituisci = new JButton();
btnSostituisci.setBounds(155, 5, 140, 40);
btnSostituisci.setText(&quot;&lt;html&gt;&lt;br&gt;Replace Banner&lt;/html&gt;&quot;);
btnSostituisci.setEnabled(false);
btnSostituisci.setIcon(new ImageIcon(getClass().getResource(
Home.URL_IMAGES + &quot;SostituisciBanner32.png&quot;)));
btnSostituisci.setName(&quot;btnSostituisci&quot;);
btnSostituisci.addMouseListener(bannerHelp);
btnSostituisci.addActionListener(new ActionListener() {
public void actionPerformed(ActionEvent arg0) {
DefaultMutableTreeNode selectedNode = (DefaultMutableTreeNode) treeBanner
.getSelectionPath().getLastPathComponent();
OpenDialog(selectedNode);
}
});
}
return btnSostituisci;
}

/**
* This method initializes the delete button for a banner.
*
* @return javax.swing.JButton - the delete button for.
*/
private JButton getBtnElimina() {
if (null == btnElimina) {
btnElimina = new JButton();
btnElimina.setBounds(305, 5, 140, 40);
btnElimina.setText(&quot;&lt;html&gt;&lt;br&gt;Delete Banner&lt;/html&gt;&quot;);
btnElimina.setEnabled(false);
btnElimina.setIcon(new ImageIcon(getClass().getResource(
Home.URL_IMAGES + &quot;EliminaBanner32.png&quot;)));
btnElimina.setName(&quot;btnElimina&quot;);
btnElimina.addMouseListener(bannerHelp);
btnElimina.addActionListener(new ActionListener() {
public void actionPerformed(ActionEvent arg0) {
JPanel root = new JPanel(new BorderLayout());
JLabel message = new JLabel(
&quot;Are you sure you want to delete the banner selected?&quot;);
message.setFont(new Font(&quot;Dialog&quot;, Font.BOLD, 14));
JLabel avviso = new JLabel(
&quot;The banner can not be more recovered.&quot;,
SwingConstants.CENTER);
avviso.setIcon(new ImageIcon(getClass().getResource(
Home.URL_IMAGES + &quot;warning16.png&quot;)));
root.add(message, BorderLayout.NORTH);
root.add(avviso, BorderLayout.CENTER);
String[] options = {&quot;Delete&quot;, &quot;Cancel&quot;};
int choice = JOptionPane.showInternalOptionDialog(
jContentPane, root, &quot;Confirm Delete&quot;,
JOptionPane.YES_NO_OPTION,
JOptionPane.QUESTION_MESSAGE, new ImageIcon(
getClass().getResource(
Home.URL_IMAGES
+ &quot;EliminaBanner48.png&quot;)),
options, options[1]);
if (choice == JOptionPane.YES_OPTION) {
DefaultTreeModel model = (DefaultTreeModel) treeBanner
.getModel();
model
.removeNodeFromParent((DefaultMutableTreeNode) treeBanner
.getSelectionPath()
.getLastPathComponent());
JLabel confirm = new JLabel(&quot;The banner selected&quot;
+ &quot;Was deleted.&quot;);
confirm.setFont(new Font(&quot;Dialog&quot;, Font.BOLD, 14));
JOptionPane.showInternalMessageDialog(jContentPane,
confirm, &quot;Banner out!&quot;,
JOptionPane.OK_OPTION, new ImageIcon(getClass()
.getResource(
Home.URL_IMAGES + &quot;ok32.png&quot;)));
}
}
});
}
return btnElimina;
}

/**
* This method creates the tree starting from the information contained in the two
* ArrayList of bean.
*
* @param ArrayList PPR &lt;BeanPuntoDiRistoro&gt; - the array of places to eat.
* @param pBanner ArrayList &lt;BeanBanner&gt; - the array of banners associated.
*/
private void createTree() {
// Create the root
DefaultMutableTreeNode root = new DefaultMutableTreeNode(&quot;eTour&quot;);

// For each refreshment dell'arraylist calls the method get
// Banner.
try {
ArrayList&lt;BeanPuntoDiRistoro&gt; pPR = 
gestionePuntiRistoro.ottieniPuntiDiRistoro();
for (int i = 0; i &lt; pPR.size(); i++) {
BeanPuntoDiRistoro corrente = pPR.get(i);
int id = corrente.getId();
PRNode puntoDiRistoro = new PRNode(corrente.getNome(), id);
HashMap&lt;BeanBanner, ImageIcon&gt; banner = gestioneBanner.ottieniBannersDaID(id);
Iterator&lt;BeanBanner&gt; iteraBanner = banner.keySet().iterator();
while (iteraBanner.hasNext()) {
BeanBanner bannercorrente = iteraBanner.next();
BannerNode nuovoBanner = new BannerNode(banner
.get(bannercorrente), bannercorrente.getId());
puntoDiRistoro.add(nuovoBanner);
}

root.add(puntoDiRistoro);
}
} catch (RemoteException ex) {
JLabel error = new JLabel(
&quot;&lt;html&gt;&lt;h2&gt;Unable to communicate with the server eTour.&lt;/h2&gt;&quot;
+ &quot;&lt;h3&gt;&lt;u&gt;The list of banners was not loaded.&lt;/u&gt;&lt;/h3&gt;&quot;
+ &quot;&lt;p&gt;Please try again later.&lt;/p&gt;&quot;
+ &quot;&lt;p&gt;If the error persists, please contact technical support.&lt;/p&gt;&quot;
+ &quot;&lt;p&gt;We apologize for the inconvenience.&lt;/html&gt;&quot;);
ImageIcon err = new ImageIcon(getClass().getResource(
Home.URL_IMAGES + &quot;error48.png&quot;));
JOptionPane.showInternalMessageDialog(this, error,
&quot;Error!&quot;, JOptionPane.ERROR_MESSAGE, err);
} finally {
treeBanner.setModel(new DefaultTreeModel(root));
}
}

/**
* This method initializes the tree where it displays the banner.
*
* @return javax.swing.JTree
*/
private JScrollPane getTreeBanner() {
if (null == treeBanner) {
treeBanner = new JTree(new DefaultTreeModel(new DefaultMutableTreeNode(&quot;eTour&quot;)));
treeBanner.setScrollsOnExpand(true);
treeBanner.setAutoscrolls(true);
treeBanner.setScrollsOnExpand(true);
treeBanner.getSelectionModel().setSelectionMode(
TreeSelectionModel.SINGLE_TREE_SELECTION);
treeBanner.setName(&quot;treeBanner&quot;);
treeBanner.addMouseListener(bannerHelp);
treeBanner.setRootVisible(false);
treeBanner.setCellRenderer(new BannerRenderer());
treeBanner.addTreeSelectionListener(new TreeSelectionListener() {
public void valueChanged(TreeSelectionEvent s) {
DefaultMutableTreeNode node = (DefaultMutableTreeNode) treeBanner
.getLastSelectedPathComponent();

if (node instanceof PRNode) {
btnInserisci.setEnabled(true);
btnElimina.setEnabled(false);
btnSostituisci.setEnabled(false);
} else if (node instanceof BannerNode) {
btnInserisci.setEnabled(false);
btnSostituisci.setEnabled(true);
btnElimina.setEnabled(true);
} else {
btnInserisci.setEnabled(false);
btnSostituisci.setEnabled(false);
btnElimina.setEnabled(false);
}
}
});
}
JScrollPane = new JScrollPane(treeBanner);
JScrollPane
.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);
return JScrollPane;
}

/**
* This method initializes the right side panel.
*
* @return javax.swing.JPanel - the right panel.
*/
private JPanel getRightPanel() {
if (null == rightPanel) {
rightPanel = new JPanel();
rightPanel.setLayout(new GridBagLayout());
GridBagConstraints g = new GridBagConstraints();
g.gridx = 0;
g.gridy = 0;
g.fill = GridBagConstraints.BOTH;
g.weighty = 0.7;
rightPanel.add(getSearchPanel(), g);
g.gridy++;
g.weighty = 0.3;
rightPanel.add(getHelpPanel(), g);
}
return rightPanel;
}

/**
* This method initializes the panel that contains the online help.
*
* @return javax.swing.JPanel - the panel for the guide.
*/
private JPanel getHelpPanel() {
if (null == helpPanel) {
helpPanel = new JPanel();
helpPanel.setLayout(new BorderLayout());
helpPanel.setBorder(BorderFactory.createTitledBorder(BorderFactory
.createLineBorder(new Color(51, 102, 255), 3),
&quot;Help&quot;, TitledBorder.DEFAULT_JUSTIFICATION,
TitledBorder.DEFAULT_POSITION, new Font(&quot;Dialog&quot;,
Font.BOLD, 12), new Color(0, 102, 204)));
helpPanel.setPreferredSize(new Dimension(200, 60));
textGuida.setPreferredSize(new Dimension(6, 30));
textGuida.setOpaque(false);
textGuida.setContentType(&quot;text/html&quot;);
textGuida.setText(&quot;&lt;html&gt;Move your mouse pointer over a control&quot; +
&quot;of interest to display the context-sensitive help.&lt;/html&gt;&quot;);
textGuida.setEditable(false);
textGuida.setName(&quot;textGuida&quot;);
textGuida.addMouseListener(bannerHelp);
helpPanel.add(textGuida, BorderLayout.CENTER);
}
return helpPanel;
}

/**
* This method initializes the panel for the detection of points
* Refreshments.
*
* @return javax.swing.JPanel - the panel for research.
*/
private JPanel getSearchPanel() {
if (null == panelSearch) {
panelSearch = new JPanel();
panelSearch.setLayout(new GridBagLayout());
panelSearch.setBorder(BorderFactory.createTitledBorder(
BorderFactory.createLineBorder(new Color(51, 102, 255), 3),
&quot;Research Refreshment&quot;,
TitledBorder.DEFAULT_JUSTIFICATION,
TitledBorder.DEFAULT_POSITION, new Font(&quot;Dialog&quot;,
Font.BOLD, 12), new Color(0, 102, 204)));
GridBagConstraints g = new GridBagConstraints();
g.anchor = GridBagConstraints.CENTER;
g.gridx = 0;
g.gridy = 0;
g.gridwidth = 2;
g.insets = new Insets(5, 5, 5, 5);
panelSearch.add(new JLabel(&quot;Name Refreshments:&quot;), g);
nomePR = new JTextField();
nomePR.setName(&quot;nomePR&quot;);
nomePR.addMouseListener(bannerHelp);
nomePR.setColumns(12);
g.insets = new Insets(5, 5, 10, 5);
g.gridy++;
panelSearch.add(nomePR, g);
g.insets = new Insets(5, 5, 5, 5);
g.gridy++;
panelSearch.add(new JLabel(&quot;Select search tags:&quot;), g);
g.weighty = 1.0;
g.insets = new Insets(5, 5, 10, 5);
g.gridy++;
panelTag = new TagPanel();
panelTag.setName(&quot;pannelloTag&quot;);
panelTag.addMouseListener(bannerHelp);
panelTag.setPreferredSize(new Dimension(180, 10));
g.fill = GridBagConstraints.VERTICAL;
panelSearch.add(panelTag, g);
g.fill = GridBagConstraints.NONE;
g.insets = new Insets(5, 5, 5, 5);
g.weighty = 0;
g.gridy++;
g.gridwidth = 1;
panelSearch.add(getBtnRicerca(), g);
g.gridx++;
panelSearch.add(getBtnAzzera(), g);
}
return panelSearch;
}

/**
* This method initializes the button for the submission of the form
* Search for a refreshment.
*
* @return javax.swing.JButton - the search button.
*/
private JButton getBtnRicerca() {
if (null == btnRicerca) {
btnRicerca = new JButton();
btnRicerca.setPreferredSize(new Dimension(98, 26));
btnRicerca.setText(&quot;Search&quot;);
btnRicerca.setIcon(new ImageIcon(getClass().getResource(
Home.URL_IMAGES + &quot;Ricerca16.png&quot;)));
btnRicerca.setName(&quot;btnRicerca&quot;);
btnRicerca.addMouseListener(bannerHelp);
}
return btnRicerca;
}

/**
* This method initializes the button to reset the fields of
* Search Form for a refreshment.
*
* @return javax.swing.JButton - the Reset button.
*/
private JButton getBtnAzzera() {
if (null == btnAzzera) {
btnAzzera = new JButton();
btnAzzera.setPreferredSize(new Dimension(98, 26));
btnAzzera.setIcon(new ImageIcon(getClass().getResource(
Home.URL_IMAGES + &quot;Azzera16.png&quot;)));
btnAzzera.setText(&quot;Clear&quot;);
btnAzzera.setHorizontalTextPosition(SwingConstants.LEADING);
btnAzzera.setName(&quot;btnAzzera&quot;);
btnAzzera.addMouseListener(bannerHelp);
btnAzzera.addActionListener(new ActionListener() {
public void actionPerformed(ActionEvent arg0) {
panelTag.azzera();
nomePR.setText(&quot;&quot;);
}
});
}
return btnAzzera;
}

/**
* This method opens the dialog box for entering a new
* Banner or editing a banner selected.
*
* @param pSelectedNode DefaultMutableTreeNode - the selected node.
*/
private void OpenDialog(DefaultMutableTreeNode pSelectedNode) {
// This class intercepts mouse events and then
// Makes the frame below blocked.
class ModalAdapter extends InternalFrameAdapter {
Component glass;

public ModalAdapter(Component pGlassComponent) {
this.glass = pGlassComponent;

MouseInputAdapter adapter = new MouseInputAdapter() {
};
pGlassComponent.addMouseListener(adapter);
pGlassComponent.addMouseMotionListener(adapter);
}

public void internalFrameClosed(InternalFrameEvent s) {
glass.setVisible(false);
}
}

// Construction of the dialog
JOptionPane optionPane = new JOptionPane();
final JInternalFrame modal = optionPane.createInternalFrame(
JDesktopPane, &quot;&quot;);
final JPanel glass = new JPanel();
final BannerDialog dialog = new BannerDialog();
optionPane.setMessage(dialog);
optionPane.setMessageType(JOptionPane.INFORMATION_MESSAGE);
JButton[] options = new JButton[2];
options[0] = new JButton();
options[1] = new JButton(&quot;Cancel&quot;);
options[0].setIcon(new ImageIcon(getClass().getResource(
Home.URL_IMAGES + &quot;Salva16.png&quot;)));
options[1].setIcon(new ImageIcon(getClass().getResource(
Home.URL_IMAGES + &quot;Annulla16.png&quot;)));
optionPane.setOptions(options);
options[1].addActionListener(new ActionListener() {
public void actionPerformed(ActionEvent arg0) {
modal.setVisible(false);
glass.setVisible(false);
}
});

glass.setOpaque(false);
modal.addInternalFrameListener(new ModalAdapter(glass));
glass.add(modal);
setGlassPane(glass);
modal.setLocation(this.getWidth() / 2, this.getHeight() / 2);
glass.setVisible(true);
modal.setVisible(true);
if (pSelectedNode instanceof BannerNode) // Replace
{
final BannerNode banner = (BannerNode) pSelectedNode;
options[0].setText(&quot;Replace&quot;);
options[0].addActionListener(new ActionListener() {
public void actionPerformed(ActionEvent arg0) {
DefaultTreeModel model = (DefaultTreeModel) treeBanner
.getModel();
banner.setBanner(dialog.getSelectedBanner());
model.nodeChanged(banner);
glass.setVisible(false);
modal.setVisible(false);
}
});

optionPane.setIcon(new ImageIcon(getClass().getResource(
Home.URL_IMAGES + &quot;SostituisciBanner48.png&quot;)));
modal.setTitle(&quot;Replace the banner to the point of relief&quot;
+ ((PRNode) pSelectedNode.getParent()).getUserObject()
.toString());
} else if (pSelectedNode instanceof PRNode) // Inserting
{
final PRNode pr = (PRNode) pSelectedNode;
options[0].setText(&quot;Save&quot;);
options[0].addActionListener(new ActionListener() {
public void actionPerformed(ActionEvent arg0) {
DefaultTreeModel model = (DefaultTreeModel) treeBanner
.getModel();
BannerNode nuovo = new BannerNode(dialog
.getSelectedBanner(), pr.getID());
model.insertNodeInto(nuovo, pr, 0);
glass.setVisible(false);
modal.setVisible(false);
}
});
optionPane.setIcon(new ImageIcon(getClass().getResource(
Home.URL_IMAGES + &quot;nuovoBanner48.png&quot;)));
modal.setTitle(&quot;Enter banner to the point of relief&quot;
+ pSelectedNode.getUserObject().toString());
}
}

private void caricaTags() {
ArrayList&lt;BeanTag&gt; beanTags = null;
try {
beanTags = tag.ottieniTags();
}
// If an error displays an error message.
catch (RemoteException e) {
} finally {
for (BeanTag b : beanTags) {
panelTag.insertTag(b);
}
panelTag.repaint();
}
}
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_BannerDialog</id>
      <content>package unisa.gps.etour.gui.operatoreagenzia;

import java.awt.*;
import java.awt.event.*;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;

import javax.imageio.ImageIO;
import javax.swing.*;
import javax.swing.filechooser.FileFilter;
import javax.swing.border.*;

import unisa.gps.etour.gui.operatoreagenzia.Home;

/**
* This class realizes the panel for the dialog for entering a
* New banner or a banner for replacing selected.
*
* @Version 1.0
* @Author Mario Gallo
*
* (c) 2007 eTour Project - Copyright by DMI SE @ SA Lab --
* University of Salerno
*/
public class BannerDialog extends JPanel {
private final static Dimension bannerSize = new Dimension(140, 40);
private JLabel anteprima = null;
private JButton btnCarica = null;
private JPanel that;

/**
* This is the default constructor.
*/
public BannerDialog() {
super(null);
this.that = this;
setPreferredSize(new Dimension(420, 160));
anteprima = new JLabel();
anteprima.setBounds(new Rectangle(40, 20, 250, 60));
anteprima.setBorder(BorderFactory.createTitledBorder(BorderFactory
.createLineBorder(new Color(51, 102, 255), 3),
&quot;Preview Banner&quot;, TitledBorder.DEFAULT_JUSTIFICATION,
TitledBorder.DEFAULT_POSITION,
new Font(&quot;Dialog&quot;, Font.BOLD, 12), new Color(0, 102, 204)));
btnCarica = new JButton();
btnCarica.setBounds(new Rectangle(320, 30, 50, 40));
btnCarica.setIcon(new ImageIcon(getClass().getResource(
Home.URL_IMAGES + &quot;ApriFile.png&quot;)));
btnCarica.addActionListener(new ActionListener() {
public void actionPerformed(ActionEvent arg0) {
File f = apriFileDialog();

if (f == null) {
return;
}

BufferedImage img = null;
try {
img = ImageIO.read(f);
if (img.getWidth() &gt; bannerSize.width
|| img.getHeight() &gt; bannerSize.height) {
img = img.getSubimage(0, 0, bannerSize.width,
bannerSize.height);
}
} catch (Exception e) {
e.printStackTrace();
}
ImageIcon n = new ImageIcon(img);
anteprima.setIcon(n);
anteprima.repaint();
}
});

JLabel txtAttenzione = new JLabel(&quot;Warning!&quot;);
txtAttenzione.setIcon(new ImageIcon(getClass().getResource(
Home.URL_IMAGES + &quot;warning16.png&quot;)));
txtAttenzione.setBounds(10, 85, 100, 30);
JLabel txtTesto = new JLabel(
&quot;&lt;html&gt; &lt;ul&gt; &lt;li&gt; image for the banner can not exceed &lt;b&gt; &lt;font color=\&quot;red\&quot;&gt;&quot;
+ bannerSize.width
+ &quot;X&quot;
+ bannerSize.height
+ &quot;&lt;/font&gt;&lt;/b&gt; pixels.&quot;
+ &quot;&lt;li&gt; Images of magnitude larger will be resized.&lt;/ul&gt;&lt;/html&gt;&quot;);
txtTesto.setBounds(0, 90, 420, 80);
add(txtTesto, null);
add(txtAttenzione, null);
add(anteprima, null);
add(btnCarica, null);
}

/**
* This method initializes the image contained in the preview.
*
* @param pBanner ImageIcon - an image of a banner.
*/
public void setSelectedBanner(ImageIcon pBanner) {
anteprima.setIcon(pBanner);
}

/**
* This method returns the image contained in the preview.
*
* @return ImageIcon - the image of the banner.
*/
public ImageIcon getSelectedBanner() {
return (ImageIcon) anteprima.getIcon();
}

/**
* This method opens the dialog for selecting a file from disk.
*
* @return
* &lt;ul&gt;
* &lt;li&gt; Files - the selected file.
* &lt;li&gt; Null - if you have not selected any files.
* &lt;/ul&gt;
*/
private File apriFileDialog() {
JFileChooser apriFile = new JFileChooser();
apriFile.setDialogTitle(&quot;Select a new image&quot;);
apriFile.setAcceptAllFileFilterUsed(false);
apriFile.setMultiSelectionEnabled(false);

// File Filter for the window to open the file.
apriFile.setFileFilter(new FileFilter() {
public boolean accept(File arg0) {
if (arg0.isDirectory())
return true;
String nome = arg0.getName().toLowerCase();
if (nome.endsWith(&quot;jpg&quot;) || nome.endsWith(&quot;gif&quot;)
|| nome.endsWith(&quot;png&quot;))
return true;
else
return false;
}

public String getDescription() {
return &quot;Images (*.PNG, *.GIF, *.JPG)&quot;;
}
});
int returnVal = apriFile.showOpenDialog(this);
if (returnVal == JFileChooser.APPROVE_OPTION) {
return apriFile.getSelectedFile();
} else
return null;
}
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_BannerNode</id>
      <content>package unisa.gps.etour.gui.operatoreagenzia.tables;

import javax.swing.ImageIcon;
import javax.swing.tree.DefaultMutableTreeNode;

/**
* This class creates a node in a JTree to store
* Information about a banner.
*
* @Version 1.0
* @Author Mario Gallo
*
* (c) 2007 eTour Project - Copyright by DMI SE @ SA Lab --
* University of Salerno
*/
public class BannerNode extends DefaultMutableTreeNode {
private int id;

/**
* This is the default constructor.
*
*/
public BannerNode() {
super();
}

/**
* Create a node with the image of the banner and
* Your id supplied as parameters.
*
* @param pBanner Imagelcon - the image of the banner.
* @param pid int - the id of the banner.
* @throws IllegalArgumentException - if the image provided as input is invalid.
*
*/
public BannerNode(ImageIcon pBanner, int pid) throws IllegalArgumentException {
super();
if (null == pBanner) {
throw new IllegalArgumentException(&quot;Image is invalid.&quot;);
}
setUserObject(pBanner);
id = pid;
}

/**
*
* Returns the node type PRNode father.
*
* @return PRNode - the parent node.
*
*/
public PRNode getParent() {
return (PRNode) super.getParent();
}

/**
*
* Returns the id of the banner for which information
* Are stored in this node.
*
* @return int - the id of the banner.
*
*/
public int getID() {
return id;
}

/**
*
* Stores the id of the banner supplied input.
*
* @param pid int - an ID of a banner.
*
*/
public void setID(int pid) {
id = pid;
}

/**
*
* Returns the banner image.
*
* @return ImageIcon - the image.
*/
public ImageIcon getBanner() {
return (ImageIcon) getUserObject();
}

/**
*
* Save the image provided as input.
*
* @param pImmagine Imagelcon - the image to be stored.
* @throws IllegalArgumentException - if the supplied parameter is null.
*/
public void setBanner(ImageIcon pImmagine) throws IllegalArgumentException {
if (null == pImmagine) {
throw new IllegalArgumentException(&quot;Image is invalid.&quot;);
}
setUserObject(pImmagine);
}
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_BannerRenderer</id>
      <content>package unisa.gps.etour.gui.operatoreagenzia.tables;

import java.awt.Color;
import java.awt.Component;
import javax.swing.BorderFactory;
import javax.swing.ImageIcon;
import javax.swing.JLabel;
import javax.swing.JTree;
import javax.swing.tree.DefaultMutableTreeNode;
import javax.swing.tree.DefaultTreeCellRenderer;

public class BannerRenderer extends DefaultTreeCellRenderer {

public Component getTreeCellRendererComponent(JTree pTree, Object pValue,
boolean pSelected, boolean pExpanded, boolean pLeaf, int prow,
boolean pHasFocus) {
Object obj = ((DefaultMutableTreeNode) pValue).getUserObject();
if (!(obj instanceof ImageIcon)) {
throw new IllegalArgumentException(&quot;Value cell unexpected.&quot;);
}
ImageIcon image = (ImageIcon) obj;
JLabel aLabel = new JLabel();
aLabel.setIcon(image);
aLabel.setSize(image.getIconWidth() + 10, image.getIconHeight() + 10);
if (pSelected) {
aLabel.setBorder(BorderFactory.createLineBorder(Color.red, 2));
}
return aLabel;
}
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_BeanBanner</id>
      <content>package unisa.gps.etour.bean;

/**
* Bean which contains data on the Banner
*
* @author Mauro Miranda
* @version 0.1 2007 eTour Project - Copyright by SE @SA Lab DMI University
* Of Salerno
*/

import java.io.Serializable;

public class BeanBanner implements Serializable
{
private static final long serialVersionUID = -872783211721655763L;
private int id;
private int idPuntoDiRistoro;
private String filepath;

/**
* Parameterized constructor
*
* @param pId
* @param pPercorsoFile
* @param pidPuntoDiRistoro
*/
public BeanBanner(int pId, String pPercorsoFile, int pidPuntoDiRistoro)
{
setId(pId);
setPercorsoFile(pPercorsoFile);
setIdPuntoDiRistoro(pidPuntoDiRistoro);
}

/**
* Empty Constructor
*
*/
public BeanBanner()
{

}

/**
* Returns the value of FilePath
*
* @return value of FilePath.
*/
public String getPercorsoFile()
{
return filepath;
}

/**
* Sets the new value of filepath
*
* @param pPercorsoFile New value filepath.
*/
public void setPercorsoFile(String pPercorsoFile)
{
filepath = pPercorsoFile;
}

/**
* Returns the value of id
*
* @return value id.
*/
public int getId()
{
return id;
}

/**
* Returns the value of idPuntoDiRistoro
*
* @return value idPuntoDiRistoro.
*/
public int getIdPuntoDiRistoro()
{
return idPuntoDiRistoro;
}

/**
* Sets the new value of id
*
* @param pId New value for id.
*/
public void setId(int pId)
{
id = pId;
}

/**
* Sets the new value of idPuntoDiRistoro
*
* @param pIdPuntoDiRistoro New value idPuntoDiRistoro.
*/
public void setIdPuntoDiRistoro(int pIdPuntoDiRistoro)
{
idPuntoDiRistoro = pIdPuntoDiRistoro;
}
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_BeanBeneCulturale</id>
      <content>package unisa.gps.etour.bean;

/**
* Bean containing information relating to a cultural heritage
*
* @Author Mauro Miranda
* @Version 0.1 2007 eTour Project - Copyright by SE @ SA Lab DMI University
* Of Salerno
*/

import java.io.Serializable;
import java.util.Date;

import unisa.gps.etour.util.Punto3D;

public class BeanBeneCulturale implements Serializable
{

private static final long serialVersionUID = -460705346474984466L;

private int id;
private int numeroVoti;
private String name;
private String city;
private String phone;
private String description;
private String location;
private String street;
private String cap;
private String province;
private String giornoChiusura;
private Punto3D position;
private Date orarioApertura;
private Date orarioChiusura;
private double costoBiglietto;
private double mediaVoti;

/**
* Parameterized constructor
*
* @param pId
* @param pNumeroVoti
* @param Pnom
* @param pCitta
* @param pTelefono
* @param pDescrizione
* @param pLocalita
* @param pVia
* @param pcap
* @param pProvincia
* @param pPosizione
* @param pOrarioApertura
* @param pOrarioChiusura
* @param pGiornoChiusura
* @param pCostoBiglietto
* @param pMediaVoti
*/
public BeanBeneCulturale(int pid, int pNumeroVoti, String Pnom,
String pCitta, String pTelefono, String pDescrizione,
String pLocalita, String pVia, String pcap, String pProvincia,
Punto3D pPosizione, Date pOrarioApertura, Date pOrarioChiusura,
String pGiornoChiusura, double pCostoBiglietto, double pMediaVoti)
{
setId(pid);
setNumeroVoti(pNumeroVoti);
setNome(Pnom);
setCitta(pCitta);
setTelefono(pTelefono);
setDescrizione(pDescrizione);
setLocale(pLocalita);
setvar(pVia);
setCap(pcap);
setProvincia(pProvincia);
setPosizione(pPosizione);
setOrarioApertura(pOrarioApertura);
setOrarioChiusura(pOrarioChiusura);
setGiornoChiusura(pGiornoChiusura);
setCostoBiglietto(pCostoBiglietto);
setMediaVoti(pMediaVoti);
}

/**
* Empty Constructor
*/
public BeanBeneCulturale()
{

}

/**
* Returns the value of giornoChiusura
*
* @return value giornoChiusura.
*/
public String getGiornoChiusura()
{
return giornoChiusura;
}

/**
* Sets the new value of giornoChiusura
*
* @param pGiornoChiusura New value giornoChiusura.
*/
public void setGiornoChiusura(String pGiornoChiusura)
{
giornoChiusura = pGiornoChiusura;
}

/**
* Returns the value of cap
*
* @return value cap.
*/
public String getCap()
{
return cap;
}

/**
* Sets the new value of cap
*
* @param pcap New value cap.
*/
public void setCap(String pcap)
{
cap = pcap;
}

/**
* Returns the value of city
*
* @return Value of city.
*/
public String getCitta()
{
return city;
}

/**
* Sets the new value of city
*
* @param pCitta New value city.
*/
public void setCitta(String pCitta)
{
city = pCitta;
}

/**
* Returns the value of costoBiglietto
*
* @return value costoBiglietto.
*/
public double getCostoBiglietto()
{
return costoBiglietto;
}

/**
* Sets the new value of costoBiglietto
*
* @param pCostoBiglietto New value costoBiglietto.
*/
public void setCostoBiglietto(double pCostoBiglietto)
{
costoBiglietto = pCostoBiglietto;
}

/**
* Returns the value of description
*
* @return value of description.
*/
public String getDescrizione()
{
return description;
}

/**
* Sets the new value of description
*
* @param pDescrizione New value of description.
*/
public void setDescrizione(String pDescrizione)
{
description = pDescrizione;
}

/**
* Returns the value of location
*
* @return locale values.
*/
public String getLocal()
{
return location;
}

/**
* Sets the new value of location
*
* @param pLocalita New locale values.
*/
public void setLocale(String pLocalita)
{
location = pLocalita;
}

/**
* Returns the value of mediaVoti
*
* @return value mediaVoti.
*/
public double getMediaVoti()
{
return mediaVoti;
}

/**
* Sets the new value of mediaVoti
*
* @param pMediaVoti New value mediaVoti.
*/
public void setMediaVoti(double pMediaVoti)
{
mediaVoti = pMediaVoti;
}

/**
* Returns the value of name
*
* @return value of name.
*/
public String getName()
{
return name;
}

/**
* Sets the new name value
*
* @param Pnom New value name.
*/
public void setNome(String Pnom)
{
name = Pnom;
}

/**
* Returns the value of numeroVoti
*
* @return value numeroVoti.
*/
public int getNumeroVoti()
{
return numeroVoti;
}

/**
* Sets the new value of numeroVoti
*
* @param pNumeroVoti New value numeroVoti.
*/
public void setNumeroVoti(int pNumeroVoti)
{
numeroVoti = pNumeroVoti;
}

/**
* Returns the value of orarioApertura
*
* @return value orarioApertura.
*/
public Date getOrarioApertura()
{
return orarioApertura;
}

/**
* Sets the new value of orarioApertura
*
* @param pString New value orarioApertura.
*/
public void setOrarioApertura(Date pString)
{
orarioApertura = pString;
}

/**
* Returns the value of orarioChiusura
*
* @return value orarioChiusura.
*/
public Date getOrarioChiusura()
{
return orarioChiusura;
}

/**
* Sets the new value of orarioChiusura
*
* @param pOrarioChiusura New value orarioChiusura.
*/
public void setOrarioChiusura(Date pOrarioChiusura)
{
orarioChiusura = pOrarioChiusura;
}

/**
* Returns the value of position
*
* @return value of position.
*/
public Punto3D getPosizione()
{
return position;
}

/**
* Sets the new position value
*
* @param pPosizione New position value.
*/
public void setPosizione(Punto3D pPosizione)
{
position = pPosizione;
}

/**
* Returns the value of the province
*
* @return value of the province.
*/
public String getProvincia()
{
return province;
}

/**
* Sets the new value of the province
*
* @param pProvincia New value for the province.
*/
public void setProvincia(String pProvincia)
{
province = pProvincia;
}

/**
* Returns the value of telephone
*
* @return Value of the phone.
*/
public String getTelefono()
{
return phone;
}

/**
* Sets the new value of telephone
*
* @param pTelefono New value phone.
*/
public void setTelefono(String pTelefono)
{
phone = pTelefono;
}

/**
* Returns the value of street
*
* @return value on.
*/
public String getVar()
{
return street;
}

/**
* Sets the new value via
*
* @param pVia New value on.
*/
public void setvar(String pVia)
{
street = pVia;
}

/**
* Returns the value of id
*
* @return value id.
*/
public int getId()
{
return id;
}

/**
* Sets the new value of id
*
* @param pid New value for id.
*/
public void setId(int pid)
{
id = pid;
}
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_BeanConvenzione</id>
      <content>package unisa.gps.etour.bean;
import java.io.Serializable;
import java.util.Date;
/**
* Bean containing information relating to a Convention
*
* @Author Joseph Martone
* @Version 0.1 2007 eTour Project - Copyright by SE @SA Lab DMI University
* Of Salerno
*/
public class BeanConvenzione implements Serializable
{
private static final long serialVersionUID = -3255500940680220001L;
private int id;
private int maxBanner;
private Date StartDate;
private Date EndDate;
private double price;
private boolean active;
private int idPuntoDiRistoro;

/**
* Parameterized constructor
*
* @Param pId
* @Param pMaxBanner
* @Param pDataInizio
* @Param pDataFine
* @Param pPrezzo
* @Param pacts
* @Param pidPuntoDiRistoro
*/
public BeanConvenzione(int pid, int pMaxBanner, Date pDataInizio,
Date pDataFine, double pPrezzo, boolean patti,
int pidPuntoDiRistoro)
{
setId(pid);
setMaxBanner(pMaxBanner);
setDataInizio(pDataInizio);
setDataFine(pDataFine);
setPrezzo(pPrezzo);
setAttiva(patti);
setIdPuntoDiRistoro(pidPuntoDiRistoro);
}

/**
* Empty Constructor
*
*/
public BeanConvenzione()
{

}

/**
* Returns the value of active
*
* @Return value of assets.
*/
public boolean isAttiva()
{
return active;
}

/**
* Sets the new value of active
*
* @Param new value terms of assets.
*/
public void setAttiva(boolean patti)
{
active = patti;
}

/**
* Returns the value of EndDate
*
* @Return Value EndDate.
*/
public Date getDataFine()
{
return EndDate;
}

/**
* Sets the new value for EndDate
*
* @Param pDataFine New value for EndDate.
*/
public void setDataFine(Date pDataFine)
{
EndDate = pDataFine;
}

/**
* Returns the value of StartDate
*
* @Return value StartDate.
*/
public Date getDataInizio()
{
return StartDate;
}

/**
* Sets the new value of StartDate
*
* @Param new value pDataInizio StartDate.
*/
public void setDataInizio(Date pDataInizio)
{
StartDate = pDataInizio;
}

/**
* Returns the value of maxBanner
*
* @Return value maxBanner.
*/
public int getMaxBanner()
{
return maxBanner;
}

/**
* Sets the new value of maxBanner
*
* @Param value pMaxBanner New maxBanner.
*/
public void setMaxBanner(int pMaxBanner)
{
maxBanner = pMaxBanner;
}

/**
* Returns the value of money
*
* @Return value price.
*/
public double getPrezzo()
{
return price;
}

/**
* Sets the new value of money
*
* @Param pPrezzo New value for money.
*/
public void setPrezzo(double pPrezzo)
{
price = pPrezzo;
}

/**
* Returns the value of id
*
* @Return value id.
*/
public int getId()
{
return id;
}

/**
* Returns the value of idPuntoDiRistoro
*
* @Return value idPuntoDiRistoro.
*/
public int getIdPuntoDiRistoro()
{
return idPuntoDiRistoro;
}

/**
* Sets the new value of id
*
* @Param pId New value for id.
*/
public void setId(int pid)
{
id = pid;
}

/**
* Sets the new value of idPuntoDiRistoro
*
* @Param value pIdPuntoDiRistoro New idPuntoDiRistoro.
*/
public void setIdPuntoDiRistoro(int pIdPuntoDiRistoro)
{
idPuntoDiRistoro = pIdPuntoDiRistoro;
}
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_BeanMenu</id>
      <content>package unisa.gps.etour.bean;
import java.io.Serializable;
/**
* Bean containing information relating to a Menu
*
* @Author Joseph Martone
* @Version 0.1 2007 eTour Project - Copyright by SE @SA Lab DMI University
* Of Salerno
*/
public class BeanMenu implements Serializable
{
private static final long serialVersionUID = -3112032222839565409L;
private int id;
private String day;
private int idPuntoDiRistoro;

/**
* Parameterized constructor
*
* @param pId
* @param pGiorno
* @param pIdPuntoDiRistoro
*/
public BeanMenu(int pId, String pGiorno, int pIdPuntoDiRistoro)
{
setId(pId);
setGiorno(pGiorno);
setIdPuntoDiRistoro(pIdPuntoDiRistoro);
}

/**
* Empty Constructor
*/
public BeanMenu()
{

}

/**
* Returns the value of days
*
* @return Value of the day.
*/
public String getGiorno()
{
return day;
}

/**
* Sets the new value of days
*
* @param pGiorno New value day.
*/
public void setGiorno(String pGiorno)
{
day = pGiorno;
}

/**
* Returns the value of id
*
* @return value id.
*/
public int getId()
{
return id;
}

/**
* Returns the value of idPuntoDiRistoro
*
* @return value idPuntoDiRistoro.
*/
public int getIdPuntoDiRistoro()
{
return idPuntoDiRistoro;
}

/**
* Sets the new value of id
*
* @param pId New value for id.
*/
public void setId(int pId)
{
id = pId;
}

/**
* Sets the new value of idPuntoDiRistoro
*
* @param pIdPuntoDiRistoro New value idPuntoDiRistoro.
*/
public void setIdPuntoDiRistoro(int pIdPuntoDiRistoro)
{
idPuntoDiRistoro = pIdPuntoDiRistoro;
}
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_BeanNews</id>
      <content>package unisa.gps.etour.bean;

/**
* Bean containing information relating to the News
*
* @Author Mauro Miranda
* @Version 0.1 2007 eTour Project - Copyright by SE @ SA Lab DMI University
* Of Salerno
*/

import java.io.Serializable;
import java.util.Date;

public class BeanNews implements Serializable
{
private String news;
private Date dataPubblicazione;
private Date dataScadenza;
private int priority;
private int id;
private static final long serialVersionUID = -6249491056436689386L;

/**
* Parameterized constructor
*
* @Param Pnews
* @Param pDataPubblicazione
* @Param pDataScadenza
* @Param pPriorita
* @Param pId
*/
public BeanNews(String Pnews, Date pDataPubblicazione, Date pDataScadenza,
int pPriorita, int pid)
{
setNews(Pnews);
setDataPubblicazione(pDataPubblicazione);
setDataScadenza(pDataScadenza);
setPriorita(pPriorita);
setId(pid);
}

/**
* Empty Constructor
*
*/
public BeanNews()
{

}

/**
* Returns the value of dataPubblicazione
*
* @Return value dataPubblicazione.
*/
public Date getDataPubblicazione()
{
return dataPubblicazione;
}

/**
* Sets the new value of dataPubblicazione
*
* @Param value pDataPubblicazione New dataPubblicazione.
*/
public void setDataPubblicazione(Date pDataPubblicazione)
{
dataPubblicazione = pDataPubblicazione;
}

/**
* Returns the value of dataScadenza
*
* @Return value dataScadenza.
*/
public Date getDataScadenza()
{
return dataScadenza;
}

/**
* Sets the new value of dataScadenza
*
* @Param value pDataScadenza New dataScadenza.
*/
public void setDataScadenza(Date pDataScadenza)
{
dataScadenza = pDataScadenza;
}

/**
* Returns the value of news
*
* @Return value of news.
*/
public String getNews()
{
return news;
}

/**
* Sets the new value of news
*
* @Param value New Pnews news.
*/
public void setNews(String Pnews)
{
news = Pnews;
}

/**
* Returns the priority value
*
* @Return the priority value.
*/
public int getPriorita()
{
return priority;
}

/**
* Set the new priority value
*
* @Param pPriorita New priority value.
*/
public void setPriorita(int pPriorita)
{
priority = pPriorita;
}

/**
* Returns the value of id
*
* @Return value id.
*/
public int getId()
{
return id;
}

/**
* Sets the new value of id
*
* @Param pId New value for id.
*/
public void setId(int pid)
{
id = pid;
}
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_BeanOperatoreAgenzia</id>
      <content>package unisa.gps.etour.bean;
import java.io.Serializable;
/**
* Bean containing information relating to an Agency Operator
*
* @Author Joseph Martone
* @Version 0.1 2007 eTour Project - Copyright by SE @SA Lab DMI University
* Of Salerno
*/
public class BeanOperatoreAgenzia implements Serializable
{

/**
*
*/
private static final long serialVersionUID = -3489147679484477440L;
private int id;
private String username;
private String name;
private String name;
private String password;

/**
* Parameterized constructor
*
* @Param pid
* @Param pUsername
* @Param Pnom
* @Param pCognome
* @Param pPassword
*/
public BeanOperatoreAgenzia(int pid, String pUsername, String Pnom,
String PCognome, String pPassword)
{
setId(pid);
setUsername(pUsername);
setNome(Phnom);
setCognome(pCognome);
setPassword(pPassword);
}

/**
* Empty Constructor
*/
public BeanOperatoreAgenzia()
{

}

/**
* Returns the value of name
*
* @Return value of name.
*/
public String getCognome()
{
return name;
}

/**
* Sets the new value of name
*
* @Param value New pCognome surname.
*/
public void setCognome(String pCognome)
{
last = pCognome;
}

/**
* Returns the value of name
*
* @Return value of name.
*/
public String getName()
{
return name;
}

/**
* Sets the new name value
*
* @Param name New value Pnom.
*/
public void setNome(String Pnom)
{
name = Pnom;
}

/**
* Returns the value of password
*
* @Return value of password.
*/
public String getPassword()
{
return password;
}

/**
* Sets the new password value
*
* @Param pPassword new password value.
*/
public void setPassword(String pPassword)
{
password = pPassword;
}

/**
* Returns the value of username
*
* @Return value of username.
*/
public String GetUserName()
{
return username;
}

/**
* Sets the new value of username
*
* @Param pUsername New value for username.
*/
public void setUsername(String pUsername)
{
username = pUsername;
}

/**
* Sets the new value of id
*
* @Param new value of id pid.
*/
public void setId(int pid)
{
id = pid;
}

/**
* Returns the value of id
*
* @Return value id.
*/
public int getId()
{
return id;
}

}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_BeanOperatorePuntoDiRistoro</id>
      <content>package unisa.gps.etour.bean;
import java.io.Serializable;
/**
* Bean containing information relating to food
*
* @Author Joseph Martone
* @Version 0.1 2007 eTour Project - Copyright by SE @SA Lab DMI University
* Of Salerno
*/
public class BeanOperatorePuntoDiRistoro implements Serializable
{
private int id;
private String name;
private String name;
private String username;
private String password;
private String email;
private int idPuntoDiRistoro;
private static final long serialVersionUID = -6485826396352557404L;

/**
* Parameterized constructor
*
* @Param pId
* @Param Pnom
* @Param pCognome
* @Param pUsername
* @Param pPassword
* @Param pEmail
* @Param pIdPuntoDiRistoro
*/
public BeanOperatorePuntoDiRistoro(int pid, String Phnom, String pCognome,
String pUsername, String pPassword, String pEmail,
int pIdPuntoDiRistoro)
{
setId(pid);
setNome(Phnom);
setCognome(pCognome);
setUsername(pUsername);
setPassword(pPassword);
setEmail(pEmail);
setIdPuntoDiRistoro(pIdPuntoDiRistoro);
}

/**
* Empty Constructor
*/
public BeanOperatorePuntoDiRistoro()
{

}

/**
* Returns the value of name
*
* @Return value of name.
*/
public String getCognome()
{
return name;
}

/**
* Sets the new value of name
*
* @Param value New pCognome surname.
*/
public void setCognome(String pCognome)
{
last = pCognome;
}

/**
* Returns the value of email
*
* @Return value of email.
*/
public String getEmail()
{
return email;
}

/**
* Sets the new value of email
*
* @Param pEmail New value of email.
*/
public void setEmail(String pEmail)
{
email = pEmail;
}

/**
* Returns the value of name
*
* @Return value of name.
*/
public String getName()
{
return name;
}

/**
* Sets the new name value
*
* @Param name New value Pnom.
*/
public void setNome(String Pnom)
{
name = Pnom;
}

/**
* Returns the value of password
*
* @Return value of password.
*/
public String getPassword()
{
return password;
}

/**
* Sets the new password value
*
* @Param pPassword new password value.
*/
public void setPassword(String pPassword)
{
password = pPassword;
}

/**
* Returns the value of username
*
* @Return value of username.
*/
public String GetUserName()
{
return username;
}

/**
* Sets the new value of username
*
* @Param pUsername New value for username.
*/
public void setUsername(String pUsername)
{
username = pUsername;
}

/**
* Returns the value of idPuntoDiRistoro
*
* @Return value idPuntoDiRistoro.
*/
public int getIdPuntoDiRistoro()
{
return idPuntoDiRistoro;
}

/**
* Sets the new value of idPuntoDiRistoro
*
* @Param value pIdPuntoDiRistoro New idPuntoDiRistoro.
*/
public void setIdPuntoDiRistoro(int pIdPuntoDiRistoro)
{
idPuntoDiRistoro = pIdPuntoDiRistoro;
}

/**
* Returns the value of id
*
* @Return value id.
*/
public int getId()
{
return id;
}

/**
* Sets the new value of id
*
* @Param pId New value for id.
*/
public void setId(int pid)
{
id = pid;
}
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_BeanPiatto</id>
      <content>package unisa.gps.etour.bean;
import java.io.Serializable;

/**
* Bean containing information relating to food
*
* @Author Joseph Martone
* @Version 0.1 2007 eTour Project - Copyright by SE @ SA Lab DMI University
* Of Salerno
*/

public class BeanPiatto implements Serializable
{
private int id;
private String name;
private double price;
private int idMenu;
private static final long serialVersionUID = -3775462843748984482L;

/**
* Parameterized constructor
*
* @Param pId
* @Param Pnom
* @Param pPrezzo
* @Param pIdMenu
*/
public BeanPiatto(int pid, String Pnom, double pPrezzo, int pIdMenu)
{
setId(pid);
setNome(Pnom);
setPrezzo(pPrezzo);
setIdMenu(pIdMenu);
}

/**
* Empty Constructor
*/
public BeanPiatto()
{

}

/**
* Returns the value of name
*
* @Return value of name.
*/
public String getName()
{
return name;
}

/**
* Sets the new name value
*
* @Param name New value Pnom.
*/
public void setNome(String Pnom)
{
name = Pnom;
}

/**
* Returns the value of money
*
* @Return value price.
*/
public double getPrezzo()
{
return price;
}

/**
* Sets the new value of money
*
* @Param pPrezzo New value for money.
*/
public void setPrezzo(double pPrezzo)
{
price = pPrezzo;
}

/**
* Returns the value of id
*
* @Return value id.
*/
public int getId()
{
return id;
}

/**
* Returns the value of idMenu
*
* @Return value idMenu.
*/
public int getIdMenu()
{
return idMenu;
}

/**
* Sets the new value of id
*
* @Param pId New value for id.
*/
public void setId(int pid)
{
id = pid;
}

/**
* Sets the new value of idMenu
*
* @Param value pIdMenu New idMenu.
*/
public void setIdMenu(int pIdMenu)
{
idMenu = pIdMenu;
}
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_BeanPreferenzaDiRicerca</id>
      <content>package unisa.gps.etour.bean;
import java.io.Serializable;

/**
* Bean which contains data search preferences
*
* @author Joseph Martone
* @version 0.1 2007 eTour Project - Copyright by SE @ SA Lab DMI University
* Of Salerno
*/
public class BeanPreferenzaDiRicerca implements Serializable
{
private static final long serialVersionUID = 7576354037868937929L;
private int id;
private String name;

/**
* Parameterized constructor
*
* @param pId
* @param Pnom
*/
public BeanPreferenzaDiRicerca(int pid, String Pnom)
{
setId(pid);
setNome(Pnom);
}

/**
* Empty Constructor
*
*/
public BeanPreferenzaDiRicerca()
{

}

/**
* Returns the value of name
*
* @return value of name.
*/
public String getName()
{
return name;
}

/**
* Sets the new name value
*
* @param Pnom New value Pnom.
*/
public void setNome(String Pnom)
{
name = Pnom;
}

/**
* Returns the value of id
*
* @return value id.
*/
public int getId()
{
return id;
}

/**
* Sets the new value of id
*
* @param pid New value for id.
*/
public void setId(int pid)
{
id = pid;
}
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_BeanPuntoDiRistoro</id>
      <content>package unisa.gps.etour.bean;
import java.io.Serializable;
import java.util.Date;

import unisa.gps.etour.util.Punto3D;
/**
* Bean for the storage of data refreshment
*
* @Author Joseph Martone
* @Version 0.1 2007 eTour Project - Copyright by SE @SA Lab DMI University
* Of Salerno
*/

public class BeanPuntoDiRistoro implements Serializable
{
private static final long serialVersionUID = 8417686685147484931L;
private int id;
private int numeroVoti;
private double mediaVoti;
private String name;
private String description;
private String phone;
private String location;
private String city;
private String street;
private String cap;
private String province;
private String PartitaIva;
private Punto3D position;
private Date orarioApertura;
private Date orarioChiusura;
private String giornoChiusura;

/**
* Parameterized constructor
*
* @param pId
* @param pNumeroVoti
* @param pMediaVoti
* @param pNome
* @param pDescrizione
* @param pTelefono
* @param pLocalita
* @param pCitta
* @param pVia
* @param pCap
* @param pProvincia
* @param pPartitaIva
* @param pPosizione
* @param pOrarioApertura
* @param pOrarioChiusura
* @param pGiornoChiusura
*/
public BeanPuntoDiRistoro(int pId, int pNumeroVoti, double pMediaVoti,
String pNome, String pDescrizione, String pTelefono,
String pLocalita, String pCitta, String pVia, String pCap,
String pProvincia, String pPartitaIva, Punto3D pPosizione,
Date pOrarioApertura, Date pOrarioChiusura, String pGiornoChiusura)
{
setId(pId);
setNumeroVoti(pNumeroVoti);
setMediaVoti(pMediaVoti);
setNome(pNome);
setDescrizione(pDescrizione);
setTelefono(pTelefono);
setLocale(pLocalita);
setCitta(pCitta);
setVar(pVia);
setCap(pCap);
setProvincia(pProvincia);
setPartitaIva(pPartitaIva);
setPosizione(pPosizione);
setOrarioApertura(pOrarioApertura);
setOrarioChiusura(pOrarioChiusura);
setGiornoChiusura(pGiornoChiusura);
}

/**
* Empty Constructor
*
*/
public BeanPuntoDiRistoro()
{

}

/**
* Returns the value of cap
*
* @return value cap.
*/
public String getCap()
{
return cap;
}

/**
* Sets the new value of cap
*
* @param pCap new value cap.
*/
public void setCap(String pCap)
{
cap = pCap;
}

/**
* Returns the value of city
*
* @return Value of city.
*/
public String getCitta()
{
return city;
}

/**
* Sets the new value of city
*
* @param pCitta New value of city.
*/
public void setCitta(String pCitta)
{
city = pCitta;
}

/**
* Returns the value of description
*
* @return value of description.
*/
public String getDescrizione()
{
return description;
}

/**
* Sets the new value of description
*
* @param pDescrizione New value of description.
*/
public void setDescrizione(String pDescrizione)
{
description = pDescrizione;
}

/**
* Returns the value of giornoChiusura
*
* @return value giornoChiusura.
*/
public String getGiornoChiusura()
{
return giornoChiusura;
}

/**
* Sets the new value of giornoChiusura
*
* @param pGiornoChiusura New value giornoChiusura.
*/
public void setGiornoChiusura(String pGiornoChiusura)
{
giornoChiusura = pGiornoChiusura;
}

/**
* Returns the value of location
*
* @return locale values.
*/
public String getLocal()
{
return location;
}

/**
* Sets the new value of location
*
* @param pLocalita New locale values.
*/
public void setLocale(String pLocalita)
{
location = pLocalita;
}

/**
* Returns the value of mediaVoti
*
* @return value mediaVoti.
*/
public double getMediaVoti()
{
return mediaVoti;
}

/**
* Sets the new value of mediaVoti
*
* @param pMediaVoti New value mediaVoti.
*/
public void setMediaVoti(double pMediaVoti)
{
mediaVoti = pMediaVoti;
}

/**
* Returns the value of name
*
* @return value of name.
*/
public String getName()
{
return name;
}

/**
* Sets the new name value
*
* @param pNome New value name.
*/
public void setNome(String pNome)
{
name = pNome;
}

/**
* Returns the value of numeroVoti
*
* @return value numeroVoti.
*/
public int getNumeroVoti()
{
return numeroVoti;
}

/**
* Sets the new value of numeroVoti
*
* @param pNumeroVoti New value numeroVoti.
*/
public void setNumeroVoti(int pNumeroVoti)
{
numeroVoti = pNumeroVoti;
}

/**
* Returns the value of orarioApertura
*
* @return value orarioApertura.
*/
public Date getOrarioApertura()
{
return orarioApertura;
}

/**
* Sets the new value of orarioApertura
*
* @param pOrarioApertura New value orarioApertura.
*/
public void setOrarioApertura(Date pOrarioApertura)
{
orarioApertura = pOrarioApertura;
}

/**
* Returns the value of orarioChiusura
*
* @return value orarioChiusura.
*/
public Date getOrarioChiusura()
{
return orarioChiusura;
}

/**
* Sets the new value of orarioChiusura
*
* @param pOrarioChiusura New value orarioChiusura.
*/
public void setOrarioChiusura(Date pOrarioChiusura)
{
orarioChiusura = pOrarioChiusura;
}

/**
* Returns the value of PartitaIva
*
* @return value of PartitaIva.
*/
public String getPartitaIva()
{
return PartitaIva;
}

/**
* Sets the new value of PartitaIva
*
* @param pPartitaIva New value of PartitaIva.
*/
public void setPartitaIva(String pPartitaIva)
{
PartitaIva = pPartitaIva;
}

/**
* Returns the value of position
*
* @return value of position.
*/
public Punto3D getPosizione()
{
return position;
}

/**
* Sets the new position value
*
* @param pPosizione New position value.
*/
public void setPosizione(Punto3D pPosizione)
{
position = pPosizione;
}

/**
* Returns the value of the province
*
* @return value of the province.
*/
public String getProvincia()
{
return province;
}

/**
* Sets the new value of the province
*
* @param pProvincia New value for the province.
*/
public void setProvincia(String pProvincia)
{
province = pProvincia;
}

/**
* Returns the value of telephone
*
* @return Value of the phone.
*/
public String getTelefono()
{
return phone;
}

/**
* Sets the new value of telephone
*
* @param pTelefono New value phone.
*/
public void setTelefono(String pTelefono)
{
phone = pTelefono;
}

/**
* Returns the value of street
*
* @return value street.
*/
public String getVar()
{
return street;
}

/**
* Sets the new value via
*
* @param pVia New value street.
*/
public void setVar(String pVia)
{
street = pVia;
}

/**
* Returns the value of id
*
* @return value id.
*/
public int getId()
{
return id;
}

/**
* Sets the new value of id
*
* @param pId New value for id.
*/
public void setId(int pId)
{
id = pId;
}
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_BeanTag</id>
      <content>package unisa.gps.etour.bean;

/**
* Bean that contains the data for a Tag
*
* @author Mauro Miranda
* @version 0.1 2007 eTour Project - Copyright by SE @SA Lab DMI University
* Of Salerno
*/

import java.io.Serializable;

public class BeanTag implements Serializable
{
private static final long serialVersionUID = -6320421006595188597L;
private int id;
private String name;
private String description;

/**
* Parameterized constructor
*
* @param pId
* @param Pnom
* @param pDescrizione
*/
public BeanTag(int pid, String Phnom, String pDescrizione)
{
setId(pid);
setNome(Phnom);
setDescrizione(pDescrizione);
}

/**
* Empty Constructor
*/
public BeanTag()
{

}

/**
* Returns the value of description
*
* @return value of description.
*/
public String getDescrizione()
{
return description;
}

/**
* Sets the new value of description
*
* @param pDescrizione New value of description.
*/
public void setDescrizione(String pDescrizione)
{
description = pDescrizione;
}

/**
* Returns the value of name
*
* @return value of name.
*/
public String getName()
{
return name;
}

/**
* Sets the new value of name
*
* @param Pnom New value for name.
*/
public void setNome(String Pnom)
{
name = Pnom;
}

/**
* Returns the value of id
*
* @return value id.
*/
public int getId()
{
return id;
}

/**
* Sets the new value of id
*
* @param pId New value for id.
*/
public void setId(int pid)
{
id = pid;
}
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_BeanTurista</id>
      <content>package unisa.gps.etour.bean;
import java.io.Serializable;
import java.util.Date;
/**
* Bean containing information relating to a tourist
*
* @Author Mauro Miranda
* @Version 0.1 2007 eTour Project - Copyright by SE @ SA Lab DMI University
* Of Salerno
*/
public class BeanTurista implements Serializable
{
private static final long serialVersionUID = 4214744963263090577L;
private int id;
private String username;
private String name;
private String name;
private String cittaNascita;
private String cittaResidenza;
private String phone;
private String cap;
private String street;
private String province;
private String email;
private String password;
private Date dob;
private Date dataRegistrazione;
private boolean active;

/**
* Parameterized constructor
*
* @param pid
* @param pUsername
* @param Pnom
* @param pCognome
* @param pCittaNascita
* @param pCittaResidenza
* @param pTelefono
* @param pcap
* @param pVia
* @param pProvincia
* @param pEmail
* @param pPassword
* @param pDataNascita
* @param pDataRegistrazione
* @param pacts
*/
public BeanTurista(int pid, String pUsername, String Pnom,
String PCognome, String pCittaNascita, String pCittaResidenza,
String PTelefono, String pcap, String pVia, String pProvincia,
String PEmail, String pPassword, Date pDataNascita,
Date pDataRegistrazione, boolean Patti)
{
setId(pid);
setUsername(pUsername);
setNome(Phnom);
setCognome(pCognome);
setCittaNascita(pCittaNascita);
setCittaResidenza(pCittaResidenza);
setTelefono(pTelefono);
setCap(PCAP);
setvar(pVia);
setProvincia(pProvincia);
setEmail(pEmail);
setPassword(pPassword);
setDataNascita(pDataNascita);
setDataRegistrazione(pDataRegistrazione);
setAttiva(Patti);
}

/**
* Empty Constructor
*/
public BeanTurista()
{

}

/**
* Returns the value of cap
*
* @return value cap.
*/
public String getCap()
{
return cap;
}

/**
* Sets the new value of cap
*
* @param pcap New value cap.
*/
public void setCap(String PCAP)
{
ch = pcap;
}

/**
* Returns the value of cittaNascita
*
* @return value cittaNascita.
*/
public String getCittaNascita()
{
return cittaNascita;
}

/**
* Sets the new value of cittaNascita
*
* @param pCittaNascita New value cittaNascita.
*/
public void setCittaNascita(String pCittaNascita)
{
cittaNascita = pCittaNascita;
}

/**
* Returns the value of cittaResidenza
*
* @return value cittaResidenza.
*/
public String getCittaResidenza()
{
return cittaResidenza;
}

/**
* Sets the new value of cittaResidenza
*
* @param pCittaResidenza New value cittaResidenza.
*/
public void setCittaResidenza(String pCittaResidenza)
{
cittaResidenza = pCittaResidenza;
}

/**
* Returns the value of name
*
* @return value of name.
*/
public String getCognome()
{
return name;
}

/**
* Sets the new value of name
*
* @param pCognome New value surname.
*/
public void setCognome(String pCognome)
{
last = pCognome;
}

/**
* Returns the value of dob
*
* @return value dob.
*/
public Date getDataNascita()
{
return dob;
}

/**
* Sets the new value of dob
*
* @param pDataNascita New value dob.
*/
public void setDataNascita(Date pDataNascita)
{
dob = pDataNascita;
}

/**
* Returns the value of dataRegistrazione
*
* @return value dataRegistrazione.
*/
public Date getDataRegistrazione()
{
return dataRegistrazione;
}

/**
* Sets the new value of dataRegistrazione
*
* @param pDataRegistrazione New value dataRegistrazione.
*/
public void setDataRegistrazione(Date pDataRegistrazione)
{
dataRegistrazione = pDataRegistrazione;
}

/**
* Returns the value of email
*
* @return value of email.
*/
public String getEmail()
{
return email;
}

/**
* Sets the new value of email
*
* @param pEmail New value of email.
*/
public void setEmail(String pEmail)
{
email = pEmail;
}

/**
* Returns the value of name
*
* @return value of name.
*/
public String getName()
{
return name;
}

/**
* Sets the new name value
*
* @param Pnom New value name.
*/
public void setNome(String Pnom)
{
name = Pnom;
}

/**
* Returns the value of password
*
* @return value of password.
*/
public String getPassword()
{
return password;
}

/**
* Sets the new password value
*
* @param pPassword new password value.
*/
public void setPassword(String pPassword)
{
password = pPassword;
}

/**
* Returns the value of the province
*
* @return value of the province.
*/
public String getProvincia()
{
return province;
}

/**
* Sets the new value of the province
*
* @param pProvincia New value for the province.
*/
public void setProvincia(String pProvincia)
{
province = pProvincia;
}

/**
* Returns the value of telephone
*
* @return Value of the phone.
*/
public String getTelefono()
{
return phone;
}

/**
* Sets the new value of telephone
*
* @param pTelefono New value phone.
*/
public void setTelefono(String pTelefono)
{
phone = pTelefono;
}

/**
* Returns the value of street
*
* @return value on.
*/
public String getVar()
{
return path;
}

/**
* Sets the new value via
*
* @param pVia New value on.
*/
public void setvar(String pVia)
{
via = pVia;
}

/**
* Returns the value of username
*
* @return value of username.
*/
public String GetUserName()
{
return username;
}

/**
* Returns to be 1 or 0, indicating whether a tourist or not
* Active
*
* @return value of activation
*/
public boolean isAttiva()
{
return active;
}

/**
* Sets the new value of active
*
* @param Patti new value terms of assets.
*/
public void setAttiva(boolean Patti)
{
active = Pact;
}

/**
* Sets the new value of username
*
* @param pUsername New value for username.
*/
public void setUsername(String pUsername)
{
username = pUsername;
}

/**
* Sets the new value of id
*
* @param pid new value of id.
*/
public void setId(int pid)
{
id = pid;
}

/**
* Returns the value of id
*
* @return value id.
*/
public int getId()
{
return id;
}
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_BeanVisitaBC</id>
      <content>package unisa.gps.etour.bean;
import java.io.Serializable;
import java.util.Date;
/**
* Bean containing information relating to the feedback of a cultural
*
* @Author Joseph Martone
* @Version 0.1 2007 eTour Project - Copyright by SE @SA Lab DMI University
* Of Salerno
*/
public class BeanVisitaBC implements Serializable
{
private static final long serialVersionUID = 3331567128449243852L;
private int rating;
private int idBeneCulturale;
private String comment;
private int IdTurista;
private Date dataVisita;

/**
* Parameterized constructor
*
* @param pVoto
* @param pIdBeneCulturale
* @param pCommento
* @param pIdTurista
* @param pDataVisita
*/
public BeanVisitaBC(int pVoto, int pIdBeneCulturale,
String pCommento, int pIdTurista, Date pDataVisita)
{
setVoto(pVoto);
setIdBeneCulturale(pIdBeneCulturale);
setCommento(pCommento);
setIdTurista(pIdTurista);
setDataVisita(pDataVisita);
}

/**
* Empty Constructor
*/
public BeanVisitaBC()
{

}

/**
* Returns the value of comment
*
* @return value of comment.
*/
public String getCommento()
{
return comment;
}

/**
* Sets the new value of comment
*
* @param pCommento New value comment.
*/
public void setCommento(String pCommento)
{
comment = pCommento;
}

/**
* Returns the value of dataVisita
*
* @return value dataVisita.
*/
public Date getDataVisita()
{
return dataVisita;
}

/**
* Sets the new value of dataVisita
*
* @param pDataVisita New value dataVisita.
*/
public void setDataVisita(Date pDataVisita)
{
dataVisita = pDataVisita;
}

/**
* Returns the value of idBeneCulturale
*
* @return value idBeneCulturale.
*/
public int getIdBeneCulturale()
{
return idBeneCulturale;
}

/**
* Sets the new value of idBeneCulturale
*
* @param pIdBeneCulturale New value idBeneCulturale.
*/
public void setIdBeneCulturale(int pIdBeneCulturale)
{
idBeneCulturale = pIdBeneCulturale;
}

/**
* Returns the value of IdTurista
*
* @return value IdTurista.
*/
public int getIdTurista()
{
return IdTurista;
}

/**
* Sets the new value of IdTurista
*
* @param pIdTurista New value IdTurista.
*/
public void setIdTurista(int pIdTurista)
{
IdTurista = pIdTurista;
}

/**
* Returns the value of voting
*
* @return value of vote.
*/
public int getVoto()
{
return rating;
}

/**
* Sets the new value of voting
*
* @param pVoto New value to vote.
*/
public void setVoto(int pVoto)
{
rating = pVoto;
}
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_BeanVisitaPR</id>
      <content>package unisa.gps.etour.bean;
import java.io.Serializable;
import java.util.Date;
/**
* Bean that contains the data for feedback to a refreshment
*
* @Author Joseph Martone
* @Version 0.1 2007 eTour Project - Copyright by SE @SA Lab DMI University
* Of Salerno
*/
public class BeanVisitaPR implements Serializable
{

private static final long serialVersionUID = -4065240072283418782L;
private int rating;
private int idPuntoDiRistoro;
private String comment;
private int IdTurista;
private Date dataVisita;

/**
* Parameterized constructor
*
* @Param pVoto
* @Param pIdPuntoDiRistoro
* @Param pCommento
* @Param pIdTurista
* @Param pDataVisita
*/
public BeanVisitaPR(int pVoto, int pIdPuntoDiRistoro,
String pCommento, int pIdTurista, Date pDataVisita)
{
setVoto(pVoto);
setIdPuntoDiRistoro(pIdPuntoDiRistoro);
setCommento(pCommento);
setIdTurista(pIdTurista);
setDataVisita(pDataVisita);
}

/**
* Empty Constructor
*/
public BeanVisitaPR()
{

}

/**
* Returns the value of comment
*
* @Return value of comment.
*/
public String getCommento()
{
return comment;
}

/**
* Sets the new value of comment
*
* @Param value New pCommento comment.
*/
public void setCommento(String pCommento)
{
comment = pCommento;
}

/**
* Returns the value of dataVisita
*
* @Return value dataVisita.
*/
public Date getDataVisita()
{
return dataVisita;
}

/**
* Sets the new value of dataVisita
*
* @Param value pDataVisita New dataVisita.
*/
public void setDataVisita(Date pDataVisita)
{
dataVisita = pDataVisita;
}

/**
* Returns the value of idPuntoDiRistoro
*
* @Return value idPuntoDiRistoro.
*/
public int getIdPuntoDiRistoro()
{
return idPuntoDiRistoro;
}

/**
* Sets the new value of idPuntoDiRistoro
*
* @Param value pIdPuntoDiRistoro New idPuntoDiRistoro.
*/
public void setIdPuntoDiRistoro(int pIdPuntoDiRistoro)
{
idPuntoDiRistoro = pIdPuntoDiRistoro;
}

/**
* Returns the value of IdTurista
*
* @Return value IdTurista.
*/
public int getIdTurista()
{
return IdTurista;
}

/**
* Sets the new value of IdTurista
*
* @Param value pIdTurista New IdTurista.
*/
public void setIdTurista(int pIdTurista)
{
IdTurista = pIdTurista;
}

/**
* Returns the value of voting
*
* @Return value of vote.
*/
public int getVoto()
{
return rating;
}

/**
* Sets the new value of voting
*
* New value * @param pVoto to vote.
*/
public void setVoto(int pVoto)
{
rating = pVoto;
}

}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_BeniCulturali</id>
      <content>package unisa.gps.etour.gui.operatoreagenzia;

import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import java.util.*;
import javax.swing.border.*;
import unisa.gps.etour.bean.BeanBeneCulturale;
import unisa.gps.etour.bean.BeanTag;
import unisa.gps.etour.control.GestioneBeniCulturali.IGestioneBeniCulturaliAgenzia;
import unisa.gps.etour.control.GestioneBeniCulturali.IGestioneBeniCulturaliComune;
import unisa.gps.etour.control.GestioneTag.IGestioneTagComune;
import unisa.gps.etour.gui.DeskManager;
import unisa.gps.etour.gui.HelpManager;
import unisa.gps.etour.gui.operatoreagenzia.tables.MediaVotiRenderer;
import unisa.gps.etour.gui.operatoreagenzia.tables.Punto3DRenderer;
import unisa.gps.etour.gui.operatoreagenzia.tables.ScrollableTable;
import unisa.gps.etour.gui.operatoreagenzia.tables.SitoTableModel;
import unisa.gps.etour.util.Punto3D;
import java.io.FileNotFoundException;
import java.rmi.RemoteException;
import java.rmi.registry.LocateRegistry;
import java.rmi.registry.Registry;
import java.util.ArrayList;

/**
* Class that implements the interface for the management of cultural side
* Operator Agency.
*
* @Author Mario Gallo
* @Version 0.8
* (c) 2007 eTour Project - Copyright by DMI SE @ SA Lab --
* University of Salerno
*/
public class Beniculturali extends JInternalFrame {
private JDesktopPane jDesktopPane;
private JPanel jContentPane = null;
private JToolBar BCToolbar = null;
private JButton btnNuovoBC = null;
private JButton btnSchedaBC = null;
private JButton btnEliminaBC = null;
private JButton btnModificaBC = null;
private JPanel rightPanel = null;
private JPanel searchPanel = null;
private JPanel helpPanel = null;
private JScrollPane JScrollPane = null;
private JTable tableBC = null;
private TagPanel pannelloTag = null;
private JTextPane textGuida = null;
private JTextField nomeBC = null;
private JButton btnRicerca = null;
private JButton btnAzzera = null;
private DeskManager desktopManager;
private ArrayList&lt;SchedaBC&gt; figli;
private SitoTableModel tableModel;
private HelpManager bcHelp;
private IGestioneBeniCulturaliAgenzia gestioneBC;
private IGestioneTagComune tags;
protected IGestioneBeniCulturaliComune ricercaBC;

/**
* This is the default constructor.
*/
public Beniculturali() {
super(&quot;Cultural Heritage&quot;);
setPreferredSize(Home.CHILD_SIZE);
frameIcon = new ImageIcon(getClass().getResource(
Home.URL_IMAGES + &quot;BC.png&quot;));
setDefaultCloseOperation(JInternalFrame.DO_NOTHING_ON_CLOSE);
closable = true;
resizable = true;
iconable = true;
maximizable = true;

// Setting up dell'help manager for cultural.
textGuida = new JTextPane();
try {
bcHelp = new HelpManager(Home.URL_HELP + &quot;BeniCulturali.txt&quot;,
textGuida);
} catch (FileNotFoundException e) {
textGuida.setText(&quot;&lt;html&gt;&lt;b&gt;Help not available&lt;/b&gt;&lt;/html&gt;&quot;);
}
setContentPane(getJContentPane());
figli = new ArrayList&lt;SchedaBC&gt;();
addInternalFrameListener(new InternalFrameAdapter() {
/**
* Inclusion of the frame on the desktop desktop retrieves bread bread
* And desktop manager and initializes the remote objects
* Management of cultural heritage.
*/
public void internalFrameOpened(InternalFrameEvent pEvent) {
JInternalFrame frame = pEvent.getInternalFrame();
jDesktopPane = frame.getDesktopPane();
desktopManager = (DeskManager) jDesktopPane.getDesktopManager();

// Setting up objects for remote asset management
// Cultural.
try {
Registry reg = LocateRegistry.getRegistry(Home.HOST);
gestioneBC = (IGestioneBeniCulturaliAgenzia) reg
.lookup(&quot;GestioneBeniCulturaliAgenzia&quot;);
tags = (IGestioneTagComune) reg.lookup(&quot;GestioneTagComune&quot;);
ricercaBC = (IGestioneBeniCulturaliComune) reg
.lookup(&quot;GestioneBeniCulturaliComune&quot;);
// Load data.
caricaTabella(false);
caricaTags();
}
/**
* Two exceptions: RemoteException and NotBoundException. The
* Result is the same. The management is not operable and
* After the error message window closes.
*/
catch (Exception ex) {
JLabel error = new JLabel(
&quot;&lt;html&gt;&lt;h2&gt;Unable to communicate with the server eTour.&lt;/h2&gt;&quot;
+ &quot;&lt;h3&gt;&lt;u&gt;The dialog management request is closed.&lt;/u&gt;&lt;/h3&gt;&quot;
+ &quot;&lt;p&gt;&lt;b&gt;Possible Causes:&lt;/b&gt;&quot;
+ &quot;&lt;ul&gt;&lt;li&gt;No connection to the network.&lt;/li&gt;&quot;
+ &quot;&lt;li&gt;Server inactive.&lt;/li&gt;&quot;
+ &quot;&lt;li&gt;Server clogged.&lt;/li&gt;&lt;/ul&gt;&quot;
+ &quot;&lt;p&gt;Please try again later.&lt;/p&gt;&quot;
+ &quot;&lt;p&gt;If the error persists, please contact technical support.&lt;/p&gt;&quot;
+ &quot;&lt;p&gt;We apologize for the inconvenience.&lt;/html&gt;&quot;);
ImageIcon err = new ImageIcon(getClass().getResource(
Home.URL_IMAGES + &quot;error48.png&quot;));
JOptionPane.showMessageDialog(jDesktopPane, error,
&quot;Error!&quot;, JOptionPane.ERROR_MESSAGE, err);
frame.dispose();
}
}

/**
* At the end of the frame displays the dialog
* Confirmation.
*/
public void internalFrameClosing(InternalFrameEvent pEvent) {
// Create the confirmation dialog.
JPanel root = new JPanel(new BorderLayout());
JLabel message = new JLabel(
&quot;Are you sure you want to close the management of cultural heritage?&quot;);
message.setFont(new Font(&quot;Dialog&quot;, Font.BOLD, 14));
JLabel avviso = new JLabel(
&quot;NB will be closed all the windows opened by this administration.&quot;,
SwingConstants.CENTER);
avviso.setIcon(new ImageIcon(getClass().getResource(
Home.URL_IMAGES + &quot;warning16.png&quot;)));
root.add(message, BorderLayout.NORTH);
root.add(avviso, BorderLayout.CENTER);
String[] options = {&quot;Close&quot;, &quot;Cancel&quot;};
int choice = JOptionPane.showInternalOptionDialog(jContentPane,
root, &quot;Confirm closing of Cultural Heritage&quot;,
JOptionPane.OK_CANCEL_OPTION,
JOptionPane.QUESTION_MESSAGE, frameIcon, options,
options[1]);
/**
* If it is confirmed the closing of management, all
* Classes &quot;daughters&quot; are closed.
*/
if (choice == JOptionPane.OK_OPTION) {
for (int i = 0; i &lt; figli.size(); i++) {
figli.get(i).dispose();
}
pEvent.getInternalFrame().dispose();
}
}
});
}

/**
* Update the current model of the table of cultural property with the bean
* Of the cultural supplied input.
*
* @param pbc BeanBeneCulturale - the bean with which to update the
* Model.
*/
protected void updateTableModel(BeanBeneCulturale pbc) {
tableModel.updateBC(pbc);
}

/**
* Closes the tab cultural selected.
*
* @param pScheda SchedaBC - the cultural card to close.
*/
protected void closeScheda(SchedaBC pScheda) {
figli.remove(pScheda);
pScheda.dispose();
}

/**
* This method initializes the content pane of the frame.
*
* @return javax.swing.JPanel - the content pane.
*/
private JPanel getJContentPane() {
if (null == jContentPane) {
jContentPane = new JPanel();
jContentPane.setLayout(new BorderLayout());
jContentPane.add(getBCToolbar(), BorderLayout.NORTH);
jContentPane.add(getPannelloDestro(), BorderLayout.EAST);
jContentPane.add(getJScrollPane(), BorderLayout.CENTER);
}
return jContentPane;
}

/**
* This method initializes the toolbar for features on
* Management of cultural heritage.
*
* @return javax.swing.JToolBar - the toolbar for managing assets
* Cultural.
*/
private JToolBar getBCToolbar() {
if (null == BCToolbar) {
BCToolbar = new JToolBar();
BCToolbar.setPreferredSize(new Dimension(1, 50));
BCToolbar.setFloatable(false);
BCToolbar.setOrientation(JToolBar.HORIZONTAL);
BCToolbar.setLayout(null);
BCToolbar.add(getBtnNuovoBC());
BCToolbar.addSeparator();
BCToolbar.add(getBtnModificaBC());
BCToolbar.addSeparator();
BCToolbar.add(getBtnSchedaBC());
BCToolbar.addSeparator();
BCToolbar.add(getBtnEliminaBC());
}
return BCToolbar;
}

/**
* This method initializes the button to insert a new good
* Cultural.
*
* @return javax.swing.JButton - the button for the insertion.
*/
private JButton getBtnNuovoBC() {
if (null == btnNuovoBC) {
btnNuovoBC = new JButton();
btnNuovoBC.setText(&quot;&lt;html&gt;New&lt;br&gt;Cultural Heritage&lt;/html&gt;&quot;);
btnNuovoBC.setBounds(5, 5, 140, 40);
btnNuovoBC.setIcon(new ImageIcon(getClass().getResource(
Home.URL_IMAGES + &quot;nuovoBC.png&quot;)));
btnNuovoBC.setName(&quot;btnNuovoBC&quot;);
btnNuovoBC.addMouseListener(bcHelp);
btnNuovoBC.setCursor(Cursor.getPredefinedCursor(Cursor.HAND_CURSOR));
btnNuovoBC.addActionListener(new ActionListener() {
public void actionPerformed(ActionEvent pEvent) {
// Opens a form for entering a new good
// Cultural.
OpenOffice.org Messenger MSN Gaim(null, false);
}
});
}
return btnNuovoBC;
}

/**
* This method initializes the button to access to details of property
* Cultural selected.
*
* @return javax.swing.JButton - the button for the card.
*/
private JButton getBtnSchedaBC() {
if (null == btnSchedaBC) {
btnSchedaBC = new JButton();
btnSchedaBC.setBounds(305, 5, 140, 40);
btnSchedaBC.setText(&quot;&lt;html&gt;Card&lt;br&gt;Cultural Heritage&lt;/html&gt;&quot;);
btnSchedaBC.setVerticalTextPosition(SwingConstants.TOP);
btnSchedaBC.setIcon(new ImageIcon(getClass().getResource(
Home.URL_IMAGES + &quot;scheda.png&quot;)));
btnSchedaBC.setEnabled(false);
btnSchedaBC.setCursor(Cursor.getPredefinedCursor(Cursor.HAND_CURSOR));
btnSchedaBC.setName(&quot;btnSchedaBC&quot;);
btnSchedaBC.addMouseListener(bcHelp);
btnSchedaBC.addActionListener(new ActionListener() {
public void actionPerformed(ActionEvent pEvent) {
int selectedRow = tableBC.getSelectedRow();
BeanBeneCulturale todo = null;
try {
todo = gestioneBC.ottieniBeneCulturale(tableModel.getID(selectedRow));
// Open the card with the change of the cultural
// Disabled.
OpenOffice.org Messenger MSN Gaim(todo, false);
} catch (Exception ex) {
JLabel error = new JLabel(
&quot;&lt;html&gt;&lt;h2&gt;Unable to communicate with the server eTour.&lt;/h2&gt;&quot;
+ &quot;&lt;h3&gt;&lt;u&gt;The card request can not be loaded.&lt;/u&gt;&lt;/h3&gt;&quot;
+ &quot;&lt;p&gt;Please try again later.&lt;/p&gt;&quot;
+ &quot;&lt;p&gt;If the error persists, please contact technical support.&lt;/p&gt;&quot;
+ &quot;&lt;p&gt;We apologize for the inconvenience.&lt;/html&gt;&quot;);
ImageIcon err = new ImageIcon(getClass().getResource(
Home.URL_IMAGES + &quot;error48.png&quot;));
JOptionPane.showMessageDialog(jDesktopPane, error,
&quot;Error!&quot;, JOptionPane.ERROR_MESSAGE, err);
}
}
});
}
return btnSchedaBC;
}

/**
* This method initializes the button to access the modification of a
* Cultural.
*
* @return javax.swing.JButton - the button for the card.
*/
private JButton getBtnModificaBC() {
if (null == btnModificaBC) {
btnModificaBC = new JButton();
btnModificaBC.setBounds(155, 5, 140, 40);
btnModificaBC.setText(&quot;&lt;html&gt;Edit Data&lt;br&gt;Cultural Heritage&lt;/html&gt;&quot;);
btnModificaBC.setEnabled(false);
btnModificaBC.setCursor(Cursor.getPredefinedCursor(Cursor.HAND_CURSOR));
btnModificaBC.setIcon(new ImageIcon(getClass().getResource(
Home.URL_IMAGES + &quot;ModificaBC32.png&quot;)));
btnModificaBC.setName(&quot;btnModificaBC&quot;);
btnModificaBC.addMouseListener(bcHelp);
btnModificaBC.addActionListener(new ActionListener() {
public void actionPerformed(ActionEvent pEvent) {
int selectedRow = tableBC.getSelectedRow();
BeanBeneCulturale todo = null;
try {
todo = gestioneBC.ottieniBeneCulturale(tableModel.getID(selectedRow));
// Open the card with the change of the cultural
// Enabled.
OpenOffice.org Messenger MSN Gaim(todo, true);
} catch (Exception ex) {
JLabel error = new JLabel(
&quot;&lt;html&gt;&lt;h2&gt;Unable to communicate with the server eTour.&lt;/h2&gt;&quot;
+ &quot;&lt;h3&gt;&lt;u&gt;The card request can not be loaded.&lt;/u&gt;&lt;/h3&gt;&quot;
+ &quot;&lt;p&gt;Please try again later.&lt;/p&gt;&quot;
+ &quot;&lt;p&gt;If the error persists, please contact technical support.&lt;/p&gt;&quot;
+ &quot;&lt;p&gt;We apologize for the inconvenience.&lt;/html&gt;&quot;);
ImageIcon err = new ImageIcon(getClass().getResource(
Home.URL_IMAGES + &quot;error48.png&quot;));
JOptionPane.showMessageDialog(jDesktopPane, error,
&quot;Error!&quot;, JOptionPane.ERROR_MESSAGE, err);
}
}
});
}
return btnModificaBC;
}

/**
* This method initializes the button for the elimination of property
* Cultural selected.
*
* @return javax.swing.JButton - the delete button for.
*/
private JButton getBtnEliminaBC() {
if (null == btnEliminaBC) {
btnEliminaBC = new JButton();
btnEliminaBC.setBounds(455, 5, 140, 40);
btnEliminaBC.setText(&quot;&lt;html&gt;Delete&lt;br&gt;Cultural Heritage&lt;/html&gt;&quot;);
btnEliminaBC.setVerticalTextPosition(SwingConstants.TOP);
btnEliminaBC.setCursor(Cursor.getPredefinedCursor(Cursor.HAND_CURSOR));
btnEliminaBC.setIcon(new ImageIcon(getClass().getResource(
Home.URL_IMAGES + &quot;EliminaBC32.png&quot;)));
btnEliminaBC.setCursor(Cursor.getPredefinedCursor(Cursor.HAND_CURSOR));
btnEliminaBC.setEnabled(false);
btnEliminaBC.addActionListener(new ActionListener() {
public void actionPerformed(ActionEvent pEvent) {
int selectedRow = tableBC.getSelectedRow();
String name = (String) tableModel.getValueAt(selectedRow, 0);

// Create the delete confirmation dialog.
JPanel root = new JPanel(new BorderLayout());
JLabel message = new JLabel(
&quot;Are you sure you want to delete the cultural heritage&quot;
+ name + &quot;?&quot;);
message.setFont(new Font(&quot;Dialog&quot;, Font.BOLD, 14));
JLabel avviso = new JLabel(
&quot;The deleted data can not be filled again.&quot;,
SwingConstants.CENTER);
avviso.setIcon(new ImageIcon(getClass().getResource(
Home.URL_IMAGES + &quot;warning16.png&quot;)));
root.add(message, BorderLayout.NORTH);
root.add(avviso, BorderLayout.CENTER);
String[] options = {&quot;Delete&quot;, &quot;Cancel&quot;};
int choice = JOptionPane.showInternalOptionDialog(
jContentPane, root, &quot;Confirm Delete&quot;,
JOptionPane.YES_NO_OPTION,
JOptionPane.QUESTION_MESSAGE,
new ImageIcon(getClass().getResource(
Home.URL_IMAGES + &quot;EliminaBC48.png&quot;)),
options, options[1]);
// If the deletion is confirmed, remove the well
// Cultural selected.
if (choice == JOptionPane.YES_OPTION) {
try {
gestioneBC.cancellaBeneCulturale(tableModel.getID(selectedRow));
tableModel.removeSito(selectedRow);
JLabel confirm = new JLabel(&quot;The cultural heritage&quot;
+ name + &quot;was deleted.&quot;);
confirm.setFont(new Font(&quot;Dialog&quot;, Font.BOLD, 14));
JOptionPane.showInternalMessageDialog(jContentPane,
confirm, &quot;Cultural Heritage&quot;,
JOptionPane.OK_OPTION, new ImageIcon(
getClass().getResource(
Home.URL_IMAGES
+ &quot;Ok32.png&quot;)));
} catch (Exception ex) {
JLabel error = new JLabel(
&quot;&lt;html&gt;&lt;h2&gt;Unable to communicate with the server eTour.&lt;/h2&gt;&quot;
+ &quot;&lt;h3&gt;&lt;u&gt;Delete operation request can not be completed.&lt;/u&gt;&lt;/h3&gt;&quot;
+ &quot;&lt;p&gt;Please try again later.&lt;/p&gt;&quot;
+ &quot;&lt;p&gt;If the error persists, please contact technical support.&lt;/p&gt;&quot;
+ &quot;&lt;p&gt;We apologize for the inconvenience.&lt;/html&gt;&quot;);
ImageIcon err = new ImageIcon(getClass()
.getResource(
Home.URL_IMAGES + &quot;error48.png&quot;));
JOptionPane.showMessageDialog(jDesktopPane, error,
&quot;Error!&quot;, JOptionPane.ERROR_MESSAGE, err);
}
}
}
});
btnEliminaBC.setName(&quot;btnEliminaBC&quot;);
btnEliminaBC.addMouseListener(bcHelp);
}
return btnEliminaBC;
}

/**
* This method initializes the right side of the interface.
*
* @return javax.swing.JPanel - the right pane of the interface.
*/
private JPanel getPannelloDestro() {
if (null == rightPanel) {
rightPanel = new JPanel();
rightPanel.setLayout(new BorderLayout());
rightPanel.add(getHelpPanel(), BorderLayout.CENTER);
rightPanel.add(getSearchPanel(), BorderLayout.CENTER);
}
return rightPanel;
}

/**
* This method initializes the panel for finding property
* Cultural.
*
* @return javax.swing.JPanel - the search panel.
*/
private JPanel getSearchPanel() {
if (null == searchPanel) {
GridBagConstraints g = new GridBagConstraints();
searchPanel = new JPanel(new GridBagLayout());
searchPanel.setBorder(BorderFactory.createTitledBorder(
BorderFactory.createLineBorder(new Color(51, 102, 255), 3),
&quot;Search for Cultural Heritage&quot;,
TitledBorder.DEFAULT_JUSTIFICATION,
TitledBorder.DEFAULT_POSITION, new Font(&quot;Dialog&quot;,
Font.BOLD, 12), new Color(0, 102, 204)));
g.anchor = GridBagConstraints.CENTER;
// Top - Left - Bottom - Right
g.insets = new Insets(5, 5, 5, 5);
g.gridwidth = 2;
g.gridx = 0;
g.gridy = 0;
searchPanel.add(new JLabel(&quot;Name of Cultural Heritage&quot;), g);
g.gridy = 1;
nomeBC = new JTextField();
nomeBC.setColumns(12);
nomeBC.setName(&quot;nomeBC&quot;);
nomeBC.addMouseListener(bcHelp);
searchPanel.add(nomeBC, g);
g.gridy = 2;
searchPanel.add(new JLabel(&quot;Select search tags:&quot;), g);
g.fill = GridBagConstraints.VERTICAL;
g.gridy = 3;
g.weightx = 1.0;
g.weighty = 1.0;
g.insets = new Insets(5, 5, 10, 5);
pannelloTag = new TagPanel();
pannelloTag.setPreferredSize(new Dimension(180, 40));
pannelloTag.setName(&quot;pannelloTag&quot;);
pannelloTag.addMouseListener(bcHelp);
searchPanel.add(pannelloTag, g);
g.insets = new Insets(5, 5, 5, 5);
g.weightx = 0;
g.weighty = 0;
g.gridwidth = 1;
g.gridy = 4;
g.fill = GridBagConstraints.NONE;
searchPanel.add(getBtnRicerca(), g);
g.gridx = 1;
searchPanel.add(getBtnAzzera(), g);
}
return searchPanel;
}

/**
* This method initializes the panel containing the online help.
*
* @return javax.swing.JPanel - the panel of the guide.
*/
private JPanel getHelpPanel() {
if (null == helpPanel) {
helpPanel = new JPanel();
helpPanel.setLayout(new BorderLayout());
helpPanel.setBorder(BorderFactory.createTitledBorder(BorderFactory
.createLineBorder(new Color(51, 102, 255), 3),
&quot;Help&quot;, TitledBorder.DEFAULT_JUSTIFICATION,
TitledBorder.DEFAULT_POSITION, new Font(&quot;Dialog&quot;,
Font.BOLD, 12), new Color(0, 102, 204)));
textGuida.setPreferredSize(new Dimension(100, 80));
textGuida.setContentType(&quot;text/html&quot;);
textGuida.setText(&quot;&lt;html&gt;Move your mouse pointer over a control&quot;
+ &quot;Of interest to display the context-sensitive help.&lt;/html&gt;&quot;);
textGuida.setEditable(false);
textGuida.setOpaque(false);
helpPanel.add(textGuida, BorderLayout.CENTER);
}
return helpPanel;
}

/**
* This method initializes the bread and table scroll of cultural heritage.
*
* @return javax.swing.JScrollPane - the scrollPane.
*/
private JScrollPane getJScrollPane() {
if (JScrollPane == null) {
if (null == tableBC) {
tableModel = new SitoTableModel();
tableBC = new ScrollableTable(tableModel);
tableBC.setRowHeight(32);
tableBC.setDefaultRenderer(Double.class,
new MediaVotiRenderer());
tableBC.setDefaultRenderer(Punto3D.class,
new Punto3DRenderer());
tableBC.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
tableBC.setSelectionForeground(Color.RED);
tableBC.setSelectionBackground(Color.white);
tableBC.setShowVerticalLines(false);
tableBC.setColumnSelectionAllowed(false);
tableBC.addMouseListener(bcHelp);
tableBC.setName(&quot;tableBC&quot;);
/**
* SelectionListener - if a selected row, the buttons
* Tab, edit and delete are active. Otherwise, are
* Disabled.
*/
ListSelectionModel selectionModel = tableBC.getSelectionModel();
selectionModel.addListSelectionListener(new ListSelectionListener() {
public void valueChanged(ListSelectionEvent pEvent) {
if (tableBC.getSelectedRow() != -1) {
btnEliminaBC.setEnabled(true);
btnSchedaBC.setEnabled(true);
btnModificaBC.setEnabled(true);
} else {
btnEliminaBC.setEnabled(false);
btnSchedaBC.setEnabled(false);
btnModificaBC.setEnabled(false);
}
}
});
/**
* KeyListener &lt;ENTER&gt; - Details of the cultural selected.
* &lt;Backspace&gt; - Delete the selected cultural. &lt;space&gt; --
* Modify the cultural selected.
*/
tableBC.addKeyListener(new KeyAdapter() {
public void keyPressed(KeyEvent pEvent) {
int keyCode = pEvent.getKeyCode();
if (keyCode == KeyEvent.VK_ENTER) {
btnSchedaBC.doClick();
} else if (keyCode == KeyEvent.VK_BACK_SPACE) {
btnEliminaBC.doClick();
} else if (keyCode == KeyEvent.VK_SPACE) {
btnModificaBC.doClick();
}
}
});
}

JScrollPane = new JScrollPane(tableBC);
JScrollPane.setHorizontalScrollBarPolicy(JScrollPane.HORIZONTAL_SCROLLBAR_ALWAYS);
JScrollPane.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);
}
return JScrollPane;
}

/**
* This method initializes the button to search for a good
* Cultural.
*
* @return javax.swing.JButton - the search button.
*/
private JButton getBtnRicerca() {
if (null == btnRicerca) {
btnRicerca = new JButton();
btnRicerca.setText(&quot;Search&quot;);
btnRicerca.setPreferredSize(new Dimension(98, 26));
btnRicerca.setIcon(new ImageIcon(getClass().getResource(
Home.URL_IMAGES + &quot;Ricerca16.png&quot;)));
btnRicerca.setCursor(Cursor.getPredefinedCursor(Cursor.HAND_CURSOR));
btnRicerca.setName(&quot;btnRicerca&quot;);
btnRicerca.addMouseListener(bcHelp);
}
return btnRicerca;
}

/**
* This method initializes the button to clear the form
* Cultural research.
*
* @return javax.swing.JButton - the button to reset the form.
*/
private JButton getBtnAzzera() {
if (null == btnAzzera) {
btnAzzera = new JButton();
btnAzzera.setText(&quot;Clear&quot;);
btnAzzera.setHorizontalTextPosition(SwingConstants.LEADING);
btnAzzera.setPreferredSize(new Dimension(98, 26));
btnAzzera.setIcon(new ImageIcon(getClass().getResource(
Home.URL_IMAGES + &quot;Azzera16.png&quot;)));
btnAzzera.setName(&quot;btnAzzera&quot;);
btnAzzera.setCursor(Cursor.getPredefinedCursor(Cursor.HAND_CURSOR));
btnAzzera.addMouseListener(bcHelp);
btnAzzera.addActionListener(new ActionListener() {
public void actionPerformed(ActionEvent arg0) {
nomeBC.setText(&quot;&quot;);
pannelloTag.azzera();
}
});
}
return btnAzzera;
}

/**
* This method opens a tab of the selected cultural or opens the
* Window for entering a new cultural object.
*
* @param pbc BeanBeneCulturale - the bean of the cultural property of which
* Want to see the card.
* @param pModifica boolean --
* &lt;ul&gt;
* &lt;li&gt;&lt;i&gt;True&lt;/i&gt; - indicates that you are making a change
* Data cultural.
* &lt;li&gt;&lt;i&gt;False&lt;/i&gt; indicates that you are viewing the card
* The cultural property.
*/
private void OpenOffice.org Messenger MSN Gaim(BeanBeneCulturale pbc, boolean pModifica) {
SchedaBC nuova;
if (pbc == null) {
nuova = new SchedaBC(this);
} else {
for (int i = 0; i &lt; figli.size(); i++) {
SchedaBC corrente = figli.get(i);
if (pbc.getId() == corrente.getId()) {
desktopManager.activateFrame(corrente);
return;
}
}
nuova = new SchedaBC(this, pbc, pModifica);
}
jDesktopPane.add(nuova, Integer.MAX_VALUE);
desktopManager.centerFrame(nuova);
nuova.setVisible(true);
figli.add(nuova);
}

/**
* This method imports the cultural downloaded from the server in
* Table.
*
* @param pRicerca boolean
* &lt;ul&gt;
* &lt;li&gt;&lt;i&gt;True&lt;/i&gt; - include the search parameters.
* &lt;li&gt;&lt;i&gt;False&lt;/i&gt; otherwise.
* &lt;/ul&gt;
*/
private void caricaTabella(boolean pRicerca) {
ArrayList&lt;BeanBeneCulturale&gt; beniculturali = null;
try {
if (pRicerca) {

} else {
beniculturali = gestioneBC.ottieniBeniCulturali();
}
}
// If an error displays an error message.
catch (RemoteException e) {
JLabel error = new JLabel(
&quot;&lt;html&gt;&lt;h2&gt;Unable to communicate with the server eTour.&lt;/h2&gt;&quot;
+ &quot;&lt;h3&gt;&lt;u&gt;The list of cultural goods has been loaded.&lt;/u&gt;&lt;/h3&gt;&quot;
+ &quot;&lt;p&gt;Please try again later.&lt;/p&gt;&quot;
+ &quot;&lt;p&gt;If the error persists, please contact technical support.&lt;/p&gt;&quot;
+ &quot;&lt;p&gt;We apologize for the inconvenience.&lt;/html&gt;&quot;);
ImageIcon err = new ImageIcon(getClass().getResource(
Home.URL_IMAGES + &quot;error48.png&quot;));
JOptionPane.showInternalMessageDialog(this, error, &quot;Error!&quot;,
JOptionPane.ERROR_MESSAGE, err);
} finally {
tableModel = new SitoTableModel(beniculturali);
tableBC.setModel(tableModel);
organizzaRiga();
}
}

/**
* This method loads the tags available in the system and import them into
* Panel tag.
*/
private void caricaTags() {
ArrayList&lt;BeanTag&gt; beanTags = null;
try {
beanTags = tags.ottieniTags();
for (BeanTag b : beanTags) {
pannelloTag.insertTag(b);
}
pannelloTag.repaint();
}
// If an error panel tag remains blank.
catch (RemoteException e) {
}
}

/**
* This method sets the size of columns for the data assets
* Cultural.
*/
private void organizzaRiga() {
// Name
tableBC.getColumnModel().getColumn(0).setPreferredWidth(120);
// Address
tableBC.getColumnModel().getColumn(1).setPreferredWidth(120);
// Phone
tableBC.getColumnModel().getColumn(2).setPreferredWidth(80);
// Location
tableBC.getColumnModel().getColumn(3).setPreferredWidth(80);
// City
tableBC.getColumnModel().getColumn(4).setPreferredWidth(80);
// CAP
tableBC.getColumnModel().getColumn(5).setPreferredWidth(50);
// Test
tableBC.getColumnModel().getColumn(6).setPreferredWidth(30);
// RATINGS
tableBC.getColumnModel().getColumn(7).setPreferredWidth(80);
// POSGEO
tableBC.getColumnModel().getColumn(8).setPreferredWidth(120);
}
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_Categoria</id>
      <content>package unisa.gps.etour.control.fuzzy;

import java.io.Serializable;
import java.util.Hashtable;

public class Category implements Serializable
{

/**
* Class that describes the characteristics of a Category
* Contains a Hashtable that represents the dictionary on
* The category that contains and for each term associated
* In the category values of frequency, distance and relevance.
* Provides methods to access, modify and auxiliary methods.
*/
private static final long serialVersionUID = -8652232946927756089L;
private String name; // name of the category
private Hashtable&lt;String, float[]&gt; termini; // list of terms and their frequencies and distance rilavanza

/**
* Manufacturer:
* Get the category name as a parameter to create
*/
public Category(String Pnom)
{
name = Pnom;
termini = new Hashtable&lt;String, float[]&gt;();
}

/**
* Returns the output Hashtable containing the terms
* With the respective values of frequency, relevance and distance
*/
public Hashtable&lt;String, float[]&gt; getTermini()
{
return termini;
}

/**
* Returns the name of the output category
*/
public String getName()
{
return name;
}

/**
* Get the string as a parameter representing the term
* Of which you want to pick the values of frequency, range and bearing
*/
public float[] getval(String pTermine) throws NullPointerException
{
if (esisteTermine(pTermine))
return termini.get(pTermine);

return null;
}

/**
* Agiunge an end to dizinario category
*/
public void addTermine(String pTermine)
{
termini.put(pTermine, new float[3]);
}

/**
* Agiunge an end to dizinario category
* Seven also the values of frequency, distance and rilavanza
*/
public boolean addTermine(String pTermine, float[] pVal)
{
if ((pVal == null) || (pTermine.equals(&quot;&quot;)))
return false;
termini.put(pTermine, pVal);

return true;
}

/**
* Set the values for the period pTermine
*/
public boolean setValTermine(String pTermine, float[] pVal)
throws NullPointerException
{
if (esisteTermine(pTermine))
{
termini.put(pTermine, pVal);
return true;
}

return false;
}

public void setTermini(Hashtable&lt;String, float[]&gt; pTermini)
{
termini = pTermini;
}

/**
* Returns True if the term is present in
* Dictionary of Category False otherwise
*/
public boolean esisteTermine(String pTermine)
{
try
{
float[] ret = termini.get(pTermine);
if (ret != null)
return true;
}
catch (NullPointerException e)
{
return false;
}

return false;
}

}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_ControlServerLauncher</id>
      <content>package unisa.gps.etour.control;

import java.rmi.RemoteException;
import java.rmi.registry.LocateRegistry;
import java.rmi.registry.Registry;
import java.rmi.server.UnicastRemoteObject;

import unisa.gps.etour.control.GestioneBeniCulturali.GestioneBeniCulturaliComune;
import unisa.gps.etour.control.GestioneBeniCulturali.IGestioneBeniCulturaliComune;

/**
* This is the entry point of the control server. This class is responsible for
* Make the deployment of services on the RMI registry, thus rendering the
* Some services are available and usable.
*
* @Author Michelangelo De Simone
* @Version 0.1 (c) 2007 eTour Project - Copyright by DMI SE @SA Lab - University of Salerno
*/
public class ControlServerLauncher {
/**
* Entry point of ControlServer
*
* @param args The command line parameters
*/
public static void main(String[] args) {
// *** WARNING *** *** WARNING *** EXPERIMENTAL EXPERIMENTAL

try {
// GestioneBeniCulturaliComune is the class that implements the interface IGestioneBeniCulturaliComune,
// This interface on both the client, both the server
GestioneBeniCulturaliComune gBCC = new GestioneBeniCulturaliComune();

// Here you create the stub for the registry, making it clear to the RMI system you are exporting the object on a gBCC
// Anonymous port
IGestioneBeniCulturaliComune stubGBCC = (IGestioneBeniCulturaliComune) UnicastRemoteObject.exportObject(gBCC, 0);

// There shall call the register (default is on localhost) and &quot;bind&quot; (alloy)
Registry registry = LocateRegistry.getRegistry();
registry.bind(&quot;IGestioneBeniCulturaliComune&quot;, stubGBCC);
}
catch (Exception e) {
System.out.println(&quot;Exception:&quot; + e.getLocalizedMessage());
}
}
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_ControlloBeniCulturali</id>
      <content>package unisa.gps.etour.control.GestioneBeniCulturali;

import java.util.Date;
import unisa.gps.etour.bean.BeanBeneCulturale;

/**
* This class has the task of checking the data of a cultural object.
* Various consistency checks are performed, such as length of strings,
* Null reference, dynamic types incorrect.
*
* @Author Michelangelo De Simone
* @Version 0.1
*
* (c) 2007 eTour Project - Copyright by DMI SE @ SA Lab - University of Salerno
*/
public class ControlloBeniCulturali {
/**
* Please consistency check by calling the appropriate methods.
* This method wrappa &quot;all other methods of control with a single call.
* At the first false value the flow is interrupted.
*
* @param bean The PBC of the cultural object to be inspected
* @return boolean The result of the check: true if OK, false otherwise
*/
public static boolean controllaDatiBeneCulturale(BeanBeneCulturale pBC) {
// This method checks the input parameter in the cases
// Null reference or dynamic Wrong
if (pBC == null || !(pBC instanceof BeanBeneCulturale))
return false;

// This method checks if the ID passed as a parameter BeanBeneCulturale
// Is valid or not
if (!controllaIdBeneCulturale(pBC.getId()))
return false;

// This method checks the objects contained in BeanBeneCulturale Date
// As such, a check is made null and reference checks
// On the dynamic.
if (!controllaDateBeneCulturale(pBC))
return false;

// This method checks all the fields in BeanBeneCulturale, research
// Any null references
if (!controllaDatiNulli(pBC))
return false;

// Check the correct length of string, in this case the CAP must
// To force of circumstances than five digits, while the province of two.
// TODO: To be completed
if (pBC.getCap().length() != 5 || pBC.getProvincia().length() != 2)
return false;

return true;
}

/**
* Check for null data in a bean cultural property.
* The check is performed on all fields of the bean.
*
* @param bean The PBC cultural property to be checked
* @return boolean The result of the check: true if there are no null references, false otherwise
*/
public static boolean controllaDatiNulli(BeanBeneCulturale pBC) {
if (pBC.getCap() == null || pBC.getCitta() == null || pBC.getDescrizione() == null || pBC.getGiornoChiusura() == null ||
pBC.getLocalita() == null || pBC.getNome() == null || pBC.getOrarioApertura() == null ||
pBC.getOrarioChiusura() == null || pBC.getProvincia() == null || pBC.getTelefono() == null || pBC.getVia() == null)
return false;

return true;
}

/**
* Check the consistency of dates within this BeanBeneCulturale.
* The check is performed only on objects, while not carried out
* No validity check 'on a date as a cultural object may also have
* Dates later than today (see for example on open exhibitions).
*
* @param The PBC BeanBeneCulturale which check the dates
* @return boolean The result of the check: true if the dates have consistency; false otherwise
*/
public static boolean controllaDateBeneCulturale(BeanBeneCulturale pBC) {
if (pBC.getOrarioApertura() == null || !(pBC.getOrarioApertura() instanceof Date) ||
pBC.getOrarioChiusura() == null || !(pBC.getOrarioChiusura() instanceof Date))
return false;

return true;
}

/**
* Check the ID of BeanBeneCulturale
*
* @param pId Id BeanBeneCulturale be checked
* @return boolean The result of the check: true if the ID is correct, false otherwise
*/
public static boolean controllaIdBeneCulturale(int pId) {
return (pId &gt; 0);
}
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_ControlloDati</id>
      <content>package unisa.gps.etour.util;

import java.awt.image.BufferedImage;
import java.util.Date;

import javax.swing.ImageIcon;

import unisa.gps.etour.bean.BeanBanner;
import unisa.gps.etour.bean.BeanBeneCulturale;
import unisa.gps.etour.bean.BeanConvenzione;
import unisa.gps.etour.bean.BeanMenu;
import unisa.gps.etour.bean.BeanNews;
import unisa.gps.etour.bean.BeanOperatorePuntoDiRistoro;
import unisa.gps.etour.bean.BeanPiatto;
import unisa.gps.etour.bean.BeanPreferenzaDiRicerca;
import unisa.gps.etour.bean.BeanPreferenzeGeneriche;
import unisa.gps.etour.bean.BeanPuntoDiRistoro;
import unisa.gps.etour.bean.BeanTag;
import unisa.gps.etour.bean.BeanTurista;
import unisa.gps.etour.bean.BeanVisitaBC;
import unisa.gps.etour.bean.BeanVisitaPR;

/**
* Class for managing the control of the correctness of the strings
*
* @Author Joseph Penna
* @Version 0.1 (c) 2007 eTour Project - Copyright by DMI SE @ SA Lab --
* University of Salerno
*/
public class ControlloDati {

private static final String letter = &quot;abcdefghijklmnopqrstuvxywz&quot;
+ &quot;ABCDEFGHIJKLMNOPQRSTUVXYWZ&quot;;
private final static String numbers = &quot;0123456789&quot;;

public final static int max_length = 64;

/**
* Static method for verifying correctness of a string
*
* @param pStringa string to check
* @param letterePermesse Boolean: True if it is allowed to be present
* Letters in the string, False otherwise
* @param numeriPermessi Boolean: True if it is allowed to be present
* Numbers in the string, False otherwise
* @param caratteriPermessi string containing all characters
* Allowed in the string
* @param caratteriNecessari string contentente all characters
* Must be present in the string
* @param numeroCaratteriMin integer representing the minimum number of
* Characters allowed in string
* @param numeroCaratteriMax integer representing the maximum number of
* Characters allowed in string
* @return Boolean: True if the witch meets the conditions, False
* Otherwise
*/
public static boolean controllaStringa(String pStringa,
boolean letterePermesse, boolean numeriPermessi,
String caratteriPermessi, String caratteriNecessari,
int numeroCaratteriMin, int numeroCaratteriMax) {
// Chance pStringa == null: the function returns false
if (null == pStringa)
return false;

int lunghezzaStringa = pStringa.length();
char carattereCorrente;

// Check the length of the string
if (lunghezzaStringa &lt; numeroCaratteriMin
|| lunghezzaStringa &gt; numeroCaratteriMax) {
return false;
}

// Check the presence of the necessary characters in the string
if (caratteriNecessari != null) {
if (!caratteriNecessari.equals(&quot;&quot;))
for (int i = 0; i &lt; caratteriNecessari.length(); i++) {
carattereCorrente = caratteriNecessari.charAt(i);
if (!pStringa.contains(carattereCorrente.toString())) {
return false;
}
}
}

// Create the string containing all characters allowed
String stringaCaratteriPermessi = caratteriPermessi
+ caratteriNecessari + (letterePermesse ? letter : &quot;&quot;)
+ (numeriPermessi ? numbers : &quot;&quot;);

// Loop for the inspection of the characters of the string to check
for (int i = 0; i &lt; lunghezzaStringa; i++) {
carattereCorrente = pStringa.charAt(i);

// Condition: If the character you are watching is not
// In the string of characters allowed
// The string is incorrect and out of the loop.
if (!(stringaCaratteriPermessi.contains(carattereCorrente
.toString()))) {
return false;
}
}

return true;
}

public static String correggiStringa(String pStringa,
boolean letterePermesse, boolean numeriPermessi,
String caratteriPermessi, int numeroCaratteriMax) {

if (null == pStringa)
return null;

String stringaCaratteriPermessi = caratteriPermessi
+ (letterePermesse ? letter : &quot;&quot;)
+ (numeriPermessi ? numbers : &quot;&quot;);

char carattereCorrente;
int lunghezzaStringa = pStringa.length();
int i = 0;

while (i &lt; lunghezzaStringa) {
carattereCorrente = pStringa.charAt(i);

if (!(stringaCaratteriPermessi.contains(carattereCorrente
.toString()))) {
pStringa = pStringa.replaceAll(&quot;\\&quot;
+ carattereCorrente.toString(), &quot;&quot;);
lunghezzaStringa = pStringa.length();

} else
i++;
}
if (lunghezzaStringa &gt; numeroCaratteriMax) {
pStringa = pStringa.substring(0, numeroCaratteriMax);
}

return pStringa;
}

public static boolean controllaData(String pData) {
// Still I have no idea how I will spend the time
return true;
}

public static boolean controllaDate(Date pDataInizio, Date pDataFine) {
boolean back = false;
if (pDataInizio != null &amp;&amp; pDataFine != null) {
if (pDataInizio.before(pDataFine))
back = true;
}

return back;
}

public static boolean checkBeanTurista(BeanTurista pTurista) {
if (pTurista != null &amp;&amp; pTurista instanceof BeanTurista)
return true;
return false;
}

public static boolean checkBeanPreferenzaDiRicerca(
BeanPreferenzaDiRicerca pPreferenzaDiRicerca) {
if (pPreferenzaDiRicerca != null
&amp;&amp; pPreferenzaDiRicerca instanceof BeanPreferenzaDiRicerca)
return true;
return true;
}

public static boolean checkBeanPreferenzeGeneriche(
BeanPreferenzeGeneriche pPreferenzeGeneriche) {
if (pPreferenzeGeneriche != null
&amp;&amp; pPreferenzeGeneriche instanceof BeanPreferenzeGeneriche)
return true;
return false;
}

public static boolean checkBeanBeneCulturale(
BeanBeneCulturale pBeneCulturale) {
if (pBeneCulturale != null
&amp;&amp; pBeneCulturale instanceof BeanBeneCulturale)
return true;
return false;
}

public static boolean checkBeanPuntoDiRistoto(
BeanPuntoDiRistoro pPuntoDiRistoro) {
if (pPuntoDiRistoro != null
&amp;&amp; pPuntoDiRistoro instanceof BeanPuntoDiRistoro)
return true;
return false;
}

public static boolean checkBeanOperatorePuntoDiRistoro(
BeanOperatorePuntoDiRistoro pOperaotorePuntoDiRistoro) {
if (pOperaotorePuntoDiRistoro != null
&amp;&amp; pOperaotorePuntoDiRistoro instanceof BeanOperatorePuntoDiRistoro)
return true;
return false;
}

/**
* Please formal control and consistency on the data of the banner
* Content in the bean passed by parameter.
*
* @author Fabio Palladino
* @param pBanner bean contains the data of the banner.
* @return True if the data of the banner is correct false otherwise.
*/
public static boolean checkBeanBanner(BeanBanner pBanner) {
boolean toReturn = false;

if (pBanner != null &amp;&amp; pBanner instanceof BeanBanner) {
toReturn = (pBanner.getId() &gt; 0 &amp;&amp; pBanner.getPercorsoFile() != &quot;&quot; &amp;&amp; pBanner
.getIdPuntoDiRistoro() &gt; 0);
}

return toReturn;
}

/**
* Method which controls the image contained in the object ImageIcon past
* Per parameter.
*
* @author Fabio Palladino
* @param immagine ImageIcon object containing the image to be checked
* @return true if the image contained in the object is an instance ImageIcon
* Class BufferedImage.
*/
public static boolean checkImmagine(ImageIcon immagine) {
if (immagine != null) {
return (immagine.getImage() instanceof BufferedImage);
}
return false;
}

/**
* Function that checks the data in a news;
*
* @author Fabio Palladino
* @param pNews bean containing details of a news.
* @return
*/
public static boolean checkBeanNews(BeanNews pNews) {
boolean toReturn = false;

/* Check the validity of the general method parameter */
if (pNews != null) {
Date dataPubb = pNews.getDataPubblicazione(); // Date of
// Publishing
Date dataScad = pNews.getDataScadenza(); // Due Date
String news = pNews.getNews(); // Text of News
int priority = pNews.getPriorita();

/* Checking the invalidity of the fields */
if (dataPubb != null &amp;&amp; dataScad != null &amp;&amp; news != null) {
/* Check the consistency of the dates */
toReturn = dataPubb.before(dataScad);
/* Check that the text is not empty */
toReturn = toReturn &amp;&amp; (news != &quot;&quot;);
/* Check that the ID is greater than 0 */
toReturn = toReturn &amp;&amp; (pNews.getId() &gt; 0);
/* Check the priority value */
toReturn = toReturn
&amp;&amp; (priority &lt;= CostantiGlobali.MAX_PRIORITY_NEWS)
&amp;&amp; (priority &gt;= CostantiGlobali.MIN_PRIORITY_NEWS);
}
}
return toReturn;
}

public static boolean checkBeanTag(BeanTag ptagi) {
if (ptagi != null &amp;&amp; ptagi instanceof BeanTag)
return true;
return false;
}

public static boolean checkBeanConvenzione(BeanConvenzione pConvenzione) {
if (pConvenzione != null &amp;&amp; pConvenzione instanceof BeanConvenzione)
return true;
return false;
}

public static boolean checkBeanMenu(BeanMenu pMenu) {
if (pMenu != null &amp;&amp; pMenu instanceof BeanMenu)
return true;
return false;
}

public static boolean checkBeanPiatto(BeanPiatto pPiatto) {
if (pPiatto != null &amp;&amp; pPiatto instanceof BeanPiatto)
return true;
return false;
}

public static boolean checkBeanVisitaBC(BeanVisitaBC pVisitaBC) {
if (pVisitaBC != null &amp;&amp; pVisitaBC instanceof BeanVisitaBC)
return true;
return false;
}

public static boolean checkBeanVisitaPR(BeanVisitaPR pVisitaPR) {
if (pVisitaPR != null &amp;&amp; pVisitaPR instanceof BeanVisitaPR)
return true;
return false;
}
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_ControlloDatiAdvertisement</id>
      <content>/**
* Class that contains static methods that perform
* Consistency checks on the data bean banner
* And news.
*
* @Author Fabio Palladino
* @Version 0.1
*
* (c) 2007 eTour Project - Copyright by DMI SE @ SA Lab - University of Salerno
*/
package com.trapan.spg.control.GestioneAdvertisement;

import java.util.Date;

import com.trapan.spg.bean.BeanBanner;
import com.trapan.spg.bean.BeanNews;

public class ControlloDatiAdvertisement
{
/**
* Please formal control and consistency on
* Data content of the banner in the bean passed by parameter.
* @param pBanner bean contains the data of the banner.
* @return
*/
public static boolean controlloBanner(BeanBanner pBanner) {
boolean toReturn = false;

if (pBanner != null) {
toReturn = (pBanner.getId() &gt; 0 &amp;&amp; pBanner.getPercorsoFile() != &quot;&quot;
&amp;&amp; pBanner.getIdPuntoDiRistoro() &gt; 0);
}

return toReturn;
}

/**
* Method that performs consistency checks and
* Correctness of the information contained in the bean past
* Per parameter, in particular check that the dates
* Publication and expiration of the news are consistent,
* Or that the second is the later.
*
* @param pNews bean containing data news
* @return Returns true if the bean contains consistent data
*/
public static boolean controlloNews(BeanNews pNews) {
boolean toReturn = false;

/* Check the validity of the general method parameter */
if (pNews != null) {

Date dataPubb = pNews.getDataPubblicazione(); // Released
Date dataScad = pNews.getDataScadenza(); // Due Date
String news = pNews.getNews(); // Text of News

/* Checking the invalidity of the fields */
if (dataPubb != null &amp;&amp; dataScad != null &amp;&amp; news != null) {
/* Check the consistency of the dates */
toReturn = dataPubb.before(dataScad);

/* Check that the text is not empty */
toReturn = toReturn &amp;&amp; (news != &quot;&quot;);

/* Check that the ID is greater than 0 */
toReturn = toReturn &amp;&amp; (pNews.getId() &gt; 0);

/* Check the priority value */
}
}

return toReturn;
}
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_ControlloVisiteBeniCulturali</id>
      <content>package unisa.gps.etour.control.GestioneBeniCulturali;

import unisa.gps.etour.bean.BeanVisitaBC;

/**
* This class has the task of monitoring data from a cultural visit.
* Various consistency checks are performed, such as length of strings,
* Null reference, dynamic types incorrect.
*
* @Author Michelangelo De Simone
* @Version 0.1
*
* (c) 2007 eTour Project - Copyright by DMI SE @ SA Lab - University of Salerno
*/
public class ControlloVisiteBeniCulturali {
/**
* Please consistency check by calling the appropriate methods
*
* @param pVBC The cultural visit to check
* @return boolean The result of the check: true if OK, false otherwise
*/
public static boolean controllaDatiVisitaBeneCulturale(BeanVisitaBC pVBC) {
// If the bean is null
if (pVBC == null || !(pVBC instanceof BeanVisitaBC))
return false;

// Check the ID of a cultural visit
// And the id of its tourist
if (!(pVBC.getIdBeneCulturale() &gt; 0) || !(pVBC.getIdTurista() &gt; 0))
return false;

// Check the vote (of course ratings are accepted only between 1 and 5
if (!(pVBC.getVoto() &gt;= 1 &amp;&amp; pVBC.getVoto() &lt;= 5))
return false;

// Check for null references in the bean
if (!controllaDatiNulli(pVBC))
return false;

// Check the correct length of string
if (!(pVBC.getCommento().length() &gt; 0))
return false;

return true;
}

/**
* Check for null data in a bean cultural visit
*
* @param pBC The cultural visit to check
* @return boolean The result of the check: true if there are no null references, false otherwise
*/
public static boolean controllaDatiNulli(BeanVisitaBC pBC) {
// Check the nullity of the fields of feedback
if (pBC.getCommento() == null || pBC.getDataVisita() == null)
return false;

return true;
}
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_CostantiGlobali</id>
      <content>package unisa.gps.etour.util;

import java.io.File;

/**
* Class that contains the constants of the environmental system.
*
* @Author Fabio Palladino
* @Version 0.1
*
* (c) 2007 eTour Project - Copyright by DMI SE @ SA Lab - University of Salerno
*/
public class CostantiGlobali
{
/** Highest precedence of news. */
public static final int MAX_PRIORITY_NEWS = 5;
/** Priority least one news. */
public static final int MIN_PRIORITY_NEWS = 1;
/** Maximum number of news on the machine. */
public static final int MAX_NEWS_ATTIVE = 10;
/** Path to directory containing the images
* Banners stored on the server. */
public static final String SERVER_IMAGE_PATH = &quot;c:&quot; +
File.separator + &quot;ImmaginiBanner&quot; + File.separator;
/** URL of the server for RMI calls */
public static final String server_url = &quot;localhost/&quot;;
/** Milliseconds of 30 days */
public static final long TRENTA_GIORNI = 2592000000L;
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_DBBanner</id>
      <content>/**
* Stubs for dynamic class DBBanner. Is used for testing
* Class package GestioneAdvertisement.
*
* @Author Fabio Palladino
* @Version 0.1
*
* (c) 2007 eTour Project - Copyright by DMI SE @ SA Lab - University of Salerno
*/
package unisa.gps.etour.control.GestioneAdvertisement.test.stubs;

import java.sql.SQLException;
import java.util.ArrayList;

import unisa.gps.etour.bean.BeanBanner;
import unisa.gps.etour.repository.IDBBanner;

public class DBBanner implements IDBBanner 
{
private static int NUM_TEST = 0;

public boolean cancellaBanner(int pIdBanner) throws SQLException 
{
if (NUM_TEST == 5) 
{
throw new SQLException();
}
else 
{
return true;
}
}

/* (Non-Javadoc)
* @See unisa.gps.etour.repository.IDBBanner#inserisciBanner(unisa.gps.etour.bean.BeanBanner)
*/
public boolean inserisciBanner(BeanBanner pBanner) throws SQLException 
{
if (NUM_TEST == 1 || NUM_TEST == 2) 
{
return true;
} 
else 
{
return false;
}
}

/* (Non-Javadoc)
* @See unisa.gps.etour.repository.IDBBanner#modificaBanner(unisa.gps.etour.bean.BeanBanner)
*/
public boolean modificaBanner(BeanBanner pBanner) throws SQLException 
{
return true;
}

/* (Non-Javadoc)
* @See unisa.gps.etour.repository.IDBBanner#ottieniBanner(int)
*/
public ArrayList&lt;BeanBanner&gt; ottieniBanner(int pIdPuntoDiRistoro) throws SQLException 
{
ArrayList&lt;BeanBanner&gt; toReturn = new ArrayList&lt;BeanBanner&gt;();

if (NUM_TEST == 1 || NUM_TEST == 2) 
{
/* Must return an ArrayList with 3 elements */
toReturn.add(new BeanBanner());
toReturn.add(new BeanBanner());
toReturn.add(new BeanBanner());
return toReturn;
}
else if (NUM_TEST == 4) 
{
toReturn.add(new BeanBanner(3, &quot;c:\\ProvaBannerInserimento.jpg&quot;, 55));
toReturn.add(new BeanBanner(4, &quot;c:\\ProvaBannerInserimento.jpg&quot;, 55));
toReturn.add(new BeanBanner(5, &quot;c:\\ProvaBannerInserimento.jpg&quot;, 55));
toReturn.add(new BeanBanner(5, &quot;c:\\ProvaBannerInserimento.jpg&quot;, 55));
return toReturn;
} 
else 
{
return null;
}
}

/* (Non-Javadoc)
* @See unisa.gps.etour.repository.IDBBanner#ottieniBannerDaID(int)
*/
public BeanBanner ottieniBannerDaID(int pIdBanner) throws SQLException 
{
if (NUM_TEST == 7) 
{
return null;
}
else 
{
return new BeanBanner(55, &quot;c://ProvaBanner.jpg&quot;, 3);
}
}

public static void setNUM_TEST(int num_test) 
{
NUM_TEST = num_test;
}
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_DBBeneCulturale</id>
      <content>package unisa.gps.etour.control.GestioneBeniCulturali.test.stub;

import java.sql.SQLException;
import java.util.ArrayList;
import unisa.gps.etour.bean.BeanBeneCulturale;
import unisa.gps.etour.bean.BeanTag;
import unisa.gps.etour.repository.IDBBeneCulturale;
import unisa.gps.etour.util.Punto3D;

public class DBBeneCulturale implements IDBBeneCulturale
{
private ArrayList&lt;BeanBeneCulturale&gt; b;

public DBBeneCulturale()
{
b = new ArrayList&lt;BeanBeneCulturale&gt;(0);
}

public boolean cancellaBeneCulturale(int pIdBene) throws SQLException
{
boolean res = false;

for (int i = 0; i &lt; b.size(); i++)
if (b.get(i).getId() == pIdBene)
{
b.remove(i);
res = true;
}

return res;
}

public boolean inserisciBeneCulturale(BeanBeneCulturale pBene)
throws SQLException
{
return (b.add(pBene));
}

public boolean modificaBeneCulturale(BeanBeneCulturale pBene)
throws SQLException
{
boolean res = false;

for (int i = 0; i &lt; b.size(); i++)
if (b.get(i).getId() == pBene.getId())
{
b.set(i, pBene);
return true;
}

return res;
}

public BeanBeneCulturale ottieniBeneCulturale(int pid) throws SQLException
{
BeanBeneCulturale res = null;

for (int i = 0; i &lt; b.size(); i++)
if (b.get(i).getId() == pid)
res = b.get(i);

return res;
}

public ArrayList&lt;BeanBeneCulturale&gt; ottieniListaBC() throws SQLException
{
return b;
}

public int ottieniNumeroElementiRicerca(String pKeyword,
ArrayList&lt;BeanTag&gt; pTags, Punto3D pPosizione,
double pDistanzaMassima) throws SQLException
{
// TODO Auto-generated method stub
return 0;
}

public int ottieniNumeroElementiRicercaAvanzata(int pIdTurista,
String pKeyword, ArrayList&lt;BeanTag&gt; pTags, Punto3D pPosizione,
double pDistanzaMassima) throws SQLException
{
// TODO Auto-generated method stub
return 0;
}

public ArrayList&lt;BeanBeneCulturale&gt; search(String pKeyword,
ArrayList&lt;BeanTag&gt; pTags, int pNumPagina,
int pNumeroElementiPerPagina, Punto3D pPosizione,
double pDistanzaMassima) throws SQLException
{
// TODO Auto-generated method stub
return null;
}

public ArrayList&lt;BeanBeneCulturale&gt; ricercaAvanzata(int pIdTurista,
String pKeyword, ArrayList&lt;BeanTag&gt; pTags, int pNumPagina,
int pNumeroElementiPerPagina, Punto3D pPosizione,
double pDistanzaMassima) throws SQLException
{
// TODO Auto-generated method stub
return null;
}
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_DBConnessionePool</id>
      <content>package unisa.gps.etour.repository;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;
import java.util.ArrayList;
import java.util.List;

/**
* Class that creates the connection to the database using JDBC and
* Allows you to query both read and edit the contents of
* Database. E 'implemented to provide a pool of connections to
* Provide a connection to each thread.
*
* @Author Mauro Miranda
* @Version 0.1 2007 eTour Project - Copyright by SE @ SA Lab DMI University
* Of Salerno
*/
public class DBConnessionePool {
private final static String driver = &quot;com.mysql.jdbc.Driver&quot;;
private final static String urlConnessione = &quot;jdbc: mysql: / / localhost / eTour? user = &amp; password = mauro mauro&quot;;
private static List&lt;Connection&gt; connessioniLibere;

/* Private constructor that initiates the connection to the database */

/*
* Static initialization block is used to load the driver
* Memory
*/
static {
connessioniLibere = new ArrayList&lt;Connection&gt;();
try {
Class.forName(driver);
} catch (ClassNotFoundException e) {
e.printStackTrace();
}
}

/**
* Method to get the connection to the server.
*
* @Return Returns the database connection
* @Throws SQLException
*/
public static synchronized Connection ottieniConnessione()
throws SQLException {
Connection connection;

if (!connessioniLibere.isEmpty()) {
// Extract a connection from the free db connection queue
connection = connessioniLibere.get(0);
DBConnessionePool.connessioniLibere.remove(0);

try {
// If the connection is not valid, a new connection will be
// Analyzed
if (connection.isClosed())
connection = DBConnessionePool.ottieniConnessione();
} catch (SQLException e) {
connection = DBConnessionePool.ottieniConnessione();
}
} else
// The free db connection queue is empty, so a new connection will
// Be created
connection = DBConnessionePool.creaDBConnessione();

return connection;
}

public static void rilasciaConnessione(Connection pReleasedConnection) {
// Add the connection to the free db connection queue
DBConnessionePool.connessioniLibere.add(pReleasedConnection);
}

private static Connection creaDBConnessione() throws SQLException {
Connection nuovaConnessione = null;
// Create a new db connection using the db properties
nuovaConnessione = DriverManager.getConnection(urlConnessione);
nuovaConnessione.setAutoCommit(true);
return nuovaConnessione;
}
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_DBConvenzione</id>
      <content>/**
* Attribute_Definition
*
* @Author Fabio Palladino
* @Version 0.1
*
* (c) 2007 eTour Project - Copyright by DMI SE @ SA Lab - University of Salerno
*/
package unisa.gps.etour.control.GestioneAdvertisement.test.stubs;

import java.sql.SQLException;
import java.util.ArrayList;
import java.util.Date;

import unisa.gps.etour.bean.BeanConvenzione;
import unisa.gps.etour.bean.BeanPuntoDiRistoro;
import unisa.gps.etour.repository.IDBConvenzione;

public class DBConvenzione implements IDBConvenzione
{
private static int NUM_TEST = 1;

/* (Non-Javadoc)
* @See unisa.gps.etour.repository.IDBConvenzione#cancellaConvenzione(int)
*/
public boolean cancellaConvenzione(int pIdConvenzione) throws SQLException
{
// TODO Auto-generated method stub
return false;
}

/* (Non-Javadoc)
* @See unisa.gps.etour.repository.IDBConvenzione#getStoricoConvenzione(int)
*/
public ArrayList&lt;BeanConvenzione&gt; ottieniStoricoConvenzione(int idPuntoDiRistoro)
throws SQLException
{
// TODO Auto-generated method stub
return null;
}

/* (Non-Javadoc)
* @See unisa.gps.etour.repository.IDBConvenzione#inserisciConvenzione(unisa.gps.etour.bean.BeanConvenzione)
*/
public boolean inserisciConvenzione(BeanConvenzione pConvenzione)
throws SQLException
{
// TODO Auto-generated method stub
return false;
}

/* (Non-Javadoc)
* @See unisa.gps.etour.repository.IDBConvenzione#modificaConvenzione(unisa.gps.etour.bean.BeanConvenzione)
*/
public boolean modificaConvenzione(BeanConvenzione pConvenzione)
throws SQLException
{
// TODO Auto-generated method stub
return false;
}

/* (Non-Javadoc)
* @See unisa.gps.etour.repository.IDBConvenzione#ottieniConvezioneAttiva(int)
*/
public BeanConvenzione ottieniConvezioneAttiva(int pIdPuntoDiRistoro)
throws SQLException
{
BeanConvenzione convenzione = new BeanConvenzione();
convenzione.setAttiva(true);
convenzione.setDataFine(new Date());
convenzione.setDataInizio(new Date());
convenzione.setId(12);
convenzione.setIdPuntoDiRistoro(3);
convenzione.setPrezzo(100);

if (NUM_TEST == 1)
{
/* Test banners allowed */
convenzione.setMaxBanner(4);
return convenzione;
}
else if (NUM_TEST == 2)
{
/* Test banners not allowed */
convenzione.setMaxBanner(3);
return convenzione;
} 
else 
{
return null;
}
}

/* (Non-Javadoc)
* @See unisa.gps.etour.repository.IDBConvenzione#ottieniListaConvenzioneAttivaPR()
*/
public ArrayList&lt;BeanPuntoDiRistoro&gt; ottieniListaConvenzioneAttivaPR()
throws SQLException
{
// TODO Auto-generated method stub
return null;
}

public static void setNUM_TEST(int num_test)
{
NUM_TEST = num_test;
}
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_DBMenu</id>
      <content>package unisa.gps.etour.repository;

import java.sql.Connection;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import java.util.ArrayList;

import unisa.gps.etour.bean.BeanMenu;

/**
* Class that implements the interface Menu
*
* @Author Joseph Martone
* @Version 0.1 2007 eTour Project - Copyright by SE @SA Lab DMI University
* Of Salerno
*/
public class DBMenu implements IDBMenu {
// Empty constructor
public DBMenu() {

}

public boolean cancellaMenu(int pIdMenu) throws SQLException {
// Variables for database connection
Connection conn = null;
// Variable for the query
Statement stat = null;
try {
// Get the connection
conn = DBConnessionePool.ottieniConnessione();
// Create the Statement
stat = conn.createStatement();
// Query cancellation
String query = &quot;DELETE FROM menu WHERE id =&quot; + pIdMenu;
// You run the query Cancellation
int i = stat.executeUpdate(query);
// This returns the backup
return (i == 1);
}
// Is always done and takes care of closing the Statement and the
// Connect
finally {
if (stat == null) {
stat.close();
}
if (conn != null) {
DBConnessionePool.rilasciaConnessione(conn);
}
}
}

public boolean inserisciMenu(BeanMenu pMenu) throws SQLException {
// Variables for database connection
Connection conn = null;
// Variable for the query
Statement stat = null;
try {
// Get the connection
conn = DBConnessionePool.ottieniConnessione();
// Create the Statement
stat = conn.createStatement();
// Query for the insertion
String query = &quot;INSERT INTO menu (Day, IdPuntoDiRistoro) VALUES ('&quot;
+ pMenu.getGiorno()
+ &quot;',&quot;
+ pMenu.getIdPuntoDiRistoro()
+ &quot;)&quot;;
// You run the insert query
int i = stat.executeUpdate(query);
// This returns the backup
return (i == 1);
}
// Always runs and takes care of closing the Statement and the
// Connect
finally {
if (stat == null) {
stat.close();
}
if (conn != null) {
DBConnessionePool.rilasciaConnessione(conn);
}
}
}

public boolean modificaMenu(BeanMenu pMenu) throws SQLException {
// Variables for database connection
Connection conn = null;
// Variable for the query
Statement stat = null;
try {
// Get the connection
conn = DBConnessionePool.ottieniConnessione();
// Create the Statement
stat = conn.createStatement();
// Query for amendment
String query = &quot;UPDATE menu SET&quot; + &quot;Date = '&quot;
+ pMenu.getGiorno() + &quot; 'WHERE Id =&quot; + pMenu.getId();
// You run the query for Change
int i = stat.executeUpdate(query);
// This returns the backup
return (i == 1);
}
// Is always done and takes care of closing the Statement and the
// Connect
finally {
if (stat == null) {
stat.close();
}
if (conn != null) {
DBConnessionePool.rilasciaConnessione(conn);
}
}
}

public ArrayList&lt;BeanMenu&gt; ottieniMenu(int pIdPuntoDiRistoro)
throws SQLException {
// Variables for database connection
Connection conn = null;
// Variable for the query
Statement stat = null;
// Variable for the query results
ResultSet result = null;
try {
// Get the connection
conn = DBConnessionePool.ottieniConnessione();
// Create the Statement
stat = conn.createStatement();
// Query to extract the list of Menu
String query = &quot;SELECT * FROM menu WHERE IdPuntoDiRistoro =&quot;
+ pIdPuntoDiRistoro;
// The query is executed
result = stat.executeQuery(query);
// List that will contain all BeanMenu obtained
ArrayList&lt;BeanMenu&gt; list = new ArrayList&lt;BeanMenu&gt;();
// We extract the results from the result set and moves in
// List
// To be returned
while (result.next()) {
// Fill the list
list.add(new BeanMenu(result.getInt(&quot;Id&quot;), result
.getString(&quot;Day&quot;), result
.getInt(&quot;IdPuntoDiRistoro&quot;)));
}
// Return the list
return list;
}
// Is always done and takes care to close the Result, the Statement
// And Connection
finally {
if (result != null) {
result.close();
}
if (stat == null) {
stat.close();
}
if (conn != null) {
DBConnessionePool.rilasciaConnessione(conn);
}
}
}

public BeanMenu ottieniMenuDelGiorno(int pIdPuntoDiRistoro, String pGiorno)
throws SQLException {
// Variables for database connection
Connection conn = null;
// Variable for the query
Statement stat = null;
// Variable for the query results
ResultSet result = null;
try {
// Get the connection
conn = DBConnessionePool.ottieniConnessione();
// Create the Statement
stat = conn.createStatement();
// Query for the extraction of Daily Menu
String query = &quot;SELECT * FROM menu WHERE IdPuntoDiRistoro =&quot;
+ pIdPuntoDiRistoro + &quot;AND day = '&quot; + pGiorno + &quot;'&quot;;
// The query is executed
result = stat.executeQuery(query);
// Get the bean of the daily menu based on the ID of the point of
// Dining and a day
BeanMenu beanTemp = null;
if (result.next()) {
// Create the proceeds Bean
beanTemp = new BeanMenu(result.getInt(&quot;Id&quot;), result
.getString(&quot;Day&quot;), result.getInt(&quot;IdPuntoDiRistoro&quot;));
}
// Return the Bean obtained
return beanTemp;
}
// Is always done and takes care to close the Result, the Statement
// And Connection
finally {
if (result != null) {
result.close();
}
if (stat == null) {
stat.close();
}
if (conn != null) {
DBConnessionePool.rilasciaConnessione(conn);
}
}
}
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_DBNews</id>
      <content>/**
* Stubs used for testing the class GestioneAdvertisementAgenzia
*
* @Author Fabio Palladino
* @Version 0.1
*
* (c) 2007 eTour Project - Copyright by DMI SE @ SA Lab - University of Salerno
*/
package unisa.gps.etour.control.GestioneAdvertisement.test.stubs;

import java.sql.SQLException;
import java.util.ArrayList;

import unisa.gps.etour.bean.BeanNews;
import unisa.gps.etour.repository.IDBNews;
import unisa.gps.etour.util.CostantiGlobali;

public class DBNews implements IDBNews
{
/** Static field that stores the number of test */
private static int NUM_TEST = 0;

/* (Non-Javadoc)
* @See unisa.gps.etour.repository.IDBNews#cancellaNews(int)
*/
public boolean cancellaNews(int pIdNews) throws SQLException
{
if (NUM_TEST == 1) {
return true;
} else if (NUM_TEST == 2) {
throw new SQLException();
}
return true;
}

/* (Non-Javadoc)
* @See unisa.gps.etour.repository.IDBNews#inserisciNews(unisa.gps.etour.bean.BeanNews)
*/
public boolean inserisciNews(BeanNews Pnews) throws SQLException
{
if (NUM_TEST == 7) {
return false;
} else {
return true;
}
}

/* (Non-Javadoc)
* @See unisa.gps.etour.repository.IDBNews#modificaNews(unisa.gps.etour.bean.BeanNews)
*/
public boolean modificaNews(BeanNews Pnews) throws SQLException
{
return true;
}

/* (Non-Javadoc)
* @See unisa.gps.etour.repository.IDBNews#ottieniNews()
*/
public ArrayList&lt;BeanNews&gt; ottieniNews() throws SQLException
{
ArrayList&lt;BeanNews&gt; toReturn = new ArrayList&lt;BeanNews&gt;();

if (NUM_TEST == 5) {
for (int i = 1; i &lt;= CostantiGlobali.MAX_NEWS_ATTIVE; i++) {
toReturn.add(new BeanNews());
}
return toReturn;
} else {
toReturn.add(new BeanNews());
return toReturn;
}
}

/**
* Set the number of tests in progress
*
* @param num_test
*/
public static void setNUM_TEST(int num_test)
{
NUM_TEST = num_test;
}
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_DBOperatoreAgenzia</id>
      <content>/**
* Class that implements the Agency's Operator
*
* @Author Joseph Martone
* @Version 0.1
*
* (c) 2007 eTour Project - Copyright by DMI SE @ SA Lab - University of Salerno
*/
package unisa.gps.etour.repository;

import java.sql.Connection;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;

import unisa.gps.etour.bean.BeanOperatoreAgenzia;

public class DBOperatoreAgenzia implements IDBOperatoreAgenzia
{

/* (Non-Javadoc)
* @See unisa.gps.etour.repository.IDBOperatoreAgenzia#ottieniOperatoreAgenzia(int)
*/
public BeanOperatoreAgenzia ottieniOperatoreAgenzia(String pUsername)
throws SQLException
{
// Connect to database
Connection conn = null;
// Statement for running queries
Statement stat = null;
// Resut set where the output of the query is inserted
ResultSet result = null;
// Try block which performs the query and the database connection
try
{
// You get the database connection from the pool
conn = DBConnessionePool.ottieniConnessione();
// Create the statement
stat = conn.createStatement();
// Query
String query = &quot;SELECT * FROM operatoreagenzia WHERE Username = '&quot;
+ pUsername + &quot;'&quot;;
result = stat.executeQuery(query);
BeanOperatoreAgenzia oa = null;
if (result.next())
{
// Build the bean when the query returns a
// Value
// Otherwise will return null
oa = new BeanOperatoreAgenzia();
oa.setId(result.getInt(&quot;Id&quot;));
oa.setUsername(result.getString(&quot;Username&quot;));
oa.setNome(result.getString(&quot;Name&quot;));
oa.setCognome(result.getString(&quot;Name&quot;));
oa.setPassword(result.getString(&quot;Password&quot;));
}
return oa;
}
// Finally block that contains the instructions to close the connections
// Hyenas run in any case
finally
{
// This closes the result set only if and 'the query was made
if (result != null)
{
result.close();
}
// This closes the if statement and 'opened
if (stat != null)
{
stat.close();
}
// It returns the connection to the pool if and 'opened
if (conn != null)
{
DBConnessionePool.rilasciaConnessione(conn);
}
}
}

/* (Non-Javadoc)
* @See unisa.gps.etour.repository.IDBOperatoreAgenzia#modificaPassword(java.lang.String)
*/
public boolean modificaPassword(BeanOperatoreAgenzia poa) throws SQLException
{
// Connect to database
Connection conn = null;
// Statement for running queries
Statement stat = null;
// Try block which performs the query and the database connection
try
{
// You get the database connection from the pool
conn = DBConnessionePool.ottieniConnessione();
// Create the statement
stat = conn.createStatement();

// Query
String query = &quot;UPDATE operatoreagenzia SET&quot; + &quot;Password = '&quot;
+ poa.getPassword() + &quot;' WHERE Id =&quot; + poa.getId();
// You run the query
int i = stat.executeUpdate(query);

return (i == 1);
}
// Finally block that contains the instructions to close the connections
// Hyenas run in any case
finally
{
// This closes the if statement and 'opened
if (stat != null)
{
stat.close();
}
// It returns the connection to the pool if and 'opened
if (conn != null)
{
DBConnessionePool.rilasciaConnessione(conn);
}
}
}
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_DBOperatorePuntoDiRistoro</id>
      <content>package unisa.gps.etour.repository;

import Java.sql.Connection;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;

import unisa.gps.etour.bean.BeanOperatorePuntoDiRistoro;

/**
* Class that implements the interface Operator Refreshment
*
* @Author Joseph Martone
* @Version 0.1 2007 eTour Project - Copyright by SE @SA Lab DMI University
* Of Salerno
*/
public class DBOperatorePuntoDiRistoro implements IDBOperatorePuntoDiRistoro {
// Empty constructor
public DBOperatorePuntoDiRistoro() {

}

public boolean cancellaOperatorePuntoDiRistoro(int pIdOperatore)
throws SQLException {
// Variables for database connection
Connection conn = null;
// Variable for the query
Statement stat = null;
try {
// Get connection
conn = DBConnessionePool.ottieniConnessione();
// Create the Statement
stat = conn.createStatement();
// Query cancellation
String query = &quot;DELETE FROM operatorepuntodiristoro WHERE Id =&quot;
+ pIdOperatore;
// You run the query Cancellation
int i = stat.executeUpdate(query);
// This returns the backup
return (i == 1);
}
// Always runs and takes care of closing the Statement and the
// Connect
finally {
if (stat != null) {
stat.close();
}
if (conn != null) {
DBConnessionePool.rilasciaConnessione(conn);
}
}
}

public boolean inserisciOperatorePuntoDiRistoro(
BeanOperatorePuntoDiRistoro pOperatore) throws SQLException {
// Variables for database connection
Connection conn = null;
// Variable for the query
Statement stat = null;
// Variable for the query results
ResultSet unico = null;
try {
// Get the connection
conn = DBConnessionePool.ottieniConnessione();
// Create the Statement
stat = conn.createStatement();
// Query for the insertion
String query = &quot;INSERT INTO operatorepuntodiristoro (Name, Surname,&quot;
+ &quot;Username, Password, Email, IdPuntoDiRistoro) VALUES ('&quot;
+ pOperatore.getNome() + &quot;','&quot; + pOperatore.getCognome()
+ &quot;','&quot; + pOperatore.getUsername() + &quot;','&quot;
+ pOperatore.getPassword() + &quot;','&quot; + pOperatore.getEmail()
+ &quot;',&quot; + pOperatore.getIdPuntoDiRistoro() + &quot;)&quot;;
// Query for checking the ID of the PuntoDiRistoro as
// The association is 1 to 1 between OPPR and PR
String shops = &quot;SELECT IdPuntoDiRistoro FROM operatorepuntodiristoro WHERE IdPuntoDiRistoro =&quot;
+ pOperatore.getIdPuntoDiRistoro();
// Execute the query to control
unico = stat.executeQuery(shops);
int j = 0;
// Check if there are tuples
while (unico.next())
j++;
// If it is empty
if (j == 0) {
// You run the insert query
int i = stat.executeUpdate(query);
// This returns the backup
System.out.println(&quot;If you include the PR&quot;);
return (i == 1);
}
// If not already exist
else {
System.out.println(&quot;Operator PR already exists for the PR&quot;);
return false;
}
}
// Always runs and takes care of closing the Statement and the
// Connect
finally {
if (stat != null) {
stat.close();
}
if (conn != null) {
DBConnessionePool.rilasciaConnessione(conn);
}
if (unico != null) {
unico.close();
}
}
}

public boolean modificaOperatorePuntoDiRistoro(
BeanOperatorePuntoDiRistoro pOperatore) throws SQLException {
// Variables for database connection
Connection conn = null;
// Variable for the query
Statement stat = null;
try {
// Get the connection
conn = DBConnessionePool.ottieniConnessione();
// Create the Statement
stat = conn.createStatement();
// Query for amendment
String query = &quot;UPDATE operatorepuntodiristoro SET&quot; + &quot;Name = '&quot;
+ pOperatore.getNome() + &quot;', Name ='&quot;
+ pOperatore.getCognome() + &quot;', password ='&quot;
+ pOperatore.getPassword() + &quot;', Email ='&quot;
+ pOperatore.getEmail() + &quot;' WHERE IdPuntoDiRistoro =&quot;
+ pOperatore.getIdPuntoDiRistoro();
// You run the query for Change
int i = stat.executeUpdate(query);
// This returns the backup
return (i == 1);
}
// Always runs and takes care of closing the Statement and the
// Connect
finally {
if (stat != null) {
stat.close();
}
if (conn != null) {
DBConnessionePool.rilasciaConnessione(conn);
}
}
}

public BeanOperatorePuntoDiRistoro ottieniOperatorePuntoDiRistoro(
int pIdOperatore) throws SQLException {

// Variables for database connection
Connection conn = null;
// Variable for the query
Statement stat = null;
// Variable for the query results
ResultSet result = null;
try {
// Get the connection
conn = DBConnessionePool.ottieniConnessione();
// Create the Statement
stat = conn.createStatement();
// Query for the extraction of the dot Refreshments required
String query = &quot;SELECT * FROM WHERE id = operatorepuntodiristoro&quot;
+ pIdOperatore;
// The query is executed
result = stat.executeQuery(query);
// Get the bean Operator refreshment passing the id
BeanOperatorePuntoDiRistoro beanTemp = null;
if (result.next()) {
// Built on BeanOPR
beanTemp = new BeanOperatorePuntoDiRistoro(result.getInt(&quot;Id&quot;),
result.getString(&quot;Name&quot;), result.getString(&quot;Name&quot;),
result.getString(&quot;Username&quot;), result
.getString(&quot;Password&quot;), result
.getString(&quot;Email&quot;), result
.getInt(&quot;IdPuntoDiRistoro&quot;));
}
return beanTemp;
}
// Exception if there is an error
catch (Exception e) {
throw new SQLException();
}
// Always runs and takes care to close the Result, the Statement
// And Connection
finally {
if (result != null) {
result.close();
}
if (stat != null) {
stat.close();
}
if (conn != null) {
DBConnessionePool.rilasciaConnessione(conn);
}
}
}
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_DBPiatto</id>
      <content>package unisa.gps.etour.repository;

import java.sql.Connection;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import java.util.ArrayList;

import unisa.gps.etour.bean.BeanPiatto;

/**
* Class that implements the interface plate
*
* @Author Joseph Martone
* @Version 0.1 2007 eTour Project - Copyright by SE @SA Lab DMI University
* Of Salerno
*/
public class DBPiatto implements IDBPiatto
{
// Empty constructor
public DBPiatto()
{

}

public boolean cancellaPiatto(int pIdPiatto) throws SQLException
{
// Variables for database connection
Connection conn = null;
// Variable for the query
Statement stat = null;
try
{
// Get the connection
conn = DBConnessionePool.ottieniConnessione();
// Create the Statement
stat = conn.createStatement();
// Query cancellation
String query = &quot;DELETE FROM courses WHERE ID =&quot; + pIdPiatto;
// You run the query Cancellation
int i = stat.executeUpdate(query);
// This returns the backup
return (i == 1);
}
// Always runs and takes care of closing the Statement and the
// Connect
finally
{
if (stat != null)
{
stat.close();
}
if (conn != null)
{
DBConnessionePool.rilasciaConnessione(conn);
}
}
}

public boolean inserisciPiatto(BeanPiatto pPiatto) throws SQLException
{
// Variables for database connection
Connection conn = null;
// Variable for the query
Statement stat = null;
try
{
// Get the connection
conn = DBConnessionePool.ottieniConnessione();
// Create the Statement
stat = conn.createStatement();
// Query for the insertion
String query = &quot;INSERT INTO courses (Name, Price, IdMenu) VALUES ('&quot;
+ pPiatto.getNome() + &quot;', &quot; + pPiatto.getPrezzo() + &quot;, &quot;
+ pPiatto.getIdMenu() + &quot;)&quot;;
// You run the insert query
int i = stat.executeUpdate(query);
// This returns the backup
return (i == 1);
}
// Always runs and takes care of closing the Statement and the
// Connect
finally
{
if (stat != null)
{
stat.close();
}
if (conn != null)
{
DBConnessionePool.rilasciaConnessione(conn);
}
}
}

public boolean modificaPiatto(BeanPiatto pPiatto) throws SQLException
{
// Variables for database connection
Connection conn = null;
// Variable for the query
Statement stat = null;
try
{
// Get the connection
conn = DBConnessionePool.ottieniConnessione();
// Create the Statement
stat = conn.createStatement();
// Query for amendment
String query = &quot;UPDATE courses SET &quot; + &quot;Name = '&quot;
+ pPiatto.getNome() + &quot;', Price =&quot; + pPiatto.getPrezzo()
+ &quot;, IdMenu =&quot; + pPiatto.getIdMenu() + &quot; WHERE Id =&quot;
+ pPiatto.getId();
// You run the query for Change
int i = stat.executeUpdate(query);
// This returns the backup
return (i == 1);
}
// Always runs and takes care of closing the Statement and the
// Connect
finally
{
if (stat != null)
{
stat.close();
}
if (conn != null)
{
DBConnessionePool.rilasciaConnessione(conn);
}
}
}

public ArrayList&lt;BeanPiatto&gt; ottieniPiatto(int pIdMenu) throws SQLException
{
// Variables for database connection
Connection conn = null;
// Variable for the query
Statement stat = null;
// Variable for the query results
ResultSet result = null;
try
{
// Get the connection
conn = DBConnessionePool.ottieniConnessione();
// Create the Statement
stat = conn.createStatement();
// Query to extract the list of dishes given the id of the Menu
String query = &quot;SELECT * FROM courses WHERE IdMenu =&quot; + pIdMenu;
// The query is executed
result = stat.executeQuery(query);
// List that contains all the plates obtained
ArrayList&lt;BeanPiatto&gt; list = new ArrayList&lt;BeanPiatto&gt;();
// We extract the results from the result set and moves in
// List
// To be returned
while (result.next())
{
// Add the list BeanPiatto
list.add(new BeanPiatto(result.getInt(&quot;Price&quot;), result
.getString(&quot;Name&quot;), result.getInt(&quot;IdMenu&quot;), result
.getInt(&quot;id&quot;)));
}
return list;
}
// Always runs and takes care to close the Result, the Statement
// And Connection
finally
{
if (result != null)
{
result.close();
}
if (stat != null)
{
stat.close();
}
if (conn != null)
{
DBConnessionePool.rilasciaConnessione(conn);
}
}
}
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_DBPreferenzeDiRicerca</id>
      <content>package unisa.gps.etour.repository;

import java.sql.Connection;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import java.util.ArrayList;

import unisa.gps.etour.bean.BeanPreferenzaDiRicerca;

/**
* Class that implements the interface PreferenzeDiRicerca
*
* @Author Joseph Martone
* @Version 0.1 2007 eTour Project - Copyright by SE @SA Lab DMI University
* Of Salerno
*/
public class DBPreferenzeDiRicerca implements IDBPreferenzeDiRicerca {
// Empty constructor
public DBPreferenzeDiRicerca() {
}

public boolean cancellaPreferenzaDiRicerca(int pIdPreferenza)
throws SQLException {
// Variables for database connection
Connection conn = null;
// Variable for the query
Statement stat = null;
try {
// Get the connection
conn = DBConnessionePool.ottieniConnessione();
// Create the Statement
stat = conn.createStatement();
// Query cancellation
String query = &quot;DELETE FROM preferenzediricerca WHERE Id =&quot;
+ pIdPreferenza;
// You run the query Cancellation
int i = stat.executeUpdate(query);
// This returns the backup
return (i == 1);
}
// Always runs and takes care of closing the Statement and the
// Connect
finally {
if (stat != null) {
stat.close();
}
if (conn != null) {
DBConnessionePool.rilasciaConnessione(conn);
}
}
}

public boolean cancellaPreferenzaDiRicercaBC(int pIdBeneCulturale,
int pIdPreferenzaDiRicerca) throws SQLException {
// Variables for database connection
Connection conn = null;
// Variable for the query
Statement stat = null;
try {
// Get the connection
conn = DBConnessionePool.ottieniConnessione();
// Create the Statement
stat = conn.createStatement();
// Query cancellation
String query = &quot;DELETE FROM associazionebc WHERE IdPreferenzeDiRicerca =&quot;
+ pIdPreferenzaDiRicerca
+ &quot; AND IdBeneCulturale =&quot;
+ pIdBeneCulturale;
// You run the query Cancellation
int i = stat.executeUpdate(query);
// This returns the backup
return (i == 1);
}
// Always runs and takes care of closing the Statement and the
// Connect
finally {
if (stat != null) {
stat.close();
}
if (conn != null) {
DBConnessionePool.rilasciaConnessione(conn);
}
}
}

public boolean cancellaPreferenzaDiRicercaPR(int pIdPuntoDiRistoro,
int pIdPreferenza) throws SQLException {
// Variables for database connection
Connection conn = null;
// Variable for the query
Statement stat = null;
try {
// Get the connection
conn = DBConnessionePool.ottieniConnessione();
// Create the Statement
stat = conn.createStatement();
// Query cancellation
String query = &quot;DELETE FROM associazionepr WHERE IdPreferenzeDiRicerca =&quot;
+ pIdPreferenza
+ &quot; AND IdPuntoDiRistoro =&quot;
+ pIdPuntoDiRistoro;
// You run the query Cancellation
int i = stat.executeUpdate(query);
// This returns the backup
return (i == 1);
}
// Always runs and takes care of closing the Statement and the
// Connect
finally {
if (stat != null) {
stat.close();
}
if (conn != null) {
DBConnessionePool.rilasciaConnessione(conn);
}
}
}

public boolean cancellaPreferenzaDiRicercaTurista(int pIdTurista,
int pIdPreferenza) throws SQLException {
// Variables for database connection
Connection conn = null;
// Variable for the query
Statement stat = null;
try {
// Get the connection
conn = DBConnessionePool.ottieniConnessione();
// Create the Statement
stat = conn.createStatement();
// Query cancellation
String query = &quot;DELETE FROM rating WHERE IdTurista =&quot;
+ pIdTurista + &quot; AND IdPreferenzeDiRicerca =&quot;
+ pIdPreferenza;
// You run the query Cancellation
int i = stat.executeUpdate(query);
// This returns the backup
return (i == 1);
}
// Always runs and takes care of closing the Statement and the
// Connect
finally {
if (stat != null) {
stat.close();
}
if (conn != null) {
DBConnessionePool.rilasciaConnessione(conn);
}
}
}

public boolean inserisciPreferenzaDiRicercaDelBC(int pIdBeneCulturale,
int pIdPreferenzaDiRicerca) throws SQLException {
// Variables for database connection
Connection conn = null;
// Variable for the query
Statement stat = null;
try {
// Get the connection
conn = DBConnessionePool.ottieniConnessione();
// Create the Statement
stat = conn.createStatement();
// Query for the insertion
String query = &quot;INSERT INTO associazionebc (IdPreferenzeDiRicerca, IdBeneCulturale) VALUES (&quot;
+ pIdPreferenzaDiRicerca + &quot;,&quot; + pIdBeneCulturale + &quot;)&quot;;
// You run the insert query
int i = stat.executeUpdate(query);
// This returns the backup
return (i == 1);
}
// Always runs and takes care of closing the Statement and the
// Connect
finally {
if (stat != null) {
stat.close();
}
if (conn != null) {
DBConnessionePool.rilasciaConnessione(conn);
}
}
}

public boolean inserisciPreferenzaDiRicerca(
BeanPreferenzaDiRicerca pPreferenza) throws SQLException {
// Variables for database connection
Connection conn = null;
// Variable for the query
Statement stat = null;
try {
// Get the connection
conn = DBConnessionePool.ottieniConnessione();
// Create the Statement
stat = conn.createStatement();
// Query for the insertion
String query = &quot;INSERT INTO preferenzediricerca (Id, Name) VALUES (&quot;
+ pPreferenza.getId() + &quot;, '&quot; + pPreferenza.getNome()
+ &quot;')&quot;;
// You run the insert query
int i = stat.executeUpdate(query);
// This returns the backup
return (i == 1);
}
// Always runs and takes care of closing the Statement and the
// Connect
finally {
if (stat != null) {
stat.close();
}
if (conn != null) {
DBConnessionePool.rilasciaConnessione(conn);
}
}
}

public boolean inserisciPreferenzaDiRicercaDelPR(int pIdPuntoDiRistoro,
int pIdPreferenzaDiRicerca) throws SQLException {
// Variables for database connection
Connection conn = null;
// Variable for the query
Statement stat = null;
try {
// Get the connection
conn = DBConnessionePool.ottieniConnessione();
// Create the Statement
stat = conn.createStatement();
// Query for the insertion
String query = &quot;INSERT INTO associazionepr (IdPreferenzeDiRicerca, IdPuntoDiRistoro) VALUES (&quot;
+ pIdPreferenzaDiRicerca + &quot;,&quot; + pIdPuntoDiRistoro + &quot;)&quot;;
// You run the insert query
int i = stat.executeUpdate(query);
// This returns the backup
return (i == 1);
}
// Always runs and takes care of closing the Statement and the
// Connect
finally {
if (stat != null) {
stat.close();
}
if (conn != null) {
DBConnessionePool.rilasciaConnessione(conn);
}
}
}

public boolean inserisciPreferenzaDiRicercaDelTurista(int pIdTurista,
int pIdPreferenzaDiRicerca) throws SQLException {
// Variables for database connection
Connection conn = null;
// Variable for the query
Statement stat = null;
try {
// Get the connection
conn = DBConnessionePool.ottieniConnessione();
// Create the Statement
stat = conn.createStatement();
// Query for the insertion
String query = &quot;INSERT INTO rating (IdTurista, IdPreferenzeDiRicerca) VALUES (&quot;
+ pIdTurista + &quot;,&quot; + pIdPreferenzaDiRicerca + &quot;)&quot;;
// You run the insert query
int i = stat.executeUpdate(query);
// This returns the backup
return (i == 1);
}
// Always runs and takes care of closing the Statement and the
// Connect
finally {
if (stat != null) {
stat.close();
}
if (conn != null) {
DBConnessionePool.rilasciaConnessione(conn);
}
}
}

public ArrayList&lt;BeanPreferenzaDiRicerca&gt; ottieniPreferenzeDiRicercaDelBC(
int pIdBeneCulturale) throws SQLException {
// Variables for database connection
Connection conn = null;
// Variable for the query
Statement stat = null;
// Variable for the query results
ResultSet result = null;
try {
// Get the connection
conn = DBConnessionePool.ottieniConnessione();
// Create the Statement
stat = conn.createStatement();
// Query to extract the list of search preferences
// A cultural
String query = &quot;SELECT * FROM associazionebc, preferenzediricerca WHERE IdBeneCulturale =&quot;
+ pIdBeneCulturale
+ &quot; AND IdPreferenzeDiRicerca = preferenzediricerca.Id&quot;;
// The query is executed
result = stat.executeQuery(query);
// List that will contain the BeanPreferenzaDiRicerca
ArrayList&lt;BeanPreferenzaDiRicerca&gt; list = new ArrayList&lt;BeanPreferenzaDiRicerca&gt;();
// We extract the results from the result set and moves in
// List
// To be returned
while (result.next()) {
// Add to the list BeanPreferenzaDiRicerca
list.add(new BeanPreferenzaDiRicerca(result.getInt(&quot;Id&quot;),
result.getString(&quot;Name&quot;)));
}
return list;
}
// Always runs and takes care to close the Result, the Statement
// And Connection
finally {
if (result != null) {
result.close();
}
if (stat != null) {
stat.close();
}
if (conn != null) {
DBConnessionePool.rilasciaConnessione(conn);
}
}
}

public ArrayList&lt;BeanPreferenzaDiRicerca&gt; ottieniPreferenzeDiRicercaDelPR(
int pIdPuntoDiRistoro) throws SQLException {
// Variables for database connection
Connection conn = null;
// Variable for the query
Statement stat = null;
// Variable for the query results
ResultSet result = null;
try {
// Get the connection
conn = DBConnessionePool.ottieniConnessione();
// Create the Statement
stat = conn.createStatement();
// Query to extract the list of search preferences
// A refreshment
String query = &quot;SELECT * FROM associazionepr, preferenzediricerca WHERE IdPuntoDiRistoro =&quot;
+ pIdPuntoDiRistoro
+ &quot; AND IdPreferenzeDiRicerca = preferenzediricerca.Id&quot;;
// The query is executed
result = stat.executeQuery(query);
// List that will contain the BeanPreferenzaDiRicerca
ArrayList&lt;BeanPreferenzaDiRicerca&gt; list = new ArrayList&lt;BeanPreferenzaDiRicerca&gt;();
// We extract the results from the result set and moves in
// List
// To be returned
while (result.next()) {
// Add to the list BeanPreferenzaDiRicerca
list.add(new BeanPreferenzaDiRicerca(result.getInt(&quot;Id&quot;),
result.getString(&quot;Name&quot;)));
}
return list;
}
// Always runs and takes care to close the Result, the Statement
// And Connection
finally {
if (result != null) {
result.close();
}
if (stat != null) {
stat.close();
}
if (conn != null) {
DBConnessionePool.rilasciaConnessione(conn);
}
}
}

public ArrayList&lt;BeanPreferenzaDiRicerca&gt; ottieniPreferenzeDiRicercaDelTurista(
int pIdTurista) throws SQLException {
// Variables for database connection
Connection conn = null;
// Variable for the query
Statement stat = null;
// Variable for the query results
ResultSet result = null;
try {
// Get the connection
conn = DBConnessionePool.ottieniConnessione();
// Create the Statement
stat = conn.createStatement();
// Query to extract the list of search preferences
// A Turista
String query = &quot;SELECT * FROM liking preferenzediricerca WHERE IdTurista =&quot;
+ pIdTurista
+ &quot; AND IdPreferenzeDiRicerca = preferenzediricerca.Id&quot;;
// The query is executed
result = stat.executeQuery(query);
// List that will contain the BeanPreferenzaDiRicerca
ArrayList&lt;BeanPreferenzaDiRicerca&gt; list = new ArrayList&lt;BeanPreferenzaDiRicerca&gt;();
// We extract the results from the result set and moves in
// List
// To be returned
while (result.next()) {
// Add to the list BeanPreferenzaDiRicerca
list.add(new BeanPreferenzaDiRicerca(result.getInt(&quot;Id&quot;),
result.getString(&quot;Name&quot;)));
}
return list;
}
// Always runs and takes care to close the Result, the Statement
// And Connection
finally {
if (result != null) {
result.close();
}
if (stat != null) {
stat.close();
}
if (conn != null) {
DBConnessionePool.rilasciaConnessione(conn);
}
}
}

public ArrayList&lt;BeanPreferenzaDiRicerca&gt; ottieniPreferenzeDiRicerca()
throws SQLException {
// Variables for database connection
Connection conn = null;
// Variable for the query
Statement stat = null;
// Variable for the query results
ResultSet result = null;
try {
// Get the connection
conn = DBConnessionePool.ottieniConnessione();
// Create the Statement
stat = conn.createStatement();
// Query to extract the list of search preferences
// A Turista
String query = &quot;SELECT * FROM preferenzediricerca&quot;;
// The query is executed
result = stat.executeQuery(query);
// List that will contain the BeanPreferenzaDiRicerca
ArrayList&lt;BeanPreferenzaDiRicerca&gt; list = new ArrayList&lt;BeanPreferenzaDiRicerca&gt;();
// We extract the results from the result set and moves in
// List
// To be returned
while (result.next()) {
// Add to the list BeanPreferenzaDiRicerca
list.add(new BeanPreferenzaDiRicerca(result.getInt(&quot;Id&quot;),
result.getString(&quot;Name&quot;)));
}
// Return the list of search preferences in the DB
return list;
}
// Always runs and takes care to close the Result, the Statement
// And Connection
finally {
if (result != null) {
result.close();
}
if (stat != null) {
stat.close();
}
if (conn != null) {
DBConnessionePool.rilasciaConnessione(conn);
}
}
}
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_DBPreferenzeGeneriche</id>
      <content>package unisa.gps.etour.repository;

import java.sql.Connection;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import unisa.gps.etour.bean.BeanPreferenzeGeneriche;

/**
* Implementing the IDBPreferenzeGeneriche
*
* @Author Mauro Miranda
* @Version 0.1 2007 eTour Project - Copyright by SE @SA Lab DMI University
* Of Salerno
*/
public class DBPreferenzeGeneriche implements IDBPreferenzeGeneriche {
// Constructor without parameters
public DBPreferenzeGeneriche() {

}

public boolean cancellaPreferenzaGenerica(int pIdPreferenza)
throws SQLException {
// Connect to database
Connection conn = null;
// Statement for running queries
Statement stat = null;
// Try block which performs the query and the database connection
try {
// You get the database connection from the pool
conn = DBConnessionePool.ottieniConnessione();
// Create the statement
stat = conn.createStatement();
// Query
String query = &quot;DELETE FROM preferenzegeneriche WHERE Id =&quot;
+ pIdPreferenza;
// You run the query
int i = stat.executeUpdate(query);

return (i == 1);
}
// Finally block that contains the instructions to close the connections
// Hyenas run in any case
finally {
// This closes the if statement and 'opened
if (stat != null) {
stat.close();
}
// It returns the connection to the pool if and 'opened
if (conn != null) {
DBConnessionePool.rilasciaConnessione(conn);
}
}
}

public boolean inserisciPreferenzaGenenerica(
BeanPreferenzeGeneriche pPreferenza) throws SQLException {
// Connect to database
Connection conn = null;
// Statement for running queries
Statement stat = null;
// Try block which performs the query and the database connection
try {
// You get the database connection from the pool
conn = DBConnessionePool.ottieniConnessione();
// Create the statement
stat = conn.createStatement();
// Query
String query = &quot;INSERT INTO preferenzegeneriche (IdTurista, Font, Tema, DimensioneFont)&quot;
+ &quot;VALUES (&quot;
+ pPreferenza.getIdTurista()
+ &quot; '&quot;
+ pPreferenza.getFont()
+ &quot;','&quot;
+ pPreferenza.getTema()
+ &quot; ',&quot; + pPreferenza.getDimensioneFont() + &quot;)&quot;;
// You run the query
int i = stat.executeUpdate(query);
return (i == 1);
}
// Finally block that contains the instructions to close the connections
// Hyenas run in any case
finally {
// This closes the if statement and 'opened
if (stat != null) {
stat.close();
}
// It returns the connection to the pool if and 'opened
if (conn != null) {
DBConnessionePool.rilasciaConnessione(conn);
}
}
}

public boolean modificaPreferenzaGenerica(
BeanPreferenzeGeneriche pPreferenza) throws SQLException {
// Connect to database
Connection conn = null;
// Statement for running queries
Statement stat = null;
// Try block which performs the query and the database connection
try {
// You get the database connection from the pool
conn = DBConnessionePool.ottieniConnessione();
// Create the statement
stat = conn.createStatement();
// Query
String query = &quot;UPDATE preferenzegeneriche SET&quot; + &quot;= IdTurista&quot;
+ pPreferenza.getIdTurista() + &quot;, font = '&quot;
+ pPreferenza.getFont() + &quot; ', theme ='&quot;
+ pPreferenza.getTema() + &quot; ', DimensioneFont =&quot;
+ pPreferenza.getDimensioneFont() + &quot;WHERE Id =&quot;
+ pPreferenza.getId();
// You run the query
int i = stat.executeUpdate(query);

return (i == 1);
}
// Finally block that contains the instructions to close the connections
// Hyenas run in any case
finally {
// This closes the if statement and 'opened
if (stat != null) {
stat.close();
}
// It returns the connection to the pool if and 'opened
if (conn != null) {
DBConnessionePool.rilasciaConnessione(conn);
}
}
}

public BeanPreferenzeGeneriche ottieniPreferenzaGenerica(int pIdTurista)
throws SQLException {
// Connect to database
Connection conn = null;
// Statement for running queries
Statement stat = null;
// Resut set where the output of the query is inserted
ResultSet result = null;
// Try block which performs the query and the database connection
try {
// You get the database connection from the pool
conn = DBConnessionePool.ottieniConnessione();
// Create the statement
stat = conn.createStatement();
// Query
String query = &quot;SELECT * FROM preferenzegeneriche WHERE IdTurista =&quot;
+ pIdTurista;
// Run the query
result = stat.executeQuery(query);
BeanPreferenzeGeneriche pref = null;
// Check that the query returns at least one result
if (result.next()) {
pref = new BeanPreferenzeGeneriche();
pref.setId(result.getInt(&quot;Id&quot;));
pref.setIdTurista(result.getInt(&quot;IdTurista&quot;));
pref.setDimensioneFont(result.getInt(&quot;DimensioneFont&quot;));
pref.setFont(result.getString(&quot;Font&quot;));
pref.setTema(result.getString(&quot;Theme&quot;));
}
return pref;
}
// Finally block that contains the instructions to close the connections
// Hyenas run in any case
finally {
// This closes the result set only if and 'the query was made
if (result != null) {
result.close();
}
// This closes the if statement and 'opened
if (stat != null) {
stat.close();
}
// It returns the connection to the pool if and 'opened
if (conn != null) {
DBConnessionePool.rilasciaConnessione(conn);
}
}
}
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_DBPuntoDiRistoro</id>
      <content>package unisa.gps.etour.repository;

import Java.sql.Connection;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import java.sql.Time;
import java.util.ArrayList;
import java.util.Date;

import unisa.gps.etour.bean.BeanPuntoDiRistoro;
import unisa.gps.etour.bean.BeanTag;
import unisa.gps.etour.util.Punto3D;

/**
* Class that implements the interface of Refreshment
*
* @Author Joseph Martone
* @Version 0.1 2007 eTour Project - Copyright by SE @SA Lab DMI University
* Of Salerno
*/
public class DBPuntoDiRistoro implements IDBPuntoDiRistoro
{
// Empty constructor
public DBPuntoDiRistoro()
{

}

public boolean cancellaPuntoDiRistoro(int pIdPuntoDiRistoro)
throws SQLException
{
// Variables for database connection
Connection conn = null;
// Variable for the query
Statement stat = null;
try
{
// Get the connection
conn = DBConnessionePool.ottieniConnessione();
// Create the Statement
stat = conn.createStatement();
// Query cancellation
String query = &quot;DELETE FROM puntodiristoro WHERE Id =&quot;
+ pIdPuntoDiRistoro;
// You run the query Cancellation
int i = stat.executeUpdate(query);
// This returns the backup
return (i == 1);
}
// Always runs and takes care of closing the Statement and the
// Connect
finally
{
if (stat != null)
{
stat.close();
}
if (conn != null)
{
DBConnessionePool.rilasciaConnessione(conn);
}
}

}

public boolean inserisciPuntoDiRistoro(BeanPuntoDiRistoro pPuntoDiRistoro)
throws SQLException
{
// Create the organization of the Opening and Closing
java.sql.Time orarioApertura = new Time(pPuntoDiRistoro
.getOrarioApertura().getTime());
java.sql.Time orarioChiusura = new Time(pPuntoDiRistoro
.getOrarioChiusura().getTime());
// Variables for database connection
Connection conn = null;
// Variable for the query
Statement stat = null;
try
{
// Get the connection
conn = DBConnessionePool.ottieniConnessione();
// Create the Statement
stat = conn.createStatement();
// Query for the insertion of a refreshment
String query = &quot;INSERT INTO puntodiristoro (Name,&quot;
+ &quot;Description, Telephone, Latitude, Longitude,&quot;
+ &quot;Altitude, OrarioApertura, OrarioChiusura, GiornoChiusura&quot;
+ &quot;Town, city, street, postcode, Province, MediaVoti, NumeroVoti&quot;
+ &quot;PartitaIva) VALUES ('&quot; + pPuntoDiRistoro.getNome()
+ &quot;','&quot; + pPuntoDiRistoro.getDescrizione() + &quot;','&quot;
+ pPuntoDiRistoro.getTelefono() + &quot;',&quot;
+ pPuntoDiRistoro.getPosizione().getLatitudine() + &quot;,&quot;
+ pPuntoDiRistoro.getPosizione().getLongitudine() + &quot;,&quot;
+ pPuntoDiRistoro.getPosizione().getAltitudine() + &quot;,'&quot;
+ orarioApertura.toString() + &quot;','&quot;
+ orarioChiusura.toString() + &quot;','&quot;
+ pPuntoDiRistoro.getGiornoChiusura() + &quot;','&quot;
+ pPuntoDiRistoro.getLocalita() + &quot;','&quot;
+ pPuntoDiRistoro.getCitta() + &quot;','&quot;
+ pPuntoDiRistoro.getVia() + &quot;','&quot;
+ pPuntoDiRistoro.getCap() + &quot;','&quot;
+ pPuntoDiRistoro.getProvincia() + &quot;',&quot;
+ pPuntoDiRistoro.getMediaVoti() + &quot;,&quot;
+ pPuntoDiRistoro.getNumeroVoti() + &quot;,'&quot;
+ pPuntoDiRistoro.getPartitaIva() + &quot;');&quot;;
// You run the insert query
int i = stat.executeUpdate(query);
return (i == 1);
}
// Is always done and takes care of closing the statement, and
// Connect
finally
{
if (stat != null)
{
stat.close();
}
if (conn != null)
{
DBConnessionePool.rilasciaConnessione(conn);
}
}
}

public boolean modificaPuntoDiRistoro(BeanPuntoDiRistoro pPuntoDiRistoro)
throws SQLException
{
// Create the organization of the Opening and Closing
java.sql.Time orarioApertura = new Time(pPuntoDiRistoro
.getOrarioApertura().getTime());
java.sql.Time orarioChiusura = new Time(pPuntoDiRistoro
.getOrarioChiusura().getTime());
// Variables for database connection
Connection conn = null;
// Variable for the query
Statement stat = null;
try
{
// Get the connection
conn = DBConnessionePool.ottieniConnessione();
// Create the Statement
stat = conn.createStatement();
// Query for amendment
String query = &quot;UPDATE puntodiristoro SET&quot; + &quot;Name = '&quot;
+ pPuntoDiRistoro.getNome() + &quot;', Description ='&quot;
+ pPuntoDiRistoro.getDescrizione() + &quot;', Phone ='&quot;
+ pPuntoDiRistoro.getTelefono() + &quot;', Latitude =&quot;
+ pPuntoDiRistoro.getPosizione().getLatitudine()
+ &quot;, Longitude =&quot;
+ pPuntoDiRistoro.getPosizione().getLongitudine()
+ &quot;, Height =&quot;
+ pPuntoDiRistoro.getPosizione().getAltitudine()
+ &quot;, OrarioApertura = '&quot; + orarioApertura.toString()
+ &quot;', OrarioChiusura ='&quot; + orarioChiusura.toString()
+ &quot;', GiornoChiusura ='&quot;
+ pPuntoDiRistoro.getGiornoChiusura() + &quot;', Location ='&quot;
+ pPuntoDiRistoro.getLocalita() + &quot;', City ='&quot;
+ pPuntoDiRistoro.getCitta() + &quot;', Via ='&quot;
+ pPuntoDiRistoro.getVia() + &quot;', postcode ='&quot;
+ pPuntoDiRistoro.getCap() + &quot;', State ='&quot;
+ pPuntoDiRistoro.getProvincia() + &quot;', MediaVoti =&quot;
+ pPuntoDiRistoro.getMediaVoti() + &quot;, NumeroVoti =&quot;
+ pPuntoDiRistoro.getNumeroVoti() + &quot;, party = '&quot;
+ pPuntoDiRistoro.getPartitaIva() + &quot;' WHERE Id =&quot;
+ pPuntoDiRistoro.getId();
// You run the query for Change
int i = stat.executeUpdate(query);
// This returns the backup
return (i == 1);
}
// Is always done and takes care of closing the Statement and the
// Connect
finally
{
if (stat != null)
{
stat.close();
}
if (conn != null)
{
DBConnessionePool.rilasciaConnessione(conn);
}
}
}

public int ottieniNumeroElementiRicerca(String pKeyword,
ArrayList&lt;BeanTag&gt; pTags, Punto3D pPosizione,
double pDistanzaMassima) throws SQLException
{
// Variables for database connection
Connection conn = null;
// Variable for the query
Statement stat = null;
// Variable for the query results
ResultSet result = null;
try
{
// Get the connection
conn = DBConnessionePool.ottieniConnessione();
// Create the Statement
stat = conn.createStatement();
// Query to get the number of pages
String query = &quot;&quot;;
if (pTags.size() == 0)
{
// Query without the control tag
query = &quot;SELECT count(number) FROM (SELECT count(puntodiristoro.Id) AS number&quot;
+ &quot;FROM puntodiristoro&quot;
+ &quot;WHERE (puntodiristoro.Nome LIKE '%&quot;
+ pKeyword
+ &quot;%' OR puntodiristoro.Descrizione LIKE '%&quot;
+ pKeyword
+ &quot;%') &quot;
+ &quot;AND distance(puntodiristoro.Latitudine, puntodiristoro.Longitudine&quot;
+ pPosizione.getLatitudine()
+ &quot;,&quot;
+ pPosizione.getLongitudine()
+ &quot;) &lt;&quot;
+ pDistanzaMassima
+ &quot;GROUP BY puntodiristoro.Id&quot;
+ &quot;ORDER BY count(puntodiristoro.Id) DESC) AS table&quot;;
}
else
{
// Query with tags
query = &quot;SELECT count(number) FROM (SELECT count(puntodiristoro.Id) AS number&quot;
+ &quot;FROM puntodiristoro&quot;
+ &quot;JOIN (appartenenzapr JOIN tag ON IdTag = Id)&quot;
+ &quot;ON puntodiristoro.Id = appartenenzapr.IdPuntoDiRistoro&quot;
+ &quot;WHERE (puntodiristoro.Nome LIKE '%&quot;
+ pKeyword
+ &quot;%' OR puntodiristoro.Descrizione LIKE '%&quot;
+ pKeyword
+ &quot;%') AND (tag.Nome = '&quot; + pTags.get(0).getName();
if (pTags.size() &gt;= 2)
{
query = query + &quot;' OR tag.Nome ='&quot;
+ pTags.get(1).getName();
}
if (pTags.size() &gt;= 3)
{
query = query + &quot;' OR tag.Nome ='&quot;
+ pTags.get(2).getName();
}
if (pTags.size() &gt;= 4)
{
query = query + &quot;' OR tag.Nome ='&quot;
+ pTags.get(3).getName();
}
if (pTags.size() &gt;= 5)
{
query = query + &quot;' OR tag.Nome ='&quot;
+ pTags.get(4).getName();
}
query = query
+ &quot;')&quot;
+ &quot;AND distance(puntodiristoro.Latitudine, puntodiristoro.Longitudine&quot;
+ pPosizione.getLatitudine() + &quot;,&quot;
+ pPosizione.getLongitudine() + &quot;) &lt;&quot;
+ pDistanzaMassima + &quot;GROUP BY puntodiristoro.Id&quot;
+ &quot;ORDER BY count(puntodiristoro.Id) DESC) AS table&quot;;

}
// You run the query
result = stat.executeQuery(query);
// It returns the value of count() that contains the number of
// Tuple
int i = 0;
if (result.next())
{
i = result.getInt(1);
}
return i;
}
// Always runs and takes care to close the Result, the Statement
// And Connection
finally
{
if (result != null)
{
result.close();
}
if (stat != null)
{
stat.close();
}
if (conn != null)
{
DBConnessionePool.rilasciaConnessione(conn);
}
}
}

public int ottieniNumeroElementiRicercaAvanzata(int pIdTurista,
String pKeyword, ArrayList&lt;BeanTag&gt; pTags, Punto3D pPosizione,
double pDistanzaMassima) throws SQLException
{
// Variables for database connection
Connection conn = null;
// Variable for the query
Statement stat = null;
// Variable for the query results
ResultSet result = null;
try
{
// Get the connection
conn = DBConnessionePool.ottieniConnessione();
// Create the Statement
stat = conn.createStatement();
// Query to get the number of pages of advanced
String query = &quot;&quot;;
if (pTags.size() == 0)
{
// Query without the control tag
query = &quot;SELECT count(number) FROM (SELECT count(puntodiristoro.Id) AS number&quot;
+ &quot;FROM (puntodiristoro LEFT JOIN&quot;
+ &quot;(SELECT IdPuntoDiRistoro&quot;
+ &quot;FROM associazionepr, (&quot;
+ &quot;SELECT IdPreferenzeDiRicerca&quot;
+ &quot;FROM rating&quot;
+ &quot;WHERE IdTurista =&quot;
+ pIdTurista
+ &quot;) AS pref&quot;
+ &quot;WHERE associazionepr.IdPreferenzeDiRicerca = pref.IdPreferenzeDiRicerca)&quot;
+ &quot;AS preferenze ON puntodiristoro.Id = preferenze.IdPuntoDiRistoro) &quot;
+ &quot;WHERE (puntodiristoro.Nome LIKE '%&quot;
+ pKeyword
+ &quot;%' OR puntodiristoro.Descrizione LIKE '%&quot;
+ pKeyword
+ &quot;%') &quot;
+ &quot;AND distance(puntodiristoro.Latitudine, puntodiristoro.Longitudine&quot;
+ pPosizione.getLatitudine()
+ &quot;,&quot;
+ pPosizione.getLongitudine()
+ &quot;) &lt;&quot;
+ pDistanzaMassima
+ &quot;GROUP BY puntodiristoro.Id&quot;
+ &quot;ORDER BY count(puntodiristoro.Id) DESC) AS table&quot;;
}
else
{
// Query with tags
query = &quot;SELECT count(number) FROM (SELECT count(puntodiristoro.Id) AS number&quot;
+ &quot;FROM (puntodiristoro LEFT JOIN&quot;
+ &quot;(SELECT IdPuntoDiRistoro&quot;
+ &quot;FROM associazionepr, (&quot;
+ &quot;SELECT IdPreferenzeDiRicerca&quot;
+ &quot;FROM rating&quot;
+ &quot;WHERE IdTurista =&quot;
+ pIdTurista
+ &quot;) AS pref&quot;
+ &quot;WHERE associazionepr.IdPreferenzeDiRicerca = pref.IdPreferenzeDiRicerca)&quot;
+ &quot;AS preferenze ON puntodiristoro.Id = preferenze.IdPuntoDiRistoro) &quot;
+ &quot;JOIN (appartenenzapr JOIN tag ON IdTag = Id)&quot;
+ &quot;ON puntodiristoro.Id = appartenenzapr.IdPuntoDiRistoro&quot;
+ &quot;WHERE (puntodiristoro.Nome LIKE '%&quot;
+ pKeyword
+ &quot;%' OR puntodiristoro.Descrizione LIKE '%&quot;
+ pKeyword
+ &quot;%') AND (tag.Nome = '&quot; + pTags.get(0).getName();
if (pTags.size() &gt;= 2)
{
query = query + &quot;' OR tag.Nome ='&quot;
+ pTags.get(1).getName();
}
if (pTags.size() &gt;= 3)
{
query = query + &quot;' OR tag.Nome ='&quot;
+ pTags.get(2).getName();
}
if (pTags.size() &gt;= 4)
{
query = query + &quot;' OR tag.Nome ='&quot;
+ pTags.get(3).getName();
}
if (pTags.size() &gt;= 5)
{
query = query + &quot;' OR tag.Nome ='&quot;
+ pTags.get(4).getName();
}
query = query
+ &quot;')&quot;
+ &quot;AND distance(puntodiristoro.Latitudine, puntodiristoro.Longitudine&quot;
+ pPosizione.getLatitudine() + &quot;,&quot;
+ pPosizione.getLongitudine() + &quot;) &lt;&quot;
+ pDistanzaMassima + &quot;GROUP BY puntodiristoro.Id&quot;
+ &quot;ORDER BY count(puntodiristoro.Id) DESC) AS table&quot;;
}
// You run the query
result = stat.executeQuery(query);
// It returns the value of count() that contains the number of
// Tuple
int i = 0;
if (result.next())
{
i = result.getInt(1);
}
return i;
}
// Always runs and takes care to close the Result, the Statement
// And Connection
finally
{
if (result != null)
{
result.close();
}
if (stat != null)
{
stat.close();
}
if (conn != null)
{
DBConnessionePool.rilasciaConnessione(conn);
}
}
}

public BeanPuntoDiRistoro ottieniPuntoDiRistoro(int pid)
throws SQLException
{
// Variables for database connection
Connection conn = null;
// Variable for the query
Statement stat = null;
// Variable for the query results
ResultSet result = null;
try
{
// Get the connection
conn = DBConnessionePool.ottieniConnessione();
// Create the Statement
stat = conn.createStatement();
// Query
String query = &quot;SELECT * FROM puntodiristoro WHERE Id =&quot; + pid;
// You run the query
result = stat.executeQuery(query);
if (result.next())
{
// We create the objects to be returned
Punto3D point = new Punto3D(result.getDouble(&quot;Latitude&quot;),
result.getDouble(&quot;Longitude&quot;), result
.getDouble(&quot;Elevation&quot;));
Date orarioApertura = new Date(result.getTime(&quot;OrarioApertura&quot;)
.getTime());
Date orarioChiusura = new Date(result.getTime(&quot;OrarioChiusura&quot;)
.getTime());
// This generates the resting spot of bean
BeanPuntoDiRistoro puntoTemp = new BeanPuntoDiRistoro(result
.getInt(&quot;Id&quot;), result.getInt(&quot;NumeroVoti&quot;), result
.getDouble(&quot;MediaVoti&quot;), result.getString(&quot;Name&quot;),
result.getString(&quot;Description&quot;), result
.getString(&quot;Phone&quot;), result
.getString(&quot;Location&quot;), result
.getString(&quot;City&quot;), result.getString(&quot;Way&quot;),
result.getString(&quot;Cap&quot;), result.getString(&quot;Province&quot;),
result.getString(&quot;PartitaIva&quot;), point, orarioApertura,
orarioChiusura, result.getString(&quot;GiornoChiusura&quot;));
// It returns the refreshment
return puntoTemp;
}
else
{
return null;
}
}
// Always runs and takes care to close the Result, the Statement
// And Connection
finally
{
if (result != null)
{
result.close();
}
if (stat != null)
{
stat.close();
}
if (conn != null)
{
DBConnessionePool.rilasciaConnessione(conn);
}
}
}

public ArrayList&lt;BeanPuntoDiRistoro&gt; search(String pKeyword,
ArrayList&lt;BeanTag&gt; pTags, int pNumeroPagina,
int pNumeroElementiPerPagina, Punto3D pPosizione,
double pDistanzaMassima) throws SQLException
{
// Variables for database connection
Connection conn = null;
// Variable for the query
Statement stat = null;
// Variable for the query results
ResultSet result = null;
try
{
// Get the connection
conn = DBConnessionePool.ottieniConnessione();
// Create the Statement
stat = conn.createStatement();
// Query for search
String query = &quot;&quot;;
if (pTags.size() == 0)
{
// Query without the control tag
query = &quot;SELECT *&quot;
+ &quot;FROM puntodiristoro&quot;
+ &quot;WHERE (puntodiristoro.Nome LIKE '%&quot;
+ pKeyword
+ &quot;%' OR puntodiristoro.Descrizione LIKE '%&quot;
+ pKeyword
+ &quot;%') &quot;
+ &quot;AND distance(puntodiristoro.Latitudine, puntodiristoro.Longitudine&quot;
+ pPosizione.getLatitudine() + &quot;,&quot;
+ pPosizione.getLongitudine() + &quot;) &lt;&quot;
+ pDistanzaMassima + &quot;GROUP BY puntodiristoro.Id&quot;
+ &quot;ORDER BY count(puntodiristoro.Id) DESC LIMIT&quot;
+ (pNumeroPagina * pNumeroElementiPerPagina) + &quot;,&quot;
+ pNumeroElementiPerPagina;
}
else
{
// Query with tags
query = &quot;SELECT *&quot;
+ &quot;FROM puntodiristoro&quot;
+ &quot;JOIN (appartenenzapr JOIN tag ON IdTag = Id)&quot;
+ &quot;ON puntodiristoro.Id = appartenenzapr.IdPuntoDiRistoro&quot;
+ &quot;WHERE (puntodiristoro.Nome LIKE '%&quot; + pKeyword
+ &quot;%' OR puntodiristoro.Descrizione LIKE '%&quot; + pKeyword
+ &quot;%') AND (tag.Nome = '&quot; + pTags.get(0).getName();
if (pTags.size() &gt;= 2)
{
query = query + &quot;' OR tag.Nome ='&quot;
+ pTags.get(1).getName();
}
if (pTags.size() &gt;= 3)
{
query = query + &quot;' OR tag.Nome ='&quot;
+ pTags.get(2).getName();
}
if (pTags.size() &gt;= 4)
{
query = query + &quot;' OR tag.Nome ='&quot;
+ pTags.get(3).getName();
}
if (pTags.size() &gt;= 5)
{
query = query + &quot;' OR tag.Nome ='&quot;
+ pTags.get(4).getName();
}
query = query
+ &quot;')&quot;
+ &quot;AND distance(puntodiristoro.Latitudine, puntodiristoro.Longitudine&quot;
+ pPosizione.getLatitudine() + &quot;,&quot;
+ pPosizione.getLongitudine() + &quot;) &lt;&quot;
+ pDistanzaMassima + &quot;GROUP BY puntodiristoro.Id&quot;
+ &quot;ORDER BY count(puntodiristoro.Id) DESC LIMIT&quot;
+ (pNumeroPagina * pNumeroElementiPerPagina) + &quot;,&quot;
+ pNumeroElementiPerPagina;
}
// You run the query
result = stat.executeQuery(query);
// List that will contain the BeanPuntoDiRistoro
ArrayList&lt;BeanPuntoDiRistoro&gt; list = new ArrayList&lt;BeanPuntoDiRistoro&gt;();
while (result.next())
{
// We create the objects to be returned
Punto3D point = new Punto3D(result.getDouble(&quot;Latitude&quot;),
result.getDouble(&quot;Longitude&quot;), result
.getDouble(&quot;Elevation&quot;));
Date orarioApertura = new Date(result.getTime(&quot;OrarioApertura&quot;)
.getTime());
Date orarioChiusura = new Date(result.getTime(&quot;OrarioChiusura&quot;)
.getTime());
// Build the refreshment
BeanPuntoDiRistoro puntoTemp = new BeanPuntoDiRistoro(result
.getInt(&quot;Id&quot;), result.getInt(&quot;NumeroVoti&quot;), result
.getDouble(&quot;MediaVoti&quot;), result.getString(&quot;Name&quot;),
result.getString(&quot;Description&quot;), result
.getString(&quot;Phone&quot;), result
.getString(&quot;Location&quot;), result
.getString(&quot;City&quot;), result.getString(&quot;Way&quot;),
result.getString(&quot;Cap&quot;), result.getString(&quot;Province&quot;),
result.getString(&quot;PartitaIva&quot;), point, orarioApertura,
orarioChiusura, result.getString(&quot;GiornoChiusura&quot;));
// Insert the bean in the list
lista.add(puntoTemp);
}
// It returns the list
return list;
}
// Always runs and takes care to close the Result, the Statement
// And Connection
finally
{
if (result != null)
{
result.close();
}
if (stat != null)
{
stat.close();
}
if (conn != null)
{
DBConnessionePool.rilasciaConnessione(conn);
}
}
}

public ArrayList&lt;BeanPuntoDiRistoro&gt; ricercaAvanzata(int pIdTurista,
String pKeyword, ArrayList&lt;BeanTag&gt; pTags, int pNumeroPagina,
int pNumeroElementiPerPagina, Punto3D pPosizione,
double pDistanzaMassima) throws SQLException
{
// Variables for database connection
Connection conn = null;
// Variable for the query
Statement stat = null;
// Variable for the query results
ResultSet result = null;
try
{
// Get the connection
conn = DBConnessionePool.ottieniConnessione();
// Create the Statement
stat = conn.createStatement();
// Query for advanced search
String query = &quot;&quot;;
if (pTags.size() == 0)
{
// Query without tags
query = &quot;SELECT *&quot;
+ &quot;FROM (puntodiristoro LEFT JOIN&quot;
+ &quot;(SELECT IdPuntoDiRistoro&quot;
+ &quot;FROM associazionepr, (&quot;
+ &quot;SELECT IdPreferenzeDiRicerca&quot;
+ &quot;FROM rating&quot;
+ &quot;WHERE IdTurista =&quot;
+ pIdTurista
+ &quot;) CI pref&quot;
+ &quot;WHERE associazionepr.IdPreferenzeDiRicerca = pref.IdPreferenzeDiRicerca)&quot;
+ &quot;AS preferenze ON puntodiristoro.Id = preferenze.IdPuntoDiRistoro) &quot;
+ &quot;WHERE (puntodiristoro.Nome LIKE '%&quot;
+ pKeyword
+ &quot;%' OR puntodiristoro.Descrizione LIKE '%&quot;
+ pKeyword
+ &quot;%')&quot;
+ &quot;AND distance(puntodiristoro.Latitudine, puntodiristoro.Longitudine&quot;
+ pPosizione.getLatitudine() + &quot;,&quot;
+ pPosizione.getLongitudine() + &quot;) &lt;&quot;
+ pDistanzaMassima + &quot;GROUP BY puntodiristoro.Id&quot;
+ &quot;ORDER BY count(puntodiristoro.Id) DESC LIMIT&quot;
+ (pNumeroPagina * pNumeroElementiPerPagina) + &quot;,&quot;
+ pNumeroElementiPerPagina;
}
else
{
// Query with tags
query = &quot;SELECT *&quot;
+ &quot;FROM (puntodiristoro LEFT JOIN&quot;
+ &quot;(SELECT IdPuntoDiRistoro&quot;
+ &quot;FROM associazionepr, (&quot;
+ &quot;SELECT IdPreferenzeDiRicerca&quot;
+ &quot;FROM rating&quot;
+ &quot;WHERE IdTurista =&quot;
+ pIdTurista
+ &quot;) AS pref&quot;
+ &quot;WHERE associazionepr.IdPreferenzeDiRicerca = pref.IdPreferenzeDiRicerca)&quot;
+ &quot;AS preferenze ON puntodiristoro.Id = preferenze.IdPuntoDiRistoro) &quot;
+ &quot;JOIN (appartenenzapr JOIN tag ON IdTag = Id)&quot;
+ &quot;ON puntodiristoro.Id = appartenenzapr.IdPuntoDiRistoro&quot;
+ &quot;WHERE (puntodiristoro.Nome LIKE '%&quot; + pKeyword
+ &quot;%' OR puntodiristoro.Descrizione LIKE '%&quot; + pKeyword
+ &quot;%') AND (tag.Nome = '&quot; + pTags.get(0).getName();
if (pTags.size() &gt;= 2)
{
query = query + &quot;' OR tag.Nome ='&quot;
+ pTags.get(1).getName();
}
if (pTags.size() &gt;= 3)
{
query = query + &quot;' OR tag.Nome ='&quot;
+ pTags.get(2).getName();
}
if (pTags.size() &gt;= 4)
{
query = query + &quot;' OR tag.Nome ='&quot;
+ pTags.get(3).getName();
}
if (pTags.size() &gt;= 5)
{
query = query + &quot;' OR tag.Nome ='&quot;
+ pTags.get(4).getName();
}
query = query
+ &quot;')&quot;
+ &quot;AND distance(puntodiristoro.Latitudine, puntodiristoro.Longitudine&quot;
+ pPosizione.getLatitudine() + &quot;,&quot;
+ pPosizione.getLongitudine() + &quot;) &lt;&quot;
+ pDistanzaMassima + &quot;GROUP BY puntodiristoro.Id&quot;
+ &quot;ORDER BY count(puntodiristoro.Id) DESC LIMIT&quot;
+ (pNumeroPagina * pNumeroElementiPerPagina) + &quot;,&quot;
+ pNumeroElementiPerPagina;
}
// You run the query
result = stat.executeQuery(query);

ArrayList&lt;BeanPuntoDiRistoro&gt; list = new ArrayList&lt;BeanPuntoDiRistoro&gt;();
while (result.next())
{
// We create the objects to be returned
Punto3D point = new Punto3D(result.getDouble(&quot;Latitude&quot;),
result.getDouble(&quot;Longitude&quot;), result
.getDouble(&quot;Elevation&quot;));
Date orarioApertura = new Date(result.getTime(&quot;OrarioApertura&quot;)
.getTime());
Date orarioChiusura = new Date(result.getTime(&quot;OrarioChiusura&quot;)
.getTime());
// This creates the cultural
BeanPuntoDiRistoro beneTemp = new BeanPuntoDiRistoro(result
.getInt(&quot;Id&quot;), result.getInt(&quot;NumeroVoti&quot;), result
.getDouble(&quot;MediaVoti&quot;), result.getString(&quot;Name&quot;),
result.getString(&quot;Description&quot;), result
.getString(&quot;Phone&quot;), result
.getString(&quot;Location&quot;), result
.getString(&quot;City&quot;), result.getString(&quot;Way&quot;),
result.getString(&quot;Cap&quot;), result.getString(&quot;Province&quot;),
result.getString(&quot;PartitaIva&quot;), point, orarioApertura,
orarioChiusura, result.getString(&quot;GiornoChiusura&quot;));
// Insert the bean in the list
lista.add(beneTemp);
}
// It returns the list
return list;
}
// Always runs and takes care to close the Result, the Statement
// And Connection
finally
{
if (result != null)
{
result.close();
}
if (stat != null)
{
stat.close();
}
if (conn != null)
{
DBConnessionePool.rilasciaConnessione(conn);
}
}
}

public ArrayList&lt;BeanPuntoDiRistoro&gt; ottieniListaPR() throws SQLException
{
// Variables for database connection
Connection conn = null;
// Variable for the query
Statement stat = null;
// Variable for the query results
ResultSet result = null;
try
{
// Get the connection
conn = DBConnessionePool.ottieniConnessione();
// Create the Statement
stat = conn.createStatement();
// Query for a list of all the refreshment
String query = &quot;SELECT * FROM puntodiristoro&quot;;
// You run the query
result = stat.executeQuery(query);
// List that will contain the BeanPuntoDiRistoro
ArrayList&lt;BeanPuntoDiRistoro&gt; list = new ArrayList&lt;BeanPuntoDiRistoro&gt;();
while (result.next())
{
// We create the objects to be returned
Punto3D point = new Punto3D(result.getDouble(&quot;Latitude&quot;),
result.getDouble(&quot;Longitude&quot;), result
.getDouble(&quot;Elevation&quot;));
Date orarioApertura = new Date(result.getTime(&quot;OrarioApertura&quot;)
.getTime());
Date orarioChiusura = new Date(result.getTime(&quot;OrarioChiusura&quot;)
.getTime());
// Build the refreshment
BeanPuntoDiRistoro puntoTemp = new BeanPuntoDiRistoro(result
.getInt(&quot;Id&quot;), result.getInt(&quot;NumeroVoti&quot;), result
.getDouble(&quot;MediaVoti&quot;), result.getString(&quot;Name&quot;),
result.getString(&quot;Description&quot;), result
.getString(&quot;Phone&quot;), result
.getString(&quot;Location&quot;), result
.getString(&quot;City&quot;), result.getString(&quot;Way&quot;),
result.getString(&quot;Cap&quot;), result.getString(&quot;Province&quot;),
result.getString(&quot;PartitaIva&quot;), point, orarioApertura,
orarioChiusura, result.getString(&quot;GiornoChiusura&quot;));
// Insert the bean in the list
lista.add(puntoTemp);
}
// It returns the list
return list;
}
// Always runs and takes care to close the Result, the Statement
// And Connection
finally
{
if (result != null)
{
result.close();
}
if (stat != null)
{
stat.close();
}
if (conn != null)
{
DBConnessionePool.rilasciaConnessione(conn);
}
}
}
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_DBStatisticheLocalita</id>
      <content>package unisa.gps.etour.repository;

import java.sql.Connection;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import java.util.ArrayList;

/**
* Class that implements the local statistical
*
* @Author Joseph Martone
* @Version 0.1 (c) 2007 eTour Project - Copyright by DMI SE @ SA Lab --
* University of Salerno
*/
public class DBStatisticheLocalita implements IDBStatisticheLocalita {
// Empty constructor
public DBStatisticheLocalita() {
}

public ArrayList&lt;String&gt; ottieniListaLocalita() throws SQLException {
// Variable for the connection
Connection conn = null;
// Variable for the query
Statement stat = null;
// Variable for the query results
ResultSet result = null;
try {
// Get the connection
conn = DBConnessionePool.ottieniConnessione();
// Create the Statement
stat = conn.createStatement();
// Query for the extraction of location between the PR and BC
String query = &quot;(SELECT DISTINCT Locations&quot;
+ &quot;FROM beneculturale) UNION&quot;
+ &quot;(SELECT DISTINCT FROM Localita puntodiristoro)&quot;;
// The query is executed
result = stat.executeQuery(query);
// We extract the results from the result set and moves in
// List
// To be returned
// List that includes the results obtained
ArrayList&lt;String&gt; list = new ArrayList&lt;String&gt;();
while (result.next()) {
// Add to the list the locations obtained
list.add(result.getString(&quot;Location&quot;));
}
return list;
}
// Always runs and takes care to close the Result, the Statement
// And Connection
finally {
if (result != null) {
result.close();
}
if (stat != null) {
stat.close();
}
if (conn != null) {
DBConnessionePool.rilasciaConnessione(conn);
}
}
}

public double ottieniMedieVotiLocalita(String plocalita)
throws SQLException {
// Variable for the connection
Connection conn = null;
// Variable for the query
Statement stat = null;
// Variable for the query results
ResultSet result = null;
try {
// Get the connection
conn = DBConnessionePool.ottieniConnessione();
// Create the Statement
stat = conn.createStatement();
// Query to extract the average of the votes of catering outlets
// According to a Passo
String query = &quot;SELECT avg (MediaVoti) as MediaVoti FROM puntodiristoro WHERE Location = '&quot;
+ plocalita + &quot;'&quot;;
// The query is executed
result = stat.executeQuery(query);
// We extract the results from the result set
double point = 0.0;
if (result.next()) {
point = result.getDouble(&quot;MediaVoti&quot;);
}
// Query to extract the average of the votes of cultural
// According to a Passo
query = &quot;SELECT avg (MediaVoti) AS MediaVoti FROM beneculturale WHERE Location = '&quot;
+ plocalita + &quot;'&quot;;
// The query is executed
result = stat.executeQuery(query);
// We extract the results from the result set
double good = 0.0;
if (result.next()) {
good = result.getDouble(&quot;MediaVoti&quot;);
}
// It returns the average of the refreshment and heritage
return (good + point) / 2;
}
// Always runs and takes care to close the Result, the Statement
// And Connection
finally {
if (result != null) {
result.close();
}
if (stat != null) {
stat.close();
}
if (conn != null) {
DBConnessionePool.rilasciaConnessione(conn);
}
}
}
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_DBTag</id>
      <content>package unisa.gps.etour.control.GestioneBeniCulturali.test.stub;

import java.sql.SQLException;
import java.util.ArrayList;

import unisa.gps.etour.bean.BeanTag;
import unisa.gps.etour.repository.IDBTag;

public class DBTag implements IDBTag
{
private ArrayList&lt;BeanTag&gt; b;

public DBTag()
{
b = new ArrayList&lt;BeanTag&gt;(0);
}

public boolean aggiungeTagBeneCulturale(int pIdBeneCulturale, int pIdTag)
throws SQLException
{
return true;
}

public boolean aggiungeTagPuntoDiRistoro(int pIdPuntoDiRistoro, int pIdTag)
throws SQLException
{
return true;
}

public boolean cancellaTag(int pIdTag) throws SQLException
{
return true;
}

public boolean cancellaTagBeneCulturale(int pIdBeneCulturale, int pIdTag)
throws SQLException
{
return true;
}

public boolean cancellaTagPuntoDiRistoro(int pIdPuntoDiRistoro, int pIdTag)
throws SQLException
{
return true;
}

public boolean inserisciTag(BeanTag ptagi) throws SQLException
{
return true;
}

public boolean modificaTag(BeanTag ptagi) throws SQLException
{
// TODO Auto-generated method stub
return false;
}

public ArrayList&lt;BeanTag&gt; ottieniListaTag() throws SQLException
{
// TODO Auto-generated method stub
return null;
}

public BeanTag ottieniTag(int pid) throws SQLException
{
// TODO Auto-generated method stub
return null;
}

public ArrayList&lt;BeanTag&gt; ottieniTagBeneCulturale(int pIdBeneCulturale)
throws SQLException
{
// TODO Auto-generated method stub
return null;
}

public ArrayList&lt;BeanTag&gt; ottieniTagPuntoDiRistoro(int pIdPuntoDiRistoro)
throws SQLException
{
// TODO Auto-generated method stub
return null;
}
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_DBTurista</id>
      <content>package unisa.gps.etour.control.GestioneBeniCulturali.test.stub;

import java.sql.SQLException;
import java.util.ArrayList;
import java.util.Date;

import unisa.gps.etour.bean.BeanTurista;
import unisa.gps.etour.repository.IDBTurista;

public class DBTurista implements IDBTurista
{

public boolean cancellaBeneCulturalePreferito(int pIdTurista,
int pIdBeneCulturale) throws SQLException
{
return false;
}

public boolean cancellaPuntoDiRistoroPreferito(int pIdTurista,
int pIdPuntoDiRistoro) throws SQLException
{
return false;
}

public boolean delete(int pIdTurista) throws SQLException
{
return false;
}

public boolean inserisciBeneCulturalePreferito(int pIdTurista,
int pIdBeneCulturale) throws SQLException
{
return false;
}

public boolean inserisciPuntoDiRistoroPreferito(int pIdTurista,
int pIdPuntoDiRistoro) throws SQLException
{
return false;
}

public boolean inserisciTurista(BeanTurista pTurista) throws SQLException
{
return false;
}

public boolean modificaTurista(BeanTurista pTurista) throws SQLException
{
return false;
}

public BeanTurista ottieniTurista(String pUsername) throws SQLException
{
return null;
}

public BeanTurista ottieniTurista(int pIdTurista) throws SQLException
{
// ArrayList&lt;BeanTurista&gt; t = new ArrayList&lt;BeanTurista&gt;(0);
// T.add(New BeanTurista(1, &quot;username&quot;, &quot;Astrubale&quot;, &quot;Silberschatz&quot;, &quot;Naples&quot;, &quot;Naples&quot;, &quot;0111111&quot;, &quot;80100th&quot;, &quot;Way of the systems, 1&quot;, &quot;NA&quot;,
// &quot;Trapano@solitario.it&quot;, &quot;passwordsolomia&quot;, new Date(), new Date(), true));
//
// T.add(new BeanTurista(1, &quot;username&quot;, &quot;Astrubale&quot;, &quot;Silberschatz&quot;, &quot;Naples&quot;, &quot;Naples&quot;, &quot;0111111&quot;, &quot;80100th&quot;, &quot;Way of the systems, 1&quot;, &quot;NA&quot;,
// &quot;Trapano@solitario.it&quot;, &quot;passwordsolomia&quot;, new Date(), new Date(), true));
//
// Return t;

return (new BeanTurista(1, &quot;username&quot;, &quot;Astrubale&quot;, &quot;Silberschatz&quot;, &quot;Naples&quot;, &quot;Naples&quot;, &quot;0111111&quot;, &quot;80100th&quot;, &quot;Way of the systems, 1&quot;, &quot;NA&quot;,
&quot;trapano@solitario.it&quot;, &quot;passwordsolomia&quot;, new Date(), new Date(), true));
}

public ArrayList&lt;BeanTurista&gt; ottieniTuristi(String pUsernameTurista)
throws SQLException
{
return null;
}

public ArrayList&lt;BeanTurista&gt; ottieniTuristi(boolean condition)
throws SQLException
{
return null;
}
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_DBVisitaBC</id>
      <content>package unisa.gps.etour.control.GestioneBeniCulturali.test.stub;

import java.sql.SQLException;
import java.util.ArrayList;
import java.util.Date;
import unisa.gps.etour.bean.BeanVisitaBC;
import unisa.gps.etour.bean.BeanVisitaPR;
import unisa.gps.etour.repository.IDBVisitaBC;

public class DBVisitaBC implements IDBVisitaBC
{
public boolean inserisciVisitaBC(BeanVisitaBC PVIS) throws SQLException
{
return false;
}

public boolean modificaVisitaBC(BeanVisitaBC PVIS) throws SQLException
{
return false;
}

public ArrayList&lt;BeanVisitaBC&gt; ottieniListaVisitaBC(int pIdBeneCulturale)
throws SQLException
{
ArrayList&lt;BeanVisitaBC&gt; finteVisite = new ArrayList&lt;BeanVisitaBC&gt;(0);

finteVisite.add(new BeanVisitaBC(4, 1, &quot;beautiful exhibition&quot;, 1, new Date()));
finteVisite.add(new BeanVisitaBC(3, 1, &quot;show particular but interesting&quot;, 1, new Date()));
finteVisite.add(new BeanVisitaBC(4, 1, &quot;beautiful exhibition&quot;, 1, new Date()));
finteVisite.add(new BeanVisitaBC(3, 1, &quot;show particular but interesting&quot;, 1, new Date()));
finteVisite.add(new BeanVisitaBC(4, 1, &quot;beautiful exhibition&quot;, 1, new Date()));
finteVisite.add(new BeanVisitaBC(3, 1, &quot;show particular but interesting&quot;, 1, new Date()));
finteVisite.add(new BeanVisitaBC(4, 1, &quot;beautiful exhibition&quot;, 1, new Date()));
finteVisite.add(new BeanVisitaBC(3, 1, &quot;show particular but interesting&quot;, 1, new Date()));
finteVisite.add(new BeanVisitaBC(4, 1, &quot;beautiful exhibition&quot;, 1, new Date()));
finteVisite.add(new BeanVisitaBC(3, 1, &quot;show particular but interesting&quot;, 1, new Date()));

// FinteVisite.add (new BeanVisitaBC (5, 1, &quot;This show is not 'evil', 1, new Date (new Date (). GetTime () - (unisa.gps.etour.util.CostantiGlobali.TRENTA_GIORNI * 1 ))));
finteVisite.add(new BeanVisitaBC(5, 1, &quot;This show is not 'evil', 1, new Date(new Date().getTime() - 2591000000L)));
finteVisite.add(new BeanVisitaBC(3, 1, &quot;This show is not 'evil', 1, new Date(new Date().getTime() - (unisa.gps.etour.util.CostantiGlobali.TRENTA_GIORNI * 2))));

// FinteVisite.add (new BeanVisitaBC (1, 1, &quot;E 'nice but you pay so much!&quot;, 2, new Date (106, 0, 23)));
// FinteVisite.add (new BeanVisitaBC (3, 1, &quot;The food is pretty good!&quot;, 1, new Date (106, 3, 23)));
// FinteVisite.add (new BeanVisitaBC (4, 1, &quot;We eat very well!&quot;, 2, new Date (107, 4, 4)));
// FinteVisite.add (new BeanVisitaBC (1, 1, &quot;We eat!&quot;, 3, new Date (107, 5, 24)));
// FinteVisite.add (new BeanVisitaBC (5, 1, &quot;Beautiful place&quot;, 4, new Date (107, 4, 25)));
// FinteVisite.add (new BeanVisitaBC (4, 1, &quot;Excellent views of the sea&quot;, 5, new Date (107, 4, 25)));
// FinteVisite.add (new BeanVisitaBC (3, 1, &quot;Bell&quot;, 6, new Date (107, 4, 25)));
// FinteVisite.add (new BeanVisitaBC (3, 1, &quot;I think it's a bad place&quot;, 7, new Date (107, 4, 26)));
// FinteVisite.add (new BeanVisitaBC (3, 1, &quot;W open air&quot;, 8, new Date (107, 4, 27)));
// FinteVisite.add (new BeanVisitaBC (5, 1, &quot;better than others&quot;, 9, new Date (107, 5, 2)));
// FinteVisite.add (new BeanVisitaBC (3, 1, &quot;Forza Napoli&quot;, 10, new Date (107, 5, 8)));
// FinteVisite.add (new BeanVisitaBC (4, 1, &quot;The food is pretty good!&quot;, 11, new Date (107, 5, 9)));
// FinteVisite.add (new BeanVisitaBC (5, 1, &quot;We eat very well!&quot;, 12, new Date (107, 5, 11)));
// FinteVisite.add (new BeanVisitaBC (4, 1, &quot;very good&quot;, 13, new Date (107, 5, 12)));
// FinteVisite.add (new BeanVisitaBC (5, 1, &quot;very good&quot;, 14, new Date (107, 5, 13)));
// FinteVisite.add (new BeanVisitaBC (5, 1, &quot;I was really good&quot;, 15, new Date (107, 5, 13)));
// FinteVisite.add (new BeanVisitaBC (4, 1, &quot;good place&quot;, 16, new Date (107, 5, 14)));
// FinteVisite.add (new BeanVisitaBC (3, 1, &quot;I guess I'm not going back&quot;, 17, new Date (107, 5, 23)));
// FinteVisite.add (new BeanVisitaBC (3, 1, &quot;I think there is better&quot;, 18, new Date (107, 5, 24)));
// FinteVisite.add (new BeanVisitaBC (2, 1, &quot;sucks&quot;, 19, new Date (107, 5, 24)));
// FinteVisite.add (new BeanVisitaBC (5, 1, &quot;Too beautiful&quot;, 20, new Date (107, 5, 25)));

return finteVisite;
}

public ArrayList&lt;BeanVisitaBC&gt; ottieniListaVisitaBCTurista(int pIdTurista)
throws SQLException
{
return null;
}

public BeanVisitaBC ottieniVisitaBC(int pIdBeneCulturale, int pIdTurista)
throws SQLException
{
return null;
}
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_DBVisitaPR</id>
      <content>package unisa.gps.etour.repository;

import java.sql.Connection;
import java.sql.Date;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import java.util.ArrayList;

import unisa.gps.etour.bean.BeanVisitaPR;

/**
* Class that implements the interface IDBVisitaPR
*
* @Author Joseph Martone
* @Version 0.1 2007 eTour Project - Copyright by SE @SA Lab DMI University
* Of Salerno
*/
public class DBVisitaPR implements IDBVisitaPR {
// Empty constructor
public DBVisitaPR() {

}

public boolean inserisciVisitaPR(BeanVisitaPR pVisita) throws SQLException {
// Variable for the connection
Connection conn = null;
// Variable for the query
Statement stat = null;
// Variable for the query results
ResultSet result = null;
try {
// Create the date of visit
java.sql.Date dataVisita = new Date(pVisita.getDataVisita().getTime());
// Get the connection
conn = DBConnessionePool.ottieniConnessione();
// Create the Statement
stat = conn.createStatement();
// Query to get the average rating of a property
String queryMediaVoti = &quot;SELECT MediaVoti, NumeroVoti FROM puntodiristoro WHERE Id =&quot;
+ pVisita.getIdPuntoDiRistoro();
result = stat.executeQuery(queryMediaVoti);
// Variable for the average rating
double media = 0;
// Variable for the number of votes
int numeroVoti = 0;
if (result.next()) {
media = result.getDouble(&quot;MediaVoti&quot;);
numeroVoti = result.getInt(&quot;NumeroVoti&quot;);
media = ((media * numeroVoti) + pVisita.getVoto()) / ++numeroVoti;
}
// Query for the insertion
String query = &quot;INSERT INTO visitapr (IdTurista, IdPuntoDiRistoro, DataVisita, Vote, Comment) VALUES (&quot;
+ pVisita.getIdTurista() + &quot;,&quot; + pVisita.getIdPuntoDiRistoro() + &quot;,'&quot; + dataVisita + &quot;',&quot;
+ pVisita.getVoto() + &quot;,'&quot; + pVisita.getCommento() + &quot;')&quot;;
String query2 = &quot;UPDATE puntodiristoro SET MediaVoti =&quot; + media
+ &quot;, NumeroVoti =&quot; + numeroVoti + &quot; WHERE Id =&quot; + pVisita.getIdPuntoDiRistoro();
// You run the insert query
stat.executeQuery(&quot;BEGIN&quot;);
int i = stat.executeUpdate(query);
i = i * stat.executeUpdate(query2);
stat.executeQuery(&quot;COMMIT&quot;);
// This returns the backup
return (i == 1);
}
// Always runs and takes care to close the Result, the Statement
// And Connection
finally {
if (result != null) {
result.close();
}
if (stat != null) {
stat.close();
}
if (conn != null) {
DBConnessionePool.rilasciaConnessione(conn);
}
}
}

public boolean modificaVisitaPR(BeanVisitaPR pVisita) throws SQLException {
// Variable for the connection
Connection conn = null;
// Variable for the query
Statement stat = null;
try {
// Create the date of visit
java.sql.Date dataVisita = new Date(pVisita.getDataVisita().getTime());
// Get the connection
conn = DBConnessionePool.ottieniConnessione();
// Create the Statement
stat = conn.createStatement();
// Query for amendment
String query = &quot;UPDATE visitapr SET DataVisita = '&quot; + dataVisita + &quot;', Comment ='&quot; + pVisita.getCommento()
+ &quot;' WHERE IdPuntoDiRistoro =&quot; + pVisita.getIdPuntoDiRistoro() + &quot; AND IdTurista =&quot;
+ pVisita.getIdTurista();
// You run the query for Change
int i = stat.executeUpdate(query);
// This returns the backup
return (i == 1);
}
// Always runs and takes care to close the Result, the Statement
// And Connection
finally {
if (stat != null) {
stat.close();
}
if (conn != null) {
DBConnessionePool.rilasciaConnessione(conn);
}
}
}

public ArrayList&lt;BeanVisitaPR&gt; ottieniListaVisitaPR(int pIdPuntoDiRistoro) throws SQLException {
// Variable for the connection
Connection conn = null;
// Variable for the query
Statement stat = null;
// Variable for the query results
ResultSet result = null;
try {
// Get the connection
conn = DBConnessionePool.ottieniConnessione();
// Create the Statement
stat = conn.createStatement();
// Query to extract the list of requests for a
// Refreshment
String query = &quot;SELECT * FROM visitapr WHERE IdPuntoDiRistoro =&quot; + pIdPuntoDiRistoro;
// The query is executed
result = stat.executeQuery(query);
ArrayList&lt;BeanVisitaPR&gt; lista = new ArrayList&lt;BeanVisitaPR&gt;();
// We extract the results from the result set and moves in
// List
// To be returned
while (result.next()) {
java.util.Date dataVisita = new java.util.Date(result.getDate(&quot;DataVisita&quot;).getTime());
lista.add(new BeanVisitaPR(result.getInt(&quot;Customer&quot;), result.getInt(&quot;IdPuntoDiRistoro&quot;),
result.getString(&quot;Comment&quot;), result.getInt(&quot;IdTurista&quot;), dataVisita));
}
return lista;
}
// Always runs and takes care to close the Result, the Statement
// And Connection
finally {
if (result != null) {
result.close();
}
if (stat != null) {
stat.close();
}
if (conn != null) {
DBConnessionePool.rilasciaConnessione(conn);
}
}
}

public ArrayList&lt;BeanVisitaPR&gt; ottieniListaVisitaPRTurista(int pIdTurista) throws SQLException {
// Variable for the connection
Connection conn = null;
// Variable for the query
Statement stat = null;
// Variable for the query results
ResultSet result = null;
try {
// Get the connection
conn = DBConnessionePool.ottieniConnessione();
// Create the Statement
stat = conn.createStatement();
// Query to extract the list of requests for a
// Eating place for tourists
String query = &quot;SELECT * FROM visitapr WHERE IdTurista =&quot; + pIdTurista;
// The query is executed
result = stat.executeQuery(query);
// List that will contain the BeanVisitaPR
ArrayList&lt;BeanVisitaPR&gt; lista = new ArrayList&lt;BeanVisitaPR&gt;();
// We extract the results from the result set and moves in
// List
// To be returned
while (result.next()) {
// Add to the list BeanVisitaPR
java.util.Date dataVisita = new java.util.Date(result.getDate(&quot;DataVisita&quot;).getTime());
lista.add(new BeanVisitaPR(result.getInt(&quot;Customer&quot;), result.getInt(&quot;IdPuntoDiRistoro&quot;),
result.getString(&quot;Comment&quot;), result.getInt(&quot;IdTurista&quot;), dataVisita));
}
// Return the list
return lista;
}
// Always runs and takes care to close the Result, the Statement
// And Connection
finally {
if (result != null) {
result.close();
}
if (stat != null) {
stat.close();
}
if (conn != null) {
DBConnessionePool.rilasciaConnessione(conn);
}
}
}

public BeanVisitaPR ottieniVisitaPR(int pIdPuntoDiRistoro, int pIdTurista) throws SQLException {
// Variable for the connection
Connection conn = null;
// Variable for the query
Statement stat = null;
// Variable for the query results
ResultSet result = null;
try {
// Get the connection
conn = DBConnessionePool.ottieniConnessione();
// Create the Statement
stat = conn.createStatement();
// Query for the extraction of the visit made by a tourist to
// A given point of comfort
String query = &quot;SELECT * FROM visitapr WHERE IdPuntoDiRistoro =&quot; + pIdPuntoDiRistoro
+ &quot; AND IdTurista =&quot; + pIdTurista;
// The query is executed
result = stat.executeQuery(query);
// Get the bean's visit sought based on the ID of the tourist and
// Of refreshment
BeanVisitaPR beanTemp = null;
if (result.next()) {
// Create the BeanVisitaPR
java.util.Date dataVisita = new java.util.Date(result.getDate(&quot;DataVisita&quot;).getTime());
beanTemp = new BeanVisitaPR(result.getInt(&quot;Customer&quot;), result.getInt(&quot;IdPuntoDiRistoro&quot;),
result.getString(&quot;Comment&quot;), result.getInt(&quot;IdTurista&quot;), dataVisita);
}
// Return the BeanTemp
return beanTemp;
}
// Always runs and takes care to close the Result, the Statement
// And Connection
finally {
if (result != null) {
result.close();
}
if (stat != null) {
stat.close();
}
if (conn != null) {
DBConnessionePool.rilasciaConnessione(conn);
}
}
}
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_DeskManager</id>
      <content>package unisa.gps.etour.gui;

import java.awt.Dimension;
import java.awt.Point;
import java.awt.Rectangle;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.beans.PropertyVetoException;
import java.util.Iterator;
import java.util.Vector;
import javax.swing.DefaultDesktopManager;
import javax.swing.ImageIcon;
import javax.swing.JComponent;
import javax.swing.JDesktopPane;
import javax.swing.JInternalFrame;
import javax.swing.JMenuItem;
import javax.swing.JPopupMenu;
import unisa.gps.etour.gui.operatoreagenzia.IScheda;

/**
* Class for handling custom internal frame inserted in a
* JDesktopPane.
*
* @Version 0.1
* @Author Mario Gallo
*
* (c) 2007 eTour Project - Copyright by DMI SE @ SA Lab --
* University of Salerno
*/
public class DeskManager extends DefaultDesktopManager {
private static final String URL_IMAGES = &quot;/unisa/gps/eTour/gui/images/&quot;;
private JPopupMenu deskMenu;
private JMenuItem riduciTutti;
private JMenuItem ripristinaTutti;
private JMenuItem chiudiTutti;
private Vector&lt;JInternalFrame&gt; iconifiedFrames;
private int locationX;
private int locationY;

/**
* Default Constructor.
*/
public DeskManager() {
super();
iconifiedFrames = new Vector&lt;JInternalFrame&gt;();
initializeDeskMenu();
locationX = 0;
locationY = -1;
}

/**
* Manages the movement of JInternalFrame inside the area of
* JDesktopPane, preventing the frames are brought out of the visible area.
*
* @param aComponent javax.swing.JComponent - the component of which
* Manage the move.
* @param x int - x cordinate the point where it was moved
* Component.
* @param y int - y cordinate the point where it was moved
* Component.
*/
public void dragFrame(JComponent aComponent, int x, int y) {
if (aComponent instanceof JInternalFrame) {
JInternalFrame frame = (JInternalFrame) aComponent;
if (frame.isIcon()) {
x = frame.getLocation().x;
y = frame.getLocation().y;
} else {
JDesktopPane desk = frame.getDesktopPane();
Dimension d = desk.getSize();
if (x &lt; 0) {
x = 0;
} else {
if (x + frame.getWidth() &gt; d.width) {
x = d.width - frame.getWidth();
}
}

if (y &lt; 0) {
y = 0;
} else {
if (y + frame.getHeight() &gt; d.height) {
y = d.height - frame.getHeight();
}
}
}
}

super.dragFrame(aComponent, x, y);
}

/**
* Customize the action of reducing the JInternalFrame an icon, creating
* Clickable bars on the bottom of JDesktopPane.
*
* @param frame JInternalFrame - a frame inside a
* JDesktopPane.
*/
public void iconifyFrame(JInternalFrame frame) {
try {
JDesktopPane desk = frame.getDesktopPane();
Dimension d = desk.getSize();
frame.setClosable(false);
frame.setMaximizable(true);
frame.setIconifiable(false);
Rectangle caratteristiche;
if (frame.isMaximum()) {
caratteristiche = frame.getNormalBounds();
} else {
caratteristiche = frame.getBounds();
}
frame.setSize(200, 30);
setPreviousBounds(frame, caratteristiche);
if (iconifiedFrames.isEmpty()) {
locationX = 0;
} else {
locationX += 200;
}
if (locationY == -1) {
locationY = d.height - 30;
}
if (locationX + 200 &gt; d.width) {
locationX = 0;
locationY -= 30;
}
frame.setLocation(locationX, locationY);
frame.setResizable(false);
iconifiedFrames.add(frame);
} catch (Exception ex) {
ex.printStackTrace();
}
}

/**
* Restore the frame from the effect of minimizing, resetting the
* Position and size it had before.
*
* @param frame javax.swing.JInternalFrame - a frame inside a
* JDesktopPane.
*/
public void deiconifyFrame(JInternalFrame frame) {
try {
JDesktopPane desk = frame.getDesktopPane();
Dimension deskSize = desk.getSize();
iconifiedFrames.remove(frame);
Rectangle caratteristiche = getPreviousBounds(frame);
if (caratteristiche.width &gt; deskSize.width) {
caratteristiche.width = deskSize.width;
caratteristiche.x = 0;
}
if (caratteristiche.width + caratteristiche.x &gt; deskSize.width) {
caratteristiche.x = (deskSize.width - caratteristiche.width) / 2;
}
if (caratteristiche.height &gt; deskSize.height) {
caratteristiche.height = deskSize.height;
caratteristiche.y = 0;
}
if (caratteristiche.height + caratteristiche.y &gt; deskSize.height) {
caratteristiche.y = (deskSize.height - caratteristiche.height) / 2;
}
frame.setSize(caratteristiche.width, caratteristiche.height);
frame.setLocation(caratteristiche.x, caratteristiche.y);
frame.setIconifiable(true);
frame.setClosable(true);
if (frame instanceof IScheda) {
frame.setMaximizable(false);
frame.setResizable(false);
} else {
frame.setMaximizable(true);
frame.setResizable(true);
}
locationX -= 200;
if (locationX &lt; 0) {
locationX = deskSize.width / 200 - 200;
if (locationY != deskSize.height - 30) {
locationY -= 30;
}
}
repaintIconifiedFrames(desk);
} catch (Exception ex) {
ex.printStackTrace();
}
}

/**
* Return the focus to a selected frame, and, if the frame
* Is iconificato, the deiconifica.
*
* @param frame JInternalFrame - a frame within a
* JDesktopPane
*/
public void activateFrame(JInternalFrame frame) {
try {
if (frame.isIcon())
frame.setIcon(false);
frame.setSelected(true);
super.activateFrame(frame);
} catch (PropertyVetoException e) {
e.printStackTrace();
}
}

/**
* Center the frame supplied as a parameter in JDesktopPane.
*
* @param frame javax.swing.JInternalFrame - a frame inside a
* JDesktopPane.
* @return void
*/
public void centerFrame(JInternalFrame frame) {
JDesktopPane desk = frame.getDesktopPane();
Dimension d = desk.getSize();
Dimension f = frame.getSize();
frame.setLocation(d.width / 2 - f.width / 2, d.height / 2 - f.height / 2);
}

/**
* Redraw the frames in the desktop iconificati bread provided.
*
* @param desk javax.swing.JDesktopPane - a desktop bread associated with a
* Desk manager.
* @throws IllegalArgumentException - was supplied as a parameter
* JDesktopPane which is not associated with a Desk Manager.
*/
public void repaintIconifiedFrames(JDesktopPane desk)
throws IllegalArgumentException {
if (desk.getDesktopManager() != this)
throw new IllegalArgumentException(
&quot;I found no object&quot;
+ &quot;Type DeskManager associated&quot;);
Iterator&lt;JInternalFrame&gt; iconificati = iconifiedFrames.iterator();
int i = 0;
int xLocation;
int yLocation = desk.getHeight() - 30;
while (iconificati.hasNext()) {
JInternalFrame corrente = iconificati.next();
xLocation = 200 * i;
if (xLocation + 200 &gt;= desk.getWidth()) {
xLocation = 0;
yLocation -= 30;
i = 0;
}
corrente.setLocation(xLocation, yLocation);
i++;
}
}

/**
* Redraw (and resize if necessary) all the frames contained in a
* Since JDesktopPane.
*
* @param desk javax.swing.JDesktopPane - a desktop pane.
* @throws IllegalArgumentException - if the desktop bread supply is not
* Associated with a desktop manager like DeskManager.
*/
public void repaintAllFrames(JDesktopPane desk)
throws IllegalArgumentException {
if (desk.getDesktopManager() != this)
throw new IllegalArgumentException(
&quot;I found no object&quot;
+ &quot;Type DeskManager associated&quot;);
JInternalFrame[] frames = desk.getAllFrames();
Dimension deskSize = desk.getSize();
for (int i = 0; i &lt; frames.length; i++) {
JInternalFrame corrente = frames[i];
if (!corrente.isIcon()) {
Rectangle frameBounds = corrente.getBounds();
if (frameBounds.width &gt; deskSize.width)
frameBounds.width = deskSize.width;
if (frameBounds.height &gt; deskSize.height)
frameBounds.height = deskSize.height;
if (frameBounds.x + frameBounds.width &gt; deskSize.width)
frameBounds.x = deskSize.width - frameBounds.width;
if (frameBounds.y + frameBounds.height &gt; deskSize.height)
frameBounds.y = deskSize.height - frameBounds.height;
corrente.setBounds(frameBounds);
}
}
repaintIconifiedFrames(desk);
}

/**
* Open a frame of the class specified using the display
* Waterfall. If you already have a frame of classes given, the frame is
* Activated.
*
* @param classe class - a class type that extends JInternalFrame.
* @param desk javax.swing.JDesktopPane - a desktop pane.
* @throws IllegalArgumentException - The class provided is not a
* JInternalFrame.
*/
public void openFrame(Class classe, JDesktopPane desk)
throws IllegalArgumentException {
if (classe.getSuperclass() != JInternalFrame.class)
throw new IllegalArgumentException(
&quot;The class provided input has&quot;
+ &quot;As a superclass javax.swing.JInternalFrame.&quot;);
try {
JInternalFrame[] frames = desk.getAllFrames();
int i;
for (i = 0; i &lt; frames.length; i++)
if (frames[i].getClass().equals(classe))
break;
if (i == frames.length) {
JInternalFrame nuovo = (JInternalFrame) classe.newInstance();
desk.add(nuovo, Integer.MAX_VALUE);
Dimension frameSize = nuovo.getPreferredSize();
nuovo.setSize(frameSize);
Dimension deskSize = desk.getSize();
Point posNuovo = new Point(10, 10);
for (i = frames.length - 1; i &gt;= 0; i--) {
if (frames[i].getLocation().equals(posNuovo)) {
posNuovo.x = frames[i].getLocation().x + 30;
posNuovo.y = frames[i].getLocation().y + 30;
}
}
if ((posNuovo.x + frameSize.width &gt; deskSize.width)
|| (posNuovo.y + frameSize.height &gt; deskSize.height))
centerFrame(nuovo);
else
nuovo.setLocation(posNuovo);
nuovo.setVisible(true);
} else {
activateFrame(frames[i]);
}
} catch (Exception ex) {
ex.printStackTrace();
}
}

/**
* Displays a popup menu with options for frames of a desktop bread
* The selected location.
*
* @param aPoint java.awt.Point - the point where to place the menu.
* @param desk javax.swing.JDesktopPane - a JDesktopPane which is an associated
* Instance of DeskManager.
* @throws IllegalArgumentException - was provided as a parameter
* JDesktopPane that is not associated with a Desk Manager.
*/
public void showPopupMenu(Point aPoint, JDesktopPane desk) {
if (desk.getDesktopManager() != this)
throw new IllegalArgumentException(
&quot;I found no object&quot;
+ &quot;Type DeskManager associated&quot;);
ripristinaTutti.setEnabled(true);
chiudiTutti.setEnabled(true);
riduciTutti.setEnabled(true);
JInternalFrame[] frames = desk.getAllFrames();
if (frames.length == 0) {
ripristinaTutti.setEnabled(false);
chiudiTutti.setEnabled(false);
riduciTutti.setEnabled(false);
}
if (iconifiedFrames.size() == 0) {
ripristinaTutti.setEnabled(false);
}
if (iconifiedFrames.size() == frames.length) {
riduciTutti.setEnabled(false);
}
deskMenu.show(desk, aPoint.x, aPoint.y);
}

/**
* Deiconifica all frames previously iconificati.
*/
public void deiconifyAll() {
if (iconifiedFrames.size() != 0) {
Vector&lt;JInternalFrame&gt; copia = (Vector&lt;JInternalFrame&gt;) iconifiedFrames.clone();
Iterator&lt;JInternalFrame&gt; frames = copia.iterator();
while (frames.hasNext()) {
try {
frames.next().setIcon(false);
} catch (PropertyVetoException e) {
e.printStackTrace();
}
}
copia = null;
iconifiedFrames.removeAllElements();
}
}

/**
* Minimize all frames of a JDesktopPane provided in is an associated
* DeskManager.
*
* @param desk JDesktopPane - a desktop pane.
* @throws IllegalArgumentException - was provided as a parameter
* JDesktopPane that is not associated with a Desk Manager.
*/
public void iconifyAll(JDesktopPane desk) {
if (desk.getDesktopManager() != this)
throw new IllegalArgumentException(
&quot;I found no object&quot;
+ &quot;Type DeskManager associated&quot;);
JInternalFrame[] frames = desk.getAllFrames();
for (int i = 0; i &lt; frames.length; i++)
try {
frames[i].setIcon(true);
} catch (PropertyVetoException e) {
e.printStackTrace();
}
}

/**
* Close all frames in a given JDesktopPane.
*
* @param desk javax.swing.JDesktopPane - a desktop bread is an associated
* DeskManager.
* @throws IllegalArgumentException - was provided as a parameter
* JDesktopPane that is not associated with a Desk Manager.
*/
public void closeAll(JDesktopPane desk) {
if (desk.getDesktopManager() != this)
throw new IllegalArgumentException(
&quot;I found no object&quot;
+ &quot;Type DeskManager associated&quot;);
JInternalFrame[] frames = desk.getAllFrames();
if (frames.length != 0) {
for (int i = 0; i &lt; frames.length; i++)
frames[i].dispose();
iconifiedFrames.removeAllElements();
}
}

/**
* Initialize the DeskMenu.
*/
public void initializeDeskMenu() {
deskMenu = new JPopupMenu();
riduciTutti = new JMenuItem(&quot;Collapse All&quot;);
riduciTutti.setIcon(new ImageIcon(getClass().getResource(
URL_IMAGES + &quot;reduceAll.png&quot;)));
ripristinaTutti = new JMenuItem(&quot;Reset All&quot;);
ripristinaTutti.setIcon(new ImageIcon(getClass().getResource(
URL_IMAGES + &quot;activateall.png&quot;)));
chiudiTutti = new JMenuItem(&quot;Close All&quot;);
chiudiTutti.setIcon(new ImageIcon(getClass().getResource(
URL_IMAGES + &quot;closeall.png&quot;)));
deskMenu.add(riduciTutti);
deskMenu.addSeparator();
deskMenu.add(ripristinaTutti);
deskMenu.addSeparator();
deskMenu.add(chiudiTutti);
ActionListener menuListener = new ActionListener() {
public void actionPerformed(ActionEvent aEvent) {
if (aEvent.getSource() == ripristinaTutti)
deiconifyAll();
if (aEvent.getSource() == chiudiTutti)
closeAll((JDesktopPane) deskMenu.getInvoker());
if (aEvent.getSource() == riduciTutti)
iconifyAll((JDesktopPane) deskMenu.getInvoker());
}
};
riduciTutti.addActionListener(menuListener);
ripristinaTutti.addActionListener(menuListener);
chiudiTutti.addActionListener(menuListener);
}
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_ElencoCategorie</id>
      <content>package unisa.gps.etour.control.fuzzy;

import java.io.Serializable;
import java.util.ArrayList;
import java.util.Enumeration;
import java.util.Hashtable;
import java.util.List;

public class ElencoCategorie implements Serializable {

/**
* Keeps track of data in each category
*/
private static final long serialVersionUID = 1L;
private Hashtable&lt;String, Categoria&gt; categorie; // hash table that keeps
// For each category a
// Class category
private Hashtable&lt;String, float[]&gt; totTermini; // hash table that keeps
// The terms of all
// Categories
float maxDist; // contains the maximum distances

/**
* The constructor initializes the two hash tables that contain
* Categories and terms of all categories
*/
public ElencoCategorie() {
categorie = new Hashtable&lt;String, Categoria&gt;();
totTermini = new Hashtable&lt;String, float[]&gt;();
}

/**
* Access method attribute maxDist
*
* @return the maximum distance of all the terms in all categories
*/
public float getMaxDist() {
return maxDist;
}

/**
* Access method to the table of categories
*
* @return categories
*/
public Hashtable&lt;String, Categoria&gt; getAllCategorie() {
return categorie;
}

/**
* Method of accessing the table of total time
*
* @return totTermini
*/
public Hashtable&lt;String, float[]&gt; getTotTermini() {
return totTermini;
}

/**
* Method to access a category in the table of
* Categories
*
* @param pNomeCategoria
* @return object categories representing the category name
* pNomeCategoria
*/
public Categoria getCategoria(String pNomeCategoria) {
if (esisteCategoria(pNomeCategoria)) // if there is the appropriate category
return categorie.get(pNomeCategoria); // returns the
// Assciato to pNomeCategoria

return null; // otherwise null
}

/**
* Method of accessing the values of a particular term in this
* Category table
*
* @param pTermine
* @return Returns the values associated with the term pTermine
*/
public float[] getTermine(String pTermine) {
if (esisteTermine(pTermine)) // if the term is present in tebella
// Terms of total
return (float[]) totTermini.get(pTermine); // return the vaolre
// Associate

return null; // null otherwise
}

/**
* Method which allows you to add a category to the table of
* Categories
*
* @param pNomeCategoria category name to add
* @param pCategoria object associated category
* @return true if the operation was successfully carried out false
* Otherwise
*/
public boolean addCategoria(String pNomeCategoria, Categoria pCategoria) {
if (!esisteCategoria(pNomeCategoria)) // if the category exists
return false; // returns false

categorie.put(pNomeCategoria, pCategoria); // otherwise load the
// Category in the table

return true; // returns true
}

/**
* Edit a category of the category table
*
* @param pNomeCategoria category name to edit
* @param pCategoria object to be associated with this category
* @return true if the operation was successfully carried out false
* Otherwise
*/
public boolean setCategoria(String pNomeCategoria, Categoria pCategoria) {
if (esisteCategoria(pNomeCategoria)) // if the category does not exist
return false; // returns false

categorie.put(pNomeCategoria, pCategoria); // update the table of
// Catogorie

return true; // returns true
}

/**
* Method which allows you to set the value of a term in the tables
* Total time
*
* @param pTermine name term
* @param pVal value to associate with the term
*/
public void setTermine(String pTermine, float[] pVal) {
totTermini.put(pTermine, pVal);
}

/**
* Method which allows the value of the seven kings of the maximum distance of
* Terms from one category
*
* @param pMaxDist
*/
public void setMaxDist(float pMaxDist) {
maxDist = pMaxDist;
}

/**
* Method which allows to derive a collection of names of iterable
* All categories in the categories tabela
*
* @return string iterable Collection
*/
public Iterable&lt;String&gt; Categories() {
List&lt;String&gt; toReturn = new ArrayList&lt;String&gt;();// create a new list
for (Enumeration&lt;String&gt; val = categorie.keys(); val.hasMoreElements();)// iterates
// N
// Times
// Where
// N is
// The
// Number
// By
// Categories
// Current
// In
// Table
{
toReturn.add(val.nextElement());// adds to the list the name of
// A category
}

return toReturn;
}

/**
* Method aids to verify the existence of a category
* In the table of categories
*
* @param pKey name of the category
* @return true if the category exists false otherwise
*/
public boolean esisteCategoria(String pKey) {
try {
categorie.get(pKey); // try to extract the category name pKey
// The table of categories
return true; // if the transaction does not raise exceptions category
// Exists and returns true
}
catch (NullPointerException e) {
return false; // false otherwise
}
}

/**
* Method aids to verify the existence of a term
* In the table of total time
*
* @param pKey term
* @return true if the term exists false otherwise
*/
public boolean esisteTermine(String pKey) {
// see esisteCategoria
try {
if (totTermini.get(pKey) != null)
return true;
}
catch (NullPointerException e) {
return false;
}

return false;
}
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_FeedBackTableModel</id>
      <content>/*
* FeedbackTableModel.java
*
* 1.0
*
* 21/05/2007
*
* 2007 eTour Project - Copyright by SE @ SA Lab - DMI University of Salerno
*/
package unisa.gps.etour.gui.operatoreagenzia.tables;

import java.util.ArrayList;
import java.util.Date;
import java.util.HashMap;
import java.util.Iterator;

import javax.swing.table.*;

import unisa.gps.etour.bean.BeanVisitaBC;
import unisa.gps.etour.bean.BeanVisitaPR;

/**
* &lt;b&gt;FeedbackTableModel&lt;/b&gt;
* &lt;p&gt;Container model of data for feedback received
* To be a cultural or a refreshment.&lt;/p&gt;
*
* @see javax.swing.table.AbstractTableModel
* @see unisa.gps.etour.bean.BeanVisitaBC
* @see unisa.gps.etour.bean.BeanVisitaPR
* @version 1.0
* @author Mario Gallo
*/
public class FeedBackTableModel extends AbstractTableModel {

private static final long serialVersionUID = 1L;
private static final String[] headers = {&quot;rating&quot;, &quot;Comment&quot;, &quot;Release Date&quot;, &quot;Issued by&quot;};
private static final Class[] columnClasses = {Integer.class, String.class, Date.class, String.class};
private ArrayList&lt;Object[]&gt; data;

/**
* Default Constructor. We only provide the model but not
* Loads no data in it.
*/
public FeedBackTableModel() {
data = new ArrayList&lt;Object[]&gt;();
}

/**
* Constructor that takes as input an ArrayList of BeanVisitaBC or
* BeanVisitaPR and copies of the data within the model
* Preparing for display.
*
* @param pDatiFeedback java.util.ArrayList - the ArrayList of bean.
*/
public FeedBackTableModel(HashMap&lt;?, String&gt; pDatiFeedback) {
this();
if (pDatiFeedback == null || pDatiFeedback.size() == 0) {
return;
}
Iterator&lt;?&gt; itera = pDatiFeedback.keySet().iterator();
while (itera.hasNext()) {
Object current = itera.next();
if (current instanceof BeanVisitaBC) {
insertVisitaBC((BeanVisitaBC) current, pDatiFeedback.get(current));
}
else if (current instanceof BeanVisitaPR) {
insertVisitaPR((BeanVisitaPR) current, pDatiFeedback.get(current));
}
}
}

/**
* Returns the number of columns provided by the model.
*
* @return int - the number of columns.
*/
public int getColumnCount() {
return headers.length;
}

/**
* Returns the number of rows currently in the model.
*
* @return int - the number of rows.
*/
public int getRowCount() {
return data.size();
}

/**
* Returns the column name from the index provided.
*
* @return String - the name of the column.
* @exception IllegalArgumentException - if the column index is not provided
* In the model.
*/
public String getColumnName(int pColumn) throws IllegalArgumentException {
if (pColumn &gt;= getColumnCount() || pColumn &lt; 0) {
throw new IllegalArgumentException(
&quot;The column index is not provided in the model.&quot;);
}
return headers[pColumn];
}

/**
* Returns the object in the model to the row and column provided.
*
* @param pRow - the line number.
* @param pColumn - the column number.
* @return Object - the object contained in the selected cell.
* @exception IllegalArgumentException - if the index or the row or column not provided
* Are present in the model.
*/
public Object getValueAt(int pRow, int pColumn) throws IllegalArgumentException {
if (pRow &gt;= getRowCount() || pRow &lt; 0) {
throw new IllegalArgumentException(&quot;The row index is not provided in the model.&quot;);
}
if (pColumn &gt;= getColumnCount() || pColumn &lt; 0) {
throw new IllegalArgumentException(&quot;The column index is not provided in the model.&quot;);
}
return data.get(pRow)[pColumn];
}

/**
* Returns the class of objects in the column of which is provided in the index.
*
* @param pColumn - the column number.
* @return Class - the class of objects of the selected column.
* @exception IllegalArgumentException - if the index column does not pro
* In the model.
*/
public Class getColumnClass(int pColumn) throws IllegalArgumentException {
if (pColumn &gt;= getColumnCount() || pColumn &lt; 0) {
throw new IllegalArgumentException(&quot;The column index is not provided in the model.&quot;);
}
return columnClasses[pColumn];
}

/**
* Returns whether the selected cell editable.
*
* @return boolean - true if the cell editable
* False otherwise
* @param pRow - the line number.
* @param pColumn - the column number.
* @exception IllegalArgumentException - if the index or the row or column are not provided
* In the model.
*/
public boolean isCellEditable(int pRow, int pColumn) throws IllegalArgumentException {
return false;
}

/**
* The method is inherited by setValueAt TableModel does not need to SitoTableModel
* Because it provided the possibility to change a single cell.
* @deprecated
*/
public void setValueAt(Object value, int row, int col) {
}

/**
* Enter data on the feedback received from a cultural
* In the model from Bean.
*
* @param pVisitaBC BeanVisitaBC - the bean that contains the feedback from
* Cultural.
* @throws IllegalArgumentException - if the parameters supplied input not
* Are valid.
*/
public void insertVisitaBC(BeanVisitaBC pVisitaBC, String pUsername) throws IllegalArgumentException {
if (pVisitaBC == null || pUsername == null || pUsername.equals(&quot;&quot;)) {
throw new IllegalArgumentException(&quot;invalid parameters supplied input.&quot;);
}
Object[] aRow = new Object[6];
aRow[0] = pVisitaBC.getVoto();
aRow[1] = pVisitaBC.getCommento();
aRow[2] = pVisitaBC.getDataVisita();
aRow[3] = pUsername;
aRow[4] = pVisitaBC.getIdBeneCulturale();
aRow[5] = pVisitaBC.getIdTurista();
data.add(aRow);
}

/**
* Enter data on the feedback received from a refreshment
* In the model from Bean.
*
* @param pVisitaPR BeanVisitaPR - the bean that contains the feedback from
* Refreshment.
* @throws IllegalArgumentException - if the parameters supplied input not
* Are valid.
*/
public void insertVisitaPR(BeanVisitaPR pVisitaPR, String pUsername) throws IllegalArgumentException {
if (pVisitaPR == null || pUsername == null || pUsername.equals(&quot;&quot;)) {
throw new IllegalArgumentException(&quot;invalid parameters supplied input.&quot;);
}
Object[] aRow = new Object[6];
aRow[0] = pVisitaPR.getVoto();
aRow[1] = pVisitaPR.getCommento();
aRow[2] = pVisitaPR.getDataVisita();
aRow[3] = pUsername;
aRow[4] = pVisitaPR.getIdPuntoDiRistoro();
aRow[5] = pVisitaPR.getIdTurista();
data.add(aRow);
}

/**
* Updates the comment feedback contained in the table row selected.
*
* @param pNuovoCommento String - the new comment.
* @param pRow - the row to update.
* @throws IllegalArgumentException - if &lt;ul&gt; &lt;li&gt; the row index is not present in the model.
* &lt;li&gt; New comment supplied input is zero. &lt;/ul&gt;
*/
public void modificaCommento(String pNuovoCommento, int pRow) throws IllegalArgumentException {
if (pRow &gt;= getRowCount() || pRow &lt; 0) {
throw new IllegalArgumentException(&quot;The row index is not provided in the model.&quot;);
}
if (null == pNuovoCommento) {
throw new IllegalArgumentException(&quot;The new comment can not be null.&quot;);
}
data.get(pRow)[1] = pNuovoCommento;
fireTableDataChanged();
}

/**
* Returns the id of the row receive feedback provided on input.
*
* @param pRow int - the row number.
* @return int[] - the id of the feedback.
* @throws IllegalArgumentException - if the row index does not pro
* In the model.
*/
public int[] getIDFeedback(int pRow) throws IllegalArgumentException {
if (pRow &gt;= getRowCount() || pRow &lt; 0) {
throw new IllegalArgumentException(&quot;The row index is not provided in the model.&quot;);
}
int[] ids = new int[2];
ids[0] = (Integer) data.get(pRow)[4];
ids[1] = (Integer) data.get(pRow)[5];
return ids;
}

/**
* Returns the id of feedback to line number provided as input and removes it from the model.
*
* @param pRow int - the row number.
* @return int[] - the id of the feedback.
* @exception IllegalArgumentException - if the row index does not pro
* In the model.
*/
public int[] removeFeedback(int pRow) throws IllegalArgumentException {
int[] ids = getIDFeedback(pRow);
data.remove(pRow);
return ids;
}
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_Fuzzy</id>
      <content>package unisa.gps.etour.control.fuzzy;

import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.FileReader;
import java.io.IOException;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.rmi.RemoteException;
import java.util.Enumeration;
import java.util.Hashtable;
import java.util.Scanner;

public class Fuzzy {
/**
* Class that implements the methods used to calculate the Fuzzy
* Category of membership of a refreshment or a cultural property.
*/

/**
* Method for calculating the relevance of a term.
*
* @param distance: Contains the distance of the term from category
* Analyzed
* @param pMaxDist: Contains distaza maximum of all terms in all
* Categories.
* @return Returns the relevance of the term in the category.
*/
private static float relevance(float distance, float pMaxDist) {
return (distance / pMaxDist);
}

/**
* Method for calculating the distance between a term and a category
*
* @param pTermine: Contains the period analyzed
* @param pTotTermini: Tables of the total frequency of terms.
* @param frequenzaTesto: Table of the terms of the text analyzed.
* @param pCategoria: Category analyzed.
* @return Returns the distance of the term pTermine by category
* PCategoria
*/
private static float distance(String pTermine,
Hashtable&lt;String, float[]&gt; pTotTermini, float frequenzaTesto,
Category pCategoria) {

// The first variable tracks the frequency of a term
// Relating to a category
// The second keeps track of fraquenza a deadline for all
// Categories
float[] frequenzaCategoria = new float[3], frequenzaTotale = new float[3];

if (pCategoria.esisteTermine(pTermine)) { // if the term is
// In category
// Its frequency in this category is equal to the frequency
// KnowledgeBase
// More frequency in the search text
frequenzaCategoria = pCategoria.getVal(pTermine);
frequenzaCategoria[0] += frequenzaTesto;
} else {

// Otherwise it is equal to the frequency of the term in the text
// Analyzed
frequenzaCategoria[0] = frequenzaTesto;
}
if (pTotTermini.get(pTermine) != null) { // if the term exists in
// Table of the total time
frequenzaTotale = pTotTermini.get(pTermine); // Get the value

frequenzaTotale[0] += frequenzaTesto; // the total frequency is given
// Frequency in the text
// Analizzatp
// Plus any frequency stored in memory in the table
// Total time
}

return (frequenzaCategoria[0] / frequenzaTotale[0]); // distance is
// Equal to
// Frequency in
// Category
// The total frequency Fratto
}

/**
* Method for calculating the distance of a term from one category.
* Used for training
*
* @param pTermine period to analyze
* @param pCategoria category from which you must calculate the distance
* @param pTotTermini table total time
* @return Returns the distance of a term from one category
*/
private static float distance(String pTermine, Category pCategoria,
Hashtable&lt;String, float[]&gt; pTotTermini) {
return ((pCategoria.getVal(pTermine))[0] / (pTotTermini.get(pTermine))[0]);
}

/**
* Implementation of a function T-Norm
*
* @param a first value
* @param b the second value
* @return returns the value calculated using a function T-Norm
*/
private static float tNorm(float a, float b) {
return ((a * b) / ((2 - ((a + b) - (a * b)))));
// Return Math.min (a, b);
// Return a * b;
// Return Math.max (0, a + b-1);
}

/**
* Implementation of a function S-Norm
*
* @param a first value
* @param b the second value
* @return returns the value calculated using a function S-Norm
*/
private static float sNorm(float a, float b) {
return ((a + b) / (1 + a * b));
// Return Math.max (a, b);
// Return (a + b-(a * b));
// Return Math.min (1.1 + b);
}

/**
* Calculation of similarity between a category and a given text input
*
* @param pTermini table worded. It must contain to
* Pgni term values of importance and belonging situated in
* Vector float * in positions 1 and 2.
* @return returns a numeric value that indicates the similarity of a
* Text with the category on which one has calculated the values of
* Importance and belonging *
*/
private static float similarity(Hashtable&lt;String, float[]&gt; pTermini) {
float sum = 0; // return value

for (float[] val : pTermini.values()) { // for all elements of
// Table
sum += (tNorm(val[1], val[0])) / (sNorm(val[1], val[0])); // performs
// Sum of the values given by the division of function T-Norm
// With the function S-Norm made
// Between relevance and belonging
}

return sum;
}

/**
* Method for the calculation of membership of a text to a category
*
* @param val indicates the similarity of a text with a category
* @param maxSimilarity indicates the maximum similarity found
* @return restiuisce a value in the interval [0,1] that indicates the degree of
* Membership of the text to the category x
*/
private static float membership(float val, float maxSimilarity) {
return (val / maxSimilarity);
}

/**
* Method to delete a tense special characters and to bring
* All uppercase to lowercase
*
* @param pStr string transform
* @return restiuisce the text to lowercase characters and no special
*/
private static String replaceAndLower(String pStr) {
pStr = pStr.toLowerCase();
pStr = pStr.replace(&quot;,&quot;, &quot;&quot;);
pStr = pStr.replace(&quot;.&quot;, &quot;&quot;);
pStr = pStr.replace(&quot;!&quot;, &quot;&quot;);
pStr = pStr.replace(&quot;?&quot;, &quot;&quot;);
pStr = pStr.replace(&quot;'&quot;, &quot;&quot;);

return pStr;
}

/**
* Method of retrieving the category you belong to a text
*
* @param pDescrizione text to analyze
* @return restu a string indicating the category
* @throws RemoteException
*/
public static String calcolaCategoria(String pDescrizione)
throws RemoteException {
if ((pDescrizione == null) || (pDescrizione.equals(&quot;&quot;)))
return &quot;NULL&quot;;
String text = pDescrizione;
// Table of terms associated with the text portion. Will contain
// Values of frequency, rilevamza, membership for each term
Hashtable&lt;String, float[]&gt; datiTesto = new Hashtable&lt;String, float[]&gt;();
// Table of categories, each category will contain the value of
// Similarity and belonging Text
Hashtable&lt;String, float[]&gt; testoCategoria = new Hashtable&lt;String, float[]&gt;();
text = replaceAndLower(text); // delete characters and spaeciali
// Returns the text by replacing
// Uppercase with lowercase
String[] testoSplit = text.split(&quot;&quot;);
for (int i = 0; i &lt; testoSplit.length; i++) {
// For each end of the text
float[] toPut = new float[3], // value to assign to the string
// In the hash table
valTmp; // temporary variable containing the values
// Associated with the string if it already exists in the hash table
// If the string is present in the table picks up the values
// And an increase in saving them in to put
// Otherwise initialize the new string with frequency = 1
if (testoSplit[i].length() &lt;= 3) // delete undefined terms
// As important, the inter ...
continue;
if (exists(testoSplit[i], datiTesto)) { // if the time analyzed
// Is present in tebella the terms of the analyzed text
// We get the value of frequency in the table and there
// Adds one
valTmp = datiTesto.get(testoSplit[i]);
toPut[0] = valTmp[0];
toPut[0] += (float) 1 / testoSplit.length;

} else {
toPut[0] = (float) 1 / testoSplit.length;
// Otherwise initialize the value of frequency to a
// Fratto, the total number of terms (relative frequency)
}
// Insert the new entry in the table
// System.out.println (toPut [0]);
datiTesto.put(testoSplit[i], toPut);
}

// You try to open the knowledge base
ElencoCategorie elenco;
try {
elenco = apriElenco();
} catch (ClassNotFoundException e) { // error opening file kb.sbt
throw new RemoteException(
&quot;The knowledge base is missing or corrupt&quot;);
} catch (Exception e) {
throw new RemoteException(
&quot;The knowledge base is missing or corrupt&quot;);
}

// Is taken from the base of knowledge to the table of total time
Hashtable&lt;String, float[]&gt; totTermini = elenco.getTotTermini();
float maxSimilarity = -1; // holds the value of maximum similarity
for (String CategoryName : elenco.Categorie()) {
// For all the categories in the knowledge base
float[] toPut = new float[3]; // value to assign to the string
// In the hash table
for (Enumeration&lt;String&gt; val = datiTesto.keys(); val
.hasMoreElements();) {
// For all elements of the table of the terms of the text
String term = val.nextElement();
// We get the value of a term
float[] tmp = datiTesto.get(term);
// Calculate range and bearing
tmp[1] = distance(term, totTermini, tmp[0], elenco
.getCategoria(CategoryName));
tmp[2] = relevance(tmp[1], elenco.getMaxDist());
datiTesto.put(term, tmp);
}
// We calculate the similarity Once the analysis
// All the terms in a category
toPut[0] = similarity(datiTesto);
testoCategoria.put(CategoryName, toPut);
if (maxSimilarity &lt; toPut[0]) { // we update the value of maximum
// If necessary similarity
maxSimilarity = toPut[0];
}
}

for (String CategoryName : elenco.Categorie()) {
// For each category
// We get the value of similarity of the text with the category
// Analyzed
float[] tmp = testoCategoria.get(CategoryName);
tmp[1] = membership(tmp[0], maxSimilarity); // we calculate
// Membership
// Text to the similarity
testoCategoria.put(CategoryName, tmp); // save everything in
// Category table
}

return maxAppartenenza(testoCategoria); // returns the name output
// Category
// With the maximum degree of membership
}

/**
* Method to find the category with which the text has the highest degree of
* Membership
*
* @param pTestoCategoria table of categories to the text
* @return restiuisce a string indicating the name of the category with which
* The text has the highest degree of membership
*/
private static String maxAppartenenza(
Hashtable&lt;String, float[]&gt; pTestoCategoria) {
String toReturn = null; // return value
float max = -1; // Maximum value of membership

for (Enumeration&lt;String&gt; elm = pTestoCategoria.keys(); elm
.hasMoreElements();) {
// For all categories of the table of categories of text
String category = elm.nextElement();
// Values are taken of similarity and belonging associated with
// Category
float[] tmp = pTestoCategoria.get(category);
if (tmp[1] &gt; max) {
// If the degree of membership affiliation just uploaded
// Is greater than the previous update data max and toReturn
toReturn = category;
max = tmp[1];
}
}
return toReturn;
}

/**
* Method used to check whether a term is presented in table
* The terms of the text
*
* @param pStr period to analyze
* @param pTable tables in terms of the text
* @return returns true if the term exists false otherwise
*/
private static boolean exists(String pStr, Hashtable&lt;String, float[]&gt; pTable) {
try {
if (pTable.get(pStr) != null)
return true;
} catch (NullPointerException e) {
return false;
}

return false;
}

/**
* Method used to retrieve the knowledge base
*
* @return restiuisce an object representing the type ElencoCategorie
* KnowledgeBase
* @throws IOException
* @throws ClassNotFoundException
*/
private static ElencoCategorie apriElenco() throws IOException,
ClassNotFoundException {
File kBase = new File(&quot;kb.sbt&quot;); // you open the file kb.sbt
FileInputStream kBaseStream = new FileInputStream(kBase); // creates
// A stream with the file
ObjectInputStream kBaseObj = new ObjectInputStream(kBaseStream); // si
// Create a stream object with the file
ElencoCategorie toReturn;

toReturn = (ElencoCategorie) kBaseObj.readObject();
// Object is extracted and saved in the file returned in output
return toReturn;
}

/**
* Method used to create the file. Used in training
*
* @param path string indicating the path in which to create the file
* @return returns an ObjectOutputStream to the file created
* @throws IOException
*/
private static ObjectOutputStream createFile(String path)
throws IOException {
ObjectOutputStream toReturn;
File f = new File(path); // file is created
if (f.exists())
f.delete();

FileOutputStream fout = new FileOutputStream(path);
toReturn = new ObjectOutputStream(fout); // create the stream

return toReturn;
}

/**
* Method used to create the knowledge base
*
* @throws RemoteException
*/
public static void training() throws RemoteException {

String[] elencoCategorie = new String[4]; // array contenentei names
// Of categrie be analyzed
// Knowledge base
ElencoCategorie elenco = new ElencoCategorie();

ObjectOutputStream elencoOut;
try {
// Try to create the file
elencoOut = createFile(&quot;kb.sbt&quot;);
} catch (Exception e) {
throw new RemoteException(&quot;Error creating file kb.sbt&quot;);
}

elencoCategorie[0] = &quot;art&quot;;
elencoCategorie[1] = &quot;cinema&quot;;
elencoCategorie[2] = &quot;sport&quot;;
// ElencoCategorie [3 ]=&quot;&quot;;

for (int i = 0; i &lt; 3; i++) { // for each category
// Create a new object of type Category, which will contain all
// Category data to be analyzed
Category toPutCat = new Category(elencoCategorie[i]);
// If the inclusion of the category in the table of categories
// Not successful
// We throw an exception
if (!elenco.addCategoria(elencoCategorie[i], toPutCat)) {
throw new RemoteException(
&quot;Error creating data of category&quot;
+ elencoCategorie[i]);
}
// You try to read from the folder containing the lyrics of a
// Category
// 100 sample test
for (Integer j = new Integer(1); j &lt;= 100; j++) {
// Path of the folder categria
String path = &quot;kb/&quot; + elencoCategorie[i] + &quot;/&quot; + j.toString();
// Try to read the file ith
FileReader testoReader;
try {
testoReader = new FileReader(path);
} catch (FileNotFoundException e) {
// If the file does not exist it continues execution from
// File i +1
// System.out.println ( &quot;Error on file&quot; + path);
continue;
}
Scanner testoScanner = new Scanner(testoReader);
while (testoScanner.hasNextLine()) {
// Read the text file line by line
String txt = testoScanner.nextLine();
txt = replaceAndLower(txt);
String[] toIterate = txt.split(&quot;&quot;);
for (int k = 0; k &lt; toIterate.length; k++) {
// For each end of the line
if (toIterate[k].length() &lt;= 3) // remove the effect
// Undefined terms
// Relevant
continue;
float[] valTerm, valTotTerm;
// If the term is present in the table of terms
// The class analyzed
if (elenco.getCategoria(elencoCategorie[i])
.esisteTermine(toIterate[k])) {
// Its frequency is equal to the value stored in
// Table plus one fratto the total number of
// Terms of the text
valTerm = elenco.getCategoria(elencoCategorie[i])
.getVal(toIterate[k]);
valTerm[0] += (float) 1 / toIterate.length;
valTotTerm = elenco.getTermine(toIterate[k]);
valTotTerm[0] += (float) 1 / toIterate.length;
} else {
// otherwise it is equal to one fratto the total number of words of text
valTerm = new float[3];
valTotTerm = new float[1];
valTerm[0] = (float) 1 / toIterate.length;
valTotTerm[0] = (float) 1 / toIterate.length;
}
// save the values calculated in the table of terms of the category analyzed
elenco.setTermine(toIterate[k], valTotTerm);
elenco.getCategoria(elencoCategorie[i]).addTermine(
toIterate[k], valTerm);
if (elenco.getMaxDist() &lt; valTotTerm[0])
elenco.setMaxDist(valTotTerm[0]);
}
}
}
}
for (String CategoryName : elenco.Categorie()) {
// for each category
// is preflushed the table of terms
Hashtable&lt;String, float[]&gt; terminiCategoria = elenco.getCategoria(
CategoryName).getTermini();

// all the terms are analyzed in the table of loaded terms
for (Enumeration&lt;String&gt; enumTerm = terminiCategoria.keys(); enumTerm
.hasMoreElements();) {
// is effattuato calculating bearing and distance
String term = enumTerm.nextElement();
float[] val = terminiCategoria.get(term);
val[1] = distance(term, elenco.getCategoria(CategoryName),
elenco.getTotTermini());
val[2] = relevance(val[1], elenco.getMaxDist());
}
// data is stored in the table of the terms of the class
elenco.getCategoria(CategoryName).setTermini(terminiCategoria);
}
try {
// writing the results of operations on files
elencoOut.writeObject(elenco);
} catch (Exception e) {
throw new RemoteException(&quot;Error writing file&quot;);
}
}
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_GestioneAdvertisement</id>
      <content>/**
* Class that implements the general
* Management dell'advertisement.
*
* @author Fabio Palladino
* @version 0.1
*
* 2007 eTour Project - Copyright by SE @ SA Lab DMI University of Salerno
*/
package unisa.gps.etour.control.GestioneAdvertisement;

import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import java.rmi.RemoteException;
import java.rmi.server.UnicastRemoteObject;
import java.sql.SQLException;
import java.util.ArrayList;
import java.util.HashMap;

import javax.imageio.ImageIO;
import javax.swing.ImageIcon;

import unisa.gps.etour.bean.BeanBanner;
import unisa.gps.etour.bean.BeanConvenzione;
import unisa.gps.etour.repository.DBBanner;
// import unisa.gps.etour.control.GestioneAdvertisement.test.stubs.*;
import unisa.gps.etour.repository.DBConvenzione;
import unisa.gps.etour.repository.IDBBanner;
import unisa.gps.etour.repository.IDBConvenzione;
import unisa.gps.etour.util.ControlloDati;
import unisa.gps.etour.util.CostantiGlobali;
import unisa.gps.etour.util.MessaggiErrore;

public class GestioneAdvertisement extends UnicastRemoteObject implements IGestioneAdvertisement {
private static final long serialVersionUID = 1L;
/** An object that handles operations on the banner */
private IDBBanner dbBanner;

/**
* Constructor, instantiates an object of type DBBanner that
* Contains methods that perform operations on data
* Entity banner.
*
* @throws RemoteException
*/
public GestioneAdvertisement() throws RemoteException {
super();
dbBanner = new DBBanner();
}

/**
* Delete a banner and the image associated with the system.
*
* @param pIdBanner id of the banner to remove
* @throws RemoteException
*/
public boolean cancellaBanner(int pIdBanner) throws RemoteException {
/* Bean containing the data of the banner */
BeanBanner banner;

try {
/* Load the banner and check the data */
banner = dbBanner.ottieniBannerDaID(pIdBanner);
if (!ControlloDati.checkBeanBanner(banner)) {
throw new RemoteException(MessaggiErrore.ERRORE_DATI);
}
/* Remove the image associated with the banner */
File immagine = new File(banner.getPercorsoFile());
immagine.delete();
/* Clear the whole bean banner */
return (dbBanner.cancellaBanner(pIdBanner));
}
catch (SQLException e) {
throw new RemoteException(MessaggiErrore.ERRORE_CONNESSIONE_DBMS);
}
}

/**
* Method to change the image associated with the banner:
* Delete the old image and stores the new
* Enjoy the same path as the old image.
*
* @param pBannerID id banner
* @param pImmagine ImageIcon object containing the new image of the banner
* @return returns true if the operation is successful
*/
public boolean modificaBanner(int pBannerID, ImageIcon pImmagine) throws RemoteException {
try {
/* Performs a check on the image of the banner */
if (!ControlloDati.checkImmagine(pImmagine)) {
throw new RemoteException(MessaggiErrore.ERRORE_DATI);
}
/* Load the icon image */
BufferedImage buffImg = (BufferedImage) pImmagine.getImage();
/* Load the data of the banner */
BeanBanner banner = dbBanner.ottieniBannerDaID(pBannerID);
/* Check the banner on the data uploaded */
if (!ControlloDati.checkBeanBanner(banner)) {
throw new RemoteException(MessaggiErrore.ERRORE_DATI);
}
/* Rewrite the image file and returns the result of the operation */
File Imgfile = new File(banner.getPercorsoFile());
return (ImageIO.write(buffImg, &quot;jpg&quot;, Imgfile));
}
catch (SQLException e) {
throw new RemoteException(MessaggiErrore.ERRORE_CONNESSIONE_DBMS);
}
catch (Exception e) {
if (e instanceof RemoteException) {
throw new RemoteException(MessaggiErrore.ERRORE_DATI);
} else {
throw new RemoteException(MessaggiErrore.ERRORE_FILE);
}
}
}

/**
* Returns a list of banners for a refreshment.
* Use the method (@link) DBBanner.ottieniBanner
*
* @param pIdPuntoDiRistoro ID refreshment
* @throws RemoteException
*/
public HashMap&lt;BeanBanner, ImageIcon&gt; ottieniBannersDaID(int pIdPuntoDiRistoro) throws RemoteException {
/* Create a HashMap that will hold the banner and associated images */
HashMap&lt;BeanBanner, ImageIcon&gt; toReturn = new HashMap&lt;BeanBanner, ImageIcon&gt;();

try {
/* Get the list of banners for a refreshment point */
ArrayList&lt;BeanBanner&gt; listaBanner = dbBanner.ottieniBanner(pIdPuntoDiRistoro);
/* For each banner valid list */
for (BeanBanner banner : listaBanner) {
/* If the banner is a valid charge in the HashMap with the image file */
if (ControlloDati.checkBeanBanner(banner)) {
/* Create the image file */
File fileImmagine = new File(banner.getPercorsoFile());
/* Create an object ImageIcon from the image file */
ImageIcon icon = new ImageIcon(ImageIO.read(fileImmagine));
/* Add the banner and the image all'HashMap */
toReturn.put(banner, icon);
}
}
return toReturn;
}
catch (SQLException e) {
throw new RemoteException(MessaggiErrore.ERRORE_CONNESSIONE_DBMS);
}
catch (IOException e) {
throw new RemoteException(MessaggiErrore.ERRORE_FILE);
}
catch (Exception e) {
throw new RemoteException(MessaggiErrore.ERRORE_SCONOSCIUTO);
}
}

/**
* Create and insert a new banner, making sure the num. maximum
* Banner displayed for a refreshment point is
* Already been reached in this case throws an exception to the calling method.
*
* @param pIdPuntoDiRistoro Id of refreshment
* @param pImmagineBanner ImageIcon object containing the banner image
* @return Returns true if the insertion has been successful.
* @exception RemoteException
*/
public boolean inserisciBanner(int pIdPuntoDiRistoro, ImageIcon pImmagineBanner) throws RemoteException {
try {
/* Performs a check on the image */
if (!ControlloDati.checkImmagine(pImmagineBanner)) {
throw new RemoteException(MessaggiErrore.ERRORE_DATI);
}
/* Create an object that handles the conventions */
IDBConvenzione dbConvenzione = new DBConvenzione();
/* Load the data of the convention of a refreshment point */
BeanConvenzione convenzione = dbConvenzione.ottieniConvezioneAttiva(pIdPuntoDiRistoro);
/* Get the number of banners displayed by the Convention Masssimo */
int maxBanner = convenzione.getMaxBanner();
/* Load the list of banners for a refreshment and stores the number */
int numBanner = (dbBanner.ottieniBanner(pIdPuntoDiRistoro)).size();
/* Check that the maximum number of banners is not reached */
if (!(numBanner &lt; maxBanner)) {
throw new Exception(MessaggiErrore.ERRORE_NUM_BANNER);
}
/* Create a blank banner */
BeanBanner banner = new BeanBanner();
/* Create a unique file name */
String path = CostantiGlobali.SERVER_IMAGE_PATH + pIdPuntoDiRistoro;
int i = 0;
File fileImg = new File(path + &quot;_&quot; + i + &quot;.jpg&quot;);
while (fileImg.exists()) {
i++;
fileImg = new File(path + &quot;_&quot; + i + &quot;.jpg&quot;);
}
/* Stores the image in the file system */
BufferedImage im = (BufferedImage) pImmagineBanner.getImage();
if (!ImageIO.write(im, &quot;jpg&quot;, fileImg)) {
/* Write failed */
throw new IOException();
}
/* Loads the data in the banner */
banner.setIdPuntoDiRistoro(pIdPuntoDiRistoro);
banner.setPercorsoFile(fileImg.getPath());
/* Insert the banner in the database */
return (dbBanner.inserisciBanner(banner));
}
catch (SQLException e) {
throw new RemoteException(MessaggiErrore.ERRORE_CONNESSIONE_DBMS);
}
catch (IOException e) {
throw new RemoteException(MessaggiErrore.ERRORE_FILE);
}
catch (Exception e) {
if (e.getMessage().equals(MessaggiErrore.ERRORE_NUM_BANNER)) {
/* Has been reached on most of banner inserted num */
throw new RemoteException(MessaggiErrore.ERRORE_NUM_BANNER);
} else {
throw new RemoteException(MessaggiErrore.ERRORE_SCONOSCIUTO);
}
}
}
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_GestioneAdvertisementAgenzia</id>
      <content>/**
* Implementing the management dell'advertisement
* For the operator agency. Contains methods for managing
* News.
*
* @Author Fabio Palladino
* @Version 0.1
*
* 2007 eTour Project - Copyright by SE @ SA Lab DMI University of Salerno
*/
package unisa.gps.etour.control.GestioneAdvertisement;

import java.rmi.RemoteException;
import java.sql.SQLException;
import java.util.ArrayList;

import unisa.gps.etour.bean.BeanNews;
/* Import the stub */
// import unisa.gps.etour.control.GestioneAdvertisement.test.stubs.DBNews;
import unisa.gps.etour.repository.DBNews;
import unisa.gps.etour.repository.IDBNews;
import unisa.gps.etour.util.ControlloDati;
import unisa.gps.etour.util.CostantiGlobali;
import unisa.gps.etour.util.MessaggiErrore;

public class GestioneAdvertisementAgenzia extends GestioneAdvertisement
implements IGestioneAdvertisementAgenzia
{
private static final long serialVersionUID = 1L;
/** Contains the methods for collecting news in the database */
private IDBNews dbNews;

/**
* Constructor. Instantiates an object of type (@link unisa.gps.etour.repository.DBNews).
*
* @throws RemoteException
*/
public GestioneAdvertisementAgenzia() throws RemoteException
{
super();
dbNews = new DBNews();
}

/**
* Method which removes news from the database. Uses the
* (@Link Boolean unisa.gps.etour.repository.IDBNews # cancellaNews (int))
*
* @param pNewsID news be erased.
* @return true if the cancellation was successful or FALSE otherwise.
* @throws RemoteException
*
*/
public boolean cancellaNews(int pNewsID) throws RemoteException
{
try
{
/* Check that the ID is valid */
if (pNewsID &gt; 0) {
return (dbNews.cancellaNews(pNewsID));
} else {
return false;
}
} catch (SQLException e) {
throw new RemoteException(MessaggiErrore.ERRORE_CONNESSIONE_DBMS);
}
}

/**
* Insert a new news in the database.
* Use the method (@link unisa.gps.etour.repository.IDBNews # inserisciNews (BeanNews))
* To insert the news and the method (@link unisa.gps.etour.repository.IDBNews # ottieniNews ())
* To count the number of news in the system.
*
* @param Pnews bean containing data news.
* @return true if the insertion is successful, false if it was
* Reached the maximum number of news stored or if the insertion fails.
* @throws RemoteException
*/
public boolean inserisciNews(BeanNews Pnews) throws RemoteException
{
try
{
/* Check the data of the news */
if (!ControlloDati.checkBeanNews(Pnews)) {
throw new RemoteException(MessaggiErrore.ERRORE_DATI);
}
/* Check that has not been exceeded the no. Max news presets */
int numNews = dbNews.ottieniNews().size();
if (numNews &lt; CostantiGlobali.MAX_NEWS_ATTIVE) {
/* Possible inclusion */
return (dbNews.inserisciNews(Pnews));
} else {
/* Insertion is not possible */
return false;
}
} catch (SQLException e) {
throw new RemoteException(MessaggiErrore.ERRORE_CONNESSIONE_DBMS);
}
}

/**
* Method to change data of a news.
* Use the method (@link unisa.gps.etour.repository.IDBNews # modificaNews (BeanNews)).
*
* @param Pnews bean containing the data of news changed.
* @return true if the change goes through.
* @throws RemoteException
*/
public boolean modificaNews(BeanNews Pnews) throws RemoteException
{
try
{
/* Check the data of the news */
if (!ControlloDati.checkBeanNews(Pnews)) {
throw new RemoteException(MessaggiErrore.ERRORE_DATI);
}
return (dbNews.modificaNews(Pnews));
} catch (SQLException e) {
throw new RemoteException(MessaggiErrore.ERRORE_CONNESSIONE_DBMS);
}
}

/**
* Method that returns an array containing all the news stored in the system.
* Use the method (@link unisa.gps.etour.repository.IDBNews # ottieniNews ()).
*
* @return ArrayList containing beans of news.
* @throws RemoteException
*/
public ArrayList&lt;BeanNews&gt; ottieniAllNews() throws RemoteException
{
try
{
return (dbNews.ottieniNews());
} catch (SQLException e) {
throw new RemoteException(MessaggiErrore.ERRORE_CONNESSIONE_DBMS);
}
}
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_GestioneAdvertisementPuntoDiRistoro</id>
      <content>/**
* Class that implements management services dell'advertisement
* For the operator eating place.
*
* @Author Fabio Palladino
* @Version 0.1
*
* 2007 eTour Project - Copyright by SE@SA Lab DMI University of Salerno
*/
package unisa.gps.etour.control.GestioneAdvertisement;

import java.rmi.RemoteException;

public class GestioneAdvertisementPuntoDiRistoro extends GestioneAdvertisement
implements IGestioneAdvertisementPuntoDiRistoro
{

private static final long serialVersionUID = 1L;

/**
* Constructor, call the constructor of the superclass.
* @throws RemoteException
*/
public GestioneAdvertisementPuntoDiRistoro() throws RemoteException
{
super();
}

}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_GestioneBeniCulturaliAgenzia</id>
      <content>package unisa.gps.etour.control.GestioneBeniCulturali;

import java.rmi.RemoteException;
import java.sql.SQLException;
import java.util.ArrayList;
import unisa.gps.etour.bean.BeanBeneCulturale;
import unisa.gps.etour.bean.BeanTag;
import unisa.gps.etour.bean.BeanVisitaBC;
import unisa.gps.etour.util.MessaggiErrore;

/**
* Class management of cultural heritage unique to Agency
*
* @Author Michelangelo De Simone
* @Version 0.1
*
* (c) 2007 eTour Project - Copyright by DMI SE @ SA Lab - University of Salerno
*/
public class GestioneBeniCulturaliAgenzia extends GestioneBeniCulturaliComune
implements IGestioneBeniCulturaliAgenzia {
/*
* Constructor of class, richicama and initializes the class of common management
*/
public GestioneBeniCulturaliAgenzia() throws RemoteException {
super();
}

/*
* Implements the method for the elimination of a cultural system.
*
* @see unisa.gps.etour.control.GestioneBeniCulturali.IGestioneBeniCulturaliAgenzia#cancellaBeneCulturale(int)
*/
public boolean cancellaBeneCulturale(int pBeneCulturaleID)
throws RemoteException {
if (!ControlloBeniCulturali.controllaIdBeneCulturale(pBeneCulturaleID))
throw new RemoteException(MessaggiErrore.ERRORE_DATI);

try {
return (dbbc.cancellaBeneCulturale(pBeneCulturaleID));
}
catch (SQLException e) {
throw new RemoteException(MessaggiErrore.ERRORE_DBMS);
}
catch (Exception e) {
throw new RemoteException(MessaggiErrore.ERRORE_SCONOSCIUTO);
}
}

/*
* Implement the method for the insertion of a new cultural object.
*
* @see unisa.gps.etour.control.GestioneBeniCulturali.IGestioneBeniCulturaliAgenzia#inserisciBeneCulturale(unisa.gps.etour.bean.BeanBeneCulturale)
*/
public boolean inserisciBeneCulturale(BeanBeneCulturale pBeneCulturale)
throws RemoteException {
if (!ControlloBeniCulturali.controllaDatiBeneCulturale(pBeneCulturale))
throw new RemoteException(MessaggiErrore.ERRORE_FORMATO_BEAN);

try {
return (dbbc.inserisciBeneCulturale(pBeneCulturale));
}
catch (SQLException e) {
throw new RemoteException(MessaggiErrore.ERRORE_DBMS);
}
catch (Exception e) {
throw new RemoteException(MessaggiErrore.ERRORE_SCONOSCIUTO);
}
}

/*
* Implements the method for obtaining all the cultural assets currently in the system.
*
* @see unisa.gps.etour.control.GestioneBeniCulturali.IGestioneBeniCulturaliAgenzia#ottieniBeniCulturali()
*/
public ArrayList&lt;BeanBeneCulturale&gt; ottieniBeniCulturali() throws RemoteException {
try {
return (dbbc.ottieniListaBC());
}
catch (SQLException e) {
throw new RemoteException(MessaggiErrore.ERRORE_DBMS);
}
catch (Exception e) {
throw new RemoteException(MessaggiErrore.ERRORE_SCONOSCIUTO);
}
}

/*
* Implement the method for changing a cultural asset in the system.
*
* @see unisa.gps.etour.control.GestioneBeniCulturali.IGestioneBeniCulturaliAgenzia#modificaBeneCulturale(unisa.gps.etour.bean.BeanBeneCulturale)
*/
public boolean modificaBeneCulturale(BeanBeneCulturale pBeneCulturale)
throws RemoteException {
if (!ControlloBeniCulturali.controllaDatiBeneCulturale(pBeneCulturale))
throw new RemoteException(MessaggiErrore.ERRORE_FORMATO_BEAN);

try {
return (dbbc.modificaBeneCulturale(pBeneCulturale));
}
catch (SQLException e) {
throw new RemoteException(MessaggiErrore.ERRORE_DBMS);
}
catch (Exception e) {
throw new RemoteException(MessaggiErrore.ERRORE_SCONOSCIUTO);
}
}

/*
* Implements the method for adding a tag to a cultural object.
*
* @see unisa.gps.etour.control.GestioneBeniCulturali.IGestioneBeniCulturaliAgenzia#aggiungiTagBeneCulturale(int, int)
*/
public boolean aggiungiTagBeneCulturale(int pBeneCulturaleID, int pTagID) throws RemoteException {
if (!ControlloBeniCulturali.controllaIdBeneCulturale(pBeneCulturaleID) || !(pTagID &gt; 0))
throw new RemoteException(MessaggiErrore.ERRORE_DATI);

/*
* This segment of code that actually controls the cultural speficiato
* Have the tag defined.
*/

/*
* Get all tags to the cultural past for parameter
*/
ArrayList&lt;BeanTag&gt; tempTag = null;

boolean contieneTag = false;

try {
tempTag = dbtag.ottieniTagBeneCulturale(pBeneCulturaleID);
}
catch (SQLException e) {
throw new RemoteException(MessaggiErrore.ERRORE_DBMS);
}

/*
* Here we iterate to find the tag that speficiato, if it is you set a sentry
* In order not to add a tag twice for the same cultural object.
*/
for (BeanTag t : tempTag)
if (t.getId() == pTagID)
contieneTag = true;

if (!contieneTag)
try {
return (dbtag.aggiungeTagBeneCulturale(pBeneCulturaleID, pTagID));
}
catch (SQLException e) {
throw new RemoteException(MessaggiErrore.ERRORE_DBMS);
}
catch (Exception e) {
throw new RemoteException(MessaggiErrore.ERRORE_SCONOSCIUTO);
}

return false;
}

/*
* Implement the method for removing a tag from a cultural object.
*
* @see unisa.gps.etour.control.GestioneBeniCulturali.IGestioneBeniCulturaliAgenzia#rimuoviTagBeneCulturale(int, int)
*/
public boolean rimuoviTagBeneCulturale(int pBeneCulturaleID, int pTagID) throws RemoteException {
if (!ControlloBeniCulturali.controllaIdBeneCulturale(pBeneCulturaleID) || !(pTagID &gt; 0))
throw new RemoteException(MessaggiErrore.ERRORE_DATI);

/*
* This segment of code that actually controls the cultural speficiato
* Has the specified tag.
*/

/*
* Get all tags to the cultural past for parameter
*/
ArrayList&lt;BeanTag&gt; tempTag = null;

try {
tempTag = dbtag.ottieniTagBeneCulturale(pBeneCulturaleID);
}
catch (SQLException e) {
throw new RemoteException(MessaggiErrore.ERRORE_DBMS);
}

/*
* Here we iterate to find the tag that speficiato, if you found the transaction is made
* Removal of the tag and returns control
*/
for (BeanTag t : tempTag) {
if (t.getId() == pTagID) {
try {
return (dbtag.cancellaTagBeneCulturale(pBeneCulturaleID, pTagID));
}
catch (SQLException e) {
throw new RemoteException(MessaggiErrore.ERRORE_DBMS);
}
catch (Exception e) {
throw new RemoteException(MessaggiErrore.ERRORE_SCONOSCIUTO);
}
}
}

return false;
}
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_GestioneBeniCulturaliComune</id>
      <content>package unisa.gps.etour.control.GestioneBeniCulturali;

import java.rmi.RemoteException;
import java.rmi.server.UnicastRemoteObject;
import java.sql.SQLException;
import java.util.ArrayList;
import java.util.Date;
import java.util.HashMap;
import unisa.gps.etour.bean.BeanBeneCulturale;
import unisa.gps.etour.bean.BeanTag;
import unisa.gps.etour.bean.BeanVisitaBC;
import unisa.gps.etour.repository.DBTag;
// import unisa.gps.etour.repository.DBBeneCulturale;
// import unisa.gps.etour.repository.DBTurista;
// import unisa.gps.etour.repository.DBVisitaBC;
import unisa.gps.etour.repository.IDBBeneCulturale;
import unisa.gps.etour.repository.IDBTag;
import unisa.gps.etour.repository.IDBTurista;
import unisa.gps.etour.repository.IDBVisitaBC;
import unisa.gps.etour.util.CostantiGlobali;
import unisa.gps.etour.util.MessaggiErrore;

// Stub
import unisa.gps.etour.control.GestioneBeniCulturali.test.stub.DBBeneCulturale; // ***
import unisa.gps.etour.control.GestioneBeniCulturali.test.stub.DBTurista; // ***
import unisa.gps.etour.control.GestioneBeniCulturali.test.stub.DBVisitaBC; // ***

/**
* Class management of cultural heritage for operations common to all actors
*
* @Author Michelangelo De Simone
* @Version 0.1
*
* (c) 2007 eTour Project - Copyright by DMI SE @ SA Lab - University of Salerno
*/
/**
*
*/
public class GestioneBeniCulturaliComune extends UnicastRemoteObject implements
IGestioneBeniCulturaliComune
{
// Connect to DB for Cultural Heritage
protected IDBBeneCulturale dbbc;

// Connect to DB Tag
protected IDBTag dbtag;

// Connect to DB for the Feedback / Visits
protected IDBVisitaBC dbvisita;

// Connect to DB for Tourists
protected IDBTurista dbturista;

/**
* Constructor; you instantiate all fields relevant to data management;
* Fields are initialized for each instance of the class.
*
* @throws RemoteException Exception flow
*/
public GestioneBeniCulturaliComune() throws RemoteException
{
// Class Supercostruttore UnicastRemoteObject
super();

// We instantiate objects
try
{
dbbc = new DBBeneCulturale();
dbtag = new DBTag();
dbvisita = new DBVisitaBC();
dbturista = new DBTurista();
}
catch (Exception e)
{
throw new RemoteException(MessaggiErrore.ERRORE_SCONOSCIUTO);
}
}

/*
* Implements the method for obtaining a cultural object by Id
*
* @see unisa.gps.etour.control.GestioneBeniCulturali.IGestioneBeniCulturaliComune#ottieniBeneCulturale(int)
*/
public BeanBeneCulturale ottieniBeneCulturale(int pBeneCulturaleID) throws RemoteException
{
if (!ControlloBeniCulturali.controllaIdBeneCulturale(pBeneCulturaleID))
throw new RemoteException(MessaggiErrore.ERRORE_DATI);

BeanBeneCulturale bbc = null;

try
{
bbc = dbbc.ottieniBeneCulturale(pBeneCulturaleID);
}
catch (SQLException e)
{
throw new RemoteException(MessaggiErrore.ERRORE_DBMS);
}
catch (Exception e)
{
throw new RemoteException(MessaggiErrore.ERRORE_SCONOSCIUTO);
}

return bbc;
}

/*
* Implements the method for obtaining all the tags of a cultural object.
*
* @see unisa.gps.etour.control.GestioneBeniCulturali.IGestioneBeniCulturaliComune#ottieniTagBeneCulturale(int)
*/
public ArrayList&lt;BeanTag&gt; ottieniTagBeneCulturale(int pBeneCulturaleID) throws RemoteException
{
if (!ControlloBeniCulturali.controllaIdBeneCulturale(pBeneCulturaleID))
throw new RemoteException(MessaggiErrore.ERRORE_DATI);

ArrayList&lt;BeanTag&gt; btag = null;

try
{
btag = dbtag.ottieniTagBeneCulturale(pBeneCulturaleID);
}
catch (SQLException e)
{
throw new RemoteException(MessaggiErrore.ERRORE_DBMS);
}
catch (Exception e)
{
throw new RemoteException(MessaggiErrore.ERRORE_SCONOSCIUTO);
}

return btag;
}

/*
* Implements the method to obtain the list of feedback and their username on a property
* Cultural specified by Id
*
* @see unisa.gps.etour.control.GestioneBeniCulturali.IGestioneBeniCulturaliComune#ottieniFeedbackBeneCulturale(int)
*/
public HashMap&lt;BeanVisitaBC, String&gt; ottieniFeedbackBeneCulturale(int pBeneCulturaleID) throws RemoteException
{
if (!ControlloBeniCulturali.controllaIdBeneCulturale(pBeneCulturaleID))
throw new RemoteException(MessaggiErrore.ERRORE_DATI);

HashMap&lt;BeanVisitaBC, String&gt; mappaRitorno;

try
{
// Instantiate the map of the same size as the list of BeanVisitaBC
mappaRitorno = new HashMap&lt;BeanVisitaBC, String&gt;(dbvisita.ottieniListaVisitaBC(pBeneCulturaleID).size());

// For each visit by adding their username
// Here we begin to iterate to add to any visit their username
for (BeanVisitaBC b: dbvisita.ottieniListaVisitaBC(pBeneCulturaleID))
mappaRitorno.put(b, dbturista.ottieniTurista(b.getIdTurista()).GetUserName());

}
catch (SQLException e)
{
throw new RemoteException(MessaggiErrore.ERRORE_DBMS);
}
catch (Exception e)
{
throw new RemoteException(MessaggiErrore.ERRORE_SCONOSCIUTO);
}

return mappaRitorno;
}

/*
* Implements the method to obtain statistics about a cultural past
* Through Id
*
* @see unisa.gps.etour.control.GestioneBeniCulturali.IGestioneBeniCulturaliComune#ottieniStatisticheBeneCulturale(int)
*/
public ArrayList&lt;Integer&gt; ottieniStatisticheBeneCulturale(int pBeneCulturaleID) throws RemoteException
{
/*
* This method returns an ArrayList containing 5 elements (0 .. 4).
* For each index more 'one is the number of equivalent value your feedback
* Index number more 'one.
* Even in this case the method is not 'particularly attractive but it does its dirty work
* Fine.
*/

if (!ControlloBeniCulturali.controllaIdBeneCulturale(pBeneCulturaleID))
throw new RemoteException(MessaggiErrore.ERRORE_DATI);

ArrayList&lt;Integer&gt; listaRisultati = new ArrayList&lt;Integer&gt;(5);

// Set all the indices to 0
for (int i = 0; i &lt; 5; i++)
listaRisultati.add(i, Integer.valueOf(0));

// Calculate the date for the last thirty days
Date ultimiTrentaGiorni = new Date(new Date().getTime() - CostantiGlobali.TRENTA_GIORNI);

try
{
// Get all visits of a certain cultural
// Loop looking for the requests / feedback obtained within the last thirty days
for (BeanVisitaBC b: dbvisita.ottieniListaVisitaBC(pBeneCulturaleID))
if (b.getDataVisita().after(ultimiTrentaGiorni))
listaRisultati.set(b.getVoto() - 1, Integer.valueOf(listaRisultati.get(b.getVoto() - 1).intValue() + 1));
}
catch (SQLException e)
{
throw new RemoteException(MessaggiErrore.ERRORE_DBMS);
}
catch (Exception e)
{
throw new RemoteException(MessaggiErrore.ERRORE_SCONOSCIUTO);
}

return listaRisultati;
}

/*
* Implement the method for changing a feedback on a cultural past
* Through Id
*
* @see unisa.gps.etour.control.GestioneBeniCulturali.IGestioneBeniCulturaliComune#modificaFeedbackBeneCulturale(int, unisa.gps.etour.bean.BeanVisitaBC)
*/
public boolean modificaFeedbackBeneCulturale(int pBeneCulturaleID, BeanVisitaBC pBeanVisitaBC) throws RemoteException
{
if (!ControlloBeniCulturali.controllaIdBeneCulturale(pBeneCulturaleID) ||
!ControlloVisiteBeniCulturali.controllaDatiVisitaBeneCulturale(pBeanVisitaBC))
throw new RemoteException(MessaggiErrore.ERRORE_DATI);

/*
* Please check that the vote has not changed.
* If the vote is changed to an exception is raised
*/
boolean votoOk = true;

try
{
votoOk = dbvisita.ottieniVisitaBC(pBeneCulturaleID, pBeanVisitaBC.getIdTurista()).getVoto() == pBeanVisitaBC.getVoto();
}
catch (SQLException e)
{
throw new RemoteException(MessaggiErrore.ERRORE_DBMS);
}
catch (Exception e)
{
throw new RemoteException(MessaggiErrore.ERRORE_SCONOSCIUTO);
}

/*
* If the vote is not changed we proceed to send the message to the method of
* Change the layer's database.
*/
if (votoOk)
try
{
return (dbvisita.modificaVisitaBC(pBeanVisitaBC));
}
catch (SQLException e)
{
throw new RemoteException(MessaggiErrore.ERRORE_DBMS);
}
catch (Exception e)
{
throw new RemoteException(MessaggiErrore.ERRORE_SCONOSCIUTO);
}

return false;
}
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_GestionePuntiDiRistoroAgenzia</id>
      <content>package unisa.gps.etour.control.GestionePuntiDiRistoro;

import java.rmi.RemoteException;
import java.sql.SQLException;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.Iterator;
import unisa.gps.etour.bean.BeanConvenzione;
import unisa.gps.etour.bean.BeanPuntoDiRistoro;
import unisa.gps.etour.bean.BeanTag;
import unisa.gps.etour.bean.BeanTurista;
import unisa.gps.etour.bean.BeanVisitaPR;
/*
* TEST CASE import
* Unisa.gps.etour.control.GestionePuntiDiRistoro.test.stub.DBConvenzione;
* Import unisa.gps.etour.control.GestionePuntiDiRistoro.test.stub.DBTurista;
*/
import unisa.gps.etour.repository.DBConvenzione;
import unisa.gps.etour.repository.DBTurista;
import unisa.gps.etour.repository.IDBConvenzione;
import unisa.gps.etour.util.MessaggiErrore;

/**
* Class contentente methods for managing Refreshments by
* Operator Agency
*
* @Author Joseph Morelli
* @Version 0.1 (c) 2007 eTour Project - Copyright by DMI SE @SA Lab --
* University of Salerno
*/
public class GestionePuntiDiRistoroAgenzia extends GestionePuntiDiRistoroComune
implements IGestionePuntiDiRistoroAgenzia {

private static final long serialVersionUID = 1L;

// Constructor
public GestionePuntiDiRistoroAgenzia() throws RemoteException {
// Call the constructor of the inherited class to instantiate
// Database connections
super();
dbTurista = new DBTurista();
}

// Method that allows the operator to cancel an agency point of
// Refreshment
// Passing as parameter the ID of the same Refreshment
public boolean cancellaPuntoDiRistoro(int pPuntoDiRistoroID)
throws RemoteException {
// Check the validity identifier
if (pPuntoDiRistoroID &lt; 0)
throw new RemoteException(MessaggiErrore.ERRORE_DATI);
try {
// Execute the method that clears the Refreshment from the Database
// And in case of operation successful return true
if (puntoRistoro.cancellaPuntoDiRistoro(pPuntoDiRistoroID))
return true;
}
// Exception in operations on database
catch (SQLException e) {
System.out.println(&quot;Error in method cancellaPuntoDiRistoro&quot;
+ e.toString());
throw new RemoteException(MessaggiErrore.ERRORE_DBMS);
}
// Unexpected exceptions due to other factors
catch (Exception ee) {
System.out.println(&quot;Error in method cancellaPuntoDiRistoro&quot;
+ ee.toString());
throw new RemoteException(MessaggiErrore.ERRORE_SCONOSCIUTO);
}
// If no operations were successful return false end
return false;
}

// Method that allows the operator to include in the Agency database
// The new Refreshment with the information contained in the bean
public boolean inserisciPuntoDiRistoro(BeanPuntoDiRistoro pPuntoDiRistoro)
throws RemoteException {
// Check the validity of the bean as a parameter and if
// Triggers except remote
if ((pPuntoDiRistoro == null)
|| (!(pPuntoDiRistoro instanceof BeanPuntoDiRistoro)))
throw new RemoteException(MessaggiErrore.ERRORE_FORMATO_BEAN);
try {
// Calling the method of the class that operates on the database
// Insert the new Refreshment
if (puntoRistoro.inserisciPuntoDiRistoro(pPuntoDiRistoro))
// In the case where the operations were successful end
// Returns true
return true;
}
// Exception in database operations
catch (SQLException e) {
System.out.println(&quot;Error in method inserisciPuntoDiRistoro&quot;
+ e.toString());
throw new RemoteException(MessaggiErrore.ERRORE_DBMS);
}
// Unexpected exceptions due to other factors
catch (Exception ee) {
System.out.println(&quot;Error in method inserisciPuntoDiRistoro&quot;
+ ee.toString());
throw new RemoteException(MessaggiErrore.ERRORE_SCONOSCIUTO);
}
// If the operation is not successful return false
return false;
}

// Method for obtaining an ArrayList with all the points Bean
// Refreshments
public ArrayList&lt;BeanPuntoDiRistoro&gt; ottieniPuntiDiRistoro()
throws RemoteException {
// ArrayList to return to the end of the method
ArrayList&lt;BeanPuntoDiRistoro&gt; toReturn = null;
try {
// Get the list of Refreshments through the class
// Connect to database
// And save the list itself nell'ArrayList
toReturn = puntoRistoro.ottieniListaPR();
}
// Exception in operations on database
catch (SQLException e) {
System.out.println(&quot;Error in method ottieniPuntiDiRistoro&quot;
+ e.toString());
throw new RemoteException(MessaggiErrore.ERRORE_DBMS);
}
// Unexpected exceptions due to other factors
catch (Exception ee) {
System.out.println(&quot;Error in method ottieniPuntiDiRistoro&quot;
+ ee.toString());
throw new RemoteException(MessaggiErrore.ERRORE_SCONOSCIUTO);
}
// Check the ArrayList to return so as not to pass null values
// To the caller
if (null == toReturn)
throw new RemoteException(MessaggiErrore.ERRORE_FORMATO_BEAN);
// Return the ArrayList with all the refreshment
return toReturn;
}

// Method that allows you to get all the refreshment that have
// A Convention on or off depending on the parameter passed
public ArrayList&lt;BeanPuntoDiRistoro&gt; ottieniPuntiDiRistoro(
boolean statoConvenzione) throws RemoteException {
// Array that allows me to store all the refreshment and
// Which will remove
// Depending on the parameter passed to the refreshment active or not
ArrayList&lt;BeanPuntoDiRistoro&gt; toReturn = null;
// Array that allows me to store all the refreshment active
// Using the database connection
ArrayList&lt;BeanPuntoDiRistoro&gt; attivi = null;
// Instance to connect to the database
IDBConvenzione conv = new DBConvenzione();
try {
// Connect all proceeds from the refreshment Assets
attivi = conv.ottieniListaConvenzioneAttivaPR();
}
// Exception in operations on database
catch (SQLException e) {
System.out.println(&quot;Error in method ottieniPuntiDiRistoro (boolean)&quot;
+ e.toString());
throw new RemoteException(MessaggiErrore.ERRORE_DBMS);
}
// Unexpected exceptions due to other factors
catch (Exception ee) {
System.out.println(&quot;Error in method ottieniPuntiDiRistoro (boolean)&quot;
+ ee.toString());
throw new RemoteException(MessaggiErrore.ERRORE_SCONOSCIUTO);
}
// If you want to get the refreshment active, then return
// Directly to those passed by the connection to the database
if (statoConvenzione) {
// Check the contents dell'ArrayList so as not to return
// Null values to the caller
if (attivi == null)
throw new RemoteException(MessaggiErrore.ERRORE_FORMATO_BEAN);
return attivi;
} else {
try {
// Connect all proceeds from the refreshment then
// Perform comparisons
toReturn = puntoRistoro.ottieniListaPR();
}
// Exception in operations on database
catch (SQLException e) {
System.out.println(&quot;Error in method ottieniPuntiDiRistoro (boolean)&quot;
+ e.toString());
throw new RemoteException(MessaggiErrore.ERRORE_DBMS);
}
// Unexpected exceptions due to other factors
catch (Exception ee) {
System.out.println(&quot;Error in method ottieniPuntiDiRistoro (boolean)&quot;
+ ee.toString());
throw new RemoteException(MessaggiErrore.ERRORE_SCONOSCIUTO);
}
// Size dell'ArrayList containing all of gourmet
// Could
// Change size if you remove some element
int dim = toReturn.size();
// Variable that allows me to understand whether to remove a Point
// Refreshments
// From array that then I must return
boolean present = false;
// First loop to loop through all the ArrayList elements of
// All Refreshments
for (int i = 0; i &lt; dim; i++) {
// Second loop to loop through all the ArrayList elements
// Cones just Refreshments active
for (int j = 0; j &lt; attivi.size(); j++) {
// If the catering points in question has the ID equal to one
// Of those assets, then set this to true
if (attivi.get(j).getId() == toReturn.get(i).getId())
present = true;
}
// If the catering points in question has a Convention active
// Removes it from those to be returned
if (present)
toReturn.remove(i);
}
}
// Return the ArrayList obtained
return toReturn;
}

// Method that allows you to change the past as a refreshment
// Parameter
public boolean modificaPuntoDiRistoro(
BeanPuntoDiRistoro pPuntoDiRistoroAggiornato)
throws RemoteException {
// Check the validity of the bean as a parameter and if
// Trigger an exception remote
if (null == pPuntoDiRistoroAggiornato
|| (!(pPuntoDiRistoroAggiornato instanceof BeanPuntoDiRistoro)))
throw new RemoteException(MessaggiErrore.ERRORE_FORMATO_BEAN);
try {
// Call the method to change the database connection
// The Refreshment
if (puntoRistoro.modificaPuntoDiRistoro(pPuntoDiRistoroAggiornato))
// Return a positive value if the operation was successful
// End
return true;
}
// Exception in operations on database
catch (SQLException e) {
System.out.println(&quot;Error in method modificaPuntoDiRistoro&quot;
+ e.toString());
throw new RemoteException(MessaggiErrore.ERRORE_DBMS);
}
// Unexpected exceptions due to other factors
catch (Exception ee) {
System.out.println(&quot;Error in method modificaPuntoDiRistoro&quot;
+ ee.toString());
throw new RemoteException(MessaggiErrore.ERRORE_SCONOSCIUTO);
}
// Return false if the operation is successful you should
return false;
}

// Method to obtain the Bean a particular point
// Refreshment whose
// Identifier is passed as parameter
public BeanPuntoDiRistoro ottieniPuntoDiRistoro(int pPuntoDiRistoroID)
throws RemoteException {
// Check the validity identifier
if (pPuntoDiRistoroID &lt; 0)
throw new RemoteException(MessaggiErrore.ERRORE_DATI);
// Bean to return to the caller
BeanPuntoDiRistoro toReturn = null;
try {
// Revenue catering points in the issue by connecting to
// Database
toReturn = puntoRistoro.ottieniPuntoDiRistoro(pPuntoDiRistoroID);
}
// Exception in the database opearazioni
catch (SQLException e) {
throw new RemoteException(MessaggiErrore.ERRORE_DBMS);
}
// Unexpected exceptions caused by other factors
catch (Exception ee) {
System.out.println(&quot;Error in method ottieniPuntoDiRistoro&quot;
+ ee.toString());
throw new RemoteException(MessaggiErrore.ERRORE_SCONOSCIUTO);
}
// Check the bean to be returned in order not to return null values
// To the caller
if (null == toReturn)
throw new RemoteException(MessaggiErrore.ERRORE_FORMATO_BEAN);
// Return the bean of Refreshment
return toReturn;
}

// Method that allows you to activate a particular convention to a Point
// Passed as parameter Refreshments
public boolean attivaConvenzione(int pPuntoDiRistoroID,
BeanConvenzione pConv) throws RemoteException {
// Check the validity of parameters passed
if ((pPuntoDiRistoroID &lt; 0) || (pConv == null)
|| (!(pConv instanceof BeanConvenzione)))
throw new RemoteException(MessaggiErrore.ERRORE_DATI);
// Check the data further
if (pConv.getIdPuntoDiRistoro() != pPuntoDiRistoroID)
throw new RemoteException(MessaggiErrore.ERRORE_DATI);
IDBConvenzione conv = null;
try {
// Instantiate the class to connect to the database
conv = new DBConvenzione();
// If the Convention is not yet active, previously provided to
// Activate it locally and then pass the bean to the database changed
if (conv.ottieniConvezioneAttiva(pPuntoDiRistoroID) == null) {
pConv.setAttiva(true);
conv.modificaConvenzione(pConv);
return true;
}
}
// Exception in operations on database
catch (SQLException e) {
throw new RemoteException(MessaggiErrore.ERRORE_DBMS);
}
// Unexpected exceptions caused by other factors
catch (Exception ee) {
System.out.println(&quot;Error in method attivaConvenzione&quot;
+ ee.toString());
throw new RemoteException(MessaggiErrore.ERRORE_SCONOSCIUTO);
}
// If the operation is successful you should return false
return false;
}

// Method that returns a HashMap containing, for Refreshment
// Passed as a parameter, the feedback associated with it
public HashMap&lt;BeanVisitaPR, String&gt; ottieniFeedbackPuntoDiRistoro(
int pPuntoDiRistoroID) throws RemoteException {
// Check the ID passed as a parameter
if (pPuntoDiRistoroID &lt; 0)
throw new RemoteException(MessaggiErrore.ERRORE_DATI);
// Instantiate the map and the performance of ArrayList that I will use
// Method
HashMap&lt;BeanVisitaPR, String&gt; mappaRitorno = null;
ArrayList&lt;BeanVisitaPR&gt; bvisita = null;
try {
// Here I take the list of all visits to the PR passed as
// Parameter
bvisita = feed.ottieniListaVisitaPR(pPuntoDiRistoroID);
// Instantiate the map of the same size as the list of
// BeanVisitaPR
mappaRitorno = new HashMap&lt;BeanVisitaPR, String&gt;(bvisita.size());
// Here we begin to iterate on each visit to add its
// Username
for (Iterator&lt;BeanVisitaPR&gt; iteratoreVisitaPR = bvisita.iterator(); iteratoreVisitaPR
.hasNext();) {
// Recuperto the BeanVisitaPR
BeanVisitaPR bVisitaTemp = iteratoreVisitaPR.next();
// Retrieve the tourist who left the comment that I
// Examining
BeanTurista bTuristaTemp = dbTurista.ottieniTurista(bVisitaTemp
.getIdTurista());
// Get the username of the Tourist
String usernameTuristaTemp = bTuristaTemp.getUsername();
// Put the pair in the map
mappaRitorno.put(bVisitaTemp, usernameTuristaTemp);
}
}
// Exception in database operations
catch (SQLException e) {
System.out.println(&quot;Error in method ottieniFeedbackPR&quot;
+ e.toString());
throw new RemoteException(MessaggiErrore.ERRORE_DBMS);
}
// Unexpected exceptions caused by other factors
catch (Exception ee) {
System.out.println(&quot;Error in method ottieniFeedbackPR&quot;
+ ee.toString());
throw new RemoteException(MessaggiErrore.ERRORE_SCONOSCIUTO);
}
// Check the return parameter so as not to pass null values
// To the database
if (null == mappaRitorno)
throw new RemoteException(MessaggiErrore.ERRORE_FORMATO_BEAN);
return mappaRitorno;
}

// Method to insert a tag from those of a refreshment
public boolean cancellaTagPuntoDiRistoro(int pPuntoDiRistoroId, int pTagId)
throws RemoteException {
// Check the validity of past data
if ((pPuntoDiRistoroId &lt; 0) || (pTagId &lt; 0))
throw new RemoteException(MessaggiErrore.ERRORE_DATI);
// ArrayList which stores all the tags
ArrayList&lt;BeanTag&gt; tags;
// Boolean variable to check if the Refreshment
// Holds the tag you want to delete
boolean present = false;
try {
// Use the method through the class of database connection
tags = tag.ottieniTagPuntoDiRistoro(pPuntoDiRistoroId);
}
// Exception in the execution of transactions in database
catch (SQLException e) {
System.out.println(&quot;Error in method cancellaTagPuntoDiRistoro&quot;
+ e.toString());
throw new RemoteException(MessaggiErrore.ERRORE_DBMS);
}
// Unexpected exception due to other factors
catch (Exception ee) {
System.out.println(&quot;Error in method cancellaTagPuntoDiRistoro&quot;
+ ee.toString());
throw new RemoteException(MessaggiErrore.ERRORE_SCONOSCIUTO);
}
// Check if the tag is present cycle currently
// Between those of Refreshment
for (BeanTag t : tags)
if (t.getId() == pTagId)
present = true;
// If the tag is present among those of eateries, then
// Provides for executing the erase operation
if (present) {
try {
return tag.cancellaTagPuntoDiRistoro(pPuntoDiRistoroId, pTagId);
}
// Exception in implementing the operation on the database
catch (SQLException e) {
System.out.println(&quot;Error in method cancellaTagPuntoDiRistoro&quot;
+ e.toString());
throw new RemoteException(MessaggiErrore.ERRORE_DBMS);
}
// Unexpected exception due to other factors
catch (Exception ee) {
System.out.println(&quot;Error in method cancellaTagPuntoDiRistoro&quot;
+ ee.toString());
throw new RemoteException(MessaggiErrore.ERRORE_SCONOSCIUTO);
}
}
// In case something did not come to fruition
// Return false
return false;
}

// Method to delete a tag from those of a refreshment
// The operations are identical to those above, except for
// Control over the presence of the tag from those of Refreshment
// Which should give negative results, and the call here is the method of
// Insert
public boolean inserisciTagPuntoDiRistoro(int pPuntoDiRistoroId, int pTagId)
throws RemoteException {
if ((pPuntoDiRistoroId &lt; 0) || (pTagId &lt; 0))
throw new RemoteException(MessaggiErrore.ERRORE_DATI);

ArrayList&lt;BeanTag&gt; tags;
boolean present = false;
try {
tags = tag.ottieniTagPuntoDiRistoro(pPuntoDiRistoroId);
}
catch (SQLException e) {
System.out.println(&quot;Error in method inserisciTagPuntoDiRistoro&quot;
+ e.toString());
throw new RemoteException(MessaggiErrore.ERRORE_DBMS);
}
catch (Exception ee) {
System.out.println(&quot;Error in method inserisciTagPuntoDiRistoro&quot;
+ ee.toString());
throw new RemoteException(MessaggiErrore.ERRORE_SCONOSCIUTO);
}
for (BeanTag t : tags)
if (t.getId() == pTagId)
present = true;
// Check that the Refreshment has not already specified tag
if (present) {
try {
// Calling the method of adding the class via
// Connect to database
return tag.aggiungeTagPuntoDiRistoro(pPuntoDiRistoroId, pTagId);
}
catch (SQLException e) {
System.out.println(&quot;Error in method inserisciTagPuntoDiRistoro&quot;
+ e.toString());
throw new RemoteException(MessaggiErrore.ERRORE_DBMS);
}
catch (Exception ee) {
System.out.println(&quot;Error in method inserisciTagPuntoDiRistoro&quot;
+ ee.toString());
throw new RemoteException(MessaggiErrore.ERRORE_SCONOSCIUTO);
}
}
// Return false if some operation is not successful you should
return false;
}
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_GestionePuntiDiRistoroComune</id>
      <content>package unisa.gps.etour.control.GestionePuntiDiRistoro;

import java.rmi.RemoteException;
import java.rmi.server.UnicastRemoteObject;
import java.sql.SQLException;
import java.util.ArrayList;
import java.util.Date;
import java.util.Iterator;
import unisa.gps.etour.bean.BeanPuntoDiRistoro;
import unisa.gps.etour.bean.BeanTag;
import unisa.gps.etour.bean.BeanVisitaPR;
/**
* For import junit tests
* Unisa.gps.etour.control.GestionePuntiDiRistoro.test.stub.DBPuntoDiRistoro;
* Import unisa.gps.etour.control.GestionePuntiDiRistoro.test.stub.DBVisitaPR;
*/
import unisa.gps.etour.repository.DBPuntoDiRistoro;
import unisa.gps.etour.repository.DBVisitaPR;
import unisa.gps.etour.repository.DBTag;
import unisa.gps.etour.repository.IDBPuntoDiRistoro;
import unisa.gps.etour.repository.IDBTag;
import unisa.gps.etour.repository.IDBTurista;
import unisa.gps.etour.repository.IDBVisitaPR;
import unisa.gps.etour.util.CostantiGlobali;
import unisa.gps.etour.util.MessaggiErrore;

/**
* Class that implements the common tasks for the operator of dining and
* For the Operator Agency
*
* @Author Joseph Morelli
* @Version 0.1 (c) 2007 eTour Project - Copyright by DMI SE @SA Lab --
* University of Salerno
*/
public class GestionePuntiDiRistoroComune extends UnicastRemoteObject implements
IGestionePuntiDiRistoroComune {

// Instance for database connections
private static final long serialVersionUID = 1L;
protected IDBPuntoDiRistoro puntoRistoro;
protected IDBTag tags;
protected IDBVisitaPR feeds;
protected IDBTurista dbTurista;

public GestionePuntiDiRistoroComune() throws RemoteException {
super();
// Connect to the Database
try {
puntoRistoro = new DBPuntoDiRistoro();
tag = new DBTag();
feed = new DBVisitaPR();
}
// Note: no longer 'cause SQLException thrown
// Changes to the layer DB; changed Exception
catch (Exception e) {
System.out.println(&quot;Error:&quot; + e.toString());
throw new RemoteException(MessaggiErrore.ERRORE_SCONOSCIUTO);
}
}

/**
* Method which allows to obtain a BeanPuntoDiRistoro through
* Connect to database
*/
public BeanPuntoDiRistoro ottieniPuntoDiRistoro(int pPuntoDiRistoroID)
throws RemoteException {
// Check identifier passed
if (pPuntoDiRistoroID &lt; 0)
throw new RemoteException(MessaggiErrore.ERRORE_DATI);
// Return Instance
BeanPuntoDiRistoro toReturn = null;
try {
// Revenue data through the instance of the database connection
toReturn = puntoRistoro.ottieniPuntoDiRistoro(pPuntoDiRistoroID);
}
// Exception in database operations
catch (SQLException e) {
System.out.println(&quot;Error:&quot; + e.toString());
throw new RemoteException(MessaggiErrore.ERRORE_DBMS);
}
// Unexpected exceptions due to other factors
catch (Exception ee) {
System.out.println(&quot;Error:&quot; + ee.toString());
throw new RemoteException(MessaggiErrore.ERRORE_SCONOSCIUTO);
}
// Check the variable return, so they do not pass bad data
// To the caller
// And triggers an exception if the format of the bean
if (null == toReturn)
throw new RemoteException(MessaggiErrore.ERRORE_FORMATO_BEAN);
// Return the bean that contains information about Refreshment
// Required
return toReturn;
}

// Method that returns an ArrayList containing the tag identification of a
// Some Refreshment
public ArrayList&lt;BeanTag&gt; ottieniTagPuntoDiRistoro(int pPuntoDiRistoroID)
throws RemoteException {
// Check identifier passed
if (pPuntoDiRistoroID &lt; 0)
throw new RemoteException(MessaggiErrore.ERRORE_DATI);
// Return Instance
ArrayList&lt;BeanTag&gt; toReturn = null;
try {
// Revenue data through the instance of the database connection
toReturn = tag.ottieniTagPuntoDiRistoro(pPuntoDiRistoroID);
}
// Exception in operations on database
catch (SQLException e) {
System.out.println(&quot;Error:&quot; + e.toString());
throw new RemoteException(MessaggiErrore.ERRORE_DBMS);
}
// Unexpected exceptions due to other factors
catch (Exception ee) {
System.out.println(&quot;Error:&quot; + ee.toString());
throw new RemoteException(MessaggiErrore.ERRORE_SCONOSCIUTO);
}
// Check the variable return, so they do not pass bad data
// To the caller
// And triggers an exception if the format of the bean
if (null == toReturn)
throw new RemoteException(MessaggiErrore.ERRORE_FORMATO_BEAN);
// Return the ArrayList containing beans tag of refreshment
// Passed as parameter
return toReturn;
}

// Returns an array of 10 strings containing the last 10 comments
// Issued by tourists for Refreshment passed as parameter
public String[] ottieniUltimiCommenti(int pPuntoDiRistoroID)
throws RemoteException {
// Check the validity identifier passed
if (pPuntoDiRistoroID &lt; 0)
throw new RemoteException(MessaggiErrore.ERRORE_DATI);
// String that contains only the last 10 comments made
String[] toReturn = new String[10];
// ArrayList temporary then save the comments contained in the beans
// Inside
ArrayList&lt;BeanVisitaPR&gt; temp = null;
try {
// Attempt to retrieve information from the database via
// The connection instance
temp = feed.ottieniListaVisitaPR(pPuntoDiRistoroID);
}
// Exception in database operations
catch (SQLException e) {
System.out.println(&quot;Error in method ottieniUltimiCommenti&quot;
+ e.toString());
throw new RemoteException(MessaggiErrore.ERRORE_DBMS);
}
// Unexpected exceptions due to other factors
catch (Exception ee) {
System.out.println(&quot;Error in method ottieniUltimiCommenti&quot;
+ ee.toString());
throw new RemoteException(MessaggiErrore.ERRORE_SCONOSCIUTO);
}
// The bean that I receive from the database are already sorted by date
// Implicitly, so there is no need for sorting algorithms
for (int i = 0; i &lt; 10; i++) {
// Insert the text of the comments in cyclically
// Array
toReturn[i] = (temp.get(temp.size() - (i + 1))).getCommento();
}
// E 'unnecessary control the format of the array
// Then return the array directly with comments
return toReturn;
}

// Method that returns an ArrayList containing the number of votes
// Release from 1 to 5 for
// The Refreshment passed as parameter. The method inserts in order
// Counters in positions
// From 0 to 1 vote, 1 vote for 2, etc. ..
public ArrayList&lt;Integer&gt; ottieniStatistichePuntoDiRistoro(
int pPuntoDiRistoroID) throws RemoteException {
// Check the validity identifier passed
if (pPuntoDiRistoroID &lt; 0)
throw new RemoteException(MessaggiErrore.ERRORE_DATI);
// ArrayList that allows me to store the bean containing the feedback
ArrayList&lt;BeanVisitaPR&gt; bVisita = null;
// ArrayList that allows me to store the counters
// And then return to the calling method
ArrayList&lt;Integer&gt; listaRisultati = new ArrayList&lt;Integer&gt;(5);
// Initialize the array of counters
for (int i = 0; i &lt; 5; i++)
listaRisultati.add(Integer.valueOf(0));
// Data useful to verify that the issued date back thirty Feedback
// Days from current date
Date ultimiTrentaGiorni = new Date(new Date().getTime()
- CostantiGlobali.TRENTA_GIORNI);

System.out.println(&quot;The date of 30 days ago:&quot; + ultimiTrentaGiorni);

try {
// All feedback Revenue issued for Refreshment
// Passed as parameter
bVisita = feed.ottieniListaVisitaPR(pPuntoDiRistoroID);
// Iterate the collection of elements to control the bean
// Visits
for (Iterator&lt;BeanVisitaPR&gt; iteratoreVisitaPR = bVisita.iterator(); iteratoreVisitaPR
.hasNext();) {
// Recuperto the BeanVisitaPR
BeanVisitaPR bVisitaTemp = iteratoreVisitaPR.next();
// ... Do not know what does ...
System.out.println(&quot;The date of this visit is: &quot;
+ bVisitaTemp.getDataVisita());
if (bVisitaTemp.getDataVisita().after(ultimiTrentaGiorni))
listaRisultati.set(bVisitaTemp.getVoto() - 1, Integer
.valueOf(listaRisultati.get(
bVisitaTemp.getVoto() - 1).intValue() + 1));
}
}
// Exception in database operations
catch (SQLException e) {
System.out.println(&quot;Error in method ottieniStatistichePuntoDiRistoro&quot;
+ e.toString());
throw new RemoteException(MessaggiErrore.ERRORE_DBMS);
}
// Unexpected exceptions due to other factors
catch (Exception ee) {
System.out.println(&quot;Error in method ottieniStatistichePuntoDiRistoro&quot;
+ ee.toString());
throw new RemoteException(MessaggiErrore.ERRORE_SCONOSCIUTO);
}
if (null == listaRisultati)
throw new RemoteException(MessaggiErrore.ERRORE_FORMATO_BEAN);
// Return the list of results that should contain counters
// Comments
// Issued in the last 30 days
return listaRisultati;
}

// Method that allows you to change the comment issued for a
// Refreshment
public boolean modificaFeedbackPuntoDiRistoro(int pPuntoDiRistoroId,
BeanVisitaPR nuovaVisita) throws RemoteException {
// Check the validity of past data
if ((pPuntoDiRistoroId &lt; 0) || (!(nuovaVisita instanceof BeanVisitaPR)))
throw new RemoteException(MessaggiErrore.ERRORE_DATI);
// Revenue from the database the bean and stores saved
// In order to verify that the vote has not changed
// Which had been previously released
BeanVisitaPR temp = null;
try {
temp = feed.ottieniVisitaPR(pPuntoDiRistoroId, nuovaVisita
.getIdTurista());
}
// Exception running the operation on Database
catch (SQLException e) {
System.out.println(&quot;Error in method modificaFeedbackPuntoDiRistoro&quot;
+ e.toString());
throw new RemoteException(MessaggiErrore.ERRORE_DBMS);
}
// Unexpected exception caused by other factors
catch (Exception ee) {
System.out.println(&quot;Error in method modificaFeedbackPuntoDiRistoro&quot;
+ ee.toString());
throw new RemoteException(MessaggiErrore.ERRORE_SCONOSCIUTO);
}
// If the vote was amended returns an exception
if (temp.getVoto() != nuovaVisita.getVoto())
throw new RemoteException(MessaggiErrore.ERRORE_FORMATO_BEAN);
// If the vote has not been amended shall save the new
// Comment in the database using the specific method of the bean
else {
try {
feed.modificaVisitaPR(nuovaVisita);
return true;
}
// Exception running the operation on Database
catch (SQLException e) {
System.out.println(&quot;Error in method modificaFeedbackPuntoDiRistoro&quot;
+ e.toString());
throw new RemoteException(MessaggiErrore.ERRORE_DBMS);
}
// Unexpected exception caused by other factors
catch (Exception ee) {
System.out.println(&quot;Error in method modificaFeedbackPuntoDiRistoro&quot;
+ ee.toString());
throw new RemoteException(MessaggiErrore.ERRORE_SCONOSCIUTO);
}
}
}
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_GestioneTagComune</id>
      <content>package unisa.gps.etour.control.GestioneTag;

import java.rmi.RemoteException;
import java.rmi.server.UnicastRemoteObject;
import java.sql.SQLException;
import java.util.ArrayList;
import unisa.gps.etour.bean.BeanTag;
/*
* For imported text unisa.gps.etour.control.GestioneTag.test.stub.DBTag;
*/
import unisa.gps.etour.repository.DBTag;
import unisa.gps.etour.repository.IDBTag;
import unisa.gps.etour.util.MessaggiErrore;

/**
* Class that implements the common tasks for the use of tags
*
* @Author Joseph Morelli
* @Version 0.1 2007 eTour Project - Copyright by SE @ SA Lab DMI University
* Of Salerno
*/
public class GestioneTagComune extends UnicastRemoteObject implements IGestioneTagComune {

private static final long serialVersionUID = 1L;
// Object for the database connection
protected IDBTag tags;

public GestioneTagComune() throws RemoteException {
super();
// Connect to the Database
try {
tag = new DBTag();
}
catch (Exception e) {
throw new RemoteException(MessaggiErrore.ERRORE_SCONOSCIUTO);
}
}

// Method that returns all tags
public ArrayList&lt;BeanTag&gt; ottieniTags() throws RemoteException {
// ArrayList to fill with the tags to return
ArrayList&lt;BeanTag&gt; toReturn;
// Retrieve data from Database
try {
// Get the information from the Database
toReturn = tag.ottieniListaTag();
}
// Exception in the execution of database operations
catch (SQLException e) {
System.out.println(&quot;Error in method ottieniTags:&quot; + e.toString());
throw new RemoteException(MessaggiErrore.ERRORE_DBMS);
}
// Unexpected exceptions caused by other factors
catch (Exception ee) {
System.out.println(&quot;Error in method ottieniTags&quot; + ee.toString());
throw new RemoteException(MessaggiErrore.ERRORE_SCONOSCIUTO);
}
// Check the data back in order not to return null values
// Caller
if (null == toReturn)
throw new RemoteException(MessaggiErrore.ERRORE_FORMATO_BEAN);
return toReturn;
}
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_GestioneTagOperatoreAgenzia</id>
      <content>package unisa.gps.etour.control.GestioneTag;

import java.rmi.RemoteException;
import java.sql.SQLException;
import unisa.gps.etour.bean.BeanTag;
import unisa.gps.etour.util.MessaggiErrore;

/**
* Class that implements the methods for the functionality of the Operator Agency
* Extending the class of common Tag Management
*
* @Author Joseph Morelli
* @Version 0.1 2007 eTour Project - Copyright by SE @ SA Lab DMI University
* Of Salerno
*/
public class GestioneTagOperatoreAgenzia extends GestioneTagComune implements
IGestioneTagOperatoreAgenzia {

private static final long serialVersionUID = 1L;

public GestioneTagOperatoreAgenzia() throws RemoteException {
// Invoke the constructor of the superclass for communication with
// Database
super();
}

// Method to delete from database the tag whose ID is passed
// As parameter
public boolean cancellaTag(int pTagID) throws RemoteException {
// Check the valise of past data
if ((pTagID &lt;= 0))
throw new RemoteException(MessaggiErrore.ERRORE_DATI);
try {
// Make the database operation
tag.cancellaTag(pTagID);
return true;
}
// Exception in the execution of database operations
catch (SQLException e) {
System.out.println(&quot;Error in method cancellaTag:&quot; + e.toString());
throw new RemoteException(MessaggiErrore.ERRORE_DBMS);
}
// Unexpected exceptions caused by other factors
catch (Exception ee) {
System.out.println(&quot;Error in method cancellaTag&quot; + ee.toString());
throw new RemoteException(MessaggiErrore.ERRORE_SCONOSCIUTO);
}
}

// Method that allows the insertion of a new tag as a parameter
public boolean inserisciTag(BeanTag pTagNuovo) throws RemoteException {
// Check the validity of the Bean and the data contained within
if (null == pTagNuovo)
throw new RemoteException(MessaggiErrore.ERRORE_FORMATO_BEAN);
if ((pTagNuovo = checkTag(pTagNuovo)) == null)
throw new RemoteException(MessaggiErrore.ERRORE_FORMATO_BEAN);
try {
// Execute the operation on the Database
tag.inserisciTag(pTagNuovo);
return true;
}
// Exception running the operation on Database
catch (SQLException e) {
System.out.println(&quot;Error in method inserisciTag&quot; + e.toString());
throw new RemoteException(MessaggiErrore.ERRORE_DBMS);
}
// Unexpected exceptions caused by other factors
catch (Exception ee) {
System.out.println(&quot;Error in method inserisciTag&quot; + ee.toString());
throw new RemoteException(MessaggiErrore.ERRORE_SCONOSCIUTO);
}
}

// Method that enables the modification of a tag that is passed as
// Parameter
public boolean modificaTag(BeanTag pTagModificato) throws RemoteException {
// Check the validity of data
if ((pTagModificato = checkTag(pTagModificato)) == null)
throw new RemoteException(MessaggiErrore.ERRORE_FORMATO_BEAN);
try {
// Execute the operation on the Database
tag.modificaTag(pTagModificato);
return true;
}
// Exception running the operation on Database
catch (SQLException e) {
System.out.println(&quot;Error in method modificaTag:&quot; + e.toString());
throw new RemoteException(MessaggiErrore.ERRORE_DBMS);
}
// Unexpected exceptions caused by other factors
catch (Exception ee) {
System.out.println(&quot;Error in method modificaTag&quot; + ee.toString());
throw new RemoteException(MessaggiErrore.ERRORE_SCONOSCIUTO);
}
}

// Method to obtain the tags whose identifier is passed
// As parameter
public BeanTag ottieniTag(int pTagID) throws RemoteException {
// Check the validity of data
if (pTagID &lt;= 0)
throw new RemoteException(MessaggiErrore.ERRORE_DATI);
// Bean to return
BeanTag toReturn;
try {
// Execute the operation on the Database
toReturn = tag.ottieniTag(pTagID);
}
// Exception running the operation on Database
catch (SQLException e) {
System.out.println(&quot;Error in method ottieniTag:&quot; + e.toString());
throw new RemoteException(MessaggiErrore.ERRORE_DBMS);
}
// Unexpected exceptions caused by other factors
catch (Exception ee) {
System.out.println(&quot;Error in method ottieniTag:&quot; + ee.toString());
throw new RemoteException(MessaggiErrore.ERRORE_SCONOSCIUTO);
}
if (null == toReturn)
throw new RemoteException(MessaggiErrore.ERRORE_FORMATO_BEAN);
return toReturn;
}

// Method that controls all the attributes of a BeanTag
private BeanTag checkTag(BeanTag toControl) {
// Check the ID
if (toControl.getId() &lt;= 0)
return null;
// Check the description
if (toControl.getDescrizione().equals(&quot;&quot;))
toControl.setDescrizione(&quot;***&quot;);
// Check the name
if (toControl.getNome().equals(&quot;&quot;))
return null;
// Check that the name does not contain a space
if (toControl.getNome().contains(&quot; &quot;))
return null;
return toControl;
}
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_GestioneTuristaClient</id>
      <content>package unisa.gps.etour.control.GestioneUtentiRegistrati;

import java.rmi.RemoteException;
import java.sql.SQLException;
import java.util.ArrayList;
import java.util.Iterator;

import unisa.gps.etour.bean.BeanBeneCulturale;
import unisa.gps.etour.bean.BeanPreferenzaDiRicerca;
import unisa.gps.etour.bean.BeanPreferenzeGeneriche;
import unisa.gps.etour.bean.BeanPuntoDiRistoro;
import unisa.gps.etour.bean.BeanTurista;
import unisa.gps.etour.bean.BeanVisitaBC;
import unisa.gps.etour.bean.BeanVisitaPR;
import unisa.gps.etour.repository.DBBeneCulturale;
import unisa.gps.etour.repository.DBPreferenzeDiRicerca;
import unisa.gps.etour.repository.DBPreferenzeGeneriche;
import unisa.gps.etour.repository.DBPuntoDiRistoro;
import unisa.gps.etour.repository.DBTurista;
import unisa.gps.etour.repository.DBVisitaBC;
import unisa.gps.etour.repository.DBVisitaPR;
import unisa.gps.etour.repository.IDBBeneCulturale;
import unisa.gps.etour.repository.IDBPreferenzeDiRicerca;
import unisa.gps.etour.repository.IDBPreferenzeGeneriche;
import unisa.gps.etour.repository.IDBPuntoDiRistoro;
import unisa.gps.etour.repository.IDBTurista;
import unisa.gps.etour.repository.IDBVisitaBC;
import unisa.gps.etour.repository.IDBVisitaPR;
import unisa.gps.etour.util.ControlloDati;
import unisa.gps.etour.util.MessaggiErrore;

/**
* Class on the Management of Tourist Information
*
* @Author Federico Leon
* @Version 0.1 2007 eTour Project - Copyright by SE @SA Lab University of DMI
* Salerno
*/

public class GestioneTuristaClient extends GestioneTuristaComune implements
IGestioneTuristaClient {
private static final long serialVersionUID = -6161592850721537385L;
private IDBTurista profiloTurista; // Data Management for tourists
private IDBPreferenzeGeneriche prefGenTurista; // preferences, general manager of the tourist
private IDBPreferenzeDiRicerca prefRicTurista; // Handle search preferences of tourists
private IDBVisitaBC visitatiBC; // Managing cultural Visited
private IDBVisitaPR visitatiPR; // Manager catering outlets visited
private IDBBeneCulturale beneCulturale; // Managing cultural heritage (we need only obtain a bean BeneCulturale x
// from its ID
private IDBPuntoDiRistoro puntoDiRistoro; // Management refreshment areas (use the same object &quot;beneCulturale&quot;

public GestioneTuristaClient() throws RemoteException {
super();

profiloTurista = new DBTurista();
prefGenTurista = new DBPreferenzeGeneriche();
prefRicTurista = new DBPreferenzeDiRicerca();
visitatiBC = new DBVisitaBC();
visitatiPR = new DBVisitaPR();
beneCulturale = new DBBeneCulturale();
puntoDiRistoro = new DBPuntoDiRistoro();
}

/*
* (Non-Javadoc)
*
* @See unisa.gps.etour.control.GestioneUtentiRegistrati.IGestioneTuristaClient # cancellaPreferenzeDiRicerca (int,
* Int)
*/
public BeanPreferenzaDiRicerca cancellaPreferenzeDiRicerca(int pIdTurista, int pIdPreferenzaDiRicerca) throws RemoteException {
try {
boolean delete = true;
BeanPreferenzaDiRicerca PrefRic = new BeanPreferenzaDiRicerca();
ArrayList&lt;BeanPreferenzaDiRicerca&gt; ElencoPrefRic = new ArrayList&lt;BeanPreferenzaDiRicerca&gt;();

ElencoPrefRic = prefRicTurista.ottieniPreferenzeDiRicercaDelTurista(pIdTurista);
Iterator&lt;BeanPreferenzaDiRicerca&gt; elenco = ElencoPrefRic.iterator();

while (elenco.hasNext() &amp;&amp; delete == true) {
PrefRic = elenco.next();
if (PrefRic.getId() == pIdPreferenzaDiRicerca)
delete = false; // Find the anniversary with the id
// We leave the interested
// Cycle
}

boolean cancellazione = prefRicTurista.cancellaPreferenzaDiRicercaTurista(
pIdTurista, pIdPreferenzaDiRicerca);
return PrefRic;
}
catch (SQLException e) {
// If the data layer is thrown an exception SQLException
// It throws RemoteException the remote exception
throw new RemoteException(MessaggiErrore.ERRORE_DBMS);
}
}

/*
* (Non-Javadoc)
*
* @See unisa.gps.etour.control.GestioneUtentiRegistrati.IGestioneTuristaClient # cancellaPreferenzeGeneriche (int)
*/
public BeanPreferenzeGeneriche cancellaPreferenzeGeneriche(int pIdTurista) throws RemoteException {
try {
BeanPreferenzeGeneriche temp = prefGenTurista.ottieniPreferenzaGenerica(pIdTurista);
boolean canceled = prefGenTurista.cancellaPreferenzaGenerica(temp.getId());

if (canceled)
return temp;
else
return null; // The cancellation occurred
}
catch (SQLException e) {
// If the data layer is thrown an exception SQLException
// It throws RemoteException the remote exception
throw new RemoteException(MessaggiErrore.ERRORE_DBMS);
}
}

/*
* (Non-Javadoc)
*
* @See unisa.gps.etour.control.GestioneUtentiRegistrati.IGestioneTuristaClient # inserisciPreferenzaDiRicerca (int,
* Unisa.gps.etour.bean.BeanPreferenzaDiRicerca)
*/
public boolean inserisciPreferenzaDiRicerca(int pIdTurista, BeanPreferenzaDiRicerca pPreferenzaDiRicerca) throws RemoteException {
try {
boolean checkdate = ControlloDati.checkBeanPreferenzaDiRicerca(pPreferenzaDiRicerca);

if (checkdate) { // If the data control is positive
return prefRicTurista.inserisciPreferenzaDiRicercaDelTurista(pIdTurista, pPreferenzaDiRicerca.getId());
}
else {
return false; // Data error
}
}
catch (SQLException e) {
// If the data layer is thrown an exception SQLException
// It throws RemoteException the remote exception
throw new RemoteException(MessaggiErrore.ERRORE_DBMS);
}
}

/*
* (Non-Javadoc)
*
* @See unisa.gps.etour.control.GestioneUtentiRegistrati.IGestioneTuristaClient # inserisciPreferenzeGeneriche (unisa.gps.etour.bean.BeanPreferenzeGeneriche)
*/
public boolean inserisciPreferenzeGeneriche(BeanPreferenzeGeneriche pPreferenzeGeneriche) throws RemoteException {
try {
boolean checkdate = ControlloDati.checkBeanPreferenzeGeneriche(pPreferenzeGeneriche);

if (checkdate) { // If the data control is positive
return prefGenTurista.inserisciPreferenzaGenenerica(pPreferenzeGeneriche);
}
else {
return false; // Data error
}
}
catch (SQLException e) {
// If the data layer is thrown an exception SQLException
// It throws RemoteException the remote exception
throw new RemoteException(MessaggiErrore.ERRORE_DBMS);
}
}

/*
* (Non-Javadoc)
*
* @See unisa.gps.etour.control.GestioneUtentiRegistrati.IGestioneTuristaClient # inserisciTurista (unisa.gps.etour.bean.BeanTurista)
*/
public boolean inserisciTurista(BeanTurista pTurista) throws RemoteException {
try {
// Check if the username entered is already present in DB
BeanTurista temp = profiloTurista.ottieniTurista(pTurista.getUsername());

// If there is no choice all'username Tourist Offices
if (temp == null) {
boolean checkdate = ControlloDati.checkBeanTurista(pTurista);

if (checkdate) { // If the data control is positive
return profiloTurista.inserisciTurista(pTurista);
}
else {
return false; // Data error
}
}
else {
return false; // Username already exists in DB
}
}
catch (SQLException e) {
// If the data layer is thrown an exception SQLException
// It throws RemoteException the remote exception
throw new RemoteException(MessaggiErrore.ERRORE_DBMS);
}
}

/*
* (Non-Javadoc)
*
* @See unisa.gps.etour.control.GestioneUtentiRegistrati.IGestioneTuristaClient # modificaPreferenzeGeneriche (unisa.gps.etour.bean.BeanPreferenzeGeneriche)
*/
public boolean modificaPreferenzeGeneriche(BeanPreferenzeGeneriche pPreferenzeGenericheNuove) throws RemoteException {
try {
boolean checkdate = ControlloDati.checkBeanPreferenzeGeneriche(pPreferenzeGenericheNuove);

if (checkdate) { // If the data control is positive
return prefGenTurista.modificaPreferenzaGenerica(pPreferenzeGenericheNuove);
}
else {
return false; // Data error
}
}
catch (SQLException e) {
// If the data layer is thrown an exception SQLException
// It throws RemoteException the remote exception
throw new RemoteException(MessaggiErrore.ERRORE_DBMS);
}
}

/*
* (Non-Javadoc)
*
* @See unisa.gps.etour.control.GestioneUtentiRegistrati.IGestioneTuristaClient # ottieniPreferenzeDiRicerca (int)
*/
public BeanPreferenzaDiRicerca[] ottieniPreferenzeDiRicerca(int pIdTurista) throws RemoteException {
// Array containing the list of search preferences tourists ID = pIdTurista
BeanPreferenzaDiRicerca[] preferences = null;

try {
// Convert ArrayList (return type of method &quot;ottieniPreferenzeDiRicerca&quot;) to simple array
ArrayList&lt;BeanPreferenzaDiRicerca&gt; listaPreferenze = prefRicTurista.ottieniPreferenzeDiRicercaDelTurista(pIdTurista);
preferences = new BeanPreferenzaDiRicerca[listaPreferenze.size()];
preferences = listaPreferenze.toArray(preferences);
// End Conversion
}
catch (SQLException e) {
// If the data layer is thrown an exception SQLException
// It throws RemoteException the remote exception
throw new RemoteException(MessaggiErrore.ERRORE_DBMS);
}

return preferences;
}

/*
* (Non-Javadoc)
*
* @See unisa.gps.etour.control.GestioneUtentiRegistrati.IGestioneTuristaClient # ottieniPreferenzeGeneriche (int)
*/
public BeanPreferenzeGeneriche ottieniPreferenzeGeneriche(int pIdTurista) throws RemoteException {
try {
return prefGenTurista.ottieniPreferenzaGenerica(pIdTurista);
}
catch (SQLException e) {
// If the data layer is thrown an exception SQLException
// It throws RemoteException the remote exception
throw new RemoteException(MessaggiErrore.ERRORE_DBMS);
}
}

/*
* (Non-Javadoc)
*
* @See unisa.gps.etour.control.GestioneUtentiRegistrati.GestioneTuristaComune # modificaTurista (unisa.gps.etour.bean.BeanTurista)
*/
public boolean modificaTurista(BeanTurista pprofiloTurista) throws RemoteException {
try {
// Boolean variable that will hold true if the bean is correct, false otherwise
boolean checkdate = ControlloDati.checkBeanTurista(pprofiloTurista);

if (checkdate) { // If the data control is positive
return profiloTurista.modificaTurista(pprofiloTurista);
}
else {
return false; // Data error
}
}
catch (SQLException e) {
// If the data layer is thrown an exception SQLException
// It throws RemoteException the remote exception
throw new RemoteException(MessaggiErrore.ERRORE_DBMS);
}
}

/*
* (Non-Javadoc)
*
* @See unisa.gps.etour.control.GestioneUtentiRegistrati.IGestioneTuristaClient # ottieniBeniCulturaliVisitati (int)
*/
public BeanVisitaBC[] ottieniBeniCulturaliVisitati(int pIdTurista) throws RemoteException {
BeanVisitaBC[] visited = null;
if (pIdTurista &gt; 0) {
try {
ArrayList&lt;BeanVisitaBC&gt; listavisitati = visitatiBC.ottieniListaVisitaBCTurista(pIdTurista);
visited = new BeanVisitaBC[listavisitati.size()];
visited = listavisitati.toArray(visited);
}
catch (SQLException e) {
throw new RemoteException(MessaggiErrore.ERRORE_DBMS);
}
catch (Exception e) {
throw new RemoteException(MessaggiErrore.ERRORE_SCONOSCIUTO);
}
}
return visited;
}

/*
* (Non-Javadoc)
*
* @See unisa.gps.etour.control.GestioneUtentiRegistrati.IGestioneTuristaClient # ottieniPuntiDiRistoroVisitati (int)
*/
public BeanVisitaPR[] ottieniPuntiDiRistoroVisitati(int pIdTurista) throws RemoteException {
// Array containing the list of catering outlets visited by tourists with id &quot;pIdTurista&quot;
BeanVisitaPR[] visited = null;
if (pIdTurista &gt; 0) {
try {
ArrayList&lt;BeanVisitaPR&gt; listavisitati = visitatiPR.ottieniListaVisitaPRTurista(pIdTurista);
visited = new BeanVisitaPR[listavisitati.size()];
visited = listavisitati.toArray(visited);
}
catch (SQLException e) {
throw new RemoteException(MessaggiErrore.ERRORE_DBMS);
}
catch (Exception e) {
throw new RemoteException(MessaggiErrore.ERRORE_SCONOSCIUTO);
}
}
return visited;
}

/*
* (Non-Javadoc)
*
* @See unisa.gps.etour.control.GestioneUtentiRegistrati.IGestioneTuristaClient # inserisciBeneCulturaleVisitato (unisa.gps.etour.bean.BeanVisitaBC)
*/
public boolean inserisciBeneCulturaleVisitato(BeanVisitaBC pVisitaBC) throws RemoteException {
if (ControlloDati.checkBeanVisitaBC(pVisitaBC)) {
try {
return visitatiBC.inserisciVisitaBC(pVisitaBC);
}
catch (SQLException e) {
throw new RemoteException(MessaggiErrore.ERRORE_DBMS);
}
catch (Exception e) {
throw new RemoteException(MessaggiErrore.ERRORE_SCONOSCIUTO);
}
}
return false;
}

/*
* (Non-Javadoc)
*
* @See unisa.gps.etour.control.GestioneUtentiRegistrati.IGestioneTuristaClient # inserisciPuntoDiRistoroVisitato (unisa.gps.etour.bean.BeanVisitaPR)
*/
public boolean inserisciPuntoDiRistoroVisitato(BeanVisitaPR pVisitaPR) throws RemoteException {
if (ControlloDati.checkBeanVisitaPR(pVisitaPR)) {
try {
return visitatiPR.inserisciVisitaPR(pVisitaPR);
}
catch (SQLException e) {
throw new RemoteException(MessaggiErrore.ERRORE_DBMS);
}
catch (Exception e) {
throw new RemoteException(MessaggiErrore.ERRORE_SCONOSCIUTO);
}
}
return false;
}

/*
* (Non-Javadoc)
*
* @See unisa.gps.etour.control.GestioneUtentiRegistrati.IGestioneTuristaClient # inserisciBeneCulturalePreferito (int,
* Int)
*/
public boolean inserisciBeneCulturalePreferito(int pIdTurista, int pIdBeneCulturale) throws RemoteException {
if (pIdTurista &gt; 0 &amp;&amp; pIdBeneCulturale &gt; 0) {
try {
return profiloTurista.inserisciBeneCulturalePreferito(pIdTurista, pIdBeneCulturale);
}
catch (SQLException e) {
throw new RemoteException(MessaggiErrore.ERRORE_DBMS);
}
catch (Exception e) {
throw new RemoteException(MessaggiErrore.ERRORE_SCONOSCIUTO);
}
}
return false;
}

/*
* (Non-Javadoc)
*
* @See unisa.gps.etour.control.GestioneUtentiRegistrati.IGestioneTuristaClient # inserisciPuntoDiRistoroPreferito (int,
* Int)
*/
public boolean inserisciPuntoDiRistoroPreferito(int pIdTurista, int pIdPuntoDiRistoro) throws RemoteException {
if (pIdTurista &gt; 0 &amp;&amp; pIdPuntoDiRistoro &gt; 0) {
try {
return profiloTurista.inserisciPuntoDiRistoroPreferito(pIdTurista, pIdPuntoDiRistoro);
}
catch (SQLException e) {
throw new RemoteException(MessaggiErrore.ERRORE_DBMS);
}
catch (Exception e) {
throw new RemoteException(MessaggiErrore.ERRORE_SCONOSCIUTO);
}
}
return false;
}

/*
* (Non-Javadoc)
*
* @See unisa.gps.etour.control.GestioneUtentiRegistrati.IGestioneTuristaClient # cancellaBeneCulturalePreferito (int,
* Int)
*/
public boolean cancellaBeneCulturalePreferito(int pIdTurista, int pIdBeneCulturale) throws RemoteException {
if (pIdTurista &gt; 0 &amp;&amp; pIdBeneCulturale &gt; 0) {
try {
return profiloTurista.cancellaBeneCulturalePreferito(pIdTurista, pIdBeneCulturale);
}
catch (SQLException e) {
throw new RemoteException(MessaggiErrore.ERRORE_DBMS);
}
catch (Exception e) {
throw new RemoteException(MessaggiErrore.ERRORE_SCONOSCIUTO);
}
}
return false;
}

/*
* (Non-Javadoc)
*
* @See unisa.gps.etour.control.GestioneUtentiRegistrati.IGestioneTuristaClient # cancellaPuntoDiRistoroPreferito (int,
* Int)
*/
public boolean cancellaPuntoDiRistoroPreferito(int pIdTurista, int pIdPuntoDiRistoro) throws RemoteException {
if (pIdTurista &gt; 0 &amp;&amp; pIdPuntoDiRistoro &gt; 0) {
try {
return profiloTurista.cancellaPuntoDiRistoroPreferito(pIdTurista, pIdPuntoDiRistoro);
}
catch (SQLException e) {
throw new RemoteException(MessaggiErrore.ERRORE_DBMS);
}
catch (Exception e) {
throw new RemoteException(MessaggiErrore.ERRORE_SCONOSCIUTO);
}
}
return false;
}

/* (Non-Javadoc)
* @See unisa.gps.etour.control.GestioneUtentiRegistrati.IGestioneTuristaClient # ottieniBeniCulturaliPreferiti (int)
*/
public BeanBeneCulturale[] ottieniBeniCulturaliPreferiti(int pIdTurista) throws RemoteException {
if (pIdTurista &gt; 0) {
try {
// List of cultural favorites of tourists cn id = &quot;pIdTurista&quot;
ArrayList&lt;Integer&gt; listaPreferiti = profiloTurista.ottieniBeniCulturaliPreferiti(pIdTurista);
// Convert ArrayList a simple array
BeanBeneCulturale[] favorites = null;
favorites = new BeanBeneCulturale[listaPreferiti.size()];
favorites = listaPreferiti.toArray(favorites);

int k = 0; // Cycle counter
for (Integer i: listaPreferiti) {
// Fill the array with the favorite bean of all cultural favorites from the tourist
favorites[k++] = beneCulturale.ottieniBeneCulturale(i);
}
}
catch (SQLException e) {
throw new RemoteException(MessaggiErrore.ERRORE_DBMS);
}
catch (Exception e) {
throw new RemoteException(MessaggiErrore.ERRORE_SCONOSCIUTO);
}
}
return null;
}

/* (Non-Javadoc)
* @See unisa.gps.etour.control.GestioneUtentiRegistrati.IGestioneTuristaClient # ottieniPuntiDiRistoroPreferiti (int)
*/
public BeanPuntoDiRistoro[] ottieniPuntiDiRistoroPreferiti(int pIdTurista) throws RemoteException {
if (pIdTurista &gt; 0) {
try {
// List of places for refreshment favorite tourist cn id = &quot;pIdTurista&quot;
ArrayList&lt;Integer&gt; listaPreferiti = profiloTurista.ottieniPuntoDiRistoroPreferiti(pIdTurista);

// Convert ArrayList a simple array
BeanPuntoDiRistoro[] favorites = null;
favorites = new BeanPuntoDiRistoro[listaPreferiti.size()];
favorites = listaPreferiti.toArray(favorites);

int k = 0; // Cycle counter
for (Integer i: listaPreferiti) {
// Fill the array with the favorite bean of all cultural favorites from the tourist
favorites[k++] = puntoDiRistoro.ottieniPuntoDiRistoro(i);
}
}
catch (SQLException e) {
throw new RemoteException(MessaggiErrore.ERRORE_DBMS);
}
catch (Exception e) {
throw new RemoteException(MessaggiErrore.ERRORE_SCONOSCIUTO);
}
}
return null;
}
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_GestioneTuristaComune</id>
      <content>package unisa.gps.etour.control.GestioneUtentiRegistrati;

import java.rmi.RemoteException;
import java.rmi.server.UnicastRemoteObject;
import java.sql.SQLException;

import unisa.gps.etour.bean.BeanTurista;
import unisa.gps.etour.repository.DBTurista;
import unisa.gps.etour.repository.IDBTurista;
import unisa.gps.etour.util.MessaggiErrore;

/**
* Class that implements the common tasks for Operators and Tourist Agency
* Ie modificaTurista and ottieniTurista
*
* @Author Joseph Morelli
* @Version 0.1 2007 eTour Project - Copyright by SE @SA Lab DMI University
* Of Salerno
*/
public class GestioneTuristaComune extends UnicastRemoteObject implements
IGestioneTuristaComune {

protected IDBTurista turista;

// Constructor that richama turn the class constructor
// UnicastRemoteObject to connect via RMI
// Instantiate and connect to the database
public GestioneTuristaComune() throws RemoteException {
super();
// Connect to the Database
try {
turista = new DBTurista();
}
// Exception in the database connection
catch (Exception e) {
throw new RemoteException(MessaggiErrore.ERRORE_SCONOSCIUTO);
}
}

// Method that allows you to change the data of a tourist through its
// Data
public boolean modificaTurista(BeanTurista pProfiloTurista)
throws RemoteException {
// Check the validity of past data
if ((pProfiloTurista == null)
|| (!(pProfiloTurista instanceof BeanTurista)))
throw new RemoteException(MessaggiErrore.ERRORE_FORMATO_BEAN);
// Execution of the amendment
try {
// If the changes were made returns true
if (turista.modificaTurista(pProfiloTurista))
return true;
}
// Exception in operations on database
catch (SQLException e) {
// If the data layer sends an exception is throws the exception remote
System.out.println(&quot;Error in method modificaTurista&quot;
+ e.toString());
throw new RemoteException(MessaggiErrore.ERRORE_DBMS);
}
// Unexpected exception caused by other factors
catch (Exception ee) {
System.out.println(&quot;Error in method modificaTurista&quot;
+ ee.toString());
throw new RemoteException(MessaggiErrore.ERRORE_SCONOSCIUTO);
}
// If there were no exceptions but the changes are not
// Returns false were made
return false;
}

// Method to obtain the bean with data from the Tourist
// Identified by
// The parameter passed
public BeanTurista ottieniTurista(int pIdTurista) throws RemoteException {
// Check the validity identifier
if (pIdTurista &lt; 0)
throw new RemoteException(MessaggiErrore.ERRORE_DATI);
BeanTurista toReturn = null; // variable return
// Retrieve data
try {
// Are requested to return the bean layer on the tourist
// With id equal to pIdTurista
toReturn = turista.ottieniTurista(pIdTurista);
if (null == toReturn)
throw new RemoteException(MessaggiErrore.ERRORE_DBMS);
}
// Exception in database operations
catch (SQLException e) {
// If the data layer sends an exception is throws the exception remote
System.out.println(&quot;Error in method ottieniTurista&quot;
+ e.toString());
throw new RemoteException(MessaggiErrore.ERRORE_DBMS);
}
// Unexpected exceptions caused by other factors
catch (Exception ee) {
System.out.println(&quot;Error in method ottieniTurista&quot;
+ ee.toString());
throw new RemoteException(MessaggiErrore.ERRORE_SCONOSCIUTO);
}
// Return the result
return toReturn;
}
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_GestioneTuristiAgenzia</id>
      <content>package unisa.gps.etour.control.GestioneUtentiRegistrati;

import java.rmi.RemoteException;
import java.sql.SQLException;
import java.util.ArrayList;
import java.util.Iterator;
import unisa.gps.etour.bean.BeanTurista;
import unisa.gps.etour.bean.BeanVisitaBC;
import unisa.gps.etour.bean.BeanVisitaPR;
import unisa.gps.etour.repository.DBVisitaBC;
import unisa.gps.etour.repository.DBVisitaPR;
import unisa.gps.etour.repository.IDBVisitaBC;
import unisa.gps.etour.repository.IDBVisitaPR;
import unisa.gps.etour.util.MessaggiErrore;

/**
* Class that implements the interface for managing the side Tourists
* Agency and extends UnicastRemoteObject for communication in remote
* Provides basic methods for handling and additional methods for returning
* Tourists with special characteristics of
*
* @Author Joseph Morelli
* @Version 0.1 2007 eTour Project - Copyright by SE @SA Lab DMI University
* Of Salerno
*/
public class GestioneTuristiAgenzia extends GestioneTuristaComune implements
IGestioneTuristiAgenzia {

private IDBVisitaBC feedbackBC;
private IDBVisitaPR feedbackPR;

public GestioneTuristiAgenzia() throws RemoteException {
super();
try {
// Instantiate objects for database connections
feedbackBC = new DBVisitaBC();
feedbackPR = new DBVisitaPR();
}
// Exception on the database connection
catch (Exception e) {
throw new RemoteException(MessaggiErrore.ERRORE_SCONOSCIUTO);
}
}

// Method for obtaining all tourists alike present
// In the database
public ArrayList&lt;BeanTurista&gt; ottieniTuristi() throws RemoteException {
// Object that will contain the return value
ArrayList&lt;BeanTurista&gt; toReturn;
// Retrieve data
try {
// Invoke the method with empty string to get all Tourists
toReturn = turista.ottieniTuristi(&quot;&quot;);
if (null == toReturn)
throw new RemoteException(MessaggiErrore.ERRORE_DBMS);
}
// Exception in database operations
catch (SQLException e) {
// If the data layer is thrown an exception SQLException
// It throws RemoteException the remote exception
System.out.println(&quot;Error in method ottieniTuristi&quot; + e.toString());
throw new RemoteException(MessaggiErrore.ERRORE_DBMS);
}
// Unexpected exception caused by other factors
catch (Exception ee) {
System.out.println(&quot;Error in method ottieniTuristi&quot; + ee.toString());
throw new RemoteException(MessaggiErrore.ERRORE_SCONOSCIUTO);
}
// Return the result from the data layer ottenuro
if (null == toReturn)
throw new RemoteException(MessaggiErrore.ERRORE_FORMATO_BEAN);
return toReturn;
}

// Method that allows to obtain all the tourists who have an account
// Active or not
public ArrayList&lt;BeanTurista&gt; ottieniTuristi(boolean statoAccount)
throws RemoteException {
// ArrayList containing the results
ArrayList&lt;BeanTurista&gt; toReturn;
// Retrieve data
try {
// All tourists are taken to the state as a parameter
toReturn = turista.ottieniTuristi(statoAccount);
}
// Exception in implementing the operation on the database
catch (SQLException e) {
// If the data layer sends an exception is throws the exception remote
System.out.println(&quot;Error in method ottieniTuristi (boolean)&quot; + e.toString());
throw new RemoteException(MessaggiErrore.ERRORE_DBMS);
}
// Unexpected exceptions caused by other factors
catch (Exception ee) {
System.out.println(&quot;Error in method ottieniTuristi (boolean)&quot; + ee.toString());
throw new RemoteException(MessaggiErrore.ERRORE_SCONOSCIUTO);
}
// Check the data to return, so you do not return null values
if (null == toReturn)
throw new RemoteException(MessaggiErrore.ERRORE_FORMATO_BEAN);
return toReturn;
}

// Method that allows the activation of a tourist is not yet activated
public boolean attivaTurista(int pIdTurista) throws RemoteException {
// Check the validity of input data
if (pIdTurista &lt; 0)
throw new RemoteException(MessaggiErrore.ERRORE_DATI);
// Bean that contains the data of tourists to activate
BeanTurista toChange;
// Retrieve and edit data required
try {
// Get the data from the Database
toChange = turista.ottieniTurista(pIdTurista);
// Check that the tourist is not already activated
if (toChange.isAttiva())
throw new RemoteException(MessaggiErrore.ERRORE_DATI);
// It sets the value indicating the activation status to true
toChange.setAttiva(true);
// You try to change the database
if (turista.modificaTurista(toChange))
// If the edit operation is successful returns
// True
return true;
}
// Exception in the execution of database operations
catch (SQLException e) {
// If the data layer sends an exception is throws the exception remote
System.out.println(&quot;Error in method attivaTurista&quot; + e.toString());
throw new RemoteException(MessaggiErrore.ERRORE_DBMS);
}
// Unexpected exceptions caused by other factors
catch (Exception ee) {
System.out.println(&quot;Error in method attivaTurista&quot; + ee.toString());
throw new RemoteException(MessaggiErrore.ERRORE_SCONOSCIUTO);
}
// If no exceptions were thrown but the changes
// Not have been successful returns false
return false;
}

// Method that allows you to disable a tourist
public boolean disattivaTurista(int pIdTurista) throws RemoteException {
// Check the validity of data
if (pIdTurista &lt; 0)
throw new RemoteException(MessaggiErrore.ERRORE_DATI);
// bean that contains the data from the tourist
BeanTurista toChange;
// Disable
// Retrieve and edit data required
try {
// Get the data from the database
toChange = turista.ottieniTurista(pIdTurista);
// Check that the tourist is active
if (!toChange.isAttiva())
throw new RemoteException(MessaggiErrore.ERRORE_DATI);
// It sets the value indicating the activation status to false
toChange.setAttiva(false);
// You try to change the database
if (turista.modificaTurista(toChange))
// If the edit operation is successful returns
// True
return true;
}
// Exception in the execution of database operations
catch (SQLException e) {
// If the data layer sends an exception is throws the exception remote
System.out.println(&quot;Error in method disattivaTurista&quot; + e.toString());
throw new RemoteException(MessaggiErrore.ERRORE_DBMS);
}
// Unexpected exceptions caused by other factors
catch (Exception ee) {
System.out.println(&quot;Error in method disattivaTurista&quot; + ee.toString());
throw new RemoteException(MessaggiErrore.ERRORE_SCONOSCIUTO);
}
// If no exceptions were thrown but the changes
// Not have been successful returns false
return false;
}

// Method that erases a tourist from the Database
public boolean delete(int pIdTurista) throws RemoteException {
// Check the validity of data
if (pIdTurista &lt; 0)
throw new RemoteException(MessaggiErrore.ERRORE_DATI);
try {
// If the cancellation is successful it returns true
if (turista.cancellaTurista(pIdTurista))
return true;
} catch (SQLException e) {
// If the data layer sends an exception is throws the exception remote
System.out.println(&quot;Error in delete method&quot; + e.toString());
throw new RemoteException(MessaggiErrore.ERRORE_DBMS);
}
// Unexpected exception caused by other factors
catch (Exception ee) {
System.out.println(&quot;Error in delete method&quot; + ee.toString());
throw new RemoteException(MessaggiErrore.ERRORE_SCONOSCIUTO);
}
// Otherwise if you have not thrown exceptions, but the cancellation
// Not have been successful returns false
return false;
}

// Method that returns an ArrayList containing the feedback issued by
// Some for the Cultural Tourist
public ArrayList&lt;BeanVisitaBC&gt; ottieniFeedbackBC(int pIdTurista)
throws RemoteException {
// Check the validity of data
if (pIdTurista &lt; 0)
throw new RemoteException(MessaggiErrore.ERRORE_DATI);
// ArrayList return
ArrayList&lt;BeanVisitaBC&gt; toReturn;
try {
// Retrieve data from Database
toReturn = feedbackBC.ottieniListaVisitaBCTurista(pIdTurista);
} catch (SQLException e) {
// If the data layer sends an exception is throws the exception remote
System.out.println(&quot;Error in method ottieniFeedbackBC&quot; + e.toString());
throw new RemoteException(MessaggiErrore.ERRORE_DBMS);
}
// Unexpected exception caused by other factors
catch (Exception ee) {
System.out.println(&quot;Error in method ottieniFeedbackBC&quot; + ee.toString());
throw new RemoteException(MessaggiErrore.ERRORE_SCONOSCIUTO);
}
// Check the data back in order not to return null values
if (null == toReturn)
throw new RemoteException(MessaggiErrore.ERRORE_FORMATO_BEAN);
return toReturn;
}

// Method that returns an ArrayList containing the feedback issued by
// Some for the Cultural Tourist
public ArrayList&lt;BeanVisitaPR&gt; ottieniFeedbackPR(int pIdTurista)
throws RemoteException {
// Check the validity of data
if (pIdTurista &lt; 0)
throw new RemoteException(MessaggiErrore.ERRORE_DATI);
// variable return
ArrayList&lt;BeanVisitaPR&gt; toReturn;
try {
// Insert the result in toReturn
// Returned from the Data Layer
toReturn = feedbackPR.ottieniListaVisitaPRTurista(pIdTurista);
} catch (SQLException e) {
// If the data layer sends an exception is throws the exception remote
System.out.println(&quot;Error in method ottieniFeedbackPR&quot; + e.toString());
throw new RemoteException(MessaggiErrore.ERRORE_DBMS);
}
// Unexpected exceptions caused by other factors
catch (Exception ee) {
System.out.println(&quot;Error in method ottieniFeedbackPR&quot; + ee.toString());
throw new RemoteException(MessaggiErrore.ERRORE_SCONOSCIUTO);
}
// Check the array of return, so you do not return null values
if (null == toReturn)
throw new RemoteException(MessaggiErrore.ERRORE_FORMATO_BEAN);
return toReturn;
}
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_HelpManager</id>
      <content>package unisa.gps.etour.gui;

import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.io.*;
import java.util.HashMap;
import java.util.Scanner;
import java.util.StringTokenizer;
import java.net.URISyntaxException;
import javax.swing.JComponent;
import javax.swing.text.JTextComponent;

/**
* This class realizes the mechanism of sensitive help
* Context.
*
* @Version 0.2
* @Author Mario Gallo
*
* (c) 2007 eTour Project - Copyright by DMI SE @ SA Lab --
* University of Salerno
*/
public class HelpManager extends MouseAdapter {
private HashMap&lt;String, String&gt; dictionary;
private JTextComponent destination;
private String previousMessage;

/**
* &lt;p&gt;The constructor creates a new instance of the class for the
* Managing the online help files from contentente
* The guide itself and the component in which it appear.&lt;/p&gt;
*
* @param pPercorso String - the path of the help file.
* @param pComponent JTextComponent - the component in which to display
* Driving.
* @throws FileNotFoundException - if the help file is not specified
* Found.
*/
public HelpManager(String pPercorso, JTextComponent pComponent) throws FileNotFoundException {
dictionary = new HashMap&lt;String, String&gt;();
destination = pComponent;
File afil = null;
try {
afil = new File(getClass().getResource(pPercorso).toURI());
}
catch (URISyntaxException ex) {
ex.printStackTrace();
}
Scanner scan = new Scanner(new BufferedReader(new FileReader(afil)));
StringTokenizer tokenizer;
while (scan.hasNext()) {
tokenizer = new StringTokenizer(scan.nextLine(), &quot;##&quot;);
dictionary.put(tokenizer.nextToken(), tokenizer.nextToken());
}

scan.close();
}

/**
* This method handles the event when the pointer should
* Mouse enters the component.
*
* @param pMouseEnteredEvent MouseEvent - The event generated by the mouse.
*/
public void mouseEntered(MouseEvent pMouseEnteredEvent) {
previousMessage = destination.getText();
JComponent component = (JComponent) pMouseEnteredEvent.getComponent();
String help = dictionary.get(component.getName());
destination.setText(help);
destination.repaint();
}

/**
* This method handles the event when the pointer should
* Mouse goes out of a component.
*
* @param pMouseExitedEvent MouseEvent - The event generated by the mouse.
*/
public void mouseExited(MouseEvent pMouseExitedEvent) {
destination.setText(previousMessage);
destination.repaint();
}
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_IAutenticazione</id>
      <content>package unisa.gps.etour.control.GestioneUtentiRegistrati;

import java.rmi.Remote;
import java.rmi.RemoteException;

/**
* Interface relating to operations performed by the User login and logout
* Register
*
* @Author Joseph Penna
* @Version 0.1 2007 eTour Project - Copyright by SE @SA Lab University of DMI
* Salerno
*/
public interface IAutenticazione extends Remote
{

// Static constants that identify the type of users who
// True
public static final byte VISITORS = 0;
public static final byte OP_PUNTO_DI_RISTORO = 1;

/**
* Method to authenticate a registered user (Turista - Operator
* Refreshment)
*
* @param pUsername Username on a Registered User
* @param pPassword password for Registered User
* @param pTipologiaUtente type user is authenticated
* @return If the data are correct user ID logged in the event
* Otherwise -1
*/
public int login(String pUsername, String pPassword, byte pTipologiaUtente)
throws RemoteException;

}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_IDBBanner</id>
      <content>package unisa.gps.etour.repository;

import java.sql.SQLException;
import java.util.ArrayList;

import unisa.gps.etour.bean.BeanBanner;

/**
* Interface for managing the banner on the database
*
* @Author Mauro Miranda
* @Version 0.1 2007 eTour Project - Copyright by SE @SA Lab DMI University
* Of Salerno
*/

public interface IDBBanner
{
/**
* Add a banner in the database
*
* @param pBanner bean containing the information of the banner
* @throws SQLException
*/
public boolean inserisciBanner(BeanBanner pBanner) throws SQLException;

/**
* Modify the contents of the advertisement, and returns the contents before
* Edit
*
* @param pBanner Bean that contains the new information of the banner
* @return True if there 'was a modified false otherwise
* @throws SQLException
*/
public boolean modificaBanner(BeanBanner pBanner) throws SQLException;

/**
* Delete a banner from the database and returns
*
* @param pIdBanner ID BeanBanner
* @return True if and 'was deleted false otherwise
* @throws SQLException
*/
public boolean cancellaBanner(int pIdBanner) throws SQLException;

/**
* Returns a list of banners for a refreshment point, if the id of
* Refreshment and 'equal to -1 will' return the complete list
* Banners
*
* @param pIdPuntoDiRistoro Id of refreshment point from which to obtain the list
* Banner
* @return list of banners linked to Refreshment
* @throws SQLException
*/
public ArrayList&lt;BeanBanner&gt; ottieniBanner(int pIdPuntoDiRistoro)
throws SQLException;

/**
* Method which returns a banner given its id
*
* @param pIdBanner ID the banner to return
* @return Banner found in the database, null if there is' match
* @throws SQLException
*/
public BeanBanner ottieniBannerDaID(int pIdBanner) throws SQLException;
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_IDBBeneCulturale</id>
      <content>package unisa.gps.etour.repository;

import java.sql.SQLException;
import java.util.ArrayList;

import unisa.gps.etour.bean.BeanBeneCulturale;
import unisa.gps.etour.bean.BeanTag;
import unisa.gps.etour.util.Punto3D;

/**
* Interface for the management of cultural heritage database
*
* @Author Mauro Miranda
* @Version 0.1 2007 eTour Project - Copyright by SE @SA Lab DMI University
* Of Salerno
*/

public interface IDBBeneCulturale {
/**
* Add a cultural heritage, given input
*
* @param pBene Cultural Heritage for inclusion in database
* @throws SQLException
*/
public boolean inserisciBeneCulturale(BeanBeneCulturale pBene)
throws SQLException;

/**
* Modify the information in the cultural
*
* @param pBene contains the information to modify the database
* @throws SQLException
* @return True if there 'was a modified false otherwise
*/
public boolean modificaBeneCulturale(BeanBeneCulturale pBene)
throws SQLException;

/**
* Delete a cultural object from the database
*
* @param pIdBene ID cultural property to delete
* @throws SQLException
* @return True if and 'was deleted false otherwise
*/
public boolean cancellaBeneCulturale(int pIdBene) throws SQLException;

/**
* Returns the cultural object with id as input
*
* @param pid cultural property to be extracted from the database
* @throws SQLException
* @return cultural property obtained from the database
*/
public BeanBeneCulturale ottieniBeneCulturale(int pid) throws SQLException;

/**
* Research. Returns the list of cultural property in their name or
* Description given string as input, filtered according to tags and
* Maximum distance. The returned list contains the number of goods given as input.
* To browse the real list, which may contain more 'of
* Ten elements, you use the paramtro numPagina.
*
* @param pKeyword string that contains the keyword to search the
* Name or description of the cultural
* @param pTags list of tags used to filter the search. the
* Maximum number of tags to be included should not exceed five
* Units'. If you exceed this number the other tags
* Excess will be ignored.
* @param pNumPagina The page number you want to view. O for
* 1 page (the first 10 results), 1 for 2 page (s
* Results from 11 to 20) etc ...
* @param pPosizione position of the person who carried out the research
* @param pDistanzaMassima Maximum distance from the user to search for good
* @param pNumeroElementiPerPagina number of items to return per page
* @throws SQLException
* @return list contained ten cultural
*/
public ArrayList&lt;BeanBeneCulturale&gt; search(String pKeyword,
ArrayList&lt;BeanTag&gt; pTags, int pNumPagina, int pNumeroElementiPerPagina, Punto3D pPosizione,
double pDistanzaMassima) throws SQLException;

/**
* Advanced Search. Returns the list of cultural goods which have in
* Name or description given string as input, sorted according to
* Preferences of tourists and filtered according to the tag and the maximum distance. The
* Returned list contains the number of goods given as input. To scroll
* The actual list, which may contain multiple 'items, you
* Use paramtro numPagina.
*
* @param pIdTurista ID tourists who carried out the research
* @param pKeyword string that contains the keyword to search the
* Name or description of the cultural
* @param pTags list of tags used to filter the search. the
* Maximum number of tags to be included should not exceed five
* Units'. If you exceed this number the other tags
* Excess will be ignored.
* @param pNumPagina The page number you want to view. O for
* 1 page (the first 10 results), 1 for 2 page (s
* Results from 11 to 20) etc ...
* @param pPosizione position of the person who carried out the research
* @param pDistanzaMassima Maximum distance from the user to search for good
* @param pNumeroElementiPerPagina number of items to return per page
* @throws SQLException
* @return list contained ten cultural
*/
public ArrayList&lt;BeanBeneCulturale&gt; ricercaAvanzata(int pIdTurista,
String pKeyword, ArrayList&lt;BeanTag&gt; pTags, int pNumPagina, int pNumeroElementiPerPagina,
Punto3D pPosizione, double pDistanzaMassima) throws SQLException;

/**
* Method to get the number of elements to search.
*
* @param pKeyword string that contains the keyword to search the
* Name or description of the cultural
* @param pTags list of tags used to filter the search. the
* Maximum number of tags to be included should not exceed five
* Units'. If you exceed this number the other tags
* Excess will be ignored.
* @param pPosizione position of the person who carried out the research
* @param pDistanzaMassima Maximum distance from the user to search for good
* @throws SQLException
* @return number of pages.
*/
public int ottieniNumeroElementiRicerca(String pKeyword,
ArrayList&lt;BeanTag&gt; pTags, Punto3D pPosizione,
double pDistanzaMassima) throws SQLException;

/**
* Method to get the number of elements to search.
*
* @param pIdTurista identifier tourists who carried out the research
* @param pKeyword string that contains the keyword to search the
* Name or description of the cultural
* @param pTags list of tags used to filter the search. the
* Maximum number of tags to be included should not exceed five
* Units'. If you exceed this number the other tags
* Excess will be ignored.
* @param pPosizione position of the person who carried out the research
* @param pDistanzaMassima Maximum distance from the user to search for good
* @throws SQLException
* @return number of pages.
*/
public int ottieniNumeroElementiRicercaAvanzata(int pIdTurista,
String pKeyword, ArrayList&lt;BeanTag&gt; pTags, Punto3D pPosizione,
double pDistanzaMassima) throws SQLException;

/**
* Returns a list of all cultural
*
* @throws SQLException
* @return List of all cultural
*/
public ArrayList&lt;BeanBeneCulturale&gt; ottieniListaBC() throws SQLException;
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_IDBConvenzione</id>
      <content>package unisa.gps.etour.repository;

import java.sql.SQLException;
import java.util.ArrayList;

import unisa.gps.etour.bean.BeanConvenzione;
import unisa.gps.etour.bean.BeanPuntoDiRistoro;

/**
* Interface for managing the database Business
*
* @Author Joseph Martone
* @Version 0.1 2007 eTour Project - Copyright by SE @SA Lab DMI University
* Of Salerno
*/
public interface IDBConvenzione {

/**
* Add a convention in the database
*
* @param pConvenzione Convention by adding
* @throws SQLException
*/
public boolean inserisciConvenzione(BeanConvenzione pConvenzione)
throws SQLException;

/**
* Modify a convention in the database
*
* @param pConvenzione Convention data of the Convention to be updated
* @return True if there was a modified false otherwise
* @throws SQLException
*/
public boolean modificaConvenzione(BeanConvenzione pConvenzione)
throws SQLException;

/**
* Delete an agreement by the database
*
* @param pIdConvenzione ID of the Convention by removing
* @return True if been deleted false otherwise
* @throws SQLException
*/
public boolean cancellaConvenzione(int pIdConvenzione) throws SQLException;

/**
* Returns the historical conventions of a refreshment
*
* @param idPuntoDiRistoro point identification Refreshments
* @return List of conventions of Refreshment given as argument
* @throws SQLException
*/
public ArrayList&lt;BeanConvenzione&gt; ottieniStoricoConvenzione(
int idPuntoDiRistoro) throws SQLException;

/**
* Returns the Convention active a refreshment
*
* @param pIdPuntoDiRistoro point identification Refreshments
* @return Convention Turns
* @throws SQLException
*/
public BeanConvenzione ottieniConvezioneAttiva(int pIdPuntoDiRistoro)
throws SQLException;

/**
* Returns a list of all the PR that have a Convention active
*
* @return list of all the PR with the Convention active
* @throws SQLException
*/
public ArrayList&lt;BeanPuntoDiRistoro&gt; ottieniListaConvenzioneAttivaPR()
throws SQLException;

}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_IDBMenu</id>
      <content>package unisa.gps.etour.repository;

import java.sql.SQLException;
import java.util.ArrayList;

import unisa.gps.etour.bean.BeanMenu;

/**
* Interface for managing the menu in the database
*
* @Author Joseph Martone
* @Version 0.1 2007 eTour Project - Copyright by SE @SA Lab DMI University
* Of Salerno
*/
public interface IDBMenu
{
/**
* Adds a menu in the database
*
* @param pMenu menu to add
* @throws SQLException
*/
public boolean inserisciMenu(BeanMenu pMenu) throws SQLException;

/**
* Modify a menu in the database
*
* @param pMenu Contains the data to change
* @throws SQLException
* @return True if there 'was a modified false otherwise
*/
public boolean modificaMenu(BeanMenu pMenu) throws SQLException;

/**
* Delete a menu from database
*
* @param pIdMenu ID menu to delete
* @throws SQLException
* @return True if and 'was deleted false otherwise
*/
public boolean cancellaMenu(int pIdMenu) throws SQLException;

/**
* Returns the menu of the day of a refreshment
*
* @param pIdPuntoDiRistoro point identification Refreshments
* @param pGiorno Day of the week in which the menu
* Daily
* @throws SQLException
* @return Day menu de Refreshment
*/
public BeanMenu ottieniMenuDelGiorno(int pIdPuntoDiRistoro, String pGiorno)
throws SQLException;

/**
* Returns a list of the menu of a refreshment
*
* @param pIdPuntoDiRistoro point identification Refreshment
* @throws SQLException
* @return List of menus
*/
public ArrayList&lt;BeanMenu&gt; ottieniMenu(int pIdPuntoDiRistoro)
throws SQLException;
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_IDBNews</id>
      <content>package unisa.gps.etour.repository;

import java.sql.SQLException;
import java.util.ArrayList;

import unisa.gps.etour.bean.BeanNews;

/**
* Interface for the management of news in the Database
*
* @Author Mauro Miranda
* @Version 0.1 2007 eTour Project - Copyright by SE @ SA Lab DMI University
* Of Salerno
*/
public interface IDBNews
{
/**
* Add a news database
*
* @param Pnews News to add
* @throws SQLException
*/
public boolean inserisciNews(BeanNews Pnews) throws SQLException;

/**
* Modify a news database
*
* @param Pnews News to change with the new data
* @throws SQLException
* @return True if there 'was a modified false otherwise
*/
public boolean modificaNews(BeanNews Pnews) throws SQLException;

/**
* Delete a database from news
*
* @param pIdNews ID News to eliminate
* @throws SQLException
* @return True if and 'have been deleted false otherwise
*/
public boolean cancellaNews(int pIdNews) throws SQLException;

/**
* Returns the active news
*
* @throws SQLException
* @return list of active news
*/
public ArrayList&lt;BeanNews&gt; ottieniNews() throws SQLException;
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_IDBOperatoreAgenzia</id>
      <content>package unisa.gps.etour.repository;

import java.sql.SQLException;

import unisa.gps.etour.bean.BeanOperatoreAgenzia;

/**
* Interface for managing the database OperatoreAgenzia
*
* @Author Joseph Martone
* @Version 0.1 2007 eTour Project - Copyright by SE @SA Lab DMI University
* Of Salerno
*/
public interface IDBOperatoreAgenzia
{
/**
* Returns the data Operator Agency with ID equal to that given in
* Input
*
* @param pUsername Username dell'OperatoreAgenzia to find
* @return OperatoreAGenzia with id equal to the input, null if there is
* @throws SQLException
*/
public BeanOperatoreAgenzia ottieniOperatoreAgenzia(String pUsername) throws SQLException;

/**
* Returns the data Operator Agency with ID equal to that given in
* Input
*
* @param pUsername Username dell'OperatoreAgenzia to find
* @return OperatoreAGenzia with id equal to the input, null if there is
* @throws SQLException
*/
public boolean modificaPassword(BeanOperatoreAgenzia poa) throws SQLException;
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_IDBOperatorePuntoDiRistoro</id>
      <content>package unisa.gps.etour.repository;

import java.sql.SQLException;

import unisa.gps.etour.bean.BeanOperatorePuntoDiRistoro;

/**
* Interface for the operator to the point of comfort in the database
*
* @Author Joseph Martone
* @Version 0.1 2007 eTour Project - Copyright by SE @ SA Lab DMI University
* Of Salerno
*/
public interface IDBOperatorePuntoDiRistoro
{
/**
* Adds an operator refreshment
*
* @param popera Additional operating
* @throws SQLException
*/
public boolean inserisciOperatorePuntoDiRistoro(
BeanOperatorePuntoDiRistoro popera) throws SQLException;

/**
* Modify an operator in the database
*
* @param popera New data Operator
* @throws SQLException
* @return True if there 'was a modified false otherwise
*/
public boolean modificaOperatorePuntoDiRistoro(
BeanOperatorePuntoDiRistoro popera) throws SQLException;

/**
* Delete an operator
*
* @param pIdOperatore Operator ID to delete
* @throws SQLException
* @return True if and 'was deleted false otherwise
*/
public boolean cancellaOperatorePuntoDiRistoro(int pIdOperatore)
throws SQLException;

/**
* Returns data operator
*
* @param pIdOperatore Operation ID
* @throws SQLException
* @return Operator refreshment
*/
public BeanOperatorePuntoDiRistoro ottieniOperatorePuntoDiRistoro(
int pIdOperatore) throws SQLException;
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_IDBPiatto</id>
      <content>package unisa.gps.etour.repository;

import java.sql.SQLException;
import java.util.ArrayList;

import unisa.gps.etour.bean.BeanPiatto;

/**
* Interface for the management of food in the database
*
* @Author Joseph Martone
* @Version 0.1 2007 eTour Project - Copyright by SE @ SA Lab DMI University
* Of Salerno
*/
public interface IDBPiatto
{
/**
* Add a dish
*
* @param pPiatti plate add
*/
public boolean inserisciPiatto(BeanPiatto pPiatto) throws SQLException;

/**
* Modify the data in a flat in the database
*
* @param pPiatti data plate to be inserted in database
* @return True if there 'was a modified false otherwise
*/
public boolean modificaPiatto(BeanPiatto pPiatto) throws SQLException;

/**
* Delete a dish from the database
*
* @param pIdPiatto ID plate eliminre
* @throws SQLException
* @return True if and 'was deleted false otherwise
*/
public boolean cancellaPiatto(int pIdPiatto) throws SQLException;

/**
* Returns a list of dishes on a menu
*
* @param pIdMenu ID menu
* @throws SQLException
* @return list of dishes in the menu
*/
public ArrayList&lt;BeanPiatto&gt; ottieniPiatto(int pIdMenu) throws SQLException;
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_IDBPreferenzeDiRicerca</id>
      <content>package unisa.gps.etour.repository;

import java.sql.SQLException;
import java.util.ArrayList;

import unisa.gps.etour.bean.BeanPreferenzaDiRicerca;

/**
* Interface for managing search preferences in database
*
* @Author Joseph Martone
* @Version 0.1 2007 eTour Project - Copyright by SE @ SA Lab DMI University
* Of Salerno
*/
public interface IDBPreferenzeDiRicerca
{
/**
* Add a preference of Search
*
* @param pPreferenza Search Preferences
* @throws SQLException
*/
public boolean inserisciPreferenzaDiRicerca(
BeanPreferenzaDiRicerca pPreferenza) throws SQLException;

/**
* Delete a preference for research
*
* @param pPreferenza preference to eliminate
* @throws SQLException
* @return True if and 'have been deleted false otherwise
*/
public boolean cancellaPreferenzaDiRicerca(int pIdPreferenza)
throws SQLException;

/**
* Returns the list of preferences to find a tourist
*
* @param pIdTurista Id tourists
* @throws SQLException
* @return List Search Preferences
*/
public ArrayList&lt;BeanPreferenzaDiRicerca&gt; ottieniPreferenzeDiRicercaDelTurista(
int pIdTurista) throws SQLException;

/**
* Returns the list of preferences for research of a cultural
*
* @param pIdBeneCulturale ID of the cultural
* @throws SQLException
* @return list search preferences.
*/
public ArrayList&lt;BeanPreferenzaDiRicerca&gt; ottieniPreferenzeDiRicercaDelBC(
int pIdBeneCulturale) throws SQLException;

/**
* Returns the list of preferences to find a resting spot
*
* @param pIdPuntoDiRistoro identifier a refreshment
* @throws SQLException
* @return list search preferences.
*/
public ArrayList&lt;BeanPreferenzaDiRicerca&gt; ottieniPreferenzeDiRicercaDelPR(
int pIdPuntoDiRistoro) throws SQLException;

/**
* Add a preference for a cultural
*
* @param pIdBeneCulturale ID of the cultural
* @param pIdPreferenzaDiRicerca ID PreferenzaDiRicerca
* @throws SQLException
* @param pPreferenza Search Preferences
*/
public boolean inserisciPreferenzaDiRicercaDelBC(int pIdBeneCulturale,
int pIdPreferenzaDiRicerca) throws SQLException;

/**
* Add a search preference to a tourist
*
* @param pIdTurista Id tourists
* @param pIdPreferenzaDiRicerca ID PreferenzaDiRicerca
* @throws SQLException
* @param pPreferenza Search Preferences
*/
public boolean inserisciPreferenzaDiRicercaDelTurista(int pIdTurista,
int pIdPreferenzaDiRicerca) throws SQLException;

/**
* Add a preference research to a refreshment
*
* @param pIdPuntoDiRistoro point identification Refreshments
* @param pIdPreferenzaDiRicerca ID PreferenzaDiRicerca
* @throws SQLException
* @param pPreferenza Search Preferences
*/
public boolean inserisciPreferenzaDiRicercaDelPR(int pIdPuntoDiRistoro,
int pIdPreferenzaDiRicerca) throws SQLException;

/**
* Deletes a preference to find a Tourist
*
* @param pIdTurista Id tourists
* @param pIdPreferenza Search Preferences
* @throws SQLException
* @return True if and 'have been deleted false otherwise
*/
public boolean cancellaPreferenzaDiRicercaTurista(int pIdTurista,
int pIdPreferenza) throws SQLException;

/**
* Deletes a preference for research of a cultural
*
* @param pIdPreferenzaDiRicerca Search Preferences
* @param pIdBeneCulturale ID of the cultural
* @throws SQLException
* @return True if and 'have been deleted false otherwise
*/
public boolean cancellaPreferenzaDiRicercaBC(int pIdBeneCulturale,
int pIdPreferenzaDiRicerca) throws SQLException;

/**
* Deletes a preference to find a resting spot
*
* @param pIdPreferenza Search Preferences
* @param pIdPuntoDiistoro point identification Refreshments
* @throws SQLException
* @return True if and 'have been deleted false otherwise
*/
public boolean cancellaPreferenzaDiRicercaPR(int pIdPuntoDiistoro,
int pIdPreferenza) throws SQLException;

/**
* Returns a list of all search preferences in the DB
*
* @throws SQLException
* @return List of search preferences in the DB
*/
public ArrayList&lt;BeanPreferenzaDiRicerca&gt; ottieniPreferenzeDiRicerca()
throws SQLException;
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_IDBPreferenzeGeneriche</id>
      <content>package unisa.gps.etour.repository;

import java.sql.SQLException;

import unisa.gps.etour.bean.BeanPreferenzeGeneriche;

/**
* Interface for handling general preferences in database
*
* @Author Mauro Miranda
* @Version 0.1 2007 eTour Project - Copyright by SE @SA Lab DMI University
* Of Salerno
*/
public interface IDBPreferenzeGeneriche
{
/**
* Add a preference General
*
* @param pPreferenza preference to be added
* @throws SQLException
*/
public boolean inserisciPreferenzaGenenerica(
BeanPreferenzeGeneriche pPreferenza) throws SQLException;

/**
* Edit a general preference
*
* @param pPreferenza preference to change
* @throws SQLException
* @return True if and 'been changed otherwise false
*/
public boolean modificaPreferenzaGenerica(
BeanPreferenzeGeneriche pPreferenza) throws SQLException;

/**
* Delete a general preference
*
* @param pIdPreferenza ID preference to delete
* @throws SQLException
* @return True if and 'have been deleted false otherwise
*/
public boolean cancellaPreferenzaGenerica(int pIdPreferenza)
throws SQLException;

/**
* Returns the generic preference for tourists
*
* @param pIdTurista Id tourists
* @throws SQLException
* @return generic preference
*/
public BeanPreferenzeGeneriche ottieniPreferenzaGenerica(int pIdTurista)
throws SQLException;
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_IDBPuntoDiRistoro</id>
      <content>package unisa.gps.etour.repository;

import java.sql.SQLException;
import java.util.ArrayList;

import unisa.gps.etour.bean.BeanPuntoDiRistoro;
import unisa.gps.etour.bean.BeanTag;
import unisa.gps.etour.util.Punto3D;

/**
* Interface for management of eateries in the database
*
* @Author Joseph Martone
* @Version 0.1 2007 eTour Project - Copyright by SE @SA Lab DMI University
* Of Salerno
*/
public interface IDBPuntoDiRistoro
{
/**
* Add a refreshment
*
* @param pPuntoDiRistoro Refreshment to add
* @throws SQLException
*/
public boolean inserisciPuntoDiRistoro(BeanPuntoDiRistoro pPuntoDiRistoro)
throws SQLException;

/**
* Modify a refreshment
*
* @param pPuntoDiRistoro Refreshment to edit
* @throws SQLException
* @return True if and 'been changed otherwise false
*/
public boolean modificaPuntoDiRistoro(BeanPuntoDiRistoro pPuntoDiRistoro)
throws SQLException;

/**
* Delete a refreshment
*
* @param pIdPuntoDiRistoro ID Refreshment to eliminate
* @throws SQLException
* @return True if and 'have been deleted false otherwise
*/
public boolean cancellaPuntoDiRistoro(int pIdPuntoDiRistoro)
throws SQLException;

/**
* Returns data from a point of comfort with the ID given as argument
*
* @param pid point identification Refreshments
* @throws SQLException
* @return Refreshment
*/
public BeanPuntoDiRistoro ottieniPuntoDiRistoro(int pid)
throws SQLException;

/**
* Advanced Search. Returns the list of eateries that have in
* Name or description given string as input, sorted according to
* Preferences of tourists, the tags and filtered according to the distance
* Max. The list returned contains only the number of catering outlets input data.
* To scroll the real list, which may contain multiple 'items, you
* Use paramtro numPagina.
*
* @param pIdTurista Id tourists who carried out the research
* @param pKeyword string that contains the keyword to search the
* Name or description of refreshment
* @param pTags list of tags used to filter the search. the
* Maximum number of tags to be included should not exceed five
* Units'. If you exceed this number the other tags
* Excess will be ignored.
* @param pNumeroPagina The page number you want to view. O
* The 1 page (the first 10 results), 1 for 2 page (s
* Results from 11 to 20) etc ... *
* @param pPosizione position of the person who carried out the research
* @param pNumeroElementiPerPagina int Number of elements to return
* @param pDistanzaMassima Maximum distance from the user to refreshment
* To seek
* @throws SQLException
* @return list containing ten points Refreshments
*/
public ArrayList&lt;BeanPuntoDiRistoro&gt; ricercaAvanzata(int pIdTurista,
String pKeyword, ArrayList&lt;BeanTag&gt; pTags, int pNumeroPagina, int pNumeroElementiPerPagina,
Punto3D pPosizione, double pDistanzaMassima) throws SQLException;

/**
* Method to get the number of elements to search.
*
* @see ricercaAvanzata()
* @param pIdTurista Id tourists who carried out the research
* @param pKeyword string that contains the keyword to search the
* Name or description of refreshment
* @param pTags list of tags used to filter the search. the
* Maximum number of tags to be included should not exceed five
* Units'. If you exceed this number the other tags
* Excess will be ignored. *
* @param pPosizione position of the person who carried out the research
* @param pDistanzaMassima Maximum distance from the user to refreshment
* To seek
* @throws SQLException
* @return number of pages.
*/
public int ottieniNumeroElementiRicercaAvanzata(int pIdTurista,
String pKeyword, ArrayList&lt;BeanTag&gt; pTags, Punto3D pPosizione,
double pDistanzaMassima) throws SQLException;

/**
* Research. Returns the list of eateries that have the name or
* Description given string as input, filtered and tags
* According to the maximum distance. The returned list contains the number of
* Points Refreshments input data. To scroll the real list, which
* May contain more 'items, you use the paramtro
* NumPagina.
*
* @param pKeyword string that contains the keyword to search the
* Name or description of refreshment
* @param pTags list of tags used to filter the search. the
* Maximum number of tags to be included should not exceed five
* Units'. If you exceed this number the other tags
* Excess will be ignored.
* @param pNumeroPagina The page number you want to view. O
* The 1 page (the first 10 results), 1 for 2 page (s
* Results from 11 to 20) etc ... *
* @param pPosizione position of the person who carried out the research
* @param pDistanzaMassima Maximum distance from the user to refreshment
* @param pNumeroElementiPerPagina int Number of elements to return
* @throws SQLException
* @return list containing ten points Refreshments
*/
public ArrayList&lt;BeanPuntoDiRistoro&gt; search(String pKeyword,
ArrayList&lt;BeanTag&gt; pTags, int pNumeroPagina, int pNumeroElementiPerPagina, Punto3D pPosizione,
double pDistanzaMassima) throws SQLException;

/**
* Method to get you the elements for an advanced search.
*
* @see search()
* @param pUsernameTurista username tourists who carried out the research
* @param pKeyword string that contains the keyword to search the
* Name or description of refreshment
* @param pTags list of tags used to filter the search. The
* Maximum number of tags to be included should not exceed five
* Units'. If you exceed this number the other tags
* Excess will be ignored.
* @param pPosizione position of the person who carried out the research
* @param pDistanzaMassima Maximum distance from the user to refreshment
* To seek
* @throws SQLException
* @return number of pages.
*/
public int ottieniNumeroElementiRicerca(String pKeyword,
ArrayList&lt;BeanTag&gt; pTags, Punto3D pPosizione,
double pDistanzaMassima) throws SQLException;

/**
* Returns a list of all the refreshment
*
* @throws SQLException
* @return list of all the refreshment
*/
public ArrayList&lt;BeanPuntoDiRistoro&gt; ottieniListaPR() throws SQLException;
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_IDBTag</id>
      <content>package unisa.gps.etour.repository;

import java.sql.SQLException;
import java.util.ArrayList;

import unisa.gps.etour.bean.BeanTag;

/**
* Interface for managing the database Tag
*
* @Author Mauro Miranda
* @Version 0.1 2007 eTour Project - Copyright by SE @SA Lab DMI University
* Of Salerno
*/
public interface IDBTag
{
/**
* Add a tag
*
* @param ptagi Tag to add
* @throws SQLException
*/
public boolean inserisciTag(BeanTag ptagi) throws SQLException;

/**
* Modify the data in a tag
*
* @param ptagi Tag to modify
* @throws SQLException
* @return True if and 'been changed otherwise false
*/
public boolean modificaTag(BeanTag ptagi) throws SQLException;

/**
* Delete a tag from the database
*
* @param pIdTag ID Tag to be deleted
* @throws SQLException
* @return True if and 'was deleted false otherwise
*/
public boolean cancellaTag(int pIdTag) throws SQLException;

/**
* Returns the list of tags in the database
*
* @throws SQLException
* @return List containing the tags
*/
public ArrayList&lt;BeanTag&gt; ottieniListaTag() throws SQLException;

/**
* Returns a single tag
*
* @param pId ID tag
* @throws SQLException
* @return Tags
*/
public BeanTag ottieniTag(int pid) throws SQLException;

/**
* Tag with immovable cultural
*
* @param pIdBeneCulturale ID of Cultural Heritage
* @param pIdTag ID tag
* @throws SQLException
*/
public boolean aggiungeTagBeneCulturale(int pIdBeneCulturale, int pIdTag)
throws SQLException;

/**
* Tag to a refreshment
*
* @param pIdPuntoDiRistoro point identification Refreshments
* @param pIdTag ID tag
* @throws SQLException
*/
public boolean aggiungeTagPuntoDiRistoro(int pIdPuntoDiRistoro, int pIdTag)
throws SQLException;

/**
* Returns the list of tags of a cultural
*
* @param pIdBeneCulturale ID of Cultural Heritage
* @throws SQLException
* @return list of tags
*/
public ArrayList&lt;BeanTag&gt; ottieniTagBeneCulturale(int pIdBeneCulturale)
throws SQLException;

/**
* Returns a list of tags of a refreshment
*
* @param pIdPuntoDiRistoro point identification Refreshments
* @throws SQLException
* @return list of tags
*/
public ArrayList&lt;BeanTag&gt; ottieniTagPuntoDiRistoro(int pIdPuntoDiRistoro)
throws SQLException;

/**
* Delete a tag to a cultural
*
* @param pIdBeneCulturale ID of Cultural Heritage
* @param pIdTag ID tag
* @throws SQLException
* @return True if and 'was deleted false otherwise
*/
public boolean cancellaTagBeneCulturale(int pIdBeneCulturale, int pIdTag)
throws SQLException;

/**
* Delete a tag to a refreshment
*
* @param pIdPuntoDiRistoro ID
* @param pIdTag ID tag
* @throws SQLException
* @return True if and 'was deleted false otherwise
*/
public boolean cancellaTagPuntoDiRistoro(int pIdPuntoDiRistoro, int pIdTag)
throws SQLException;
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_IDBTurista</id>
      <content>package unisa.gps.etour.repository;

import java.sql.SQLException;
import java.util.ArrayList;

import unisa.gps.etour.bean.BeanBeneCulturale;
import unisa.gps.etour.bean.BeanTurista;

/**
* Interface for the management of tourists in the database
*
* @Author Mauro Miranda
* @Version 0.1 2007 eTour Project - Copyright by SE @ SA Lab DMI University
* Of Salerno
*/
public interface IDBTurista
{
/**
* Add a tourist
*
* @param pTurista Tourist to add
* @throws SQLException
*/
public boolean inserisciTurista(BeanTurista pTurista) throws SQLException;

/**
* Modify a tourist
*
* @param pTurista Tourist to change
* @throws SQLException
* @return True if and 'been changed otherwise false
*/
public boolean modificaTurista(BeanTurista pTurista) throws SQLException;

/**
* Delete a tourist from the database
*
* @param pIdTurista Identificatie Tourist delete
* @throws SQLException
* @return True if and 'been changed otherwise false
*/
public boolean delete(int pIdTurista) throws SQLException;

/**
* Returns the data of the Tourist
*
* @param pUsername Username tourists
* @throws SQLException
* @return Information about tourist
*/
public BeanTurista ottieniTurista(String pUsername) throws SQLException;

/**
* Attach a cultural tourists preferred
*
* @param pIdTurista ID tourists
* @param pIdBeneCulturale ID of the cultural
* @throws SQLException
*/
public boolean inserisciBeneCulturalePreferito(int pIdTurista,
int pIdBeneCulturale) throws SQLException;

/**
* Attach a point of catering to the tourist favorite
*
* @param pIdTurista ID tourists
* @param pIdPuntoDiRistoro ID of the cultural
* @throws SQLException
*/
public boolean inserisciPuntoDiRistoroPreferito(int pIdTurista,
int pIdPuntoDiRistoro) throws SQLException;

/**
* Delete a cultural favorite
*
* @param pIdTurista ID tourists
* @param pIdBeneCulturale ID of the cultural
* @throws SQLException
* @return True if and 'been changed otherwise false
*/
public boolean cancellaBeneCulturalePreferito(int pIdTurista,
int pIdBeneCulturale) throws SQLException;

/**
* Delete a favorite resting spot
*
* @param pIdTurista ID tourists
* @param pIdPuntoDiRistoro ID of the cultural
* @throws SQLException
* @return True if and 'was deleted false otherwise
*/
public boolean cancellaPuntoDiRistoroPreferito(int pIdTurista,
int pIdPuntoDiRistoro) throws SQLException;

/**
* Returns an ArrayList of tourists who have a username like that
* Given as argument
*
* @param pUsernameTurista Usrername tourists to search
* @throws SQLException
* @return data for Tourists
*/
public ArrayList&lt;BeanTurista&gt; ottieniTuristi(String pUsernameTurista)
throws SQLException;

/**
* Returns the list of tourists turned on or off
*
* @param condition True select active tourists False those tourists turned off
* @return data for Tourists
* @throws SQLException
*/
public ArrayList&lt;BeanTurista&gt; ottieniTuristi(boolean condition)
throws SQLException;

/**
* Returns the data of the tourist with ID equal to that given in
* Input
*
* @param pIdTurista ID tourists to find
* @return Tourists with id equal to the input, null if there is
* @throws SQLException
*/
public BeanTurista ottieniTurista(int pIdTurista) throws SQLException;

/**
* Returns the list of cultural favorites from a particular
* Tourist
*
* @param pIdTurista ID tourists to find
* @return List of Cultural Heritage Favorites
* @throws SQLException
*/
public ArrayList&lt;Integer&gt; ottieniBeniCulturaliPreferiti(int pIdTurista)
throws SQLException;

/**
* Returns a list of favorite resting spot by a particular
* Tourist
*
* @param pIdTurista ID tourists to find
* @return List of Refreshment Favorites
* @throws SQLException
*/
public ArrayList&lt;Integer&gt; ottieniPuntoDiRistoroPreferiti(int pIdTurista)
throws SQLException;
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_IDBVisitaBC</id>
      <content>package unisa.gps.etour.repository;

import java.sql.SQLException;
import java.util.ArrayList;

import unisa.gps.etour.bean.BeanVisitaBC;

/**
* Interface for handling feedback on a given asset
* Cultural
*
* @Author Joseph Martone
* @Version 0.1 2007 eTour Project - Copyright by SE @ SA Lab DMI University
* Of Salerno
*/
public interface IDBVisitaBC {

/**
* Inserts a visit
*
* @param PVIS Visit to insert
* @throws SQLException
*/
public boolean inserisciVisitaBC(BeanVisitaBC PVIS) throws SQLException;

/**
* Modify a visit
*
* @param PVIS Visit to edit
* @throws SQLException
* @return True if and 'been changed otherwise false
*/
public boolean modificaVisitaBC(BeanVisitaBC PVIS) throws SQLException;

/**
* Extract the list of visits to a cultural
*
* @param pIdBeneCulturale ID of the cultural
* @throws SQLException
* @return list of visits of the cultural
*/
public ArrayList&lt;BeanVisitaBC&gt; ottieniListaVisitaBC(int pIdBeneCulturale)
throws SQLException;

/**
* Extract the list of cultural visited by a tourist
*
* @param pIdTurista ID tourists
* @throws SQLException
* @return ArrayList of all feedback issued by a tourist for a
* Specified cultural
*/
public ArrayList&lt;BeanVisitaBC&gt; ottieniListaVisitaBCTurista(int pIdTurista)
throws SQLException;

/**
* Extract a visit by a tourist to a cultural
*
* @param pIdBeneCulturale ID of the cultural
* @param pIdTurista ID tourists
* @throws SQLException
* @return visit
*/
public BeanVisitaBC ottieniVisitaBC(int pIdBeneCulturale, int pIdTurista)
throws SQLException;
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_IDBVisitaPR</id>
      <content>package unisa.gps.etour.repository;

import java.sql.SQLException;
import java.util.ArrayList;

import unisa.gps.etour.bean.BeanVisitaPR;

/**
* Interface for managing feedback related to a specific point
* Refreshments
*
* @Author Joseph Martone
* @Version 0.1 2007 eTour Project - Copyright by SE @SA Lab DMI University
* Of Salerno
*/
public interface IDBVisitaPR
{

/**
* Add a visit to a refreshment
*
* @param PVIS visit to add
* @throws SQLException
*/
public boolean inserisciVisitaPR(BeanVisitaPR PVIS) throws SQLException;

/**
* Modify a visit
*
* @param PVIS Visit to edit
* @throws SQLException
* @return True if and 'been changed otherwise false
*/
public boolean modificaVisitaPR(BeanVisitaPR PVIS) throws SQLException;

/**
* Extract the list of visits to a refreshment
*
* @param pIdPuntoDiRistoro point identification Refreshments
* @throws SQLException
* @return List of visits
*/
public ArrayList&lt;BeanVisitaPR&gt; ottieniListaVisitaPR(int pIdPuntoDiRistoro)
throws SQLException;

/**
* Extract a visit by a tourist at a refreshment
*
* @param pIdPuntoDiRistoro point identification Refreshments
* @param pIdTurista ID tourists
* @throws SQLException
* @return visit
*/
public BeanVisitaPR ottieniVisitaPR(int pIdPuntoDiRistoro, int pIdTurista)
throws SQLException;

/**
* Extract the list of visits of a tourist
*
* @param pIdTurista ID tourists
* @return List of visits
* @throws SQLException
*/
public ArrayList&lt;BeanVisitaPR&gt; ottieniListaVisitaPRTurista(int pIdTurista)
throws SQLException;

}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_IGestioneAdvertisement</id>
      <content>package unisa.gps.etour.control.GestioneAdvertisement;

import java.rmi.Remote;
import java.rmi.RemoteException;
import java.util.HashMap;

import javax.swing.ImageIcon;

import unisa.gps.etour.bean.BeanBanner;

/**
* Interface General Manager of Banner and news.
*
* @Author Fabio Palladino
* @Version 0.1
*
* 2007 eTour Project - Copyright by SE @SA Lab DMI University of Salerno
*/
public interface IGestioneAdvertisement extends Remote 
{
/**
* Inserts a new banner.
*
* @param pBanner Bean contains the data of the banner
* @throws RemoteException
*/
public boolean inserisciBanner(int pIdPuntoDiRistoro, ImageIcon pImmagineBanner)
throws RemoteException;

/**
* Delete a banner from the system.
*
* @param pBannerID ID banner to be deleted.
* @Return true if the operation is successful false otherwise.
* @throws RemoteException
*/
public boolean cancellaBanner(int pBannerID) throws RemoteException;

/**
* Modify the data of the banner or the image associated.
*
* @param pBanner Bean contains the data of the banner.
* @Return true if the operation is successful, false otherwise.
* @throws RemoteException
*/
public boolean modificaBanner(int pBannerID, ImageIcon pImmagine)
throws RemoteException;

/**
* Returns a list of Banner of a particular point of comfort.
*
* @param pPuntoDiRistoroID Id of refreshment owner of banner
* @Return ArrayList containing the list of banner refreshment
* @throws RemoteException
*/
public HashMap&lt;BeanBanner, ImageIcon&gt; ottieniBannersDaID(int pIdPuntoDiRistoro)
throws RemoteException;
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_IGestioneAdvertisementAgenzia</id>
      <content>/**
* Interface that provides management services dell'advertisement
* Operator agency.
*
* @Author author
* @Version 0.1
*
* - 2007 eTour Project - Copyright by DMI SE @ SA Lab - University of Salerno
*/
package com.trapan.spg.control.GestioneAdvertisement;

import java.rmi.RemoteException;
import java.util.ArrayList;

import com.trapan.spg.bean.BeanNews;

public interface IGestioneAdvetisementAgenzia extends IGestioneAdvertisement
{
/**
* Method that inserts a new news system.
*
* @param Pnews Bean containing data news
* @throws RemoteException
*/
public boolean inserisciNews(BeanNews Pnews) throws RemoteException;

/**
* Method which removes from the news system.
*
* @param pNewsID ID news be erased.
* @throws RemoteException
*/
public boolean cancellaNews(int pNewsID) throws RemoteException;

/**
* Method amending the text of a news.
*
* @param Pnews Bean containing data news
* @throws RemoteException
*/
public boolean modificaNews(BeanNews Pnews) throws RemoteException;

/**
* Returns the list of active news.
*
* @return ArrayList of ArrayList News
* @throws RemoteException
*/
public ArrayList&lt;BeanNews&gt; ottieniAllNews() throws RemoteException;
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_IGestioneAdvertisementPuntoDiRistoro</id>
      <content>/**
* Interface that provides management services dell'advertisement
* Operator eating place.
*
* @author Fabio Palladino
* @version 0.1
*
* 2007 eTour Project - Copyright by SE@SA Lab DMI University of Salerno
*/
package unisa.gps.etour.control.GestioneAdvertisement;

public interface IGestioneAdvertisementPuntoDiRistoro extends
IGestioneAdvertisement {
// Empty interface
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_IGestioneBeniCulturaliAgenzia</id>
      <content>package unisa.gps.etour.control.GestioneBeniCulturali;

import java.rmi.RemoteException;
import java.util.ArrayList;
import unisa.gps.etour.bean.BeanBeneCulturale;
import unisa.gps.etour.bean.BeanVisitaBC;

/**
* Interface for operations peculiar cultural heritage by
* Operator Agency.
*
* @Author Michelangelo De Simone
* @Version 0.1 (c) 2007 eTour Project - Copyright by DMI SE @ SA Lab --
* University of Salerno
*/
public interface IGestioneBeniCulturaliAgenzia extends IGestioneBeniCulturaliComune {
/**
* Method for the insertion of a new cultural
*
* @param pBeneCulturale The raw bean to be included in the database
* @return boolean The result of the operation; true if was successful, false otherwise
* @throws RemoteException Exception flow
*/
public boolean inserisciBeneCulturale(BeanBeneCulturale pBeneCulturale) throws RemoteException;

/**
* Method for the cancellation of a cultural object by id
*
* @param pBeneCulturaleID Id the bean to be deleted
* @return boolean The result of the operation; true if was successful, false otherwise
* @throws RemoteException Exception flow
*/
public boolean cancellaBeneCulturale(int pBeneCulturaleID) throws RemoteException;

/**
* Method for the return of all cultural property in the
* Database
*
* @return ArrayList all the beans in the database
* @throws RemoteException Exception flow
*/
public ArrayList&lt;BeanBeneCulturale&gt; ottieniBeniCulturali() throws RemoteException;

/**
* Method for updating (or change) the data of a cultural
*
* @param pBeneCulturale The bean with the new information of the cultural
* @return boolean The result of the operation; true if was successful, false otherwise
* @throws RemoteException Exception flow
*/
public boolean modificaBeneCulturale(BeanBeneCulturale pBeneCulturale) throws RemoteException;

/**
* Method for setting a tag to a certain cultural
*
* @param pBeneCulturaleID The identifier of the cultural object to which to add a tag
* @param pTagID The ID tag to add to the cultural indicated
* @return boolean The result of the operation; true if was successful, false otherwise
* @throws RemoteException Exception flow
*/
public boolean aggiungiTagBeneCulturale(int pBeneCulturaleID, int pTagID) throws RemoteException;

/**
* Method for removing a tag from a certain cultural
* To ensure that 'the operation is successful it is necessary that the cultural property has
* Actually set the specified tag
*
* @param pBeneCulturaleID The identifier of the cultural object from which to remove the tag
* @param pTagID The ID tag to be removed from the cultural indicated
* @return boolean The result of the operation; true if was successful, false otherwise
* @throws RemoteException Exception flow
*/
public boolean rimuoviTagBeneCulturale(int pBeneCulturaleID, int pTagID) throws RemoteException;
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_IGestioneBeniCulturaliComune</id>
      <content>package unisa.gps.etour.control.GestioneBeniCulturali;

import java.rmi.Remote;
import java.rmi.RemoteException;
import java.util.ArrayList;
import java.util.HashMap;
import unisa.gps.etour.bean.BeanBeneCulturale;
import unisa.gps.etour.bean.BeanTag;
import unisa.gps.etour.bean.BeanVisitaBC;

/**
* Interface for operations common to users and operators on Agency
* Beniculturali
*
* @Author Michelangelo De Simone
* @Version 0.1
*
* (c) 2007 eTour Project - Copyright by DMI SE @ SA Lab - University of Salerno
*/
public interface IGestioneBeniCulturaliComune extends Remote {

/**
* Method to return a particular Cultural Heritage
*
* @param pBeneCulturaleID The identifier of the cultural property to be returned
* @return BeanBeneCulturale Contains data required of Cultural Heritage
* @throws RemoteException Exception flow
*/
public BeanBeneCulturale ottieniBeneCulturale(int pBeneCulturaleID) throws RemoteException;

/**
* Returns the list of tags of a cultural
*
* @param pBeneCulturaleID ID of Cultural Heritage
* @return ArrayList&lt;BeanTag&gt; of the cultural tags specified
* @throws RemoteException Exception flow
*/
public ArrayList&lt;BeanTag&gt; ottieniTagBeneCulturale(int pBeneCulturaleID) throws RemoteException;

/**
* Returns a list of feedback to the cultural specified
*
* @param pBeneCulturaleID ID of Cultural Heritage
* @return HashMap&lt;BeanVisitaBC, String&gt; The feedback of Cultural Heritage
* @throws RemoteException Exception flow
*/
public HashMap&lt;BeanVisitaBC, String&gt; ottieniFeedbackBeneCulturale(int pBeneCulturaleID) throws RemoteException;

/**
* Returns for the cultural property specified, an array where each position contains the number of
* Feedback corresponding to the value of the array more than 'one.
* The calculation and 'made in the period between 30 days and today.
*
* @param pBeneCulturaleID ID of Cultural Heritage
* @return ArrayList&lt;Integer&gt; The statistics of last thirty days
* @throws RemoteException Exception flow
*/
public ArrayList&lt;Integer&gt; ottieniStatisticheBeneCulturale(int pBeneCulturaleID) throws RemoteException;

/**
* Method for updating (or modification) of a feedback for a certain good
* Cultural. The method has the burden of
*
* @param pBeneCulturaleID The identifier of the cultural change which the feedback
* @param pBeanVisitaBC The new feedback to the cultural indicated
* @return boolean The result of the operation; true if was successful, false otherwise
* @throws RemoteException Exception flow
*/
public boolean modificaFeedbackBeneCulturale(int pBeneCulturaleID, BeanVisitaBC pBeanVisitaBC) throws RemoteException;
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_IGestionePuntiDiRistoroAgenzia</id>
      <content>package unisa.gps.etour.control.GestionePuntiDiRistoro;

import java.rmi.RemoteException;
import java.util.ArrayList;
import java.util.HashMap;

import unisa.gps.etour.bean.BeanConvenzione;
import unisa.gps.etour.bean.BeanPuntoDiRistoro;
import unisa.gps.etour.bean.BeanVisitaPR;

/**
* Interface for refreshments on the side of the agency
*
* @Author Joseph Morelli
* @Version 0.1 (c) 2007 eTour Project - Copyright by DMI SE @ SA Lab - University
* Of Salerno
*/
public interface IGestionePuntiDiRistoroAgenzia extends IGestionePuntiDiRistoroComune {

/**
* Method for inserting a new Refreshment
*
* @param pPuntoDiRistoro containing all the data from the Refreshment
* Add
* @throws RemoteException Exception Remote
*/
public boolean inserisciPuntoDiRistoro(BeanPuntoDiRistoro pPuntoDiRistoro)
throws RemoteException;

/**
* Method for deleting a refreshment bar with ID
*
* @param pIDPuntoDiRistoro for the unique identification of point
* Refreshments
* @throws RemoteException Exception Remote
*/
public boolean cancellaPuntoDiRistoro(int pPuntoDiRistoroID)
throws RemoteException;

/**
* Method to return all the refreshment of the DataBase
*
* @return ArrayList containing all the beans of the present Refreshments
* In the DataBase
* @throws RemoteException Exception Remote
*/
public ArrayList&lt;BeanPuntoDiRistoro&gt; ottieniPuntiDiRistoro()
throws RemoteException;

/**
* Method to return all the refreshment with convention
* Active or not
*
* @param statoConvenzione Boolean for the type of eateries by
* Get (contracted or not)
* @return ArrayList containing all the beans of the present Refreshments
* In the database depending on the status of the Convention
* @throws RemoteException Exception Remote
*/
public ArrayList&lt;BeanPuntoDiRistoro&gt; ottieniPuntiDiRistoro(
boolean statoConvenzione) throws RemoteException;

/**
* Method for inserting a new convention for a certain point
* Refreshments
*
* @param pPuntoDiRistoroID integer that uniquely identifies the point
* Refreshments
* @param pConv Convention that will enable (Parameter ID
* Refreshment create redundancy but is useful for security
* Data)
* @return boolean for confirmation of operation
* @throws RemoteException Exception Remote
*/
public boolean attivaConvenzione(int pPuntoDiRistoroID,
BeanConvenzione pConv) throws RemoteException;

/**
* Method to get all the feedback associated to a certain point
* Refreshments
*
* @param pPuntoDiRistoroID unique identifier of the Refreshment
* To get feedback
* @return HashMap containing the bean as the key value of feedback and how
* The tourist who issued the feedback
* @throws RemoteException Exception Remote
*/
public HashMap&lt;BeanVisitaPR, String&gt; ottieniFeedbackPuntoDiRistoro(
int pPuntoDiRistoroID) throws RemoteException;

/**
* Method for updating (or change) the data of a Refreshment
*
* @param pPuntoDiRistoroAggiornato containing the new data to be saved
* @return Boolean value-true if the operation went successfully,
* False otherwise
* @throws RemoteException Exception Remote
*/
public boolean modificaPuntoDiRistoro(
BeanPuntoDiRistoro pPuntoDiRistoroAggiornato)
throws RemoteException;

/**
* Method which allows you to insert a tag to search for a useful point
* Refreshments
*
* @param pPuntoDiRistoroId unique identifier of Refreshment
* @param pTagId unique ID tags to be inserted
* @return Boolean value-true if the operation went successfully,
* False otherwise
* @throws RemoteException Exception Remote
*/
public boolean inserisciTagPuntoDiRistoro(int pPuntoDiRistoroId, int pTagId)
throws RemoteException;

/**
* Method which allows you to delete a tag to search for a useful point
* Refreshments
*
* @param pPuntoDiRistoroId unique identifier of Refreshment
* @param pTagId unique ID tags to be inserted
* @return Boolean value-true if the operation went successfully,
* False otherwise
* @throws RemoteException Exception Remote
*/
public boolean cancellaTagPuntoDiRistoro(int pPuntoDiRistoroId, int pTagId)
throws RemoteException;
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_IGestionePuntiDiRistoroComune</id>
      <content>package unisa.gps.etour.control.GestionePuntiDiRistoro;

import java.rmi.Remote;
import java.rmi.RemoteException;
import java.util.ArrayList;
import unisa.gps.etour.bean.BeanPuntoDiRistoro;
import unisa.gps.etour.bean.BeanTag;
import unisa.gps.etour.bean.BeanVisitaPR;

/**
* Interface for common operations on the refreshment
*
* @Author Joseph Morelli
* @Version 0.1 2007 eTour Project - Copyright by SE @ SA Lab DMI University
* Of Salerno
*/
public interface IGestionePuntiDiRistoroComune extends Remote
{

/**
* Method to return a particular Refreshment
*
* @param pPuntoDiRistoroID to identify the Refreshment from
* Return
* @return Bean contains the data of Refreshment concerned
* @throws RemoteException Exception Remote
*/
public BeanPuntoDiRistoro ottieniPuntoDiRistoro(int pPuntoDiRistoroID)
throws RemoteException;

/**
* Method which returns the tags to some refreshment
*
* @param pPuntoDiRistoroID point identification Refreshment
* @return structure containing all BeanTag associated with the point
* Refreshments passed as parameter
* @throws RemoteException Exception Remote
*/
public ArrayList&lt;BeanTag&gt; ottieniTagPuntoDiRistoro(int pPuntoDiRistoroID)
throws RemoteException;

/**
* Method which returns the last 10 comments made for a
* Refreshment
*
* @param pPuntoDiRistoroID ID for the point of rest in
* Question
* @return Array of strings containing 10 items
* @throws RemoteException Exception Remote
*/
public String[] ottieniUltimiCommenti(int pPuntoDiRistoroID)
throws RemoteException;

/**
* Returns for the Refreshment specified, an array where each
* Location contains the number of ratings corresponding to the value
* Index of the array more 'one. The calculation and 'made in the period
* 30 days and today.
*
* @param pPuntoDiRistoroID unique identifier of Refreshment
* @return ArrayList containing the counters as explained above
* @throws RemoteException Exception Remote
*/
public ArrayList&lt;Integer&gt; ottieniStatistichePuntoDiRistoro(
int pPuntoDiRistoroID) throws RemoteException;

/**
* Method which allows you to change the comment issued for a
* Refreshment
*
* @param pPuntoDiRistoroId unique identifier of Refreshment
* @param nuovaVisita Bean containing new comment
* @return Boolean value-true if the operation went successfully,
* False otherwise
* @throws RemoteException Exception Remote
*/
public boolean modificaFeedbackPuntoDiRistoro(int pPuntoDiRistoroId,
BeanVisitaPR nuovaVisita) throws RemoteException;
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_IGestioneTagComune</id>
      <content>package unisa.gps.etour.control.GestioneTag;

import java.rmi.Remote;
import java.rmi.RemoteException;
import java.util.ArrayList;

import unisa.gps.etour.bean.BeanTag;

/**
* Common interface for managing Tag
*
* @Author Joseph Morelli
* @Version 0.1 2007 eTour Project - Copyright by SE @SA Lab DMI University
* Of Salerno
*/
public interface IGestioneTagComune extends Remote
{

/**
* Method which returns all the tags stored in the database
*
* @Return an ArrayList of BeanTag
* @Throws RemoteException Exception Remote
*/
public ArrayList&lt;BeanTag&gt; ottieniTags() throws RemoteException;

}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_IGestioneTagOperatoreAgenzia</id>
      <content>package unisa.gps.etour.control.GestioneTag;

import java.rmi.RemoteException;

import unisa.gps.etour.bean.BeanTag;

/**
* Interface for the tag handler by the Operator Agency
*
* @Author Joseph Morelli
* @Version 0.1 2007 eTour Project - Copyright by SE @SA Lab DMI University
* Of Salerno
*/
public interface IGestioneTagOperatoreAgenzia extends IGestioneTagComune
{

/**
* Method to insert a new tag
*
* @param pTagNuovo containing all the data of the new Tag
* @return Boolean: true if the operation is successful, false otherwise
* @throws RemoteException Exception Remote
*/
public boolean inserisciTag(BeanTag pTagNuovo) throws RemoteException;

/**
* Method for the cancellation of an existing tag
*
* @param pTagID to identify the tags in question
* @return Boolean: true if the operation is successful, false otherwise
* @throws RemoteException Exception Remote
*/
public boolean cancellaTag(int pTagID) throws RemoteException;

/**
* Method for editing a Tag
*
* @param pTagModificato containing the details of the new Tag
* @return Boolean: true if the operation is successful, false otherwise
* @throws RemoteException Exception Remote
*/
public boolean modificaTag(BeanTag pTagModificato) throws RemoteException;

/**
* Method which returns a tag identified by its ID
*
* @param pTagID to identify a particular tag
* @return a BeanTag containing data Tag concerned
* @throws RemoteException Exception Remote
*/
public BeanTag ottieniTag(int pTagID) throws RemoteException;

}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_IGestioneTuristaClient</id>
      <content>package unisa.gps.etour.control.GestioneUtentiRegistrati;

import java.rmi.RemoteException;
import java.util.ArrayList;

import unisa.gps.etour.bean.BeanBeneCulturale;
import unisa.gps.etour.bean.BeanPreferenzaDiRicerca;
import unisa.gps.etour.bean.BeanPreferenzeGeneriche;
import unisa.gps.etour.bean.BeanPuntoDiRistoro;
import unisa.gps.etour.bean.BeanTurista;
import unisa.gps.etour.bean.BeanVisitaBC;
import unisa.gps.etour.bean.BeanVisitaPR;

/**
* Interface on the Management of Tourist Information
*
* @Author Joseph Penna, Federico Leon
* @Version 0.1 2007 eTour Project - Copyright by SE @ SA Lab University of DMI
* Salerno
*/
public interface IGestioneTuristaClient extends IGestioneTuristaComune {

/**
* Method for the insertion of a Tourist
*
* @param pTurista container for all data relating to tourism by
* Insert
* @return Boolean: True if the insertion is successful, False otherwise
* @throws RemoteException Exception Remote
*/
public boolean inserisciTurista(BeanTurista pTurista)
throws RemoteException;

/**
* Method for including the General Preferences Tourist
*
* @param pIdTurista Identifier Turista which involve
* General Preferences
* @param pPreferenzeGeneriche General Preferences for inclusion
* @return Boolean: True if the insertion is successful, False otherwise
* @throws RemoteException Exception Remote
*/
public boolean inserisciPreferenzeGeneriche(
BeanPreferenzeGeneriche pPreferenzeGeneriche)
throws RemoteException;

/**
* Method for the extraction Preferences generously given Tourists
*
* @param pIdTurista Identifier Turista which you want
* Get the General Preferences
* @return Preferences General information relating to tourism
* @throws RemoteException Exception Remote
*/
public BeanPreferenzeGeneriche ottieniPreferenzeGeneriche(int pIdTurista)
throws RemoteException;

/**
* Method for changing the Preferences generously given Tourists
*
* @param pIdTurista ID of tourists for whom you want
* Change the General Preferences
* @param pPreferenzeGenericheNuove The Prefereferze General for inclusion
* @param pPreferenzeGenericheVecchie Preferences generous to replace
* @return Boolean: True if the MADIF successful, False otherwise
* @throws RemoteException
*/
public boolean modificaPreferenzeGeneriche(
BeanPreferenzeGeneriche pPreferenzeGenericheNuove)
throws RemoteException;

/**
* Method for the removal of preferences associated with the General
* Tourist
*
* @param pIdTurista ID of tourists for whom you want
* Delete the General Preferences
* @return Preferences General erased
* @throws RemoteException Exception Remote
*/
public BeanPreferenzeGeneriche cancellaPreferenzeGeneriche(int pIdTurista)
throws RemoteException;

/**
* Method to insert a Search Preferences
*
* @param pIdTurista ID of tourists for which you intend
* Insert a Search Preferences
* @param pPreferenzaDiRicerca Search Preferences be included
* @return Boolean: True if the insertion is successful, False otherwise
* @throws RemoteException
*/
public boolean inserisciPreferenzaDiRicerca(int pIdTurista,
BeanPreferenzaDiRicerca pPreferenzaDiRicerca)
throws RemoteException;

/**
* Method for extracting the set of Search Preferences given
* Tourist
*
* @param pIdTurista ID of tourists for whom you want
* Extract search preferences
* @return Together the search preferences associated with the Tourist information
* @throws RemoteException Exception Remote
*/
public BeanPreferenzaDiRicerca[] ottieniPreferenzeDiRicerca(
int pIdTurista) throws RemoteException;

/**
* Method for deleting a Search Preference given its
* ID and Tourists
*
* @param pIdTurista ID of tourists for whom you want
* Delete a Search Preferences
* @param pIdPreferenzaDiRicerca ID Search Preferences
* To cancel
* @return The preference of search Delete
* @throws RemoteException Exception Remote
*/
public BeanPreferenzaDiRicerca cancellaPreferenzeDiRicerca(int pIdTurista,
int pIdPreferenzaDiRicerca) throws RemoteException;

/**
* Method to extract the list references to the Cultural Heritage
* Visited by a tourist
*
* @param pIdTurista Identifier Turista
* @return list of references to the Cultural Heritage Visited
* @throws RemoteException Exception Remote
*/
public BeanVisitaBC[] ottieniBeniCulturaliVisitati(int pIdTurista)
throws RemoteException;

/**
* Method for the extraction of the list when making reference to Refreshments
* Visited by a tourist
*
* @param pIdTurista Identifier Turista
* @return list of references to Refreshments Visited
* @throws RemoteException Exception Remote
*/
public BeanVisitaPR[] ottieniPuntiDiRistoroVisitati(int pIdTurista)
throws RemoteException;

/**
* Method for the insertion of a cultural Visited
*
* @param pVisitaBC package containing all information relating to
* Visit
* @return true if the item is added successfully, false otherwise
* @throws RemoteException Exception Remote
*/
public boolean inserisciBeneCulturaleVisitato(BeanVisitaBC pVisitaBC)
throws RemoteException;

/**
* Method for inserting a refreshment Visited
*
* @param pVisitaPR package containing all information relating to
* Visit
* @return true if the item is added successfully, false otherwise
* @throws RemoteException Exception Remote
*/
public boolean inserisciPuntoDiRistoroVisitato(BeanVisitaPR pVisitaPR)
throws RemoteException;

/**
* Method for the insertion of a cultural object in the list of Favorites
*
* @param pIdTurista Identifier Turista
* @param pIdBeneCulturale ID of Cultural Heritage
* @return true if the insertion is successful, false otherwise
* @throws RemoteException Exception Remote
*/
public boolean inserisciBeneCulturalePreferito(int pIdTurista,
int pIdBeneCulturale) throws RemoteException;

/**
* Method for inserting a refreshment to my Favorites
*
* @param pIdTurista Identifier Turista
* @param pIdPuntoDiRistoro point identification Refreshment
* @return true if the insertion is successful, false otherwise
* @throws RemoteException Exception Remote
*/
public boolean inserisciPuntoDiRistoroPreferito(int pIdTurista,
int pIdPuntoDiRistoro) throws RemoteException;

/**
* Method for the cancellation of a cultural object from the list of Favorites
*
* @param pIdTurista Identifier Turista
* @param pIdBeneCulturale ID of Cultural Heritage
* @return true if the cancellation is successful, false otherwise
* @throws RemoteException Exception Remote
*/
public boolean cancellaBeneCulturalePreferito(int pIdTurista,
int pIdBeneCulturale) throws RemoteException;

/**
* Method for deleting a refreshment from the list of Favorites
*
* @param pIdTurista Identifier Turista
* @param pIdPuntoDiRistoro point identification Refreshment
* @return true if the cancellation is successful, false otherwise
* @throws RemoteException Exception Remote
*/
public boolean cancellaPuntoDiRistoroPreferito(int pIdTurista,
int pIdPuntoDiRistoro) throws RemoteException;

/**
* Method to extract the list of Cultural Heritage Favorites
*
* @param pIdTurista Identifier Turista
* @return List of Cultural Heritage Favorites
* @throws RemoteException Exception Remote
*/
public BeanBeneCulturale[] ottieniBeniCulturaliPreferiti(int pIdTurista)
throws RemoteException;

/**
* Method to extract the list of Refreshments
*
* @param pIdTurista Identifier Turista
* @return list of eateries Favorites
* @throws RemoteException Exception Remote
*/
public BeanPuntoDiRistoro[] ottieniPuntiDiRistoroPreferiti(int pIdTurista)
throws RemoteException;

}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_IGestioneTuristiAgenzia</id>
      <content>package unisa.gps.etour.control.GestioneUtentiRegistrati;

import java.rmi.RemoteException;
import java.util.ArrayList;

import unisa.gps.etour.bean.BeanTurista;
import unisa.gps.etour.bean.BeanVisitaBC;
import unisa.gps.etour.bean.BeanVisitaPR;

/**
* Interface for handling tourists from the side of the transaction Agency
*
* @Author Joseph Morelli
* @Version 0.1 2007 eTour Project - Copyright by SE @ SA Lab DMI University
* Of Salerno
*/
public interface IGestioneTuristiAgenzia extends IGestioneTuristaComune
{

/**
* Method for the cancellation of a tourist from the Database
*
* @param pIdTurista Identifier Tourist delete
* @return Boolean: true if the operation is successful, false otherwise
* @throws RemoteException Exception Remote
*/
public boolean delete(int pIdTurista) throws RemoteException;

/**
* Method to activate a registered tourists
*
* @param pIdTurista ID to activate the Tourist
* @return Boolean: true if the operation is successful, false otherwise
* @throws RemoteException Exception Remote
*/
public boolean attivaTurista(int pIdTurista) throws RemoteException;

/**
* Method to disable an active tourists
*
* @param pIdTurista to disable Identifier Tourist
* @return Boolean: true if the operation is successful, false otherwise
* @throws RemoteException Exception Remote
*/
public boolean disattivaTurista(int pIdTurista) throws RemoteException;

/**
* Method to obtain a collection of Tourists
*
* @return ArrayList of BeanTurista
* @throws RemoteException Exception Remote
*/
public ArrayList&lt;BeanTurista&gt; ottieniTuristi() throws RemoteException;

/**
* Method to obtain a collection of active tourists or not
*
* @param statoAccount boolean Tourists can choose
* On whether
* @return ArrayList of BeanTurista
* @throws RemoteException Exception Remote
*/
public ArrayList&lt;BeanTurista&gt; ottieniTuristi(boolean statoAccount)
throws RemoteException;

/**
* Method to get all the feedback issued by a tourist for the points
* Refreshments
*
* @param pIdTurista ID to pick up the tourists in
* Feedback
* @return ArrayList containing all the beans Feedback released
* @throws RemoteException Exception Remote
*/
public ArrayList&lt;BeanVisitaPR&gt; ottieniFeedbackPR(int pIdTurista)
throws RemoteException;

/**
* Method to get all the feedback issued by a tourist for Heritage
* Cultural
*
* @param pIdTurista ID to pick up the tourists in
* Feedback
* @return ArrayList containing all the beans Feedback released
* @throws RemoteException Exception Remote
*/
public ArrayList&lt;BeanVisitaBC&gt; ottieniFeedbackBC(int pIdTurista)
throws RemoteException;

}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_IRicerca</id>
      <content>package unisa.gps.etour.control.GestioneRicerche;

import java.rmi.Remote;
import java.rmi.RemoteException;

import unisa.gps.etour.bean.BeanBeneCulturale;
import unisa.gps.etour.bean.BeanPuntoDiRistoro;
import unisa.gps.etour.util.Punto3D;

/**
* Interface for management of research
*
* @Author Joseph Penna
* @Version 0.1 (c) 2007 eTour Project - Copyright by DMI SE @ SA Lab --
* University of Salerno
*/
public interface IRicerca extends Remote {

// Constants identify the types of site
public final static byte BENE_CULTURALE = 0;
public final static byte PUNTO_DI_RISTORO = 1;

/**
* Initialization method for research
*
* @param pIdTurista ID of the tourist. Pass -1 in case of a Guest
* @param pParoleChiave Together keyword search
* @param pTagsId Together Search Tags
* @param pRaggioMax Maximum distance between the user and the site
* @param numeroElementiPerPagina number of items to look for in a
* Search session
* @param pPosizioneUtente detected by the GPS user position
* @param pTipologiaSito type site search
* @return number of elements emerged from the research. On error
* Returns -1
* @throws RemoteException the remote exception
*/
public int search(int pIdTurista, String pParoleChiave, int[] pTagsId, double pRaggioMax,
int pElementiPerPagina, Punto3D pPosizioneUtente,
byte pTipologiaSito) throws RemoteException;

/**
* Method for returning the list of emerging from the Cultural Heritage
* Research, in a given interval
*
* @param pPagina range of items to be included in the results
* @return entirety of cultural property related to the range of results
* Selected search. In case of error returns null
* @throws RemoteException Exception Remote
*/
public BeanBeneCulturale[] ottieniPaginaRisultatiBeneCulturale(int pPagina)
throws RemoteException;

/**
* Method to return the list of eateries have emerged from
* Research related to a specific intevallo
*
* @param pPagina range of items to be included in the results
* @return set of points relating to the range of refreshment
* Selected search results. In case of error returns null
* @throws RemoteException Exception Remote
*/
public BeanPuntoDiRistoro[] ottieniPaginaRisultatiPuntoDiRistoro(int pPagina)
throws RemoteException;

/**
* Method for returning the number of elements results from
* Search
*
* @return number of elements emerged in the research phase. Where no
* Is initialized the search returns -1
*/
public int ottieniNumeroElementiRicerca() throws RemoteException;

/**
* Method for returning the number of pages appear in results
*
* @return number of pages that have emerged in the research phase. Where no
* Is initialized the search returns -1
*/
public int ottieniNumeroPagineRicerca() throws RemoteException;

}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_LimitedDocument</id>
      <content>package unisa.gps.etour.gui.operatoreagenzia.documents;

import javax.swing.text.AttributeSet;
import javax.swing.text.BadLocationException;
import javax.swing.text.PlainDocument;

public class LimitedDocument extends PlainDocument {
private static final long serialVersionUID = 1L;
private int maxLength;

public LimitedDocument(int pMaxLength) {
maxLength = pMaxLength;
}

public void insertString(int pOffset, String pStringa, AttributeSet pAttribute) throws BadLocationException {
if (null == pStringa) {
return;
}
// Note: the content is always a newline at the end
int capacity = maxLength + 1 - getContent().length();
// If the maximum length is greater than or equal to the string, the part.
if (capacity &gt;= pStringa.length()) {
super.insertString(pOffset, pStringa, pAttribute);
}
// Otherwise add what may
else {
if (capacity &gt; 0) {
super.insertString(pOffset, pStringa.substring(0, capacity), pAttribute);
}
}
}
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_MediaVotiRenderer</id>
      <content>package unisa.gps.etour.gui.operatoreagenzia.tables;

import java.awt.Component;
import javax.swing.ImageIcon;
import javax.swing.JLabel;
import javax.swing.JTable;
import javax.swing.table.DefaultTableCellRenderer;
import unisa.gps.etour.gui.operatoreagenzia.Home;

/**
* &lt;b&gt; MediaVotiRenderer &lt;/b&gt;
* &lt;p&gt;
* This class creates a custom renderer for the average ratings of a
* Site. &lt;/b&gt;
*
* @see javax.swing.table.DefaultTableRenderer;
* @see javax.swing.table.TableCellRenderer;
* @version 1.0
* @author Mario Gallo
*/
public class MediaVotiRenderer extends DefaultTableCellRenderer {

/**
* Method that returns the custom component for the
* Display of the data contained in the cell of a table.
*
* @param pTable JTable - the table.
* @param pValue Object - the data.
* @param pSelected boolean --
* &lt;ul&gt;
* &lt;li&gt; &lt;i&gt; True &lt;/i&gt; if the selected cell.
* &lt;li&gt; &lt;i&gt; False &lt;/i&gt; otherwise.
* &lt;/ul&gt;
* @param pHasFocus boolean --
* &lt;ul&gt;
* &lt;li&gt; &lt;i&gt; True &lt;/i&gt; if the cell has the focus.
* &lt;li&gt; &lt;i&gt; False &lt;/i&gt; otherwise.
* &lt;/ul&gt;
* @param pRow int - the line number.
* @param pColumn int - the column number.
* @return Component - the component that customizes render the cell.
* @throws IllegalArgumentException - if the value of the cell can not
* Be rendered by this renderer.
*/
public Component getTableCellRendererComponent(JTable pTable,
Object pValue, boolean pSelected, boolean pFocus, int pRow,
int pColumn) throws IllegalArgumentException {
if (!(pValue instanceof Double || pValue instanceof Integer)) {
throw new IllegalArgumentException(&quot;Value cell unexpected.&quot;);
}
double rating = 0;
if (pValue instanceof Double) {
rating = (Double) pValue;
} else {
rating += (Integer) pValue;
}

JLabel aLabel = new JLabel(&quot;&quot;);
aLabel.setHorizontalAlignment(JLabel.CENTER);

if (rating &gt; 4) {
aLabel.setIcon(new ImageIcon(getClass().getResource(
Home.URL_IMAGES + &quot;stella5.gif&quot;)));
} else if (rating &lt;= 4 &amp;&amp; rating &gt; 3) {
aLabel.setIcon(new ImageIcon(getClass().getResource(
Home.URL_IMAGES + &quot;stella4.gif&quot;)));
} else if (rating &lt;= 3 &amp;&amp; rating &gt; 2) {
aLabel.setIcon(new ImageIcon(getClass().getResource(
Home.URL_IMAGES + &quot;stella3.gif&quot;)));
} else if (rating &lt;= 2 &amp;&amp; rating &gt; 1) {
aLabel.setIcon(new ImageIcon(getClass().getResource(
Home.URL_IMAGES + &quot;stella2.gif&quot;)));
} else {
aLabel.setIcon(new ImageIcon(getClass().getResource(
Home.URL_IMAGES + &quot;stella1.gif&quot;)));
}
return aLabel;
}
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_MessaggiErrore</id>
      <content>package unisa.gps.etour.util;

/**
* Standard error message self-describing
*
* @Author Michelangelo De Simone
* @Version 0.1
*
* (c) 2007 eTour Project - Copyright by DMI SE @ SA Lab - University of Salerno
*/
public class MessaggiErrore
{
// Occurs when connecting to the DBMS
public static final String ERRORE_CONNESSIONE_DBMS = &quot;Connection to DBMS Failed&quot;;

// Occurs when you can not perform an operation on the DBMS
public static final String ERRORE_DBMS = &quot;Error DBMS&quot;;

// It occurs in conditions not specified
public static final String ERRORE_SCONOSCIUTO = &quot;Unknown error&quot;;

// Occurs when there are format errors in a bean
public static final String ERRORE_FORMATO_BEAN = &quot;Error data bean&quot;;

// Occurs when a data error
public static final String ERRORE_DATI = &quot;Data Error&quot;;

// Occurs when an error occurs on read / write files
public static final String ERRORE_FILE = &quot;Error reading / writing file&quot;;

// Occurs when you have reached the maximum number of banners displayed
public static final String ERRORE_NUM_BANNER = &quot;count exceeded banner inserted&quot;;
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_News</id>
      <content>package unisa.gps.etour.gui.operatoreagenzia;

import java.awt.*;
import java.awt.event.*;
import java.io.FileNotFoundException;
import java.rmi.RemoteException;
import java.rmi.registry.LocateRegistry;
import java.rmi.registry.Registry;
import java.util.ArrayList;
import java.util.Date;
import javax.swing.*;
import java.util.*;
import javax.swing.text.BadLocationException;
import javax.swing.text.Document;
import javax.swing.border.*;
import unisa.gps.etour.bean.BeanNews;
import unisa.gps.etour.control.GestioneAdvertisement.IGestioneAdvertisementAgenzia;
import unisa.gps.etour.gui.DeskManager;
import unisa.gps.etour.gui.HelpManager;
import unisa.gps.etour.gui.operatoreagenzia.document.LimitedDocument;
import unisa.gps.etour.gui.operatoreagenzia.tables.NewsTableModel;
import unisa.gps.etour.gui.operatoreagenzia.tables.PrioritaRenderer;
import unisa.gps.etour.gui.operatoreagenzia.tables.ScrollableTable;
import unisa.gps.etour.gui.operatoreagenzia.tables.TestoNewsRenderer;
import unisa.gps.etour.util.Data;

/**
* This class implements the interface for collecting news for the actor
* Operator Agency.
*
* @Version 1.0
* @Author Mario Gallo
*
* (c) 2007 eTour Project - Copyright by DMI SE @ SA Lab --
* University of Salerno
*/
public class News extends JInternalFrame {
private JPanel jContentPane = null;
private JToolBar NewsToolbar = null;
private JButton btnEliminaN = null;
private JPanel rightPanel = null;
private JPanel formNews = null;
private JSlider prSlider = null;
private JButton btnInsertModify = null;
private JButton btnReset = null;
private JPanel panelHelp = null;
private JTextPane textGuida = null;
private JScrollPane scrollTableNews = null;
private JTable tableNews = null;
private JTextArea testoNews = null;
private JComboBox durataNews = null;
private JButton btnModificaN = null;
private JLabel labelCaratteri;
private int idNews = -1;
private NewsTableModel TableModel;
private HelpManager newsHelp;
protected DeskManager desktopManager;
protected JDesktopPane JDesktopPane;
private IGestioneAdvertisementAgenzia gestioneNews;

/**
* This is the default constructor.
*/
public News() {
super(&quot;News&quot;);
setPreferredSize(Home.CHILD_SIZE);
setMinimumSize(new Dimension(600, 480));
setResizable(true);
setFrameIcon(new ImageIcon(getClass().getResource(
Home.URL_IMAGES + &quot;News32.png&quot;)));
setIconifiable(true);
setMaximizable(true);
setClosable(true);

// Setting up dell'help manager to manage the news.
textGuida = new JTextPane();
try {
newsHelp = new HelpManager(Home.URL_HELP + &quot;news.txt&quot;, textGuida);
} catch (FileNotFoundException e) {
textGuida.setText(&quot;&lt;html&gt; &lt;b&gt; Help not available &lt;/b&gt; &lt;/html&gt;&quot;);
}

setContentPane(getJContentPane());

addInternalFrameListener(new InternalFrameAdapter() {

/*
* Inclusion of the frame on the desktop desktop retrieves bread bread
* And desktop manager and initializes the remote objects
* Management of cultural heritage.
*/

public void internalFrameOpened(InternalFrameEvent pEvent) {
JInternalFrame frame = pEvent.getInternalFrame();
JDesktopPane = frame.getDesktopPane();
desktopManager = (DeskManager) jDesktopPane.getDesktopManager();

// Setting up objects for remote asset management
// Cultural.
try {
Registry reg = LocateRegistry.getRegistry(Home.HOST);
gestioneNews = (IGestioneAdvertisementAgenzia) reg
.lookup(&quot;GestioneAdvertisementAgenzia&quot;);

// Load data.
caricaTabella();
}
/*
* Two exceptions: RemoteException and NotBoundException. The
* Result is the same. The management is not operable and
* After the error message window closes.
*/
catch (Exception ex) {
JLabel error = new JLabel(
&quot;&lt;html&gt; &lt;h2&gt; Unable to communicate with the server eTour. &lt;/h2&gt;&quot;
+ &quot;&lt;h3&gt; &lt;u&gt; The dialog management request is closed. &lt;/u&gt; &lt;/h3&gt;&quot;
+ &quot;&lt;p&gt; &lt;b&gt; Possible Causes: &lt;/b&gt;&quot;
+ &quot;&lt;ul&gt; &lt;li&gt; No connection to the network. &lt;/li&gt;&quot;
+ &quot;&lt;li&gt; Server inactive. &lt;/li&gt;&quot;
+ &quot;&lt;li&gt; Server clogged. &lt;/li&gt; &lt;/ul&gt;&quot;
+ &quot;&lt;p&gt; Please try again later. &lt;/p&gt;&quot;
+ &quot;&lt;p&gt; If the error persists, please contact technical support. &lt;/p&gt;&quot;
+ &quot;&lt;p&gt; We apologize for the inconvenience. &lt;/html&gt;&quot;);
ImageIcon err = new ImageIcon(getClass().getResource(
Home.URL_IMAGES + &quot;error48.png&quot;));
JOptionPane.showMessageDialog(JDesktopPane, error,
&quot;Error!&quot;, JOptionPane.ERROR_MESSAGE, err);
frame.dispose();
}
}
});
}

/**
* Initialize the content pane of the frame inside.
*
* @Return javax.swing.JPanel - the content pane.
*/
private JPanel getJContentPane() {
if (null == jContentPane) {
jContentPane = new JPanel();
jContentPane.setLayout(new BorderLayout());
jContentPane.add(getNewsToolbar(), BorderLayout.NORTH);
jContentPane.add(getRightPanel(), BorderLayout.EAST);
jContentPane.add(getTableNews(), BorderLayout.CENTER);
}
return jContentPane;
}

/**
* This method initializes the toolbar to manage the news.
*
* @Return javax.swing.JToolBar - the toolbar management news.
*/
private JToolBar getNewsToolbar() {
if (null == NewsToolbar) {
NewsToolbar = new JToolBar();
NewsToolbar.setFloatable(false);
NewsToolbar.add(getBtnModificaN());
NewsToolbar.addSeparator();
NewsToolbar.add(getBtnEliminaN());
}
return NewsToolbar;
}

/**
* This method initializes the button to edit a news.
*
* @Return javax.swing.JButton - button to change.
*/
private JButton getBtnModificaN() {
if (null == btnModificaN) {
btnModificaN = new JButton();
btnModificaN.setText(&quot;Edit News&quot;);
btnModificaN.setIcon(new ImageIcon(getClass().getResource(
Home.URL_IMAGES + &quot;ModificaNews32.png&quot;)));
btnModificaN.setCursor(Cursor
.getPredefinedCursor(Cursor.HAND_CURSOR));
btnModificaN.setName(&quot;btnModifica&quot;);
btnModificaN.addMouseListener(newsHelp);
btnModificaN.setEnabled(false);
btnModificaN.addActionListener(new ActionListener() {
public void actionPerformed(ActionEvent pActionEvent) {
int selectedRow = tableNews.getSelectedRow();
if (idNews == -1) // In this way I know if she was
// Edit
{
btnInsertModify.setText(&quot;Change&quot;);
btnInsertModify.setIcon(new ImageIcon(getClass()
.getResource(Home.URL_IMAGES + &quot;Salva16.png&quot;)));
btnReset.setText(&quot;Cancel&quot;);
btnReset.setIcon(new ImageIcon(getClass().getResource(
Home.URL_IMAGES + &quot;Annulla16.png&quot;)));
formNews.setBorder(BorderFactory.createTitledBorder(
BorderFactory.createLineBorder(new Color(51,
102, 255), 3), &quot;Edit News&quot;,
TitledBorder.DEFAULT_JUSTIFICATION,
TitledBorder.DEFAULT_POSITION, new Font(
&quot;Dialog&quot;, Font.BOLD, 12), new Color(0,
102, 204)));
}
String text = (String) tableModel.getValueAt(selectedRow,
0);
int numCaratteri = 200 - text.length() + 1;
labelCaratteri.setText(&quot;# Characters:&quot; + numCaratteri);
Document docTesto = testoNews.getDocument();
try {
docTesto.remove(0, docTesto.getLength());
docTesto.insertString(0, text, null);
} catch (BadLocationException e) {
e.printStackTrace();
}
Date expires = (Date) TableModel
.getValueAt(selectedRow, 3);
durataNews.setSelectedIndex(Data.getNumDays(expires));
idNews = tableModel.getID(selectedRow);
prSlider.setValue((Integer) tableModel.getValueAt(
selectedRow, 1));
}
});
}
return btnModificaN;
}

/**
* This method initializes the button to delete a news.
*
* @Return javax.swing.JButton - the button for deletion.
*/
private JButton getBtnEliminaN() {
if (null == btnEliminaN) {
btnEliminaN = new JButton();
btnEliminaN.setText(&quot;Delete News&quot;);
btnEliminaN.setIcon(new ImageIcon(getClass().getResource(
Home.URL_IMAGES + &quot;EliminaNews32.png&quot;)));
btnEliminaN.setEnabled(false);
btnEliminaN.setCursor(Cursor
.getPredefinedCursor(Cursor.HAND_CURSOR));
btnEliminaN.setName(&quot;btnElimina&quot;);
btnEliminaN.addMouseListener(newsHelp);
btnEliminaN.addActionListener(new ActionListener() {
public void actionPerformed(ActionEvent pEvent) {
int selectedRow = tableNews.getSelectedRow();

// Construction of the dialog for confirmation
// Elimination
JPanel root = new JPanel(new BorderLayout());
JLabel message = new JLabel(
&quot;Are you sure you want to delete the selected news?&quot;);
message.setFont(new Font(&quot;Dialog&quot;, Font.BOLD, 14));
JLabel avviso = new JLabel(
&quot;The deleted data can not be filled again.&quot;,
SwingConstants.CENTER);
avviso.setIcon(new ImageIcon(getClass().getResource(
Home.URL_IMAGES + &quot;warning16.png&quot;)));
root.add(message, BorderLayout.NORTH);
root.add(avviso, BorderLayout.CENTER);
String[] options = {&quot;Delete&quot;, &quot;Cancel&quot;};

// The dialog screen appears
int choice = JOptionPane.showInternalOptionDialog(
jContentPane, root, &quot;Confirm Delete News&quot;,
JOptionPane.YES_NO_OPTION,
JOptionPane.QUESTION_MESSAGE, new ImageIcon(
getClass().getResource(
Home.URL_IMAGES
+ &quot;EliminaNews48.png&quot;)),
options, options[1]);

// If you chose to confirm the deletion
if (choice == JOptionPane.YES_OPTION) {
try {
gestioneNews.cancellaNews(TableModel
.getID(selectedRow));
tableModel.removeNews(selectedRow);
JOptionPane
.showInternalMessageDialog(
jContentPane,
&quot;The news has been selected successfully deleted&quot;,
&quot;News out!&quot;,
JOptionPane.OK_OPTION,
new ImageIcon(
getClass()
.getResource(
Home.URL_IMAGES
+ &quot;Ok48.png&quot;)));
azzeraForm();
} catch (Exception ex) {
JLabel error = new JLabel(
&quot;&lt;html&gt; &lt;h2&gt; Unable to communicate with the server eTour. &lt;/h2&gt;&quot;
+ &quot;&lt;h3&gt; &lt;u&gt; Delete operation request can not be completed. &lt;/u&gt; &lt;/h3&gt;&quot;
+ &quot;&lt;p&gt; Please try again later. &lt;/p&gt;&quot;
+ &quot;&lt;p&gt; If the error persists, please contact technical support. &lt;/p&gt;&quot;
+ &quot;&lt;p&gt; We apologize for the inconvenience. &lt;/html&gt;&quot;);
ImageIcon err = new ImageIcon(getClass()
.getResource(
Home.URL_IMAGES + &quot;error48.png&quot;));
JOptionPane.showMessageDialog(JDesktopPane, error,
&quot;Error!&quot;, JOptionPane.ERROR_MESSAGE, err);
}
}
}
});
}
return btnEliminaN;
}

/**
* This method initializes the panel that realizes the interface side
* Right of news management.
*
* @Return javax.swing.JPanel - the right panel.
*/
private JPanel getRightPanel() {
if (null == rightPanel) {
rightPanel = new JPanel();
rightPanel.setLayout(new GridBagLayout());
GridBagConstraints g = new GridBagConstraints();
g.fill = GridBagConstraints.BOTH;
g.gridx = 0;
g.gridy = 0;
g.weighty = 0.7;
rightPanel.add(getFormNews(), g);
g.weighty = 0.3;
g.gridy = 1;
rightPanel.add(getPanelHelp(), g);

}
return rightPanel;
}

/**
* This method initializes the form for entering and editing a
* News.
*
* @Return javax.swing.JPanel - the format
*/
private JPanel getFormNews() {
if (null == formNews) {
formNews = new JPanel(new GridBagLayout());
formNews.setBorder(BorderFactory.createTitledBorder(BorderFactory
.createLineBorder(new Color(51, 102, 255), 3),
&quot;New News&quot;, TitledBorder.DEFAULT_JUSTIFICATION,
TitledBorder.DEFAULT_POSITION, new Font(&quot;Dialog&quot;,
Font.BOLD, 12), new Color(0, 102, 204)));
GridBagConstraints g = new GridBagConstraints();
g.anchor = GridBagConstraints.CENTER;
g.gridx = 0;
g.gridy = 0;
g.weighty = 0.1;
g.gridwidth = 1;
g.gridheight = 1;
g.insets = new Insets(5, 5, 5, 5);
formNews.add(new JLabel(&quot;Text of the news:&quot;), g);
labelCaratteri = new JLabel(&quot;# Characters: 200&quot;);
g.gridx = 1;
formNews.add(labelCaratteri, g);
g.gridx = 0;
g.gridwidth = 2;
g.gridy = 1;
g.weighty = 0.3;
g.fill = GridBagConstraints.VERTICAL;
JScrollPane scrollTesto = new JScrollPane(getTestoNews());
scrollTesto
.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);
formNews.add(scrollTesto, g);
g.weighty = 0.1;
g.gridy = 2;
g.fill = GridBagConstraints.NONE;
formNews.add(new JLabel(&quot;Priority:&quot;), g);
g.gridy = 3;
formNews.add(getPrSlider(), g);
JPanel nuovo = new JPanel(new FlowLayout());
nuovo.add(new JLabel(&quot;Length of news :&quot;));
durataNews = new JComboBox();
for (int i = 0; i &lt;= 60; i++) {
durataNews.addItem(&quot;&quot; + i);
}
durataNews.setSelectedIndex(0);
durataNews.setEditable(false);
durataNews.setName(&quot;duration&quot;);
durataNews.addMouseListener(newsHelp);
nuovo.add(durataNews);
nuovo.add(new JLabel(&quot;days&quot;));
g.gridy = 4;
g.fill = GridBagConstraints.HORIZONTAL;
formNews.add(nuovo, g);
g.gridwidth = 1;
g.gridy = 5;
formNews.add(getBtnInsertModify(), g);
g.gridx = 1;
formNews.add(getBtnReset(), g);
}
return formNews;
}

/**
* This method initializes the slider to set the priority of a
* News.
*
* @Return javax.swing.JSlider - the slider with ticks from 1 to 5.
*/
private JSlider getPrSlider() {
if (null == prSlider) {
prSlider = new JSlider(JSlider.HORIZONTAL, 5, 1);
prSlider.setMinimum(1);
prSlider.setMaximum(5);
prSlider.setMajorTickSpacing(1);
prSlider.setLabelTable(prSlider.createStandardLabels(1));
prSlider.setCursor(Cursor.getPredefinedCursor(Cursor.HAND_CURSOR));
prSlider.setName(&quot;priority&quot;);
prSlider.addMouseListener(newsHelp);
prSlider.setPaintLabels(true);
prSlider.setPaintTicks(true);
prSlider.setPaintTicks(true);
prSlider.setSnapToTicks(true);
}
return prSlider;
}

/**
* This method initializes the radio button for submission of the form
* Insert / edit.
*
* @Return javax.swing.JButton - the button of submission of the form.
*/
private JButton getBtnInsertModify() {
if (null == btnInsertModify) {
btnInsertModify = new JButton();
btnInsertModify.setText(&quot;Insert&quot;);
btnInsertModify.setIcon(new ImageIcon(getClass().getResource(
Home.URL_IMAGES + &quot;nuovaNews16.png&quot;)));
btnInsertModify.setCursor(Cursor
.getPredefinedCursor(Cursor.HAND_CURSOR));
btnInsertModify.setName(&quot;btnInserisci&quot;);
btnInsertModify.addMouseListener(newsHelp);
btnInsertModify.setFont(new Font(&quot;Dialog&quot;, Font.BOLD, 12));
btnInsertModify.setHorizontalTextPosition(SwingConstants.TRAILING);
btnInsertModify.addActionListener(new ActionListener() {

public void actionPerformed(ActionEvent pEvent) {
if (testoNews.getText().length() == 0) {
JOptionPane.showInternalMessageDialog(jContentPane,
&quot;The text of a news can not be empty!&quot;,
&quot;Error New News&quot;, JOptionPane.ERROR_MESSAGE,
new ImageIcon(getClass().getResource(
Home.URL_IMAGES + &quot;error32.png&quot;)));
return;
}
if (idNews != -1) // We're making a change
{
// Construction of the dialog for confirmation of
// Edit
JPanel root = new JPanel(new BorderLayout());
JLabel message = new JLabel(
&quot;Changing the selected news with&quot;
+ &quot;New data?&quot;);
message.setFont(new Font(&quot;Dialog&quot;, Font.BOLD, 14));
JLabel avviso = new JLabel(
&quot;The previous data can not be more recovered.&quot;,
SwingConstants.CENTER);
avviso.setIcon(new ImageIcon(getClass().getResource(
Home.URL_IMAGES + &quot;warning16.png&quot;)));
root.add(message, BorderLayout.NORTH);
root.add(avviso, BorderLayout.CENTER);
String[] options = {&quot;Edit&quot;, &quot;Cancel&quot;};
// The dialog screen appears
int choice = JOptionPane
.showInternalOptionDialog(
jContentPane,
root,
&quot;Confirmation Change News&quot;,
JOptionPane.YES_NO_OPTION,
JOptionPane.QUESTION_MESSAGE,
new ImageIcon(getClass().getResource(
Home.URL_IMAGES
+ &quot;ModificaNews48.png&quot;)),
options, options[1]);
// If you chose to confirm the change
if (choice == JOptionPane.YES_OPTION) {
try {
Date scadenza = new Date();
scadenza.setDate(scadenza.getDate()
+ durataNews.getSelectedIndex());
BeanNews nuovo = new BeanNews(testoNews
.getText(), new Date(), scadenza,
prSlider.getValue(), idNews);
gestioneNews.modificaNews(nuovo);
tableModel.updateNews(nuovo);
JOptionPane
.showInternalMessageDialog(
jContentPane,
&quot;The news has been changed successfully selected.&quot;,
&quot;News changed!&quot;,
JOptionPane.OK_OPTION,
new ImageIcon(
getClass()
.getResource(
Home.URL_IMAGES
+ &quot;Ok48.png&quot;)));
} catch (Exception ex) {
JLabel error = new JLabel(
&quot;&lt;html&gt; &lt;h2&gt; Unable to communicate with the server eTour. &lt;/h2&gt;&quot;
+ &quot;&lt;h3&gt; &lt;u&gt; Change operation request can not be completed. &lt;/u&gt; &lt;/h3&gt;&quot;
+ &quot;&lt;p&gt; Please try again later. &lt;/p&gt;&quot;
+ &quot;&lt;p&gt; If the error persists, please contact technical support. &lt;/p&gt;&quot;
+ &quot;&lt;p&gt; We apologize for the inconvenience. &lt;/html&gt;&quot;);
ImageIcon err = new ImageIcon(
getClass()
.getResource(
Home.URL_IMAGES
+ &quot;Error48.png&quot;));
JOptionPane.showMessageDialog(JDesktopPane,
error, &quot;Error!&quot;,
JOptionPane.ERROR_MESSAGE, err);
}
}
} else
// We are posting
{
Date scadenza = new Date();
scadenza.setDate(scadenza.getDate()
+ durataNews.getSelectedIndex());
BeanNews nuovo = new BeanNews(testoNews.getText(),
new Date(), scadenza, prSlider.getValue(), 33);
try {
boolean ok = gestioneNews.inserisciNews(nuovo);
if (ok) {
caricaTabella();
tableModel.insertNews(nuovo);
JOptionPane
.showInternalMessageDialog(
jContentPane,
&quot;The news is selected correctly inserted into the system.&quot;,
&quot;New news!&quot;,
JOptionPane.OK_OPTION,
new ImageIcon(
getClass()
.getResource(
Home.URL_IMAGES
+ &quot;NuovaNews48.png&quot;)));
}
} catch (RemoteException e) {
JLabel error = new JLabel(
&quot;&lt;html&gt; &lt;h2&gt; Unable to communicate with the server eTour. &lt;/h2&gt;&quot;
+ &quot;&lt;h3&gt; &lt;u&gt; Insertion operation request can not be completed. &lt;/u&gt; &lt;/h3&gt;&quot;
+ &quot;&lt;p&gt; Please try again later. &lt;/p&gt;&quot;
+ &quot;&lt;p&gt; If the error persists, please contact technical support. &lt;/p&gt;&quot;
+ &quot;&lt;p&gt; We apologize for the inconvenience. &lt;/html&gt;&quot;);
ImageIcon err = new ImageIcon(getClass()
.getResource(
Home.URL_IMAGES + &quot;error48.png&quot;));
JOptionPane.showMessageDialog(JDesktopPane, error,
&quot;Error!&quot;, JOptionPane.ERROR_MESSAGE, err);
}
}
tableModel.fireTableDataChanged();
azzeraForm();
}
});

}
return btnInsertModify;
}

/**
* This method initializes the button to clear the form or
* Cancel editing actions on a selected news.
*
* @Return javax.swing.JButton - the button above.
*/
private JButton getBtnReset() {
if (null == btnReset) {
btnReset = new JButton();
btnReset.setText(&quot;Clear&quot;);
btnReset.setHorizontalTextPosition(SwingConstants.LEADING);
btnReset.setPreferredSize(new Dimension(103, 26));
btnReset.setIcon(new ImageIcon(getClass().getResource(
Home.URL_IMAGES + &quot;azzera16.png&quot;)));
btnReset.setCursor(Cursor.getPredefinedCursor(Cursor.HAND_CURSOR));
btnReset.setName(&quot;btnAzzera&quot;);
btnReset.addMouseListener(newsHelp);
btnReset.addActionListener(new ActionListener() {
public void actionPerformed(ActionEvent arg0) {
azzeraForm();
}
});
}
return btnReset;
}

/**
* This method initializes the panel's online help.
*
* @Return javax.swing.JPanel
*/
private JPanel getPanelHelp() {
if (null == panelHelp) {
panelHelp = new JPanel();
panelHelp.setLayout(new BorderLayout());
panelHelp.setBorder(BorderFactory.createTitledBorder(BorderFactory
.createLineBorder(new Color(51, 102, 255), 3),
&quot;Help&quot;, TitledBorder.DEFAULT_JUSTIFICATION,
TitledBorder.DEFAULT_POSITION, new Font(&quot;Dialog&quot;,
Font.BOLD, 12), new Color(0, 102, 204)));
textGuida.setEditable(false);
textGuida.setContentType(&quot;text/html&quot;);
textGuida.setOpaque(false);
textGuida
.setText(&quot;&lt;html&gt; Move your mouse pointer over a control&quot;
+ &quot;Of interest to display the context-sensitive help. &lt;/html&gt;&quot;);
textGuida.setName(&quot;textGuida&quot;);
textGuida.addMouseListener(newsHelp);
panelHelp.setPreferredSize(new Dimension(200, 100));
panelHelp.add(textGuida, BorderLayout.CENTER);
}
return panelHelp;
}

/**
* This method initializes the table with all the news these
* In the system.
*
* @Return javax.swing.JTable
*/
private JScrollPane getTableNews() {
if (null == tableNews) {
TableModel = new NewsTableModel();
tableNews = new ScrollableTable(TableModel);
tableNews.setRowHeight(64);
tableNews.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
tableNews.setSelectionBackground(new Color(0xe6, 0xe6, 0xFA));
tableNews.setColumnSelectionAllowed(false);
ListSelectionModel selectionModel = tableNews.getSelectionModel();
selectionModel.addListSelectionListener(new ListSelectionListener() {
public void valueChanged(ListSelectionEvent event) {
int selectedRow = tableNews.getSelectedRow();
btnModificaN.setEnabled((selectedRow != -1) ? true : false);
btnEliminaN.setEnabled((selectedRow != -1) ? true : false);
}
});
tableNews.addKeyListener(new KeyAdapter() {
public void keyPressed(KeyEvent pKey) {
int keyCode = pKey.getKeyCode();
if (keyCode == KeyEvent.VK_ENTER) {
btnModificaN.doClick();
} else if ((keyCode == KeyEvent.VK_CANCEL)
|| (keyCode == KeyEvent.VK_BACK_SPACE)) {
btnEliminaN.doClick();
}
}
});

scrollTableNews = new JScrollPane();
scrollTableNews.setViewportView(tableNews);
scrollTableNews
.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);
}
return scrollTableNews;
}

/**
* This method initializes the text area that contains the text of a news.
*
* @Return javax.swing.JTextArea - the text area.
*/
private JTextArea getTestoNews() {
if (null == testoNews) {
testoNews = new JTextArea();
testoNews.setWrapStyleWord(true);
testoNews.setLineWrap(true);
testoNews.setBorder(BorderFactory.createLoweredBevelBorder());
testoNews.setColumns(18);
testoNews.setLineWrap(true);
testoNews.setRows(4);
testoNews.setDocument(new LimitedDocument(200));
testoNews.setName(&quot;text&quot;);
testoNews.addMouseListener(newsHelp);
testoNews.addKeyListener(new KeyAdapter() {
public void keyTyped(KeyEvent pKeyEvent) {
char keyChar = pKeyEvent.getKeyChar();
if (Character.isDigit(keyChar)
|| Character.isLetter(keyChar)
|| Character.isWhitespace(keyChar)) {
int len = testoNews.getText().length();
if (len != 200) {
labelCaratteri
.setText(&quot;# Characters&quot;
+ (200 - (testoNews.getText()
.length() + 1)));
}
}
}

public void keyPressed(KeyEvent pKeyEvent) {
int keyCode = pKeyEvent.getKeyCode();
if (keyCode == KeyEvent.VK_CANCEL
|| keyCode == KeyEvent.VK_BACK_SPACE) {
int len = testoNews.getText().length();
if (len != 0) {
labelCaratteri.setText(&quot;# Characters&quot;
+ (200 - len + 1));
}
}
}
});

}
return testoNews;
}

/**
* This method resets the form fields.
*/
private void azzeraForm() {
btnInsertModify.setText(&quot;Insert&quot;);
btnReset.setText(&quot;Clear&quot;);
btnReset.setIcon(new ImageIcon(getClass().getResource(
Home.URL_IMAGES + &quot;azzera16.png&quot;)));
formNews.setBorder(BorderFactory.createTitledBorder(BorderFactory
.createLineBorder(new Color(51, 102, 255), 3), &quot;New News&quot;,
TitledBorder.DEFAULT_JUSTIFICATION,
TitledBorder.DEFAULT_POSITION,
new Font(&quot;Dialog&quot;, Font.BOLD, 12), new Color(0, 102, 204)));
durataNews.setSelectedIndex(0);
testoNews.setText(&quot;&quot;);
tableNews.clearSelection();
prSlider.setValue(1);
labelCaratteri.setText(&quot;# Characters: 200&quot;);
idNews = -1;
}

/**
* This method imports the news downloaded from the server in the table.
*/
private void caricaTabella() {
ArrayList&lt;BeanNews&gt; news = null;
try {
news = gestioneNews.ottieniAllNews();
}
// If an error displays an error message.
catch (RemoteException e) {
JLabel error = new JLabel(
&quot;&lt;html&gt; &lt;h2&gt; Unable to communicate with the server eTour. &lt;/h2&gt;&quot;
+ &quot;The list of &lt;h3&gt; &lt;u&gt; News is not loaded. &lt;/u&gt; &lt;/h3&gt;&quot;
+ &quot;&lt;p&gt; Please try again later. &lt;/p&gt;&quot;
+ &quot;&lt;p&gt; If the error persists, please contact technical support. &lt;/p&gt;&quot;
+ &quot;&lt;p&gt; We apologize for the inconvenience. &lt;/html&gt;&quot;);
ImageIcon err = new ImageIcon(getClass().getResource(
Home.URL_IMAGES + &quot;error48.png&quot;));
JOptionPane.showInternalMessageDialog(this, error, &quot;Error!&quot;,
JOptionPane.ERROR_MESSAGE, err);
} finally {
TableModel = new NewsTableModel(news);
tableNews.setModel(TableModel);
// Text of news
tableNews.getColumnModel().getColumn(0).setPreferredWidth(320);
tableNews.getColumnModel().getColumn(0).setCellRenderer(
new TestoNewsRenderer());
// Priority
tableNews.getColumnModel().getColumn(1).setPreferredWidth(100);
tableNews.getColumnModel().getColumn(1).setCellRenderer(
new PrioritaRenderer());
// Date of entry
tableNews.getColumnModel().getColumn(2).setPreferredWidth(80);
// End Date
tableNews.getColumnModel().getColumn(3).setPreferredWidth(80);
}
}
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_NewsTableModelTest</id>
      <content>/**
* Class tests for NewsTableModel
*
* @Author Mario Gallo
* @Version 0.1
*
* (c) 2007 eTour Project - Copyright by DMI SE @ SA Lab - University of Salerno
*/
package unisa.gps.etour.gui.operatoreagenzia.tables.test;

import java.util.ArrayList;
import java.util.Date;

import unisa.gps.etour.bean.BeanNews;
import unisa.gps.etour.gui.operatoreagenzia.tables.NewsTableModel;
import junit.framework.TestCase;

public class TestCase extends NewsTableModelTest {

private NewsTableModel tableModel;
private BeanNews aNews;
private BeanNews aNewsModificata;

public NewsTableModelTest(String pName) {
super(pName);
aNews = new BeanNews(&quot;An example of news&quot;, new Date(), new Date(), 2, 1);
aNewsModificata = new BeanNews(&quot;A news amended sample&quot;, new Date(), new Date(), 3, 1);
}

protected void setUp() throws Exception {
super.setUp();
tableModel = new NewsTableModel();
}

/**
* Verify the behavior of the manufacturer with an ArrayList of BeanNews.
*/
public void testCostruttoreConArrayList() {
ArrayList&lt;BeanNews&gt; test = new ArrayList&lt;BeanNews&gt;();
for (int i = 0; i &lt; 10; i++) {
test.add(new BeanNews(&quot;text&quot; + i, new Date(), new Date(), 5, i));
}
tableModel = new NewsTableModel(test);
for (int i = 0; i &lt; 10; i++) {
assertSame(test.get(i).getId(), tableModel.getID(i));
}
}

/**
* Verify the manufacturer with an ArrayList Compor zero.
*/
public void testCostruttoreConArrayListNull() {
tableModel = new NewsTableModel(null);
}

/**
* Verify the behavior of the manufacturer with an empty ArrayList.
*/
public void testCostruttoreConArrayListVuoto() {
tableModel = new NewsTableModel(new ArrayList&lt;BeanNews&gt;());
}

/**
* Verify the behavior of the method with the correct parameters.
*/
public void testGetValueAtParametriCorretti() {
// Put bean in two model test.
tableModel.insertNews(aNews);
tableModel.insertNews(aNewsModificata);

// Verify the data entered.
assertSame(aNews.getNews(), tableModel.getValueAt(0, 0));
assertSame(aNews.getPriorita(), tableModel.getValueAt(0, 1));
assertSame(aNewsModificata.getNews(), tableModel.getValueAt(1, 0));
assertSame(aNewsModificata.getPriorita(), tableModel.getValueAt(1, 1));
}

/**
* Verify Compor the method with an index row fold.
*/
public void testGetValueAtRigaSballata() {
try {
tableModel.getValueAt(12, 0);
fail(&quot;Should be thrown&quot;);
}
catch (IllegalArgumentException success) {
}
}

/**
* Verify Compor of the method with a column index busted.
*/
public void testGetValueAtColonnaSballata() {
try {
tableModel.getValueAt(0, -121334);
fail(&quot;Should be thrown&quot;);
}
catch (IllegalArgumentException success) {
}
}

/**
* Verify Compor method with proper parameter.
*/
public void testInsertNewsParametroCorretto() {
tableModel.insertNews(aNews);
assertSame(aNews.getId(), tableModel.getID(0));
}

/**
* Verify Compor method with parameter to null
*/
public void testInsertNewsParametroNull() {
try {
tableModel.insertNews(null);
fail(&quot;Should be thrown&quot;);
}
catch (IllegalArgumentException success) {
}
}

/**
* Verify Compor method with proper parameter.
*/
public void testUpdateNewsParametroCorretto() {
tableModel.insertNews(aNews);
tableModel.updateNews(aNewsModificata);
assertSame(aNewsModificata.getNews(), tableModel.getValueAt(0, 0));
assertSame(aNewsModificata.getPriorita(), tableModel.getValueAt(0, 1));
assertSame(aNewsModificata.getId(), tableModel.getID(0));
}

/**
* Verify Compor method with parameter to null
*/
public void testUpdateNewsParametroNull() {
try {
tableModel.updateNews(null);
fail(&quot;Should be thrown&quot;);
}
catch (IllegalArgumentException success) {
}
}

/**
* Verify Compor method with proper parameter.
*/
public void testRemoveNewsParametroCorretto() {
tableModel.insertNews(aNews);
assertSame(aNews.getId(), tableModel.removeNews(0));
}

/**
* Verify Compor of the method with row index busted.
*/
public void testRemoveNewsRigaSballata() {
try {
tableModel.removeNews(-1231);
fail(&quot;Should be thrown&quot;);
}
catch (IllegalArgumentException success) {
}
}
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_OperatoreAgenzia</id>
      <content>package beans;

import java.sql.Date;

public class OperatoreAgenzia {
private String Name, LastName, CittÃ Residenza, Phone, Zip, Address, Email, Password, username;
private Date DoB;

public OperatoreAgenzia() {}

public OperatoreAgenzia(String name, String surname, String city, String phone, String cap, String address, String email, String pass, String user, Date data) {
this.Nome = name;
this.Cognome = surname;
this.CittÃ Residenza = city;
this.Telefono = phone;
this.Cap = cap;
this.Indirizzo = address;
this.Email = email;
this.password = pass;
this.Username = user;
this.DataNascita = data;
}

public void setNome(String par1) {
this.Nome = par1;
}

public String getName() {
return Name;
}

public void setCognome(String par1) {
this.Cognome = par1;
}

public String getCognome() {
return Name;
}

public void setCittÃ Residenza(String par1) {
this.CittÃ Residenza = par1;
}

public String getCittÃ Residenza() {
return CittÃ Residenza;
}

public void setTelefono(String par1) {
this.Telefono = par1;
}

public String getTelefono() {
return Phone;
}

public void setCap(String par1) {
this.Cap = par1;
}

public String getCap() {
return Zip;
}

public void setIndirizzo(String par1) {
this.Indirizzo = par1;
}

public String getIndirizzo() {
return Address;
}

public void setEmail(String par1) {
this.Email = par1;
}

public String getEmail() {
return Email;
}

public void setPassword(String par1) {
this.password = par1;
}

public String getPassword() {
return Password;
}

public void setUsername(String par1) {
this.Username = par1;
}

public String GetUserName() {
return username;
}

public void setDataNascita(Date par1) {
this.DataNascita = par1;
}

public Date getDataNascita() {
return DoB;
}
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_PRNode</id>
      <content>package unisa.gps.etour.gui.operatoreagenzia.tables;

import javax.swing.tree.DefaultMutableTreeNode;

/**
* &lt;b&gt;PRNode&lt;/b&gt;
* &lt;p&gt;This class creates a node in a JTree to store
* Information for a refreshment.&lt;/p&gt;
*
* @see javax.swing.JTree;
* @see javax.swing.tree.DefaultMutableTreeNode;
* @version 1.0
* @author Mario Gallo
*/
public class PRNode extends DefaultMutableTreeNode {
private int id;

public PRNode() {
super();
}

/**
* Create a node with the name of refreshment and
* Your id supplied as parameters.
*
* @param pNome String - the name of refreshment.
* @param pid int - the id of refreshment.
* @throws IllegalArgumentException - if the name provided as input is invalid.
*/
public PRNode(String pNome, int pid) throws IllegalArgumentException {
super();
if (pNome == null || pNome.equals(&quot;&quot;)) {
throw new IllegalArgumentException(
&quot;Name of refreshment supplied invalid input.&quot;);
}
setUserObject(pNome);
id = pid;
}

/**
* Returns the id of the point of comfort for which information
* Are stored in this node.
*
* @return int - the id of refreshment.
*/
public int getID() {
return id;
}

/**
* Stores the id of the refreshment provided input.
*
* @param pid int - an ID of an eating place.
*/
public void setID(int pid) {
id = pid;
}

/**
* Return the name of refreshment.
*
* @return String - the name of refreshment.
*/
public String getName() {
return (String) super.getUserObject();
}

/**
* Stores the name of the refreshment provided input.
*
* @param pNome String - the name of a refreshment.
* @throws IllegalArgumentException - if the name provided as input is invalid.
*/
public void setNome(String pNome) throws IllegalArgumentException {
if (pNome == null || pNome.equals(&quot;&quot;)) {
throw new IllegalArgumentException(
&quot;Name of refreshment supplied invalid input.&quot;);
}
setUserObject(pNome);
}
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_PrioritaRenderer</id>
      <content>/**
* PrioritaRenderer.java
*
* 1.0
*
* 22/05/2007
*
* 2007 eTour Project - Copyright by SE @ SA Lab - DMI University of Salerno
*/
package unisa.gps.etour.gui.operatoreagenzia.tables;

import java.awt.Component;
import javax.swing.JSlider;
import javax.swing.JTable;
import javax.swing.table.TableCellRenderer;

/**
* &lt;b&gt; PrioritRenderer &lt;/b&gt;
* &lt;p&gt; This class creates a custom renderer JSlider as
* Of the priorities in the table of news. &lt;/p&gt;
*
* @version 1.0
* @see javax.swing.JSlider
* @see javax.swing.table.TableCellRenderer
* @author Mario Gallo
*
*/
public class PrioritaRenderer extends JSlider implements TableCellRenderer {
/**
* This default constructor.
*
*/
public PrioritaRenderer() {
setOpaque(true);
setOrientation(HORIZONTAL);
setMinimum(1);
setMaximum(5);
setLabelTable(createStandardLabels(1));
setMajorTickSpacing(1);
setPaintTicks(true);
}

/**
* This method returns the display component of the cell identified
* From the row and column provided input.
*
* @param pTable JTable - the table.
* @param pValue Object - the object contained in the selected cell.
* @param pIsSelected boolean - true if the object selected.
* False otherwise.
* @param pHasFocus boolean - true if the object has the focus.
* False otherwise.
* @param pRow int - the row index.
* @param pColumn int - the index of the column.
* @return Component - the component to display
*/
public Component getTableCellRendererComponent(JTable pTable, Object pValue,
boolean pIsSelected, boolean pHasFocus, int pRow, int pColumn) throws IllegalArgumentException {
if (!(pValue instanceof Integer)) {
throw new IllegalArgumentException(&quot;unexpected value cell&quot;);
}
int value = (Integer) pValue;
if (value &lt; 1 || value &gt; 5) {
throw new IllegalArgumentException(&quot;Illegal value cell.&quot;);
}
if (pIsSelected) {
setBackground(pTable.getSelectionBackground());
} else {
setBackground(pTable.getBackground());
}
setValue(value);
return this;
}
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_PuntiDiRistoro</id>
      <content>package unisa.gps.etour.gui.operatoreagenzia;

import java.awt.BorderLayout;

import javax.swing.JDesktopPane;
import javax.swing.JPanel;
import javax.swing.JInternalFrame;
import java.awt.Dimension;
import javax.swing.ImageIcon;
import java.awt.GridBagLayout;
import javax.swing.JToolBar;
import javax.swing.JLabel;

import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;

import javax.swing.JCheckBox;
import javax.swing.BorderFactory;
import java.awt.Color;
import javax.swing.border.BevelBorder;
import javax.swing.JButton;
import java.awt.GridBagConstraints;
import java.awt.Point;
import javax.swing.JScrollPane;
import javax.swing.border.TitledBorder;
import javax.swing.event.ListSelectionEvent;
import javax.swing.event.ListSelectionListener;
import javax.swing.table.DefaultTableCellRenderer;

import java.awt.Font;
import javax.swing.JTextPane;
import javax.swing.JTextField;
import java.awt.Insets;
import java.util.Date;

import javax.swing.SwingConstants;

import unisa.gps.etour.bean.BeanBeneCulturale;
import unisa.gps.etour.bean.BeanPuntoDiRistoro;
import unisa.gps.etour.bean.BeanTag;
import unisa.gps.etour.bean.util.Punto3D;

import javax.swing.JTable;
import java.awt.Rectangle;

public class PuntiDiRistoro extends JInternalFrame {

private Dimension SIZE;
private JPanel jContentPane = null;
private JPanel RightPanel = null;
private JToolBar toolbarPR = null;
private JLabel status = null;
private JPanel CentrePanel = null;
private JButton btnSkeda = null;
private JButton btnModifica = null;
private JButton btnElimina = null;
private JScrollPane JScrollPane = null;
private JPanel HelpPanel = null;
private JTextPane jTextPane = null;
private JScrollPane PannelloTag = null;
private JButton btnRicerca2 = null;
private JButton btnAzzera2 = null;
private JPanel RicercaPanel = null;
private JLabel LabelPr = null;
private JTextField nomePR = null;
private JLabel LabelTag = null;
private JTable TablePr = null;
private JDesktopPane JDesktopPane;
private PuntiDiRistoro internalFrame;
private JButton btnAttiva = null;
private JButton btnStorico = null;

/**
* This is the default constructor xxx
*/
public PuntiDiRistoro() {
super();
initialize();
}

/**
* This method initializes this
*
* @return void
*/
private void initialize() {
SIZE = new Dimension(700, 480);
setPreferredSize(SIZE);
this.setSize(new Dimension(700, 480));
this.setResizable(true);
this.setClosable(true);
this.setTitle(&quot;Refreshments&quot;);
this.setFrameIcon(new ImageIcon(getClass().getResource(&quot;/interfacceAgenzia/images/PR.png&quot;)));
this.setIconifiable(true);
this.setMaximizable(true);
this.setContentPane(getJContentPane());
}

/**
* This method initializes jContentPane
*
* @return javax.swing.JPanel
*/
private JPanel getJContentPane() {
if (jContentPane == null) {
jContentPane = new JPanel();
jContentPane.setLayout(new BorderLayout());
jContentPane.add(getRightPanel(), BorderLayout.EAST);
jContentPane.add(getToolbarPR(), BorderLayout.NORTH);
jContentPane.add(getCentrePanel(), BorderLayout.CENTER);
}
return jContentPane;
}

/**
* This method initializes RightPanel
*
* @return javax.swing.JPanel
*/
private JPanel getRightPanel() {
if (RightPanel == null) {
RightPanel = new JPanel();
RightPanel.setLayout(new BorderLayout());
RightPanel.add(getHelpPanel(), BorderLayout.CENTER);
RightPanel.add(getRicercaPanel(), BorderLayout.CENTER);
}
return RightPanel;
}

/**
* This method initializes jJToolBarBar
*
* @return javax.swing.JToolBar
*/
private JToolBar getToolbarPR() {
if (toolbarPR == null) {
toolbarPR = new JToolBar();
toolbarPR.setLayout(null);
toolbarPR.setPreferredSize(new Dimension(1, 49));
toolbarPR.setFloatable(false);
toolbarPR.add(getBtnAttiva());
toolbarPR.addSeparator();
toolbarPR.add(getBtnStorico());
toolbarPR.addSeparator();
toolbarPR.add(getBtnModifica());
toolbarPR.addSeparator();
toolbarPR.add(getBtnSkeda());
toolbarPR.addSeparator();
toolbarPR.add(getBtnElimina());
}
return toolbarPR;
}

/**
* This method initializes CentrePanel
*
* @return javax.swing.JPanel
*/
private JPanel getCentrePanel() {
if (CentrePanel == null) {
GridBagConstraints gridBagConstraints = new GridBagConstraints();
gridBagConstraints.fill = GridBagConstraints.BOTH;
gridBagConstraints.weighty = 1.0;
gridBagConstraints.weightx = 1.0;
CentrePanel = new JPanel();
CentrePanel.setLayout(new GridBagLayout());
CentrePanel.setPreferredSize(new Dimension(1, 30));
CentrePanel.add(getJScrollPane(), gridBagConstraints);
}
return CentrePanel;
}

/**
* This method initializes btnSkeda
*
* @return javax.swing.JButton
*/
private JButton getBtnSkeda() {
if (btnSkeda == null) {
btnSkeda = new JButton();
btnSkeda.setText(&quot;&lt;html&gt;Point Card &lt;br&gt; Refreshments&lt;/html&gt;&quot;);
btnSkeda.setLocation(new Point(16, 3));
btnSkeda.setSize(new Dimension(130, 42));
btnSkeda.setPreferredSize(new Dimension(130, 42));
btnSkeda.setIcon(new ImageIcon(getClass().getResource(&quot;/interfacceAgenzia/images/Browse 1.png&quot;)));
btnSkeda.addActionListener(new ActionListener() {
public void actionPerformed(ActionEvent arg0) {

}
});
}
return btnSkeda;
}

/**
* This method initializes btnModifica
*
* @return javax.swing.JButton
*/
private JButton getBtnModifica() {
if (btnModifica == null) {
btnModifica = new JButton();
btnModifica.setText(&quot;&lt;html&gt;Edit Point &lt;br&gt; Refreshments&lt;/html&gt;&quot;);
btnModifica.setPreferredSize(new Dimension(130, 42));
btnModifica.setMnemonic(KeyEvent.VK_UNDEFINED);
btnModifica.setEnabled(false);
btnModifica.setBounds(new Rectangle(413, 3, 140, 42));
btnModifica.setIcon(new ImageIcon(getClass().getResource(&quot;/interfacceAgenzia/immagini/edit-32x32.png&quot;)));
}
return btnModifica;
}

/**
* This method initializes btnElimina
*
* @return javax.swing.JButton
*/
private JButton getBtnElimina() {
if (btnElimina == null) {
btnElimina = new JButton();
btnElimina.setText(&quot;&lt;html&gt;Delete item &lt;br&gt; Refreshments&lt;/html&gt;&quot;);
btnElimina.setPreferredSize(new Dimension(130, 42));
btnElimina.setEnabled(false);
btnElimina.setMnemonic(KeyEvent.VK_UNDEFINED);
btnElimina.setBounds(new Rectangle(555, 3, 130, 42));
btnElimina.setIcon(new ImageIcon(getClass().getResource(&quot;/interfacceAgenzia/immagini/edit-delete-32x32.png&quot;)));
}
return btnElimina;
}

/**
* This method initializes JScrollPane
*
* @return javax.swing.JScrollPane
*/
private JScrollPane getJScrollPane() {
if (JScrollPane == null) {
if (TablePr == null) {
/*
* @param pId
* @param pNumeroVoti
* @param pName
* @param pCitta
* @param pTelefono
* @param pDescrizione
* @param pLocalita
* @param pVia
* @param pcap
* @param pProvincia
* @param pPosizione
* @param pOrarioApertura
* @param pOrarioChiusura
* @param pGiornoChiusura
* @param pCostoBiglietto
* @param pMediaVoti
*/

BeanPuntoDiRistoro[] test = new BeanPuntoDiRistoro[30];
for (int i = 0; i &lt; 30; i++) {
test[i] = new BeanPuntoDiRistoro(1, 12, 3.5,
&quot;Arturo&quot;, &quot;Near the sea, great view, romantic and Miao&quot;,
&quot;089203202&quot;, &quot;the mountains&quot;, &quot;Amalfi&quot;, &quot;Via Principe 35&quot;, &quot;84123rd&quot;,
&quot;Salerno&quot;, &quot;1234567898741&quot;, new Punto3D(34,34,34),
new Date(2,23,3), new Date(3,3,4), &quot;Monday&quot;);
}

SitoTableModel new_SitoTableModel = new SitoTableModel(test);

TablePr = new ScrollableTable(new_SitoTableModel);
// Name
TablePr.getColumnModel().getColumn(0).setPreferredWidth(140);
// Description
TablePr.getColumnModel().getColumn(1).setPreferredWidth(80);
// Location
TablePr.getColumnModel().getColumn(2).setPreferredWidth(140);
// City
TablePr.getColumnModel().getColumn(3).setPreferredWidth(80);
// State
TablePr.getColumnModel().getColumn(4).setPreferredWidth(70);
// Number of Votes
TablePr.getColumnModel().getColumn(5).setPreferredWidth(70);
// Average Ratings
TablePr.getColumnModel().getColumn(6).setPreferredWidth(60);
// PosGeo
TablePr.getColumnModel().getColumn(7).setPreferredWidth(30);
TablePr.setDefaultRenderer(String.class, new DefaultTableCellRenderer());
TablePr.setRowHeight(32);
TablePr.setShowVerticalLines(false);
TablePr.setDefaultRenderer(Double.class, new MediaVotiRenderer());
TablePr.setSelectionMode(javax.swing.ListSelectionModel.SINGLE_SELECTION);
TablePr.setSelectionForeground(Color.RED);
TablePr.setSelectionBackground(Color.white);
TablePr.setColumnSelectionAllowed(false);
final javax.swing.ListSelectionModel questo = TablePr.getSelectionModel();
questo.addListSelectionListener(new ListSelectionListener() {
public void valueChanged(ListSelectionEvent event) {
btnElimina.setEnabled(true);
btnModifica.setEnabled(true);
btnAttiva.setEnabled(true);
btnStorico.setEnabled(true);
}
});

TablePr.addKeyListener(new KeyListener() {
public void keyPressed(KeyEvent arg0) {
System.out.println(&quot;keyPressed&quot;);
}

public void keyReleased(KeyEvent arg0) {
System.out.println(&quot;keyRelased&quot;);
}

public void keyTyped(KeyEvent arg0) {
System.out.println(&quot;keyTyped&quot;);
}
});

// private static final String[] headers = {&quot;Name&quot;, &quot;Phone&quot;, &quot;Gone&quot;, &quot;Location&quot;, &quot;City&quot;, &quot;CPC&quot;, &quot;Province&quot;, &quot;Media Votes&quot;, &quot;Number Votes&quot;};
}

JScrollPane = new JScrollPane(TablePr);
JScrollPane.setHorizontalScrollBarPolicy(JScrollPane.HORIZONTAL_SCROLLBAR_ALWAYS);
JScrollPane.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);
}
return JScrollPane;
}

/**
* This method initializes HelpPanel
*
* @return javax.swing.JPanel
*/
private JPanel getHelpPanel() {
if (HelpPanel == null) {
GridBagConstraints gridBagConstraints1 = new GridBagConstraints();
gridBagConstraints1.fill = GridBagConstraints.BOTH;
gridBagConstraints1.gridy = 0;
gridBagConstraints1.weightx = 1.0;
gridBagConstraints1.weighty = 1.0;
gridBagConstraints1.ipadx = 0;
gridBagConstraints1.gridwidth = 1;
gridBagConstraints1.ipady = 0;
gridBagConstraints1.gridx = 0;
HelpPanel = new JPanel();
HelpPanel.setLayout(new GridBagLayout());
HelpPanel.setBorder(BorderFactory.createTitledBorder(BorderFactory.createLineBorder(new Color(51, 153, 255), 3), &quot;Help&quot;, TitledBorder.DEFAULT_JUSTIFICATION, TitledBorder.DEFAULT_POSITION, new Font(&quot;Dialog&quot;, Font.BOLD, 12), new Color(51, 102, 255)));
HelpPanel.setPreferredSize(new Dimension(100, 100));
HelpPanel.add(getJTextPane(), gridBagConstraints1);
}
return HelpPanel;
}

/**
* This method initializes jTextPane
*
* @return javax.swing.JTextPane
*/
private JTextPane getJTextPane() {
if (jTextPane == null) {
jTextPane = new JTextPane();
jTextPane.setPreferredSize(new Dimension(6, 30));
}
return jTextPane;
}

/**
* This method initializes ricercaPanel1
*
* @return javax.swing.JPanel
*/

/**
* This method initializes btnRicerca2
*
* @return javax.swing.JButton
*/
private JButton getBtnRicerca2() {
if (btnRicerca2 == null) {
btnRicerca2 = new JButton();
btnRicerca2.setPreferredSize(new Dimension(98, 26));
btnRicerca2.setText(&quot;Search&quot;);
btnRicerca2.setIcon(new ImageIcon(getClass().getResource(&quot;/unisa/gps/etour/gui/operatoreagenzia/images/Ricerca16.png&quot;)));
}
return btnRicerca2;
}

/**
* This method initializes btnAzzera2
*
* @return javax.swing.JButton
*/
private JButton getBtnAzzera2() {
if (btnAzzera2 == null) {
btnAzzera2 = new JButton();
btnAzzera2.setPreferredSize(new Dimension(98, 26));
btnAzzera2.setIcon(new ImageIcon(getClass().getResource(&quot;/unisa/gps/etour/gui/operatoreagenzia/images/Azzera16.png&quot;)));
btnAzzera2.setText(&quot;Clear&quot;);
btnAzzera2.setHorizontalTextPosition(SwingConstants.LEADING);
}
return btnAzzera2;
}

/**
* This method initializes RicercaPanel
*
* @return javax.swing.JPanel
*/
private JPanel getRicercaPanel() {
if (RicercaPanel == null) {
GridBagConstraints gridBagConstraints5 = new GridBagConstraints();
gridBagConstraints5.fill = GridBagConstraints.BOTH;
gridBagConstraints5.gridy = 4;
gridBagConstraints5.weightx = 1.0;
gridBagConstraints5.weighty = 1.0;
gridBagConstraints5.gridwidth = 2;
gridBagConstraints5.gridx = 0;
GridBagConstraints gridBagConstraints8 = new GridBagConstraints();
gridBagConstraints8.gridwidth = 2;
gridBagConstraints8.insets = new Insets(5, 5, 5, 5);
GridBagConstraints gridBagConstraints7 = new GridBagConstraints();
gridBagConstraints7.gridx = 0;
gridBagConstraints7.insets = new Insets(5, 5, 5, 5);
gridBagConstraints7.gridy = 6;
GridBagConstraints gridBagConstraints6 = new GridBagConstraints();
gridBagConstraints6.gridx = 1;
gridBagConstraints6.gridwidth = 2;
gridBagConstraints6.insets = new Insets(5, 5, 5, 5);
gridBagConstraints6.gridy = 6;
GridBagConstraints gridBagConstraints4 = new GridBagConstraints();
gridBagConstraints4.gridx = 0;
gridBagConstraints4.gridwidth = 2;
gridBagConstraints4.insets = new Insets(5, 5, 5, 5);
gridBagConstraints4.gridy = 3;
LabelTag = new JLabel();
LabelTag.setText(&quot;Select search tags:&quot;);
GridBagConstraints gridBagConstraints3 = new GridBagConstraints();
gridBagConstraints3.fill = GridBagConstraints.VERTICAL;
gridBagConstraints3.gridx = 0;
gridBagConstraints3.gridy = 2;
gridBagConstraints3.gridwidth = 2;
gridBagConstraints3.insets = new Insets(5, 5, 5, 5);
gridBagConstraints3.weightx = 1.0;
LabelPr = new JLabel();
LabelPr.setText(&quot;Name Refreshments:&quot;);
RicercaPanel = new JPanel();
RicercaPanel.setLayout(new GridBagLayout());
RicercaPanel.setBorder(BorderFactory.createTitledBorder(BorderFactory.createLineBorder(new Color(51, 153, 255), 3), &quot;Searching for refreshments:&quot;, TitledBorder.DEFAULT_JUSTIFICATION, TitledBorder.DEFAULT_POSITION, new Font(&quot;Dialog&quot;, Font.BOLD, 12), new Color(51, 102, 255)));
RicercaPanel.add(LabelPr, gridBagConstraints8);
RicercaPanel.add(getNomePR(), gridBagConstraints3);
RicercaPanel.add(LabelTag, gridBagConstraints4);
BeanTag[] test = new BeanTag[8];
test[0] = new BeanTag(0, &quot;castle&quot;, &quot;really a castle&quot;);
test[1] = new BeanTag(1, &quot;stronghold&quot;, &quot;really a hostel&quot;);
test[2] = new BeanTag(3, &quot;Pub&quot;, &quot;really a basket&quot;);
test[3] = new BeanTag(4, &quot;Restaurant&quot;, &quot;really a basket&quot;);
test[4] = new BeanTag(5, &quot;Pizza&quot;, &quot;really a basket&quot;);
test[5] = new BeanTag(6, &quot;Trattoria&quot;, &quot;really a basket&quot;);
test[6] = new BeanTag(7, &quot;range&quot;, &quot;really a basket&quot;);
test[7] = new BeanTag(8, &quot;Romantic&quot;, &quot;really a basket&quot;);
PannelloTag = new TagPanel(test);
PannelloTag.setPreferredSize(new Dimension(180, 40));
RicercaPanel.add(getBtnAzzera2(), gridBagConstraints6);
RicercaPanel.add(getBtnRicerca2(), gridBagConstraints7);
RicercaPanel.add(PannelloTag, gridBagConstraints5);
}
return RicercaPanel;
}

/**
* This method initializes nomePR
*
* @return javax.swing.JTextField
*/
private JTextField getNomePR() {
if (nomePR == null) {
nomePR = new JTextField();
nomePR.setColumns(12);
}
return nomePR;
}

/**
* This method initializes btnAttiva
*
* @return javax.swing.JButton
*/
private JButton getBtnAttiva() {
if (btnAttiva == null) {
btnAttiva = new JButton();
btnAttiva.setText(&quot;&lt;html&gt;Enable &lt;br&gt; Convention&lt;/html&gt;&quot;);
btnAttiva.setPreferredSize(new Dimension(130, 42));
btnAttiva.setSize(new Dimension(130, 42));
btnAttiva.setLocation(new Point(280, 3));
btnAttiva.setMnemonic(KeyEvent.VK_UNDEFINED);
btnAttiva.setEnabled(false);
btnAttiva.setIcon(new ImageIcon(getClass().getResource(&quot;/interfacceAgenzia/immagini/wi0054-32x32.png&quot;)));
}
return btnAttiva;
}

/**
* This method initializes btnStorico
*
* @return javax.swing.JButton
*/
private JButton getBtnStorico() {
if (btnStorico == null) {
btnStorico = new JButton();
btnStorico.setText(&quot;&lt;html&gt;Historical &lt;br&gt; Conventions&lt;/html&gt;&quot;);
btnStorico.setPreferredSize(new Dimension(130, 42));
btnStorico.setBounds(new Rectangle(148, 3, 130, 42));
btnStorico.setEnabled(false);
btnStorico.setIcon(new ImageIcon(getClass().getResource(&quot;/interfacceAgenzia/images/Browse 1.png&quot;)));
btnStorico.addActionListener(new java.awt.event.ActionListener() {
public void actionPerformed(java.awt.event.ActionEvent e) {
new StoricoConvenzioni();
}
});
}
return btnStorico;
}

} // @JVE:decl-index=0:visual-constraint=&quot;10,10&quot;</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_Punto3D</id>
      <content>package unisa.gps.etour.util;

/**
* Bean that contains the coordinates of a point on the surface of the earth &quot;and
* That it realizes the calculation of the distance from the system. The values of
* Coordinates must be represented in radians and must fall in
* Target range: 0 to greek-Pi / 4 for the latitude south of the equator
* 0 to + Pi greek / 4 for the latitude north of the equator from 0 to Pi-greek /
* 2 for the meridian of longitude west of Greenwitch greek from 0 to + Pi / 2
* For the meridian of longitude east of Greenwitch
*
* @Author Mauro Miranda
* @Version 0.1 2007 eTour Project - Copyright by SE @SA Lab DMI University
* Of Salerno
*/

public class Punto3D {
// Radius of the earth
final double EARTH_RADIUS = 6371.0;
private double latitude, longitude, altitude;

public Punto3D() {
latitude = longitude = altitude = 0;
}

public Punto3D(double pLatitudine, double pLongitudine, double pAltitudine) {
latitude = pLatitudine;
longitude = pLongitudine;
altitude = pAltitudine;
}

/**
* Returns the latitude
*
* @Return
*/
public double getLatitudine() {
return latitude;
}

/**
* Sets the latitude
*
* @Param pLatitudine
*/
public void setLatitudine(double pLatitudine) {
this.latitude = pLatitudine;
}

/**
* Returns the longitude
*
* @Return
*/
public double getLongitudine() {
return longitude;
}

/**
* Sets the longitude
*
* @Param pLongitudine
*/
public void setLongitudine(double pLongitudine) {
this.longitude = pLongitudine;
}

/**
* Returns the altitude
*
* @Return
*/
public double getAltitudine() {
return altitude;
}

/**
* Sets the altitude
*
* @Param pAltitudine
*/
public void setAltitudine(double pAltitudine) {
this.altitude = pAltitudine;
}

/**
* Calculate the distance between the point and another point given as argument
*
* @Param p
* @Return
*/
public double distance(Punto3D p) {
double differenzaLongitudine = this.longitude - p.longitude;
double p1 = Math.pow(Math.cos(p.latitude)
* Math.sin(differenzaLongitudine), 2);
double p2 = Math.pow(Math.cos(latitude) * Math.sin(p.latitude)
- Math.sin(latitude) * Math.cos(p.latitude)
* Math.cos(differenzaLongitudine), 2);
double p3 = Math.sin(latitude) * Math.sin(p.latitude)
+ Math.cos(latitude) * Math.cos(p.latitude)
* Math.cos(differenzaLongitudine);
return (Math.atan(Math.sqrt(p1 + p2) / p3) * EARTH_RADIUS);
}

/**
* Method which creates a 3D point from coordinates measured in degrees. The
* 3D point instead represents the coordinates in radians
*
* @Param pLatitudine latitude in degrees
* @Param pLongitudine Longitude in degrees *
* @Param pAltitudine
* @Return Punto3D with the coordinates in radians
*/
public static Punto3D gradiRadianti(double pLatitudine,
double pLongitudine, double pAltitudine) {
Punto3D punto = new Punto3D();
punto.setLatitudine(pLatitudine * Math.PI / 180);
punto.setLongitudine(pLongitudine * Math.PI / 180);
punto.setAltitudine(pAltitudine);
return punto;
}
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_Punto3DRenderer</id>
      <content>package unisa.gps.etour.gui.operatoreagenzia.tables;

import java.awt.Component;
import javax.swing.JLabel;
import javax.swing.JTable;
import javax.swing.SwingConstants;
import javax.swing.table.TableCellRenderer;
import unisa.gps.etour.util.Punto3D;

/**
* &lt;b&gt; Punto3DRenderer &lt;/b&gt;
* &lt;p&gt; This class creates a custom renderer for
* Objects of type Punto3D. &lt;/p&gt;
*
* @see javax.swing.table.TableCellRenderer
* @see unisa.gps.etour.util.Punto3D
* @version 1.0
* @author Mario Gallo
*/
public class Punto3DRenderer implements TableCellRenderer {
/**
* Method that returns the custom component for the
* Display of the data contained in the cell of a table.
*
* @param pTable JTable - the table.
* @param pValue Object - the data.
* @param pSelected boolean --
* &lt;ul&gt;
* &lt;li&gt; &lt;i&gt; True &lt;/i&gt; if the cell is selected.
* &lt;li&gt; &lt;i&gt; False &lt;/i&gt; otherwise.
* &lt;/ul&gt;
* @param pHasFocus boolean --
* &lt;ul&gt;
* &lt;li&gt; &lt;i&gt; True &lt;/i&gt; if the cell has the focus.
* &lt;li&gt; &lt;i&gt; False &lt;/i&gt; otherwise.
* &lt;/ul&gt;
* @param pRow - the line number.
* @param pColumn - the column number.
* @return Component - the component that customizes render the cell.
* @throws IllegalArgumentException - if the value of the cell can not
* Be rendered by this renderer.
*/
public Component getTableCellRendererComponent(JTable pTable,
Object pValue, boolean pSelected, boolean pHasFocus, int pRow,
int pColumn) {
if (!(pValue instanceof Punto3D)) {
throw new IllegalArgumentException(&quot;Value Cella unexpected.&quot;);
}
Punto3D aPoint = (Punto3D) pValue;
String point = aPoint.getLatitudine() + &quot;;&quot;
+ aPoint.getLongitudine() + &quot;;&quot; + aPoint.getAltitudine();
JLabel aLabel = new JLabel(point, SwingConstants.CENTER);
if (pSelected) {
aLabel.setForeground(pTable.getSelectionForeground());
aLabel.setBackground(pTable.getSelectionBackground());
}
return aLabel;
}
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_ReportTableModel</id>
      <content>/* ReportTableModel.java
*
* 1.0
*
* 21/05/2007
*
* (c) 2007 eTour Project - Copyright by SE @ SA Lab - DMI - University of Salerno
*/
package unisa.gps.etour.gui.operatoreagenzia;

import java.util.Vector;
import javax.swing.table.AbstractTableModel;

import unisa.gps.etour.bean.BeanBeneCulturale;
import unisa.gps.etour.bean.BeanPuntoDiRistoro;
import unisa.gps.etour.bean.util.Punto3D;

public class ReportTableModel extends AbstractTableModel {

/**
*
*/
private static final long serialVersionUID = 1L;
private static final String[] headers = 
{&quot;Name&quot;, &quot;Description&quot;, &quot;Address&quot;, &quot;City&quot;, &quot;Province&quot;};
private static final Class[] columnClasses = 
{String.class, String.class, String.class, String.class, String.class};
private Vector&lt;Object[]&gt; data;

public ReportTableModel(BeanBeneCulturale[] bc, BeanPuntoDiRistoro[] pr) {
data = new Vector&lt;Object[]&gt;();
for (int i = 0; i &lt; pr.length; i++) {
Object[] newObj = new Object[5];
newObj[0] = pr[i].getName();
newObj[1] = pr[i].getDescrizione();
newObj[2] = pr[i].getVar();
newObj[3] = pr[i].getCitta();
newObj[4] = pr[i].getProvincia();

setValueAt(newObj, i);
}
for (int i = 0; i &lt; bc.length; i++) {
Object[] newObj = new Object[5];
newObj[0] = bc[i].getName();
newObj[1] = bc[i].getDescrizione();
newObj[2] = bc[i].getVar();
newObj[3] = bc[i].getCitta();
newObj[4] = bc[i].getProvincia();
setValueAt(newObj, pr.length + i);
}
}

public int getColumnCount() {
return headers.length;
}

public int GetRowCount() {
return data.size();
}

public String getColumnName(int col) {
return headers[col];
}

public Object getValueAt(int row, int col) {
return data.get(row)[col];
}

public Class getColumnClass(int col) {
return columnClasses[col];
}

public boolean isCellEditable(int row, int col) {
return false;
}

public void setValueAt(Object value, int row, int col) {
if (row &gt;= GetRowCount()) {
Object[] newObj = new Object[headers.length];
newObj[col] = value;
data.add(newObj);
}
else {
data.get(row)[col] = value;
}
}

public void setValueAt(Object[] value, int row) throws IllegalArgumentException {
if (value.length != headers.length) {
System.out.println(value.length);
System.out.println(headers.length);
throw new IllegalArgumentException();
}
if (row &gt;= GetRowCount()) {
data.add(value);
}
else {
data.remove(row);
data.add(row, value);
}
}
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_Ricerca</id>
      <content>package unisa.gps.etour.control.GestioneRicerche;

import java.rmi.RemoteException;
import java.rmi.server.UnicastRemoteObject;
import java.sql.SQLException;
import java.util.ArrayList;
import java.util.Hashtable;

import unisa.gps.etour.bean.BeanBeneCulturale;
import unisa.gps.etour.bean.BeanPuntoDiRistoro;
import unisa.gps.etour.bean.BeanTag;
import unisa.gps.etour.repository.DBBeneCulturale;
import unisa.gps.etour.repository.DBPuntoDiRistoro;
import unisa.gps.etour.repository.DBTag;
import unisa.gps.etour.repository.IDBBeneCulturale;
import unisa.gps.etour.repository.IDBPuntoDiRistoro;
import unisa.gps.etour.repository.IDBTag;
import unisa.gps.etour.util.ControlloDati;
import unisa.gps.etour.util.MessaggiErrore;
import unisa.gps.etour.util.Punto3D;

public class Search extends UnicastRemoteObject implements IRicerca {

private static final long serialVersionUID = -6009809097302884655L;

public Search() throws RemoteException {
super();
}

// Search Parameters
private int pIdTurista = -1;
private String pParoleChiave;
private double pRaggioMax;
private Punto3D pPosizioneUtente;
private int pElementiPerPagina = -1;
private byte pTipologiaSito = -1;

// Objects for the database connection
private IDBBeneCulturale BeneCulturale = new DBBeneCulturale();
private IDBPuntoDiRistoro PuntoDiRistoro = new DBPuntoDiRistoro();
private IDBTag Tag = new DBTag();

// List of tags obtained
private ArrayList&lt;BeanTag&gt; pTags;

// Search Results pages for partitioned
private Hashtable&lt;Integer, ArrayList&lt;BeanBeneCulturale&gt;&gt; risultatiRicercaBeniCulturali = new Hashtable&lt;Integer, ArrayList&lt;BeanBeneCulturale&gt;&gt;();
private Hashtable&lt;Integer, ArrayList&lt;BeanPuntoDiRistoro&gt;&gt; risultatiRicercaPuntiDiRistoro = new Hashtable&lt;Integer, ArrayList&lt;BeanPuntoDiRistoro&gt;&gt;();

// Quantity of items and pages results in the research phase
private int numeroPagineRisultati = -1;
private int numeroElementiRicerca = -1;

/* (Non-Javadoc)
* @see unisa.gps.etour.control.GestioneRicerche.IRicerca#search(int, java.lang.String, int[], double, int, unisa.gps.etour.util.Punto3D, byte)
*/
public int search(int pIdTurista, String pParoleChiave, int[] pTagsId,
double pRaggioMax, int pElementiPerPagina,
Punto3D pPosizioneUtente, byte pTipologiaSito)
throws RemoteException {
// Reset the parameters of the previous search
azzeraParametri();

// Start checking the correctness of the search parameters
try {
this.pIdTurista = pIdTurista;
this.pTags = arrayToArrayListTag(pTagsId);
this.pParoleChiave = ControlloDati.correggiStringa(pParoleChiave,
true, true, &quot;&quot;, ControlloDati.LUNGHEZZA_MASSIMA);
this.pRaggioMax = pRaggioMax;
this.pPosizioneUtente = pPosizioneUtente;
this.pTipologiaSito = pTipologiaSito;

// If the parameters are valid, I get the number of results
if (pElementiPerPagina &gt; 0
&amp;&amp; ((pTipologiaSito == 0) || (pTipologiaSito == 1))
&amp;&amp; pRaggioMax &gt; 0
&amp;&amp; pPosizioneUtente != null
&amp;&amp; (this.numeroElementiRicerca = ottieniNumeroElementiRicercaSpecializzato()) &gt;= 0) {
this.pElementiPerPagina = pElementiPerPagina;
this.numeroPagineRisultati = calcolaNumeroPagineRicerca();

return this.numeroElementiRicerca;
}

// Otherwise returns -1
else
return -1;
} catch (SQLException e) {
throw new RemoteException(MessaggiErrore.ERRORE_DBMS);
} catch (Exception e) {
throw new RemoteException(MessaggiErrore.ERRORE_SCONOSCIUTO);
}

}

/* (Non-Javadoc)
* @see unisa.gps.etour.control.GestioneRicerche.IRicerca#ottieniPaginaRisultatiBeneCulturale(int)
*/
public BeanBeneCulturale[] ottieniPaginaRisultatiBeneCulturale(int pPagina)
throws RemoteException {
// Check that the type of site is valid and that the page is
// In the range
if ((this.pTipologiaSito == BENE_CULTURALE) &amp;&amp; controllaPagina(pPagina)) {
// Transform the list obtained in array
BeanBeneCulturale[] results = new BeanBeneCulturale[calcolaNumeroElementiPagina(pPagina)];
// Results = ricercaBeniCulturaliPerPagina(pPagina).toArray(
// Results);

results = ricercaPerPagina(pPagina).toArray(results);

return results;
} else
return null;
}

/* (Non-Javadoc)
* @see unisa.gps.etour.control.GestioneRicerche.IRicerca#ottieniPaginaRisultatiPuntoDiRistoro(int)
*/
public BeanPuntoDiRistoro[] ottieniPaginaRisultatiPuntoDiRistoro(int pPagina)
throws RemoteException {
// Check that the type of site is valid and that the page is
// In the range
if ((this.pTipologiaSito == PUNTO_DI_RISTORO)
&amp;&amp; controllaPagina(pPagina)) {
// Transform the list obtained in array
BeanPuntoDiRistoro[] results = new BeanPuntoDiRistoro[calcolaNumeroElementiPagina(pPagina)];
// Results = ricercaPuntiDiRistoroPerPagina(pPagina).toArray(
// Results);

results = ricercaPerPagina(pPagina).toArray(results);

return results;
} else
return null;
}

/* (Non-Javadoc)
* @see unisa.gps.etour.control.GestioneRicerche.IRicerca#ottieniNumeroElementiRicerca()
*/
public int ottieniNumeroElementiRicerca() throws RemoteException {
return numeroElementiRicerca;
}

/* (Non-Javadoc)
* @see unisa.gps.etour.control.GestioneRicerche.IRicerca#ottieniNumeroPagineRicerca()
*/
public int ottieniNumeroPagineRicerca() throws RemoteException {
return numeroPagineRisultati;
}

/**
* Method for returning the number of findings from research
*
* @return number of findings from research. On error
* Returns -1
* @throws SQLException Exception Connecting to Database
*/
private int ottieniNumeroElementiRicercaSpecializzato() throws SQLException {
// Check the type of site and gets the number of results
if (controllaIdTurista()) {
switch (pTipologiaSito) {
case BENE_CULTURALE:
return pIdTurista &gt; 0 ? BeneCulturale
.ottieniNumeroElementiRicercaAvanzata(
this.pIdTurista, this.pParoleChiave,
this.pTags, this.pPosizioneUtente,
this.pRaggioMax) : BeneCulturale
.ottieniNumeroElementiRicerca(this.pParoleChiave,
this.pTags, this.pPosizioneUtente,
this.pRaggioMax);
case PUNTO_DI_RISTORO:
return pIdTurista &gt; 0 ? PuntoDiRistoro
.ottieniNumeroElementiRicercaAvanzata(
this.pIdTurista, this.pParoleChiave,
this.pTags, this.pPosizioneUtente,
this.pRaggioMax) : PuntoDiRistoro
.ottieniNumeroElementiRicerca(this.pParoleChiave,
this.pTags, this.pPosizioneUtente,
this.pRaggioMax);
}
}
return -1;
}

/**
* Method for returning the list of results
*
* @param pNumeroPagina range of results to return
* @return Container sites emerged in the research phase as the interval
* @throws RemoteException Exception Remote
*/
private ArrayList&lt;?&gt; ricercaPerPagina(int pNumeroPagina)
throws RemoteException {

// Declare the list of sites related to the page input
ArrayList&lt;?&gt; risultatiPaginaCorrente = null;
try {
if (controllaIdTurista()) {
// Check the type of site
switch (pTipologiaSito) {
case BENE_CULTURALE:
// If the list has not already been obtained previously
// Search
if ((risultatiPaginaCorrente = risultatiRicercaBeniCulturali
.get(pNumeroPagina)) == null) {
risultatiPaginaCorrente = (ArrayList&lt;?&gt;) (pIdTurista &gt; 0 ? BeneCulturale
.ricercaAvanzata(pIdTurista, pParoleChiave,
pTags, pNumeroPagina,
pElementiPerPagina,
pPosizioneUtente, pRaggioMax)
: BeneCulturale.ricerca(pParoleChiave,
pTags, pNumeroPagina,
pElementiPerPagina,
pPosizioneUtente, pRaggioMax));
risultatiRicercaBeniCulturali
.put(
pNumeroPagina,
(ArrayList&lt;BeanBeneCulturale&gt;) risultatiPaginaCorrente);
}
break;

case PUNTO_DI_RISTORO:
// If the list has not already been obtained previously
// Search
if ((risultatiPaginaCorrente = risultatiRicercaPuntiDiRistoro
.get(pNumeroPagina)) == null) {
risultatiPaginaCorrente = (ArrayList&lt;?&gt;) (pIdTurista &gt; 0 ? PuntoDiRistoro
.ricercaAvanzata(pIdTurista, pParoleChiave,
pTags, pNumeroPagina,
pElementiPerPagina,
pPosizioneUtente, pRaggioMax)
: PuntoDiRistoro.ricerca(pParoleChiave,
pTags, pNumeroPagina,
pElementiPerPagina,
pPosizioneUtente, pRaggioMax));
risultatiRicercaPuntiDiRistoro
.put(
pNumeroPagina,
(ArrayList&lt;BeanPuntoDiRistoro&gt;) risultatiPaginaCorrente);
}
break;
}
}
// Return the results
return risultatiPaginaCorrente;
} catch (SQLException e) {
throw new RemoteException(MessaggiErrore.ERRORE_DBMS);
} catch (Exception e) {
throw new RemoteException(MessaggiErrore.ERRORE_SCONOSCIUTO);
}

}

/**
* Method for calculating the number of pages found at
* Search
*
* @return many pages in the research phase
*/
private int calcolaNumeroPagineRicerca() {
// If the number of pages is greater than or equal to 0 returns the number of
// Pages
if (numeroPagineRisultati &gt;= 0)
return numeroPagineRisultati;
// If the number of elements is a multiple of the number of items per page
// Return their relationship
if ((numeroElementiRicerca % pElementiPerPagina == 0))
return (numeroElementiRicerca / pElementiPerPagina);
// Otherwise returns their relationship + 1
return (numeroElementiRicerca / pElementiPerPagina) + 1;
}

/**
* Method for calculating the number of elements of nell'intevallo
* A given page
*
* @param nPagina interval results
* @return number of elements in a page
*/
private int calcolaNumeroElementiPagina(int nPagina) {
// If page number is the last return their form
if (nPagina == (numeroPagineRisultati - 1))
return (numeroElementiRicerca % pElementiPerPagina);
// Otherwise returns the number of items per page
else
return (pElementiPerPagina);
}

/**
* Method for checking the validity of a page
*
* @param pPagina page to check
* @return true if the page is valid
*/
private boolean controllaPagina(int pPagina) {
// If page number is in the range returns true
return (pPagina &gt;= 0 &amp;&amp; pPagina &lt; numeroPagineRisultati);
}

/**
* Method for checking the correctness of the identifier Tourist
*
* @return true if the identifier is valid, false otherwise
*/
private boolean controllaIdTurista() {
return ((pIdTurista &gt; 0) || (pIdTurista == -1));
}

/**
* Method to reset all the variables related to a search
*
* @return A constant that indicates the correct zero
*/
private int azzeraParametri() {

// Clears all the search parameters
pIdTurista = -1;
pTipologiaSito = -1;
pElementiPerPagina = -1;
numeroElementiRicerca = -1;
numeroPagineRisultati = -1;

risultatiRicercaBeniCulturali.clear();
risultatiRicercaPuntiDiRistoro.clear();

return -1;
}

/**
* Method for the detection and conversion of data tags in struttara List
*
* @param pTagsId list of identifiers Search Tags
* @return List Search Tags
* @throws SQLException
*/
private ArrayList&lt;BeanTag&gt; arrayToArrayListTag(int[] pTagsId)
throws SQLException {
// Initialize the list of Tags
ArrayList&lt;BeanTag&gt; pTags = new ArrayList&lt;BeanTag&gt;();
// If the list of identifiers of the tag is empty I get the tags
if (pTagsId != null) {
BeanTag currentTag = null;
try {

// Loop for the insertion of tags found in the list
for (int i = 0; i &lt; pTagsId.length; i++) {
// If the identifier is greater than 0
if (pTagsId[i] &gt; 0) {
currentTag = Tag.ottieniTag(pTagsId[i]);
// Check correctness on tags
if (ControlloDati.checkBeanTag(currentTag))
pTags.add(currentTag);
}
}

} catch (SQLException e) {
throw new SQLException(MessaggiErrore.ERRORE_DBMS);
}
}
// Return the list of tags
return pTags;
}
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_RicercaAvanzata</id>
      <content>public class RicercaAvanzata extends Ricerca implements IRicerca {
/**
* Class for managing the Advanced Search
* 
* BENE_CULTURALE, PUNTO_DI_RISTORO
*/

/**
* Class constructor
* 
* @param pIdTurista ID del T
*/
public RicercaAvanzata(int pIdTurista) {
// Constructor implementation
}

// Methods:
// ottieniNumeroElementiRicerca, ottieniNumeroPagineRicerca, 
// ottieniPaginaRisultatiBeneCulturale, ottieniPaginaRisultatiPuntoDiRistoro, search
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_RicercaStandard</id>
      <content>package unisa.gps.etour.control.GestioneRicerche;

import java.sql.SQLException;
import java.util.ArrayList;

/**
* Class for managing Standard Search
*
* @Author Joseph Penna
* @Version 0.1 - 2007 eTour Project - Copyright by DMI SE @ SA Lab --
* University of Salerno
*/
public class Search extends RicercaStandard {

/** 
* Constructor of the class
*/
public RicercaStandard() {

}

protected int ottieniNumeroElementiRicercaSpecializzato() throws SQLException {
// Check the type of site and gets the number of results
switch (pTipologiaSito) {
case BENE_CULTURALE:
return BeneCulturale.ottieniNumeroElementiRicerca(
this.pParoleChiave, this.pTags, this.pPosizioneUtente,
this.pRaggioMax);
case PUNTO_DI_RISTORO:
return PuntoDiRistoro.ottieniNumeroElementiRicerca(
this.pParoleChiave, this.pTags, this.pPosizioneUtente,
this.pRaggioMax);
default:
return -1;
}
}

protected ArrayList&lt;?&gt; ricercaSpecializzataPerPagina(int pNumeroPagina) throws SQLException {
// Check the type of site and search
switch (pTipologiaSito) {
case BENE_CULTURALE:
return BeneCulturale.ricerca(pParoleChiave, pTags,
pNumeroPagina, numeroElementiPerPagina,
pPosizioneUtente, pRaggioMax);
case PUNTO_DI_RISTORO:
return PuntoDiRistoro.ricerca(pParoleChiave, pTags,
pNumeroPagina, numeroElementiPerPagina,
pPosizioneUtente, pRaggioMax);
default:
return null;
}
}
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_SchedaTurista</id>
      <content>package unisa.gps.etour.gui.operatoreagenzia;

import java.awt.*;
import java.awt.event.*;
import java.util.Date;
import java.util.Iterator;
import java.util.StringTokenizer;
import java.util.Vector;
import javax.swing.*;
import javax.swing.border.*;
import unisa.gps.etour.bean.BeanTurista;
import unisa.gps.etour.util.Data;

/**
* Class that models the interface for displaying the card and
* Modify the data of an account tourist.
*
* @Version 1.0
* @Author Mario Gallo
*
* (c) 2007 eTour Project - Copyright by DMI SE @ SA Lab --
* University of Salerno
*/
public class SchedaTurista extends JInternalFrame implements ISchedaTurista {

private static final String[] help = {&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;,
&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;};
private JPanel jContentPane = null;
private JToolBar toolbarscheda = null;
private JToggleButton btnModifica = null;
private JButton btnSalva = null;
private JButton btnReimposta = null;
private JTabbedPane jTabbedPane = null;
private JTextField indirizzo2 = null;
private JComboBox indirizzo1 = null;
private JTextField citta = null;
private JTextField cap = null;
private JTextField telefono = null;
private JComboBox provincia = null;
private JPanel datiTurista = null;
private JTextField cognome = null;
private Vector&lt;JLabel&gt; suggerimenti;
private BeanTurista turista;
private JTextField nome;
private JComboBox giorno;
private JComboBox mese;
private JComboBox anno;
private JTextField luogoNascita;
private JTextField email;
private JTextField username;
private JPasswordField password;
private JLabel dataRegistrazione;
private Turisti parent;

/**
* The only card manufacturer model of a tourist or modification of data
* From the bean.
*
* @param pParent unisa.gps.etour.gui.operatoreagenzia.Turisti - the window &quot;father.&quot;
* @param pTurista unisa.gps.etour.bean.BeanTurista - the bean contentente data
* Of the tourist.
* @param pModifica &lt;ul&gt; &lt;li&gt; true - if amendments are made to the
* Data. &lt;li&gt; False - if you are viewing the card.
*/
public SchedaTurista(Turisti pParent, BeanTurista pTurista,
boolean pModifica) {
super();
this.parent = pParent;
setIconifiable(true);
setSize(560, 520);
suggerimenti = new Vector&lt;JLabel&gt;();
setDefaultCloseOperation(WindowConstants.DO_NOTHING_ON_CLOSE);
setClosable(true);
turista = pTurista;
if (turista.isAttiva()) {
frameIcon = new ImageIcon(
getClass().getResource(
&quot;/unisa/gps/etour/gui/operatoreagenzia/images/tab_turista.png&quot;));
} else {
frameIcon = new ImageIcon(
getClass().getResource(
&quot;/unisa/gps/etour/gui/operatoreagenzia/images/DisattivaTurista32.png&quot;));
}
initialize();
if (pModifica) {
btnModifica.setSelected(true);
btnSalva.setVisible(true);
btnReimposta.setVisible(true);
} else {
mostraNascondiSuggerimenti();
attivaDisattivaEdit();
}
addInternalFrameListener(new InternalFrameAdapter() {
public void internalFrameClosing(InternalFrameEvent pEvent) {
if (btnModifica.isSelected()) {
JPanel root = new JPanel(new BorderLayout());
JLabel message = new JLabel(
&quot;Are you sure you want to close the tab of this tourist?&quot;);
message.setFont(new Font(&quot;Dialog&quot;, Font.BOLD, 14));
JLabel avviso = new JLabel(
&quot;Warning! Unsaved data will be lost.&quot;, SwingConstants.CENTER);
avviso.setIcon(new ImageIcon(getClass().getResource(
&quot;/unisa/gps/etour/gui/operatoreagenzia/images/warning16.png&quot;)));
root.add(message, BorderLayout.NORTH);
root.add(avviso, BorderLayout.CENTER);
String[] options = {&quot;Close&quot;, &quot;Cancel&quot;};
int choice = JOptionPane.showInternalOptionDialog(jContentPane, root,
&quot;Confirm closing Tourist Card&quot; + turista.getNome() + &quot; &quot; + turista.getCognome(),
JOptionPane.OK_CANCEL_OPTION, JOptionPane.QUESTION_MESSAGE, frameIcon, options, options[1]);
if (choice == JOptionPane.OK_OPTION) {
parent.closeScheda((SchedaTurista) pEvent.getInternalFrame());
}
} else {
parent.closeScheda((SchedaTurista) pEvent.getInternalFrame());
}
}
});
}

/**
* This method initializes the interface card for tourists.
*
* @return void
*/
private void initialize() {
jContentPane = new JPanel();
jContentPane.setLayout(new BorderLayout());
jContentPane.add(getToolbarscheda(), BorderLayout.NORTH);
jTabbedPane = new JTabbedPane();
jTabbedPane.setCursor(new Cursor(Cursor.DEFAULT_CURSOR));
jTabbedPane.addTab(&quot;Tourist Information&quot;, frameIcon, getDatiTuristaForm(),
null);
jContentPane.add(jTabbedPane, BorderLayout.CENTER);
setContentPane(jContentPane);
caricaDatiForm();
}

/**
* This method loads the bean data provided tourist camps
* Of the form.
*
* @return void
*/
private void caricaDatiForm() {
setTitle(&quot;Profile Tourist - &quot; + turista.getNome() + &quot; &quot;
+ turista.getCognome());
nome.setText(turista.getNome());
cognome.setText(turista.getCognome());
Date dataNascita = turista.getDataNascita();
giorno.setSelectedIndex(dataNascita.getDate());
mese.setSelectedIndex(dataNascita.getMonth());
anno.setSelectedIndex(dataNascita.getYear());
StringTokenizer tokenizer = new StringTokenizer(turista.getVia());
String stringa = tokenizer.nextToken();
indirizzo1.setSelectedItem(stringa);
indirizzo2.setText(turista.getVia().substring(stringa.length()));
luogoNascita.setText(turista.getCittaNascita());
telefono.setText(turista.getTelefono());
citta.setText(turista.getCittaResidenza());
password.setText(turista.getPassword());
provincia.setSelectedItem(turista.getProvincia());
username.setText(turista.getUsername());
cap.setText(turista.getCap());
email.setText(turista.getEmail());
dataRegistrazione.setText(Data.toEstesa(turista.getDataRegistrazione()));
}

/**
* This method shows or hides the suggestions relating to the form fields.
*
* @return void
*/
private void mostraNascondiSuggerimenti() {
Iterator&lt;JLabel&gt; s = suggerimenti.iterator();
while (s.hasNext()) {
JLabel corrente = s.next();
corrente.setVisible(corrente.isVisible() ? false : true);
}
}

/**
* This method makes it or not editable form fields.
*
* @return void
*/
private void attivaDisattivaEdit() {
Component[] componenti = datiTurista.getComponents();
for (int i = 0; i &lt; componenti.length; i++) {
Component corrente = componenti[i];
if (corrente instanceof JTextField) {
JTextField textbox = (JTextField) corrente;
textbox.setEditable(textbox.isEditable() ? false : true);
textbox.setBackground(Color.white);
} else if (corrente instanceof JComboBox) {
JComboBox combobox = (JComboBox) corrente;
combobox.setEnabled(combobox.isEnabled() ? false : true);
}
}
}

/**
* This method initializes the toolbar for the functionality of the card
* Tourist.
*
* @return javax.swing.JToolBar
*/
private JToolBar getToolbarscheda() {
if (toolbarscheda == null) {
toolbarscheda = new JToolBar();
toolbarscheda.setFloatable(false);
toolbarscheda.add(getBtnModifica());
toolbarscheda.addSeparator();
toolbarscheda.add(getBtnSalva());
toolbarscheda.addSeparator();
toolbarscheda.add(getBtnReimposta());
toolbarscheda.addSeparator();
}
return toolbarscheda;
}

/**
* This method initializes the button for editing data.
*
* @return javax.swing.JToggleButton
*/
private JToggleButton getBtnModifica() {
if (null == btnModifica) {
btnModifica = new JToggleButton();
btnModifica.setText(&quot;Change Data&quot;);
btnModifica.setIcon(new ImageIcon(
getClass().getResource(
&quot;/unisa/gps/etour/gui/operatoreagenzia/images/ModificaTurista32.png&quot;)));
btnModifica.setToolTipText(&quot;Enable or disable data modification tourists selected.&quot;);
btnModifica.addActionListener(new ActionListener() {
public void actionPerformed(ActionEvent arg0) {
mostraNascondiSuggerimenti();
attivaDisattivaEdit();
btnSalva.setVisible((btnModifica.isSelected() ? true : false));
btnReimposta.setVisible((btnModifica.isSelected() ? true : false));
}
});
}
return btnModifica;
}

/**
* This method initializes the button to save the changes
* Made to the data of the tourist.
*
* @return javax.swing.JButton
*/
private JButton getBtnSalva() {
if (null == btnSalva) {
btnSalva = new JButton();
btnSalva.setText(&quot;Save&quot;);
btnSalva.setIcon(new ImageIcon(getClass().getResource(
&quot;/unisa/gps/etour/gui/operatoreagenzia/images/salva.png&quot;)));
btnSalva.setToolTipText(&quot;Save changes to the tourist profile selected.&quot;);
btnSalva.setVisible(false);
btnSalva.addActionListener(new ActionListener() {
public void actionPerformed(ActionEvent pEvent) {
// Construction of the dialog for confirmation of the change
JPanel root = new JPanel(new BorderLayout());
JLabel message = new JLabel(
&quot;Updating the tourist profile of&quot;
+ turista.getNome() + &quot; &quot;
+ turista.getCognome() + &quot; with&quot;
+ &quot; data form?&quot;);
message.setFont(new Font(&quot;Dialog&quot;, Font.BOLD, 14));
JLabel avviso = new JLabel(
&quot;The previous data can not be more recovered.&quot;,
SwingConstants.CENTER);
avviso.setIcon(new ImageIcon(
getClass().getResource(
&quot;/unisa/gps/etour/gui/operatoreagenzia/images/warning16.png&quot;)));
root.add(message, BorderLayout.NORTH);
root.add(avviso, BorderLayout.CENTER);
String[] options = {&quot;Edit&quot;, &quot;Cancel&quot;};
// The dialog screen appears
int choice = JOptionPane.showInternalOptionDialog(
jContentPane,
root,
&quot;Commit Changes tourist figures&quot;,
JOptionPane.YES_NO_OPTION,
JOptionPane.QUESTION_MESSAGE,
new ImageIcon(
getClass().getResource(
&quot;/unisa/gps/etour/gui/operatoreagenzia/images/ModificaTurista48.png&quot;)),
options, options[1]);
// If you chose to confirm the change
if (choice == JOptionPane.YES_OPTION) {
turista.setNome(nome.getText());
turista.setCognome(cognome.getText());
turista.setCap(cap.getText());
turista.setCittaNascita(luogoNascita.getText());
turista.setDataNascita(new Date(
anno.getSelectedIndex(), mese.getSelectedIndex(), giorno.getSelectedIndex()));
turista.setCittaResidenza(citta.getText());
turista.setUsername(username.getText());
turista.setEmail(email.getText());
turista.setTelefono(telefono.getText());
turista.setVia(indirizzo1.getSelectedItem().toString()
+ &quot; &quot; + indirizzo2.getText());
turista.setProvincia(provincia.getSelectedItem().toString());
String pass = &quot;&quot;;
char[] passWord = password.getPassword();
for (int i = 0; i &lt; passWord.length; i++) {
pass += passWord[i];
}
turista.setPassword(pass);
caricaDatiForm();
attivaDisattivaEdit();
btnSalva.setVisible(false);
btnReimposta.setVisible(false);
btnModifica.setSelected(false);
mostraNascondiSuggerimenti();
parent.updateTableModel(turista);
JOptionPane.showInternalMessageDialog(
jContentPane,
&quot;The data of tourists have been updated successfully.&quot;,
&quot;Modified Profile Tourist!&quot;,
JOptionPane.OK_OPTION,
new ImageIcon(
getClass().getResource(
&quot;/unisa/gps/etour/gui/operatoreagenzia/images/ok48.png&quot;)));
}
}
});
}
return btnSalva;
}

/**
* This method initializes the button to reset the data of the tourist
* In the form.
*
* @return javax.swing.JButton
*/
private JButton getBtnReimposta() {
if (null == btnReimposta) {
btnReimposta = new JButton();
btnReimposta.setText(&quot;Reset&quot;);
btnReimposta.setIcon(new ImageIcon(
getClass().getResource(
&quot;/unisa/gps/etour/gui/operatoreagenzia/images/Annulla32.png&quot;)));
btnReimposta.setToolTipText(&quot;Reload the selected tourist information.&quot;);
btnReimposta.setVisible(false);
btnReimposta.addActionListener(new ActionListener() {
public void actionPerformed(ActionEvent arg0) {
caricaDatiForm();
}
});
}
return btnReimposta;
}

/**
* This method initializes the form contentente data of the tourist.
*
* @return javax.swing.JPanel
*/
private JPanel getDatiTuristaForm() {
if (null == datiTurista) {
datiTurista = new JPanel(null);
datiTurista.setBorder(new SoftBevelBorder(SoftBevelBorder.LOWERED));
// Creation Tips
String[] txts = {&quot;Name&quot;, &quot;Name&quot;, &quot;Date of Birth&quot;,
&quot;Place of Birth&quot;, &quot;Phone&quot;, &quot;Address&quot;, &quot;City&quot;,
&quot;CPC&quot;, &quot;Province&quot;, &quot;E-Mail&quot;, &quot;Username&quot;, &quot;Password&quot;,
&quot;Save&quot;};

for (int i = 0; i &lt; help.length; i++) {
JLabel nuova = new JLabel();
nuova.setIcon(new ImageIcon(getClass().getResource(
&quot;/unisa/gps/etour/gui/images/Info16.png&quot;)));
nuova.setBounds(145, 8 + 30 * i, 24, 24);
nuova.setCursor(Cursor.getPredefinedCursor(Cursor.HAND_CURSOR));
nuova.setToolTipText(help[i]);
suggerimenti.add(nuova);
datiTurista.add(nuova);
}

for (int i = 0; i &lt; txts.length; i++) {
JLabel nuova = new JLabel(txts[i], SwingConstants.RIGHT);
nuova.setBounds(25, 10 + 30 * i, 120, 20);
nuova.repaint();
datiTurista.add(nuova, null);
}
// Name
nome = new JTextField(12);
nome.setBounds(185, 10, 136, 20);
nome.setName(&quot;Name&quot;);
datiTurista.add(nome, null);

// Surname
cognome = new JTextField(12);
cognome.setBounds(185, 40, 136, 20);
cognome.setName(&quot;Name&quot;);
datiTurista.add(cognome, null);

// Date of Birth
giorno = new JComboBox();
giorno.setBounds(185, 70, 40, 20);
for (int i = 1; i &lt;= 31; i++) {
giorno.addItem(i);
}
mese = new JComboBox();
mese.addActionListener(new ActionListener() {
public void actionPerformed(ActionEvent pEvent) {
int number = giorno.getItemCount();
switch (mese.getSelectedIndex()) {
case 0:
case 2:
case 4:
case 6:
case 7:
case 9:
case 11:
for (int i = number + 1; i &lt;= 31; i++) {
giorno.addItem(i);
}
break;

case 1:
int year = (Integer) anno.getSelectedItem();
boolean leap = ((year % 4 == 0 &amp;&amp; year % 100 != 0) || (year % 400 == 0));
if (number != 28) {
for (int i = number - 1; i &gt; 27; i--) {
giorno.removeItemAt(i);
}
}
if (leap &amp;&amp; number != 29) {
giorno.addItem(&quot;29&quot;);
}
break;

case 3:
case 5:
case 8:
case 10:
if (number == 31) {
giorno.removeItemAt(30);
} else {
for (int i = number + 1; i &lt;= 30; i++) {
giorno.addItem(i);
}
}
break;
}
}
});
mese.setBounds(245, 70, 40, 20);
for (int i = 1; i &lt;= 12; i++) {
mese.addItem(i);
}
anno = new JComboBox();
anno.addActionListener(new ActionListener() {
public void actionPerformed(ActionEvent arg0) {
if (mese.getSelectedIndex() == 1) {
int year = (Integer) anno.getSelectedItem();
boolean leap = ((year % 4 == 0 &amp;&amp; year % 100 != 0) || (year % 400 == 0));
int number = giorno.getItemCount();
if (leap &amp;&amp; number != 29) {
giorno.addItem(&quot;29&quot;);
} else if (leap &amp;&amp; number == 29) {
giorno.removeItemAt(28);
}
}
}
});
anno.setBounds(305, 70, 80, 20);
Date odierna = new Date();
for (int i = 0; i &lt;= odierna.getYear() - 14; i++) {
anno.addItem(1900 + i);
}
datiTurista.add(giorno, null);
datiTurista.add(mese, null);
datiTurista.add(anno, null);

// Place of Birth
luogoNascita = new JTextField(12);
luogoNascita.setBounds(185, 100, 136, 20);
luogoNascita.setName(&quot;Birth Place&quot;);
datiTurista.add(luogoNascita, null);

// Phone
telefono = new JTextField(12);
telefono.setBounds(185, 130, 136, 20);
telefono.setName(&quot;Phone&quot;);
datiTurista.add(telefono, null);

// Address
indirizzo2 = new JTextField(12);
indirizzo2.setBounds(270, 160, 136, 20);
indirizzo1 = new JComboBox();
indirizzo1.setSelectedIndex(-1);
indirizzo1.setBounds(185, 160, 60, 20);
datiTurista.add(indirizzo2, null);
datiTurista.add(indirizzo1, null);

// City
citta = new JTextField(12);
citta.setBounds(185, 190, 136, 20);
citta.setName(&quot;City&quot;);
datiTurista.add(citta, null);

// CAP
cap = new JTextField(8);
cap.setBounds(185, 220, 92, 20);
datiTurista.add(cap, null);

// State
provincia = new JComboBox();
provincia.setSelectedIndex(-1);
provincia.setBounds(185, 250, 50, 20);
datiTurista.add(provincia, null);

// E-Mail
email = new JTextField();
email.setBounds(185, 280, 200, 20);
email.setName(&quot;E-Mail&quot;);
datiTurista.add(email, null);

// Username
username = new JTextField();
username.setBounds(185, 310, 136, 20);
username.setName(&quot;Username&quot;);
datiTurista.add(username, null);

// Password
password = new JPasswordField(12);
password.setBounds(185, 340, 136, 20);
password.setName(&quot;Password&quot;);
datiTurista.add(password, null);

// Data entry
dataRegistrazione = new JLabel();
dataRegistrazione.setBounds(185, 370, 140, 20);
datiTurista.add(dataRegistrazione, null);
}
return datiTurista;
}

/**
* This method returns the id of the tourist who is viewing /
* Edit.
*
* @return int - the id of the tourist.
*/
public int getId() {
return turista.getId();
}
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_ScrollableTable</id>
      <content>package unisa.gps.etour.gui.operatoreagenzia.tables;

import java.awt.*;
import javax.swing.JTable;
import javax.swing.Scrollable;
import javax.swing.SwingConstants;
import javax.swing.table.*;

/**
* Create a custom JTable that can be displayed through
* Components that enable scrolling.
* @see javax.swing.JTable
* @see javax.swing.Scrollable
* @author _OniZuKa_
* @version 1.0
*/
public class ScrollableTable extends JTable implements Scrollable {

private static final int maxUnitIncrement = 20;

public ScrollableTable() {
super();
}

public ScrollableTable(TableModel tm) {
super(tm);
setGridColor(Color.LIGHT_GRAY);
setIntercellSpacing(new Dimension(5, 0));
}

public Dimension getPreferredScrollableViewportSize() {
return getPreferredSize();
}

public int getScrollableUnitIncrement(Rectangle visibleRect,
int orientation, int direction) {

int posCorrente = 0;
if (orientation == SwingConstants.HORIZONTAL) {
posCorrente = visibleRect.x;
} else {
posCorrente = visibleRect.y;
}

if (direction &lt; 0) {
int newPos = posCorrente - (posCorrente / maxUnitIncrement)
* maxUnitIncrement;
return (newPos == 0) ? maxUnitIncrement : newPos;
} else {
return ((posCorrente / maxUnitIncrement) + 1) * maxUnitIncrement
- posCorrente;
}
}

public int getScrollableBlockIncrement(Rectangle visibleRect,
int orientation, int direction) {
if (orientation == SwingConstants.HORIZONTAL) {
return visibleRect.width - maxUnitIncrement;
} else {
return visibleRect.height - maxUnitIncrement;
}
}

public boolean getScrollableTracksViewportWidth() {
return false;
}

public boolean getScrollableTracksViewportHeight() {
return false;
}
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_SitoTableModel</id>
      <content>/*
* SitoTableModel.java
*
* 1.0
*
* 21/05/2007
*
* (c) 2007 eTour Project - Copyright by SE @ SA Lab - DMI - University of Salerno
*/
package Handheld;

import Bean.BeanPuntoDiRistoro;
import javax.swing.table.AbstractTableModel;
import Bean.*;
import Util.Punto3D;

/**
* &lt;b&gt;SitoTableModel&lt;/b&gt;
* Serves as a data container &lt;p&gt; of cultural or refreshment areas that need
* Be displayed in a JTable.&lt;/p&gt;
* @see javax.swing.table.AbstractTableModel
* @see javax.swing.JTable
* @see unisa.gps.etour.bean.BeanBeneCulturale
* @see unisa.gps.etour.bean.BeanPuntoDiRistoro
* @version 1.0
* @author Raphael Landi
*/

public class SitoTableModel extends AbstractTableModel {
String[] columnNames = {&quot;Name&quot;, &quot;City&quot;, &quot;Distance&quot;};
Object[][] cells;
Punto3D posizioneSito;
Punto3D myLocation;

SitoTableModel(BeanPuntoDiRistoro[] pr, Punto3D myLocation) {
super();
cells = new Object[pr.length][3]; // First value = rows, second = columns
for (int i = 0; i &lt; pr.length; i++) {
cells[i][0] = pr[i].getName();
cells[i][1] = pr[i].getCitta();
}
}

SitoTableModel(BeanBeneCulturale[] bc, Punto3D myLocation) {
super();
cells = new Object[bc.length][3]; // First value = rows, second = columns
for (int i = 0; i &lt; bc.length; i++) {
cells[i][0] = bc[i].getName();
cells[i][1] = bc[i].getCitta();
}
}

public int getRowCount() {
return cells.length;
}

public int getColumnCount() {
return columnNames.length;
}

public Object getValueAt(int r, int c) {
if (c &lt; columnNames.length - 1)
return cells[r][c];
else {
double value = miaPosizione.distanza(posizioneSito);
return new Double(value);
}
}

public String getColumnName(int c) {
return columnNames[c];
}
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_TAGTableModel</id>
      <content>/*
* TAGTableModel.java
*
* 1.0
*
* 28/05/2007
*
* (c) 2007 eTour Project - Copyright by SE @ SA Lab - DMI - University of Salerno
*/
package unisa.gps.etour.gui.operatoreagenzia;

import java.util.Vector;
import javax.swing.table.AbstractTableModel;
import unisa.gps.etour.bean.BeanTag;
/**
* &lt;p&gt;
* &lt;B&gt; Title: &lt;/B&gt; TagTableModel
* &lt;/p&gt;
* &lt;p&gt;
* &lt;B&gt; Description: &lt;/B&gt; TableModel for dynamic management of Table
* Within the section GestioneTag
* &lt;/p&gt;
*
* @Author _Lello_
* @Version 1.0
*/

public class TAGTableModel extends AbstractTableModel {

private static final long serialVersionUID = 1L;
private static final String[] headers = {&quot;Name&quot;, &quot;Description&quot;};
private static final Class[] columnClasses = {String.class, String.class};
private Vector&lt;Object[]&gt; data;

/**
* Constructor for class TagTableModel
*
* @param tags BeanTag[]
*
*/
public TAGTableModel(BeanTag[] tags) {
data = new Vector&lt;Object[]&gt;();
for (int i = 0; i &lt; tags.length; i++) {
Object[] newRow = new Object[10];
newRow[0] = tags[i].getId();
newRow[1] = tags[i].getName();
newRow[2] = tags[i].getDescrizione();
}
}

/**
* Returns the number of columns
*
*/
public int getColumnCount() {
return headers.length;
}

/**
* Returns the number of rows
*
*/
public int GetRowCount() {
return data.size();
}

/**
* Returns the column heading i_esima
*
* @param pCol
*
*/
public String getColumnName(int pCol) {
return headers[pCol];
}

/**
* Returns the coordinates given by the pair of row, column
*
* @param pRow
* @param pCol
*
*/
public Object getValueAt(int pRow, int pCol) {
return data.get(pRow)[pCol];
}

/**
* Returns the column pCol
*
* @param pCol
*
*/
public Class getColumnClass(int pCol) {
return columnClasses[pCol];
}

/**
* Always returns false because the cells in the table are not editable
*
* @param row
* @param col
*
* @return false
*
*/
public boolean isCellEditable(int row, int col) {
return false;
}

/**
* This method is empty.
* Can not be included an element within a cell
*
* @deprecated
*
*/
public void setValueAt(Object value, int row, int col) {

}
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_Tag</id>
      <content>package unisa.gps.etour.gui.operatoreagenzia;

import java.awt.BorderLayout;
import javax.swing.JPanel;
import javax.swing.JInternalFrame;

import unisa.gps.etour.bean.BeanTag;

import java.awt.GridBagLayout;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import java.awt.GridBagConstraints;
import java.awt.Dimension;
import javax.swing.JToolBar;
import javax.swing.JButton;
import javax.swing.ImageIcon;
import javax.swing.JTextPane;
import javax.swing.BorderFactory;
import javax.swing.border.TitledBorder;
import java.awt.Color;
import java.awt.Font;
import javax.swing.JLabel;
import javax.swing.JTextField;
import javax.swing.JTextArea;
import java.awt.Insets;

public class Tag extends JInternalFrame {

private JPanel jContentPane = null;
private JPanel CenterPanel = null;
private JPanel EastPanel = null;
private JScrollPane JScrollPane = null;
private JTable JTable = null;
private JToolBar jJToolBarBar = null;
private JButton btnModifica = null;
private JButton btnElimina = null;
private JButton btnExit = null;
private JPanel jPanelUp = null;
private JPanel jPanelHelp = null;
private JTextPane jTextPane = null;
private JLabel tagname = null;
private JTextField JTextField = null;
private JLabel description = null;
private JTextArea JTextArea = null;
private JButton btnOK = null;
private JButton btnResetta = null;

/**
* This is the default constructor xxx
*/
public Tag() {
super();
initialize();
}

/**
* This method initializes this
*
* @return void
*/
private void initialize() {
this.setSize(508, 398);
this.setFrameIcon(new ImageIcon(getClass().getResource(&quot;/interfacceAgenzia/images/Properties.png&quot;)));
this.setTitle(&quot;Manage Tag&quot;);
this.setContentPane(getJContentPane());
}

/**
* This method initializes jContentPane
*
* @return javax.swing.JPanel
*/
private JPanel getJContentPane() {
if (null == jContentPane) {
jContentPane = new JPanel();
jContentPane.setLayout(new BorderLayout());
jContentPane.add(getCenterPanel(), BorderLayout.CENTER);
jContentPane.add(getEastPanel(), BorderLayout.EAST);
jContentPane.add(getJJToolBarBar(), BorderLayout.NORTH);
}
return jContentPane;
}

/**
* This method initializes CenterPanel
*
* @return javax.swing.JPanel
*/
private JPanel getCenterPanel() {
if (null == CenterPanel) {
GridBagConstraints gridBagConstraints = new GridBagConstraints();
gridBagConstraints.fill = GridBagConstraints.BOTH;
gridBagConstraints.weighty = 1.0;
gridBagConstraints.weightx = 1.0;
CenterPanel = new JPanel();
CenterPanel.setLayout(new GridBagLayout());
CenterPanel.add(getJScrollPane(), gridBagConstraints);
}
return CenterPanel;
}

/**
* This method initializes EastPanel
*
* @return javax.swing.JPanel
*/
private JPanel getEastPanel() {
if (null == EastPanel) {
GridBagConstraints gridBagConstraints3 = new GridBagConstraints();
gridBagConstraints3.gridy = 1;
GridBagConstraints gridBagConstraints2 = new GridBagConstraints();
gridBagConstraints2.gridx = 0;
gridBagConstraints2.gridy = 0;
EastPanel = new JPanel();
EastPanel.setLayout(new GridBagLayout());
EastPanel.add(getJPanelUp(), gridBagConstraints2);
EastPanel.add(getJPanelHelp(), gridBagConstraints3);
}
return EastPanel;
}

/**
* This method initializes JScrollPane
*
* @return javax.swing.JScrollPane
*/
private JScrollPane getJScrollPane() {
if (JScrollPane == null) {
JScrollPane = new JScrollPane();
JScrollPane.setViewportView(getJTable());
}
return JScrollPane;
}

/**
* This method initializes JTable
*
* @return javax.swing.JTable
*/
private JTable getJTable() {
if (JTable == null) {
JTable = new JTable();
BeanTag[] listaTag = new BeanTag[11];
listaTag[0] = new BeanTag(1, &quot;romantic&quot;, &quot;place for couples and unforgettable moments&quot;);
listaTag[1] = new BeanTag(2, &quot;esoteric&quot;, &quot;places of magic&quot;);
listaTag[2] = new BeanTag(3, &quot;pizza&quot;, &quot;The best pizza&quot;);
listaTag[3] = new BeanTag(6, &quot;music&quot;, &quot;live music venues, concerts ...&quot;);
listaTag[4] = new BeanTag(76, &quot;trattoria&quot;, &quot;typical&quot;);
listaTag[5] = new BeanTag(7, &quot;fairs&quot;, &quot;for important purchases or souvenirs bellismi&quot;);
listaTag[6] = new BeanTag(9, &quot;Market&quot;, &quot;typical&quot;);
listaTag[7] = new BeanTag(8, &quot;History&quot;, &quot;typical&quot;);
listaTag[8] = new BeanTag(5, &quot;nineteenth century&quot;, &quot;typical&quot;);
listaTag[9] = new BeanTag(4, &quot;range&quot;, &quot;typical&quot;);
listaTag[10] = new BeanTag(56, &quot;Cinema&quot;, &quot;typical&quot;);
}
return JTable;
}

/**
* This method initializes jJToolBarBar
*
* @return javax.swing.JToolBar
*/
private JToolBar getJJToolBarBar() {
if (null == jJToolBarBar) {
jJToolBarBar = new JToolBar();
jJToolBarBar.add(getBtnModifica());
jJToolBarBar.add(getBtnElimina());
jJToolBarBar.addSeparator();
jJToolBarBar.add(getBtnExit());
}
return jJToolBarBar;
}

/**
* This method initializes btnModifica
*
* @return javax.swing.JButton
*/
private JButton getBtnModifica() {
if (null == btnModifica) {
btnModifica = new JButton();
btnModifica.setText(&quot;Edit Tag&quot;);
btnModifica.setIcon(new ImageIcon(getClass().getResource(&quot;/interfacceAgenzia/immagini/edit-32x32.png&quot;)));
}
return btnModifica;
}

/**
* This method initializes btnElimina
*
* @return javax.swing.JButton
*/
private JButton getBtnElimina() {
if (null == btnElimina) {
btnElimina = new JButton();
btnElimina.setText(&quot;Remove Tag&quot;);
btnElimina.setIcon(new ImageIcon(getClass().getResource(&quot;/interfacceAgenzia/immagini/button-cancel-32x32.png&quot;)));
}
return btnElimina;
}

/**
* This method initializes btnExit
*
* @return javax.swing.JButton
*/
private JButton getBtnExit() {
if (null == btnExit) {
btnExit = new JButton();
btnExit.setText(&quot;Exit&quot;);
btnExit.setIcon(new ImageIcon(getClass().getResource(&quot;/interfacceAgenzia/images/Forward 2.png&quot;)));
}
return btnExit;
}

/**
* This method initializes jPanelUp
*
* @return javax.swing.JPanel
*/
private JPanel getJPanelUp() {
if (null == jPanelUp) {
GridBagConstraints gridBagConstraints9 = new GridBagConstraints();
gridBagConstraints9.gridx = 1;
gridBagConstraints9.insets = new Insets(5, 5, 5, 5);
gridBagConstraints9.gridy = 4;
GridBagConstraints gridBagConstraints8 = new GridBagConstraints();
gridBagConstraints8.gridx = 0;
gridBagConstraints8.insets = new Insets(5, 5, 5, 5);
gridBagConstraints8.gridy = 4;
GridBagConstraints gridBagConstraints7 = new GridBagConstraints();
gridBagConstraints7.fill = GridBagConstraints.BOTH;
gridBagConstraints7.gridy = 3;
gridBagConstraints7.weightx = 1.0;
gridBagConstraints7.weighty = 1.0;
gridBagConstraints7.gridwidth = 2;
gridBagConstraints7.insets = new Insets(5, 0, 5, 0);
gridBagConstraints7.gridx = 0;
GridBagConstraints gridBagConstraints6 = new GridBagConstraints();
gridBagConstraints6.gridx = 0;
gridBagConstraints6.gridwidth = 2;
gridBagConstraints6.insets = new Insets(5, 0, 5, 0);
gridBagConstraints6.gridy = 2;
description = new JLabel();
description.setText(&quot;Description:&quot;);
GridBagConstraints gridBagConstraints5 = new GridBagConstraints();
gridBagConstraints5.fill = GridBagConstraints.VERTICAL;
gridBagConstraints5.gridy = 1;
gridBagConstraints5.weightx = 1.0;
gridBagConstraints5.gridwidth = 2;
gridBagConstraints5.insets = new Insets(5, 0, 5, 0);
gridBagConstraints5.gridx = 0;
GridBagConstraints gridBagConstraints4 = new GridBagConstraints();
gridBagConstraints4.gridx = 0;
gridBagConstraints4.gridwidth = 2;
gridBagConstraints4.insets = new Insets(5, 0, 5, 0);
gridBagConstraints4.gridy = 0;
tagname = new JLabel();
tagname.setText(&quot;Tag Name:&quot;);
jPanelUp = new JPanel();
jPanelUp.setLayout(new GridBagLayout());
jPanelUp.setBorder(BorderFactory.createTitledBorder(BorderFactory.createLineBorder(new Color(0, 102, 255), 3), &quot;Insert New&quot;, TitledBorder.DEFAULT_JUSTIFICATION, TitledBorder.DEFAULT_POSITION, new Font(&quot;Dialog&quot;, Font.BOLD, 12), new Color(0, 102, 255)));
jPanelUp.add(tagname, gridBagConstraints4);
jPanelUp.add(getJTextField(), gridBagConstraints5);
jPanelUp.add(description, gridBagConstraints6);
jPanelUp.add(getJTextArea(), gridBagConstraints7);
jPanelUp.add(getBtnOk(), gridBagConstraints8);
jPanelUp.add(getBtnResetta(), gridBagConstraints9);
}
return jPanelUp;
}

/**
* This method initializes jPanelHelp
*
* @return javax.swing.JPanel
*/
private JPanel getJPanelHelp() {
if (null == jPanelHelp) {
GridBagConstraints gridBagConstraints1 = new GridBagConstraints();
gridBagConstraints1.fill = GridBagConstraints.BOTH;
gridBagConstraints1.weighty = 1.0;
gridBagConstraints1.weightx = 1.0;
jPanelHelp = new JPanel();
jPanelHelp.setLayout(new GridBagLayout());
jPanelHelp.setBorder(BorderFactory.createTitledBorder(BorderFactory.createLineBorder(new Color(0, 102, 255), 3), &quot;Help&quot;, TitledBorder.DEFAULT_JUSTIFICATION, TitledBorder.DEFAULT_POSITION, new Font(&quot;Dialog&quot;, Font.BOLD, 12), new Color(51, 153, 255)));
jPanelHelp.add(getJTextPane(), gridBagConstraints1);
}
return jPanelHelp;
}

/**
* This method initializes jTextPane
*
* @return javax.swing.JTextPane
*/
private JTextPane getJTextPane() {
if (null == jTextPane) {
jTextPane = new JTextPane();
jTextPane.setPreferredSize(new Dimension(190, 80));
}
return jTextPane;
}

/**
* This method initializes JTextField
*
* @return javax.swing.JTextField
*/
private JTextField getJTextField() {
if (JTextField == null) {
JTextField = new JTextField();
JTextField.setColumns(10);
}
return JTextField;
}

/**
* This method initializes JTextArea
*
* @return javax.swing.JTextArea
*/
private JTextArea getJTextArea() {
if (JTextArea == null) {
JTextArea = new JTextArea();
JTextArea.setRows(3);
}
return JTextArea;
}

/**
* This method initializes btnOK
*
* @return javax.swing.JButton
*/
private JButton getBtnOk() {
if (btnOK == null) {
btnOK = new JButton();
btnOK.setText(&quot;Ok&quot;);
btnOK.setIcon(new ImageIcon(getClass().getResource(&quot;/interfacceAgenzia/immagini/Button_ok16.png&quot;)));
}
return btnOK;
}

/**
* This method initializes btnResetta
*
* @return javax.swing.JButton
*/
private JButton getBtnResetta() {
if (null == btnResetta) {
btnResetta = new JButton();
btnResetta.setText(&quot;Reset&quot;);
btnResetta.setIcon(new ImageIcon(getClass().getResource(&quot;/interfacceAgenzia/images/Trash.png&quot;)));
}
return btnResetta;
}

} // @JVE: decl-index = 0: visual-constraint = &quot;10.10&quot;</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_TestoNewsRendererTest</id>
      <content>/**
* Test case for class TestoNewsRenderer
*
* @Author Mario Gallo
* @Version 0.1 (c) 2007 eTour Project - Copyright by DMI SE @ SA Lab --
* University of Salerno
*/
package unisa.gps.etour.gui.operatoreagenzia.tables.test;

import java.util.Date;
import javax.swing.JTable;
import javax.swing.JTextArea;
import unisa.gps.etour.bean.BeanNews;
import unisa.gps.etour.gui.operatoreagenzia.tables.NewsTableModel;
import unisa.gps.etour.gui.operatoreagenzia.tables.TestoNewsRenderer;
import junit.framework.TestCase;

public class TestCase extends TestoNewsRendererTest {

private TestoNewsRenderer renderer;
private BeanNews aNewsAttiva;
private BeanNews aNewsScaduta;
private JTable aTable;

public TestoNewsRendererTest() {
super();
renderer = new TestoNewsRenderer();
aNewsAttiva = new BeanNews(&quot;Here's a news active&quot;, new Date(),
new Date(120, 1, 1), 5, 0);
aNewsScaduta = new BeanNews(&quot;Here's a news Expired&quot;, new Date(),
new Date(), 5, 0);
aTable = new JTable(new NewsTableModel());
}

/**
* Verify the behavior of the method with the correct parameters.
*/
public void testGetTableCellRendererParametriCorretti() {
NewsTableModel aModele = (NewsTableModel) aTable.getModel();
aModel.insertNews(aNewsAttiva);
aModel.insertNews(aNewsScaduta);

// Test the renderer with a news active.
JTextArea aare = (JTextArea) renderer.getTableCellRendererComponent(
aTable, &quot;Here's a news active&quot;, true, true, 0, 0);
assertEquals(aNewsAttiva.getNews(), aArea.getText());

// Test the renderer with a news expired.
aare = (JTextArea) renderer.getTableCellRendererComponent(aTable,
&quot;Here's a news Expired&quot;, true, true, 0, 0);
assertEquals(aNewsScaduta.getNews(), aArea.getText());
}

/**
* Verification Compor the table with a table without NewsTableModel
* Associated.
*/
public void testGetTabelCellRendererNoNewsModel() {
JTable anotherTable = new JTable();
try {
renderer.getTableCellRendererComponent(anotherTable,
&quot;Here's a news&quot;, true, true, 0, 0);
fail(&quot;Should be thrown.&quot;);
}
catch (IllegalArgumentException success) {
}
}

/**
* Verify the behavior of the method with a parameter to null.
*/
public void testGetTableCellRendererParametroNull() {
try {
renderer.getTableCellRendererComponent(aTable, null, true, true, 0,
0);
fail(&quot;Should be thrown.&quot;);
}
catch (IllegalArgumentException success) {
}
}

/**
* Verify the behavior of the method with a data type unexpected.
*/
public void testGetTableCellRendererTipoInatteso() {
try {
renderer
.getTableCellRendererComponent(aTable, 12, true, true, 0, 0);
fail(&quot;Should be thrown.&quot;);
}
catch (IllegalArgumentException success) {
}
}
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_Turisti</id>
      <content>/*
* Tourists.java
*
* 1.0
*
* 26/05/2007
*
* (c) 2007 eTour Project - Copyright by SE @ SA Lab - DMI - University of Salerno
*/
package unisa.gps.etour.gui.operatoreagenzia;

import java.awt.BorderLayout;
import javax.swing.JPanel;
import javax.swing.JInternalFrame;
import java.awt.Dimension;

import javax.swing.JDesktopPane;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.JTextPane;
import javax.swing.JToggleButton;
import javax.swing.JToolBar;
import javax.swing.JButton;
import javax.swing.ListSelectionModel;
import java.awt.GridBagLayout;
import java.awt.GridBagConstraints;
import javax.swing.BorderFactory;
import javax.swing.JLabel;
import javax.swing.SwingConstants;
import java.awt.Color;
import java.awt.Insets;
import javax.swing.JTextField;
import javax.swing.JOptionPane;
import javax.swing.border.TitledBorder;
import javax.swing.event.InternalFrameAdapter;
import javax.swing.event.InternalFrameEvent;
import javax.swing.event.ListSelectionEvent;
import javax.swing.event.ListSelectionListener;
import java.awt.Font;
import javax.swing.ImageIcon;
import unisa.gps.etour.util.Data;
import unisa.gps.etour.bean.BeanTurista;
import unisa.gps.etour.gui.DeskManager;
import unisa.gps.etour.gui.operatoreagenzia.tables.AttivazioneTuristaRenderer;
import unisa.gps.etour.gui.operatoreagenzia.tables.ScrollableTable;
import unisa.gps.etour.gui.operatoreagenzia.tables.TuristiTableModel;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.ArrayList;
import java.util.Date;

/**
* This class implements the interface for the management of tourists
* Agency by the Operator.
*
* @Version 1.0
* @See javax.swing.JInternalFrame
* @Author Mario Gallo
*/
public class Tourists extends JInternalFrame {

private JPanel jContentPane = null;
private JToolBar toolbarTuristi = null;
private JButton btnModificaDati = null;
private JScrollPane scrollTableTuristi = null;
private JTable tableTuristi = null;
private JPanel searchPanel = null;
private JTextField cognomeTurista = null;
private JPanel panelHelp = null;
private JTextPane textGuida = null;
private JPanel rightPanel = null;
private JButton btnAttiva;
private JButton btnVisualizzaScheda;
private JButton btnElimina;
private TuristiTableModel tableModel;
private JToggleButton turistiDisattivati;
private JToggleButton turistiAttivati;
private JButton btnAzzera;
private JButton btnRicerca;
protected DeskManager desktopManager;
protected JDesktopPane jDesktopPane;
private ArrayList&lt;SchedaTurista&gt; figli;

/**
* This is the default constructor.
*/
public Tourists() {
super(&quot;Tourists&quot;);
setPreferredSize(new Dimension(700, 480));
setFrameIcon(new ImageIcon(getClass().getResource(
&quot;/unisa/gps/eTour/gui/operatoreagenzia/images/Turisti.png&quot;)));
setDefaultCloseOperation(JInternalFrame.DO_NOTHING_ON_CLOSE);
setClosable(true);
setResizable(true);
setIconable(true);
setMaximizable(true);
setContentPane(getJContentPane());
figli = new ArrayList&lt;SchedaTurista&gt;();
addInternalFrameListener(new InternalFrameAdapter() {
public void internalFrameOpened(InternalFrameEvent pEvent) {
jDesktopPane = pEvent.getInternalFrame().getDesktopPane();
desktopManager = (DeskManager) jDesktopPane.getDesktopManager();
}

public void internalFrameClosing(InternalFrameEvent pEvent) {
JPanel root = new JPanel(new BorderLayout());
JLabel message = new JLabel(
&quot;Are you sure you want to close the management of tourists?&quot;);
message.setFont(new Font(&quot;Dialog&quot;, Font.BOLD, 14));
JLabel alert = new JLabel(
&quot;NB will be closed all the windows opened by this administration.&quot;,
SwingConstants.CENTER);
alert.setIcon(new ImageIcon(
getClass()
.getResource(
&quot;/unisa/gps/etour/gui/operatoreagenzia/images/warning16.png&quot;)));
root.add(message, BorderLayout.NORTH);
root.add(alert, BorderLayout.CENTER);
String[] options = {&quot;Close&quot;, &quot;Cancel&quot;};
int choice = JOptionPane.showInternalOptionDialog(jContentPane, root, &quot;Confirm closure Tourists&quot;,
JOptionPane.OK_CANCEL_OPTION, JOptionPane.QUESTION_MESSAGE, getFrameIcon(), options, options[1]);
if (choice == JOptionPane.OK_OPTION) {
for (int i = 0; i &lt; figli.size(); i++) {
figli.get(i).dispose();
}
pEvent.getInternalFrame().dispose();
}
}
});
}

/**
* This method initializes the internal frame's content pane.
*
* @Return javax.swing.JPanel - the content pane.
*/
private JPanel getJContentPane() {
if (null == jContentPane) {
jContentPane = new JPanel();
jContentPane.setLayout(new BorderLayout());
jContentPane.add(getToolbarTuristi(), BorderLayout.NORTH);
jContentPane.add(getRightPanel(), BorderLayout.EAST);
jContentPane.add(getScrollTableTuristi(), BorderLayout.CENTER);
}
return jContentPane;
}

/**
* This method initializes the toolbar on the management of
* Tourists.
*
* @Return javax.swing.JToolBar - the toolbar.
*/
private JToolBar getToolbarTuristi() {
if (null == toolbarTuristi) {
toolbarTuristi = new JToolBar();
toolbarTuristi.setLayout(null);
toolbarTuristi.setPreferredSize(new Dimension(1, 50));
toolbarTuristi.setOrientation(JToolBar.HORIZONTAL);
toolbarTuristi.setFloatable(false);
toolbarTuristi.add(getBtnAttiva());
toolbarTuristi.add(getBtnModificaDati());
toolbarTuristi.add(getBtnVisualizzaScheda());
toolbarTuristi.add(getBtnElimina());
}
return toolbarTuristi;
}

/**
* This method initializes the button to activate
* A tourist.
*
* @Return javax.swing.JButton - the button.
*/
private JButton getBtnAttiva() {
if (null == btnAttiva) {
btnAttiva = new JButton();
btnAttiva.setText(&quot;&lt;html&gt;Enable&lt;br&gt;region&lt;/html&gt;&quot;);
btnAttiva.setBounds(5, 5, 140, 40);
btnAttiva.setEnabled(false);
btnAttiva
.setIcon(new ImageIcon(
getClass()
.getResource(
&quot;/unisa/gps/etour/gui/operatoreagenzia/images/AttivaTurista32.png&quot;)));

btnAttiva.addActionListener(new ActionListener() {
public void actionPerformed(ActionEvent arg0) {
int selected = tableTuristi.getSelectedRow();
String[] fields = {&quot;Name&quot;, &quot;Name&quot;, &quot;Date of Birth&quot;,
&quot;Place of Birth&quot;, &quot;E-Mail&quot;, &quot;Phone&quot;,
&quot;Address&quot;, &quot;CPC&quot;, &quot;Province&quot;, &quot;City&quot;};
int[] modelReference = {1, 2, 5, 6, 3, 4, 7, 9, 10, 8};
JPanel datiTurista = new JPanel(new GridBagLayout());
JPanel rootDialog = new JPanel(new GridBagLayout());
datiTurista.setBorder(BorderFactory.createTitledBorder(
BorderFactory.createLineBorder(new Color(51, 102,
255), 2), &quot;Tourist Information&quot;,
TitledBorder.DEFAULT_JUSTIFICATION,
TitledBorder.DEFAULT_POSITION, new Font(&quot;Dialog&quot;,
Font.BOLD, 12), new Color(0, 102, 204)));
GridBagConstraints g = new GridBagConstraints();
g.insets = new Insets(5, 5, 5, 5);
g.anchor = GridBagConstraints.WEST;
g.gridx = 0;
g.gridy = 0;
for (int i = 0; i &lt; fields.length; i++) {
datiTurista.add(new JLabel(fields[i]), g);
g.gridx++;
if (i == 2) // Date of Birth
{
Date dob = (Date) tableModel.getValueAt(
selected, 5);
datiTurista.add(new JLabel(
Data.toCompact(dob)), g);
} else {
datiTurista.add(new JLabel(
tableModel.getValueAt(
selected, modelReference[i]).toString()), g);
}
g.gridx--;
g.gridy++;
}
g.gridx = 0;
g.gridy = 0;
rootDialog.add(datiTurista, g);
g.gridy++;
JLabel txtAttiva = new JLabel();
rootDialog.add(txtAttiva, g);
String[] options = new String[2];
ImageIcon iconDialog;
options[1] = &quot;Cancel&quot;;
String title;
boolean enabled = (Boolean) tableModel.getValueAt(
selected, 0);
if (enabled) // The process of decommissioning
{
title = &quot;Turn off the tourist&quot;
+ tableModel.getValueAt(selected, 1) + &quot; &quot;
+ tableModel.getValueAt(selected, 2) + &quot;?&quot;;
options[0] = &quot;Disable&quot;;
txtAttiva
.setText(&quot;Turn off the tourist selected?&quot;);
iconDialog = new ImageIcon(
getClass()
.getResource(
&quot;/unisa/gps/etour/gui/operatoreagenzia/images/DisattivaTurista48.png&quot;));
} else // The process of activation
{
title = &quot;Turn on the tourist&quot;
+ tableModel.getValueAt(selected, 1) + &quot; &quot;
+ tableModel.getValueAt(selected, 2) + &quot;?&quot;;
options[0] = &quot;Enable&quot;;
txtAttiva.setText(&quot;Activate the tourists selected?&quot;);
iconDialog = new ImageIcon(
getClass()
.getResource(
&quot;/unisa/gps/etour/gui/operatoreagenzia/images/AttivaTurista48.png&quot;));
}
txtAttiva.setForeground(Color.red);
int choice = JOptionPane.showInternalOptionDialog(
jContentPane, rootDialog, title,
JOptionPane.OK_CANCEL_OPTION,
JOptionPane.QUESTION_MESSAGE, iconDialog, options,
options[1]);
if (choice == JOptionPane.OK_OPTION) {
tableModel.setValueAt((!enabled) ? true : false,
selected, 0);
tableModel.fireTableDataChanged();
}
}
});
}
return btnAttiva;
}

/**
* This method initializes the button for changing
* Data of a tourist.
*
* @Return javax.swing.JButton - the button.
*/
private JButton getBtnModificaDati() {
if (null == btnModificaDati) {
btnModificaDati = new JButton();
btnModificaDati
.setText(&quot;Edit Data &lt;html&gt;&lt;br&gt;region&lt;/html&gt;&quot;);
btnModificaDati.setBounds(155, 5, 140, 40);
btnModificaDati.setEnabled(false);
btnModificaDati
.setIcon(new ImageIcon(
getClass()
.getResource(
&quot;/unisa/gps/etour/gui/operatoreagenzia/images/ModificaTurista32.png&quot;)));
btnModificaDati.addActionListener(new ActionListener() {
public void actionPerformed(ActionEvent arg0) {
// TEST
Date nuova = new Date();
nuova.setMonth(12);
nuova.setDate(30);
nuova.setYear(82);
Date nuova2 = new Date();
nuova2.setMonth(4);
nuova2.setDate(30);
nuova2.setYear(107);
BeanTurista test = new BeanTurista(0, &quot;mlmlml&quot;, &quot;Ottabio&quot;,
&quot;of Michil&quot;, &quot;Ottawa&quot;, &quot;Frattamaggiore&quot;, &quot;61616161&quot;,
&quot;84932nd&quot;, &quot;V.le della Mimosa 33&quot;, &quot;NA&quot;,
&quot;ottavio_ottawa@wawa.com&quot;, &quot;micacae&quot;, nuova, nuova2, false);
// TEST
apriScheda(test, true);
}
});
}
return btnModificaDati;
}

/**
* This method initializes the button to display the
* Board a tourist.
*
* @Return javax.swing.JButton - the button.
*/
private JButton getBtnVisualizzaScheda() {
if (null == btnVisualizzaScheda) {
btnVisualizzaScheda = new JButton();
btnVisualizzaScheda
.setText(&quot;Show &lt;html&gt;&lt;br&gt;tourist profile&lt;/html&gt;&quot;);
btnVisualizzaScheda.setBounds(305, 5, 140, 40);
btnVisualizzaScheda
.setIcon(new ImageIcon(
getClass()
.getResource(
&quot;/unisa/gps/eTour/gui/operatoreagenzia/images/schedaturista.png&quot;)));
btnVisualizzaScheda.setEnabled(false);
btnVisualizzaScheda.addActionListener(new ActionListener() {

public void actionPerformed(ActionEvent arg0) {
// TEST
Date nuova = new Date();
nuova.setMonth(12);
nuova.setDate(30);
nuova.setYear(82);
Date nuova2 = new Date();
nuova2.setMonth(4);
nuova2.setDate(30);
nuova2.setYear(107);
BeanTurista test = new BeanTurista(0, &quot;mlmlml&quot;, &quot;Ottabio&quot;,
&quot;of Michil&quot;, &quot;Ottawa&quot;, &quot;Frattamaggiore&quot;, &quot;61616161&quot;,
&quot;84932nd&quot;, &quot;V.le della Mimosa 33&quot;, &quot;NA&quot;,
&quot;ottavio_ottawa@wawa.com&quot;, &quot;micacae&quot;, nuova, nuova2, false);
// TEST
apriScheda(test, false);
}
});
}
return btnVisualizzaScheda;
}

/**
* This method initializes the delete button for a tourist.
*
* @Return javax.swing.JButton - the button.
*/
private JButton getBtnElimina() {
if (null == btnElimina) {
btnElimina = new JButton();
btnElimina.setText(&quot;Delete &lt;html&gt;&lt;br&gt;region&lt;/html&gt;&quot;);
btnElimina.setBounds(455, 5, 140, 40);
btnElimina.setEnabled(false);
btnElimina
.setIcon(new ImageIcon(
getClass()
.getResource(
&quot;/unisa/gps/etour/gui/operatoreagenzia/images/EliminaTurista32.png&quot;)));
btnElimina.addActionListener(new ActionListener() {

public void actionPerformed(ActionEvent arg0) {
int selectedRow = tableTuristi.getSelectedRow();
if (selectedRow != -1) {
String name = (String) tableModel.getValueAt(
selectedRow, 1)
+ &quot; &quot;
+ (String) tableModel
.getValueAt(selectedRow, 2);
JPanel root = new JPanel(new BorderLayout());
JLabel message = new JLabel(
&quot;Are you sure you want to delete the account of the tourist &quot;
+ name + &quot;?&quot;);
message.setFont(new Font(&quot;Dialog&quot;, Font.BOLD, 14));
JLabel alert = new JLabel(
&quot;The data account and all personal settings &quot;
+ &quot;Can not be filled again.&quot;,
SwingConstants.CENTER);
alert
.setIcon(new ImageIcon(
getClass()
.getResource(
&quot;/unisa/gps/etour/gui/operatoreagenzia/images/warning16.png&quot;)));
root.add(message, BorderLayout.NORTH);
root.add(alert, BorderLayout.CENTER);
String[] options = {&quot;Delete&quot;, &quot;Cancel&quot;};
int choice = JOptionPane
.showInternalOptionDialog(
jContentPane,
root,
&quot;Confirm Delete&quot;,
JOptionPane.YES_NO_OPTION,
JOptionPane.QUESTION_MESSAGE,
new ImageIcon(
getClass()
.getResource(
&quot;/unisa/gps/etour/gui/operatoreagenzia/images/EliminaTurista48.png&quot;)),
options, options[1]);
if (choice == JOptionPane.YES_OPTION) {
tableModel.removeTurista(selectedRow);
tableModel.fireTableDataChanged();
JLabel confirm = new JLabel(&quot;Account Tourists &quot; + name
+ &quot; was deleted.&quot;);
confirm.setFont(new Font(&quot;Dialog&quot;, Font.BOLD, 14));
JOptionPane
.showInternalMessageDialog(
jContentPane,
confirm,
&quot;Accounts Turista out!&quot;,
JOptionPane.OK_OPTION,
new ImageIcon(
getClass()
.getResource(
&quot;/unisa/gps/etour/gui/operatoreagenzia/images/ok32.png&quot;)));
}
}
}
});
}
return btnElimina;
}

/**
* This method initializes the scroll with the table bread tourists.
*
* @Return javax.swing.JScrollPane - the scroll pane.
*/
private JScrollPane getScrollTableTuristi() {
if (null == scrollTableTuristi) {
tableModel = new TuristiTableModel();
// TEST
Date nuova = new Date();
nuova.setMonth(12);
nuova.setDate(30);
nuova.setYear(82);
Date nuova2 = new Date();
nuova2.setMonth(4);
nuova2.setDate(30);
nuova2.setYear(107);
BeanTurista nuovo = new BeanTurista(0, &quot;mlmlml&quot;, &quot;Ottabio&quot;,
&quot;of Michil&quot;, &quot;Ottawa&quot;, &quot;Frattamaggiore&quot;, &quot;61616161&quot;,
&quot;84932nd&quot;, &quot;V.le della Mimosa 33&quot;, &quot;NA&quot;,
&quot;ottavio_ottawa@wawa.com&quot;, &quot;micacae&quot;, nuova, nuova2, false);
BeanTurista nuovo2 = new BeanTurista(1, &quot;mlmlml&quot;, &quot;Ottabiolino&quot;,
&quot;of Michil&quot;, &quot;Ottawa&quot;, &quot;Frattamaggiore&quot;, &quot;61616161&quot;,
&quot;84932nd&quot;, &quot;V.le della Mimosa 33&quot;, &quot;NA&quot;,
&quot;ottavio_ottawa@wawa.com&quot;, &quot;micacae&quot;, nuova, nuova2, true);
BeanTurista nuovo3 = new BeanTurista(2, &quot;mlmlml&quot;, &quot;Ottavio&quot;,
&quot;Michil&quot;, &quot;Ottawa&quot;, &quot;Frattamaggiore&quot;, &quot;61616161&quot;, &quot;84932nd&quot;,
&quot;V.le Mimose 33&quot;, &quot;NA&quot;, &quot;ottavio_ottawa@wawa.com&quot;,
&quot;micacae&quot;, nuova, nuova2, false);
tableModel.insertTurista(nuovo);
tableModel.insertTurista(nuovo2);
tableModel.insertTurista(nuovo3);
for (int i = 0; i &lt; 12; i++) {
tableModel.insertTurista(nuovo);
}
// END TEST
tableTuristi = new ScrollableTable(tableModel);
tableTuristi.setAutoCreateColumnsFromModel(true);
tableTuristi.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
tableTuristi.setSelectionForeground(Color.RED);
tableTuristi.setSelectionBackground(Color.white);
tableTuristi.setColumnSelectionAllowed(false);
tableTuristi.setShowVerticalLines(false);
tableTuristi.setRowHeight(32);
// Status
tableTuristi.getColumnModel().getColumn(0).setPreferredWidth(40);
tableTuristi.getColumnModel().getColumn(0).setCellRenderer(
new AttivazioneTuristaRenderer());
// Name
tableTuristi.getColumnModel().getColumn(1).setPreferredWidth(100);
// Surname
tableTuristi.getColumnModel().getColumn(2).setPreferredWidth(100);
// Email
tableTuristi.getColumnModel().getColumn(3).setPreferredWidth(140);
// Phone
tableTuristi.getColumnModel().getColumn(4).setPreferredWidth(80);
// Date of Birth
tableTuristi.getColumnModel().getColumn(5).setPreferredWidth(100);
// City of Birth
tableTuristi.getColumnModel().getColumn(6).setPreferredWidth(100);
// Address
tableTuristi.getColumnModel().getColumn(7).setPreferredWidth(100);
// Residence
tableTuristi.getColumnModel().getColumn(8).setPreferredWidth(80);
// CAP
tableTuristi.getColumnModel().getColumn(9).setPreferredWidth(60);
// State
tableTuristi.getColumnModel().getColumn(10).setPreferredWidth(30);
// Data entry
tableTuristi.getColumnModel().getColumn(11).setPreferredWidth(90);

ListSelectionModel selectionModel = tableTuristi
.getSelectionModel();
selectionModel.addListSelectionListener(new ListSelectionListener() {
public void valueChanged(ListSelectionEvent event) {
int selectedRow = tableTuristi.getSelectedRow();
if (selectedRow != -1) {
btnAttiva.setEnabled(true);
btnModificaDati.setEnabled(true);
btnVisualizzaScheda.setEnabled(true);
btnElimina.setEnabled(true);
if ((Boolean) tableModel.getValueAt(selectedRow, 0)) {
btnAttiva.setText(&quot;&lt;html&gt;Enable&lt;br&gt;region&lt;/html&gt;&quot;);
btnAttiva
.setIcon(new ImageIcon(
getClass()
.getResource(
&quot;/unisa/gps/etour/gui/operatoreagenzia/images/AttivaTurista32.png&quot;)));
} else {
btnAttiva
.setText(&quot;&lt;html&gt;Disable&lt;br&gt;region&lt;/html&gt;&quot;);
btnAttiva
.setIcon(new ImageIcon(
getClass()
.getResource(
&quot;/unisa/gps/etour/gui/operatoreagenzia/images/DisattivaTurista32.png&quot;)));
}
} else {
btnElimina.setEnabled(false);
btnModificaDati.setEnabled(false);
btnAttiva.setEnabled(false);
btnVisualizzaScheda.setEnabled(false);
}
}
});
scrollTableTuristi = new JScrollPane();
scrollTableTuristi.setViewportView(tableTuristi);
scrollTableTuristi
.setHorizontalScrollBarPolicy(JScrollPane.HORIZONTAL_SCROLLBAR_ALWAYS);
scrollTableTuristi
.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);
}
return scrollTableTuristi;
}

/**
* This method initializes the form to the search for tourists.
*
* @Return javax.swing.JPanel
*/
private JPanel getSearchPanel() {
if (null == searchPanel) {
searchPanel = new JPanel();
searchPanel.setLayout(new GridBagLayout());
searchPanel.setBorder(BorderFactory.createTitledBorder(
BorderFactory.createLineBorder(new Color(51, 102, 255), 3),
&quot;Research Tourists&quot;, TitledBorder.DEFAULT_JUSTIFICATION,
TitledBorder.DEFAULT_POSITION, new Font(&quot;Dialog&quot;,
Font.BOLD, 12), new Color(0, 102, 204)));
GridBagConstraints g = new GridBagConstraints();
// Create Panel, choose tourists
JPanel turisti = new JPanel(new GridBagLayout());
turisti.setPreferredSize(new Dimension(200, 120));
turisti.setBorder(BorderFactory.createLoweredBevelBorder());
turistiAttivati = new JToggleButton(&quot;active tourists&quot;);
turistiAttivati.setPreferredSize(new Dimension(165, 30));
turistiDisattivati = new JToggleButton(&quot;Tourists Off&quot;);
turistiDisattivati.setPreferredSize(new Dimension(165, 30));
turistiAttivati
.setIcon(new ImageIcon(
getClass()
.getResource(
&quot;/unisa/gps/etour/gui/operatoreagenzia/images/schedaturista24.png&quot;)));
ActionListener almenoUno = new ActionListener() {
public void actionPerformed(ActionEvent pEvent) {
if (pEvent.getSource() == turistiAttivati) {
if (!turistiAttivati.isSelected()
&amp;&amp; !turistiDisattivati.isSelected()) {
turistiDisattivati.setSelected(true);
}
} else {
if (!turistiAttivati.isSelected()
&amp;&amp; !turistiDisattivati.isSelected()) {
turistiAttivati.setSelected(true);
}
}
}
};
turistiAttivati.addActionListener(almenoUno);
turistiDisattivati.addActionListener(almenoUno);
turistiAttivati.setSelected(true);
turistiDisattivati.setSelected(true);
turistiDisattivati
.setIcon(new ImageIcon(
getClass()
.getResource(
&quot;/unisa/gps/etour/gui/operatoreagenzia/images/DisattivaTurista24.png&quot;)));
g.insets = new Insets(8, 8, 8, 8);
g.gridx = 0;
g.gridy = 0;
g.weighty = 0.2;
g.fill = GridBagConstraints.HORIZONTAL;
turisti.add(turistiAttivati, g);
g.gridy++;
turisti.add(turistiDisattivati, g);

// Create search panel
g.gridx = 0;
g.gridy = 0;
g.gridwidth = 2;
g.anchor = GridBagConstraints.CENTER;
g.fill = GridBagConstraints.NONE;
g.insets = new Insets(5, 5, 5, 5);
searchPanel.add(new JLabel(&quot;Name Turista&quot;), g);
cognomeTurista = new JTextField(12);
g.gridy++;
searchPanel.add(cognomeTurista, g);
g.gridy++;
searchPanel.add(new JLabel(&quot;View&quot;), g);
g.gridy++;
g.weighty = 0.2;
g.insets = new Insets(5, 5, 20, 5);
searchPanel.add(turisti, g);
g.insets = new Insets(5, 5, 5, 5);
g.gridwidth = 1;
g.gridy++;
searchPanel.add(getBtnRicerca(), g);
g.gridx = 1;
searchPanel.add(getBtnAzzera(), g);
}
return searchPanel;
}

/**
* This method initializes the panel's online help.
*
* @Return javax.swing.JPanel
*/
private JPanel getPanelHelp() {
if (null == panelHelp) {
panelHelp = new JPanel();
panelHelp.setLayout(new BorderLayout());
panelHelp.setBorder(BorderFactory.createTitledBorder(BorderFactory
.createLineBorder(new Color(51, 102, 255), 3),
&quot;Help&quot;, TitledBorder.DEFAULT_JUSTIFICATION,
TitledBorder.DEFAULT_POSITION, new Font(&quot;Dialog&quot;,
Font.BOLD, 12), new Color(0, 102, 204)));
panelHelp.setPreferredSize(new Dimension(200, 100));
textGuida = new JTextPane();
textGuida.setOpaque(false);
textGuida.setContentType(&quot;text/html&quot;);
textGuida.setEditable(false);
textGuida.setOpaque(false);
panelHelp.add(textGuida, BorderLayout.CENTER);
}
return panelHelp;
}

/**
* This method initializes the side panel of the interface.
*
* @Return javax.swing.JPanel
*/
private JPanel getRightPanel() {
if (null == rightPanel) {
rightPanel = new JPanel();
rightPanel.setLayout(new GridBagLayout());
GridBagConstraints g = new GridBagConstraints();
g.gridx = 0;
g.gridy = 1;
g.fill = GridBagConstraints.BOTH;
g.weighty = 0.3;
rightPanel.add(getPanelHelp(), g);
g.weighty = 0.7;
g.gridx = 0;
g.gridy = 0;
rightPanel.add(getSearchPanel(), g);
}
return rightPanel;
}

/**
* This method initializes the search button tourists.
*
* @Return javax.swing.JButton
*/
private JButton getBtnRicerca() {
if (null == btnRicerca) {
btnRicerca = new JButton();
btnRicerca.setText(&quot;Search&quot;);
btnRicerca.setPreferredSize(new Dimension(98, 26));
btnRicerca
.setIcon(new ImageIcon(
getClass()
.getResource(
&quot;/unisa/gps/etour/gui/operatoreagenzia/images/Ricerca16.png&quot;)));
}
return btnRicerca;
}

/**
* This method initializes the button to reset form
* Search.
*
* @Return javax.swing.JButton
*/
private JButton getBtnAzzera() {
if (null == btnAzzera) {
btnAzzera = new JButton();
btnAzzera.setText(&quot;Clear&quot;);
btnAzzera.setHorizontalTextPosition(SwingConstants.LEADING);
btnAzzera.setPreferredSize(new Dimension(98, 26));
btnAzzera
.setIcon(new ImageIcon(
getClass()
.getResource(
&quot;/unisa/gps/etour/gui/operatoreagenzia/images/Azzera16.png&quot;)));
btnAzzera.addActionListener(new ActionListener() {
public void actionPerformed(ActionEvent pAcEvent) {
cognomeTurista.setText(&quot;&quot;);
turistiAttivati.setSelected(true);
turistiDisattivati.setSelected(true);
}
});
}
return btnAzzera;
}

/**
* This method opens a tab for the bean tourists supplied input.
*
* @param pTurista BeanTurista - the bean tourists
* @param pModifica boolean &lt;ul&gt; &lt;li&gt; true - if you change the data.
* &lt;li&gt; * False - if you receive the card. &lt;/ul&gt;
* @Return void
*/
private void apriScheda(BeanTurista pTurista, boolean pModifica) {
for (int i = 0; i &lt; figli.size(); i++) {
SchedaTurista corrente = figli.get(i);
if (pTurista.getId() == corrente.getId()) {
desktopManager.activateFrame(corrente);
return;
}
}
SchedaTurista nuova = new SchedaTurista(this, pTurista, pModifica);
jDesktopPane.add(nuova, Integer.MAX_VALUE);
nuova.setVisible(true);
figli.add(nuova);
}

/**
* Closes the selected tab.
*
* @param pScheda SchedaTurista - the tab to close.
* @Return void
*/
protected void closeScheda(SchedaTurista pScheda) {
figli.remove(pScheda);
pScheda.dispose();
}

/**
* Update the table model of the tourists with the bean supplied
* Input.
*
* @param pTurista BeanTurista - the bean of the tourist.
* @Return void
*/
protected void updateTableModel(BeanTurista pTurista) {
tableModel.updateTurista(pTurista);
}
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_TuristiTableModel</id>
      <content>/*
* TuristiTableModel.java
*
* 1.0
*
* 27/05/2007
*
* 2007 eTour Project - Copyright by SE @ SA Lab - DMI University of Salerno
*/
package unisa.gps.etour.gui.operatoreagenzia.tables;

import java.util.ArrayList;
import java.util.Date;
import java.util.Vector;
import javax.swing.table.AbstractTableModel;

import unisa.gps.etour.bean.BeanTurista;

/**
* &lt;b&gt; TuristiTableModel &lt;/b&gt;
* &lt;p&gt; Acts as a container of data from the tourists who have
* Be displayed in a JTable. &lt;/p&gt;
* @see javax.swing.table.AbstractTableModel
* @see javax.swing.JTable
* @see unisa.gps.etour.bean.BeanTurista
* @version 1.0
* @author Mario Gallo
*/
public class TuristiTableModel extends AbstractTableModel {
private static final String[] headers = {&quot;Status&quot;, &quot;Name&quot;, &quot;Name&quot;, &quot;E-Mail&quot;, &quot;Phone&quot;,
&quot;Date of Birth&quot;, &quot;City of Birth&quot;,
&quot;Address&quot;, &quot;City&quot;, &quot;CPC&quot;, &quot;test&quot;, &quot;Save&quot;};
private static final Class[] columnClasses = {Boolean.class, String.class, String.class,
String.class, String.class, Date.class, String.class, String.class, String.class, String.class, String.class,
Date.class};
private Vector&lt;Object[]&gt; data;

/**
* Default Constructor. We only provide the template without loading
* No data in it.
*/
public TuristiTableModel() {
data = new Vector&lt;Object[]&gt;();
}

/**
* Create a model of the table and loads the data provided through an array of BeanBeneCulturale.
*
* @param pTuristi java.util.ArrayList&lt;BeanTurista&gt; - an ArrayList of BeanTurista.
*/
public TuristiTableModel(ArrayList&lt;BeanTurista&gt; pTuristi) {
this();
if (null == pTuristi) {
return;
}
for (int i = 0; i &lt; pTuristi.size(); i++) {
insertTurista(pTuristi.get(i));
}
}

/**
* Returns the number of columns provided by the model.
*
* @return int - the number of columns.
*/
public int getColumnCount() {
return headers.length;
}

/**
* Returns the number of rows currently in the model.
*
* @return int - the number of rows.
*/
public int GetRowCount() {
return data.size();
}

/**
* Returns the column name from the index provided.
*
* @return String - the name of the column.
* @exception IllegalArgumentException - if the column index is not provided
* In the model.
*/
public String getColumnName(int pColumn) throws IllegalArgumentException {
if (pColumn &gt;= getColumnCount() || pColumn &lt; 0) {
throw new IllegalArgumentException(
&quot;The column index is not provided in the model.&quot;);
}
return headers[pColumn];
}

/**
* Returns the object in the model to the row and column provided.
*
* @param pRow - the line number.
* @param pColumn - the column number.
* @return Object - the object contained in the selected cell.
* @exception IllegalArgumentException - if the index or the row or column not provided
* Are present in the model.
*/
public Object getValueAt(int pRow, int pColumn)
throws IllegalArgumentException {
if (pRow &gt;= GetRowCount() || pRow &lt; 0) {
throw new IllegalArgumentException(
&quot;The row index is not provided in the model.&quot;);
}
if (pColumn &gt;= getColumnCount() || pColumn &lt; 0) {
throw new IllegalArgumentException(
&quot;The column index is not provided in the model.&quot;);
}
return data.get(pRow)[pColumn];
}

/**
* Returns the class of objects in the column of which is provided in the index.
*
* @param pColumn - the column number.
* @return Class - the class of objects of the selected column.
* @exception IllegalArgumentException - if the index column does not pro
* In the model.
*/
public Class getColumnClass(int pColumn) throws IllegalArgumentException {
if (pColumn &gt;= getColumnCount() || pColumn &lt; 0) {
throw new IllegalArgumentException(
&quot;The column index is not provided in the model.&quot;);
}
return columnClasses[pColumn];
}

/**
* Returns whether the selected cell editable.
*
* @return boolean - true if the cell editable
* False otherwise
* @param pRow - the line number.
* @param pColumn - the column number.
* @exception IllegalArgumentException - if the index or the row or column are not provided
* In the model.
*/
public boolean isCellEditable(int pRow, int pColumn)
throws IllegalArgumentException {
return false;
}

/**
* The method is inherited by the TableModel not setValueAt
* Necessary because not provided for the possibility of amending a
* Single cell.
*
* @deprecated
*/
public void setValueAt(Object value, int row, int col) {

}

/**
* Enables or disables the tourist in the selected row.
*
* @param pRow int - the selected row.
* @return int - the id of the tourist on / off.
*/
public int attivaTurista(int pRow) throws IllegalArgumentException {
data.get(pRow)[0] = (isAttivato(pRow)) ? false : true;
fireTableDataChanged();
return getID(pRow);
}

/**
* Determines if a visitor to the selected row is enabled or disabled.
*
* @param pRow int - the selected row.
* @return &lt;ul&gt; &lt;li&gt; &lt;i&gt; true &lt;/i&gt; - enabled &lt;/li&gt;
* &lt;li&gt; &lt;i&gt; False &lt;/i&gt; - disabled &lt;/li&gt; &lt;/ul&gt;
*/
public boolean isAttivato(int pRow) throws IllegalArgumentException {
return (Boolean) getValueAt(pRow, 0);
}

/**
*
* Enter data for a tourist in the model since its Bean.
*
* @param pTurista BeanTurisa - the bean that contains the data of the tourist.
*/
public void insertTurista(BeanTurista pTurista) throws IllegalArgumentException {
if (null == pTurista) {
throw new IllegalArgumentException(
&quot;The bean provided can not be null.&quot;);
}
Object[] aRow = new Object[13];
aRow[0] = pTurista.isAttiva();
aRow[1] = pTurista.getNome();
aRow[2] = pTurista.getCognome();
aRow[3] = pTurista.getEmail();
aRow[4] = pTurista.getTelefono();
aRow[5] = pTurista.getDataNascita();
aRow[6] = pTurista.getCittaNascita();
aRow[7] = pTurista.getVia();
aRow[8] = pTurista.getCittaResidenza();
aRow[9] = pTurista.getCap();
aRow[10] = pTurista.getProvincia();
aRow[11] = pTurista.getDataRegistrazione();
aRow[12] = pTurista.getId();
data.add(aRow);
}

/**
*
* Update the information of the tourist in the model (if any)
* With the bean supplied input.
*
* @param pTurista BeanTurista - the bean that contains the data of the tourist.
*/
public void updateTurista(BeanTurista pTurista) throws IllegalArgumentException {
if (null == pTurista) {
throw new IllegalArgumentException(
&quot;The bean provided can not be null.&quot;);
}
int i;
for (i = 0; i &lt; data.size(); i++) {
int id = (Integer) data.get(i)[12];
if (id == pTurista.getId()) {
break;
}
}
if (i != data.size()) // Found
{
Object[] aRow = new Object[13];
aRow[0] = pTurista.isAttiva();
aRow[1] = pTurista.getNome();
aRow[2] = pTurista.getCognome();
aRow[3] = pTurista.getEmail();
aRow[4] = pTurista.getTelefono();
aRow[5] = pTurista.getDataNascita();
aRow[6] = pTurista.getCittaNascita();
aRow[7] = pTurista.getVia();
aRow[8] = pTurista.getCittaResidenza();
aRow[9] = pTurista.getCap();
aRow[10] = pTurista.getProvincia();
aRow[11] = pTurista.getDataRegistrazione();
aRow[12] = pTurista.getId();
data.set(i, aRow);
fireTableDataChanged();
}
}

/**
*
* Returns the id of the visitor whose data are displayed in row
* Provided input.
*
* @param pRow - the line number.
* @return - the id of the tourist.
* @exception IllegalArgumentException - if the row index does not pro
* In the model.
*/
public int getID(int pRow) throws IllegalArgumentException {
if (pRow &gt;= GetRowCount() || pRow &lt; 0) {
throw new IllegalArgumentException(
&quot;The row index is not provided in the model.&quot;);
}
return (Integer) data.get(pRow)[12];
}

/**
*
* Returns the id of the tourist at the line number provided as input and removes it from the model.
*
* @param pRow - the line number.
* @return - the id of the tourist.
* @exception IllegalArgumentException - if the row index does not pro
* In the model.
*/
public int removeTurista(int pRow) throws IllegalArgumentException {
int id = getID(pRow);
data.remove(pRow);
return id;
}
}</content>
      <parent_id/>
    </artifact>
    <artifact>
      <id>CC_reportStatistici</id>
      <content>package unisa.gps.etour.gui.operatoreagenzia;

import java.awt.BorderLayout;
import javax.swing.JPanel;
import javax.swing.JInternalFrame;
import java.awt.Dimension;
import java.awt.GridBagLayout;
import javax.swing.JToolBar;
import javax.swing.JComboBox;
import javax.swing.JLabel;
import javax.swing.JTabbedPane;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import java.awt.GridBagConstraints;
import javax.swing.BorderFactory;
import java.awt.Color;
import javax.swing.border.TitledBorder;
import java.awt.Font;
import javax.swing.JTextPane;
import javax.swing.JCheckBox;
import javax.swing.JRadioButton;
import java.awt.Insets;
import javax.swing.ImageIcon;
import javax.swing.JButton;

import unisa.gps.etour.bean.BeanBeneCulturale;
import unisa.gps.etour.bean.BeanPuntoDiRistoro;
import unisa.gps.etour.bean.util.Punto3D;

import java.awt.Point;
import java.awt.event.KeyEvent;
import java.util.ArrayList;
import java.util.Date;
import java.util.HashMap;
import java.util.Vector;

public class reportStatistici extends JInternalFrame {
/**
*
*/
private static final long serialVersionUID = 1L;
private Vector&lt;String&gt; data;
private JPanel jContentPane = null;
private JToolBar jToolBar = null;
private JComboBox jComboBox = null;
private JPanel centralPanel = null;
private JScrollPane jScrollPane = null;
private JTable tabellas = null;
private JPanel southPanel = null;
private JTabbedPane jTabbedPane = null;
private JPanel guidainlinea = null;
private JTextPane jTextPane = null;
private JPanel genStat = null;
private JPanel evdStat = null;
private JPanel stat = null;
private JPanel jPanel = null;
private JButton jButton = null;
private JButton jButton1 = null;
private JButton jButton2 = null;
private JLabel jLabel1 = null;
private JLabel jLabel2 = null;
private JLabel jLabel3 = null;
private JLabel jLabel4 = null;
private JLabel jLabel5 = null;
private JLabel jLabel6 = null;
private JLabel jLabel7 = null;
private JLabel jLabel8 = null;
private JLabel jLabel9 = null;
private JPanel jPanel1 = null;
private JLabel jLabel10 = null;
private JLabel jLabel11 = null;
private JLabel jLabel12 = null;
private JLabel jLabel13 = null;
private JLabel jLabel14 = null;
private JLabel jLabel15 = null;
private JLabel jLabel16 = null;
private JLabel jLabel17 = null;
private JLabel jLabel18 = null;
private JLabel jLabel19 = null;
private JLabel jLabel20 = null;
private JLabel jLabel21 = null;
private JLabel jLabel22 = null;
private JButton btnVisualizza = null;
private JLabel jLabel = null;

/**
* This is the default constructor xxx
*/
public reportStatistici() {
super();
initialize();
}

/**
* This method initializes this
*
* @return void
*/
private void initialize() {
this.setSize(700, 480);
this.setPreferredSize(new Dimension(790, 520));
this.setFrameIcon(new ImageIcon(getClass().getResource(&quot;/interfacceAgenzia/immagini/statistics-32x32.png&quot;)));
this.setIconifiable(true);
this.setMaximizable(true);
this.setClosable(true);
this.setTitle(&quot;Statistical Report&quot;);
this.setContentPane(getJContentPane());
caricaCombo(this.getJComboBox());
}

/**
* This method initializes jContentPane
*
* @return javax.swing.JPanel
*/
private JPanel getJContentPane() {
if (jContentPane == null) {
BorderLayout borderLayout = new BorderLayout();
borderLayout.setHgap(0);
borderLayout.setVgap(5);
jContentPane = new JPanel();
jContentPane.setLayout(borderLayout);
jContentPane.add(getJToolBar(), BorderLayout.NORTH);
jContentPane.add(getCentralPanel(), BorderLayout.CENTER);
jContentPane.add(getSouthPanel(), BorderLayout.CENTER);
}
return jContentPane;
}

/**
* This method initializes JToolBar
*
* @return javax.swing.JToolBar
*/
private JToolBar getJToolBar() {
if (jToolBar == null) {
jLabel = new JLabel();
jLabel.setText(&quot;Select Location&quot;);
jLabel.setLocation(new Point(16, 6));
jToolBar = new JToolBar();
jToolBar.setFloatable(false);
jToolBar.setLayout(new GridBagLayout());
jToolBar.setPreferredSize(new Dimension(1, 30));
jToolBar.add(jLabel);
jToolBar.addSeparator();
jToolBar.add(getJComboBox());
}
return jToolBar;
}

/**
* This method initializes JComboBox
*
* @return javax.swing.JComboBox
*/
private JComboBox getJComboBox() {
if (jComboBox == null) {
jComboBox = new JComboBox();
jComboBox.setLocation(new Point(140, 4));
jComboBox.setPreferredSize(new Dimension(150, 20));
jComboBox.setSize(new Dimension(140, 20));
//jComboBox.addItem(&quot;Salerno&quot;);

this.setTitle(&quot;Statistical Report - Salerno&quot;);
}
return jComboBox;
}

public void caricaCombo(JComboBox combo) {
BeanPuntoDiRistoro[] pr = new BeanPuntoDiRistoro[5];
for (int i = 0; i &lt; 5; i++) {
pr[i] = new BeanPuntoDiRistoro(1, 12, 3.5,
&quot;Arturo&quot;, &quot;Vicno the sea, great view, romantic and Miao&quot;,
&quot;089203202&quot;, &quot;mountains&quot;, &quot;Amalfi&quot;, &quot;Via Principe 35&quot;, &quot;84123&quot;,
&quot;NA&quot;, &quot;1234567898741&quot;, new Punto3D(12, 324, 3),
new Date(2, 23, 3), new Date(3, 3, 4), &quot;Monday&quot;);
}

BeanBeneCulturale[] bc = new BeanBeneCulturale[5];
for (int i = 0; i &lt; 5; i++) {
bc[i] = new BeanBeneCulturale(0.120, &quot;Castle Arechi&quot;, &quot;Salerno&quot;, &quot;089,723,088&quot;, 
&quot;The castle stands on balbalblalbalbla, blablalblalba, balblalballab&quot;,
&quot;Salerno&quot;, &quot;Largo castles 12&quot;, &quot;84100&quot;, &quot;SA&quot;, new Punto3D(10, 30, 40), 
new Date(0, 0, 0, 9, 0), new Date(0, 0, 0, 23, 0), &quot;Monday&quot;,
12.5, 4.5);
}

ArrayList&lt;String&gt; list = null;
for (int i = 0; i &lt; pr.length; i++) {
if (pù(combo, pr[i].getLocal())) {
jComboBox.addItem(pr[i].getLocal());
}
}

for (int i = 0; i &lt; bc.length; i++) {
if (pù(combo, bc[i].getLocal())) {
jComboBox.addItem(bc[i].getLocal());
}
}
tabellaSiti.setModel(new ReportTableModel(bc, pr));
}

private boolean pù(JComboBox combo, String loc) {
for (int i = 0; i &lt; combo.getItemCount(); i++) {
if (combo.getItemAt(i) == loc) {
return false;
}
}
return true;
}

/**
* This method initializes centralPanel
*
* @return javax.swing.JPanel
*/
private JPanel getCentralPanel() {
if (centralPanel == null) {
centralPanel = new JPanel();
centralPanel.setLayout(new BorderLayout());
centralPanel.add(getJScrollPane(), BorderLayout.CENTER);
centralPanel.add(getJPanel(), BorderLayout.EAST);
}
return centralPanel;
}

/**
* This method initializes JScrollPane
*
* @return javax.swing.JScrollPane
*/
private JScrollPane getJScrollPane() {
if (jScrollPane == null) {
jScrollPane = new JScrollPane();
jScrollPane.setViewportView(getTabellaSiti());
}
return jScrollPane;
}

/**
* This method initializes tabellas
*
* @return javax.swing.JTable
*/
private JTable getTabellaSiti() {
if (tabellas == null) {
tabellas = new JTable();
}
return tabellas;
}

/**
* This method initializes southPanel
*
* @return javax.swing.JPanel
*/
private JPanel getSouthPanel() {
if (southPanel == null) {
GridBagConstraints gridBagConstraints11 = new GridBagConstraints();
gridBagConstraints11.anchor = GridBagConstraints.SOUTH;
gridBagConstraints11.insets = new Insets(0, 0, 5, 0);
GridBagConstraints gridBagConstraints = new GridBagConstraints();
gridBagConstraints.fill = GridBagConstraints.BOTH;
gridBagConstraints.weighty = 1.0;
gridBagConstraints.insets = new Insets(5, 5, 5, 5);
gridBagConstraints.gridx = 0;
gridBagConstraints.gridy = 0;
gridBagConstraints.weightx = 1.0;
southPanel = new JPanel();
southPanel.setLayout(new GridBagLayout());
southPanel.add(getJTabbedPane(), gridBagConstraints);
southPanel.add(getGuidainlinea(), gridBagConstraints11);
}
return southPanel;
}

/**
* This method initializes JTabbedPane
*
* @return javax.swing.JTabbedPane
*/
private JTabbedPane getJTabbedPane() {
if (jTabbedPane == null) {
jTabbedPane = new JTabbedPane();
jTabbedPane.setPreferredSize(new Dimension(100, 200));
jTabbedPane.setName(&quot;&quot;);
jTabbedPane.setTabPlacement(JTabbedPane.TOP);
jTabbedPane.addTab(&quot;General Statistics&quot;, null, getGenStat(), null);
jTabbedPane.addTab(&quot;Site Statistics&quot;, null, getEvdStat(), null);
jTabbedPane.addTab(&quot;Additional Statistics&quot;, null, getStat(), null);
}
return jTabbedPane;
}

/**
* This method initializes guidainlinea
*
* @return javax.swing.JPanel
*/
private JPanel getGuidainlinea() {
if (guidainlinea == null) {
GridBagConstraints gridBagConstraints1 = new GridBagConstraints();
gridBagConstraints1.fill = GridBagConstraints.BOTH;
gridBagConstraints1.weighty = 1.0;
gridBagConstraints1.weightx = 1.0;
guidainlinea = new JPanel();
guidainlinea.setLayout(new GridBagLayout());
guidainlinea.setBorder(BorderFactory.createTitledBorder(BorderFactory.createLineBorder(new Color(51, 102, 255), 3), &quot;Help&quot;, TitledBorder.DEFAULT_JUSTIFICATION, TitledBorder.DEFAULT_POSITION, new Font(&quot;Dialog&quot;, Font.BOLD, 12), new Color(51, 153, 255)));
guidainlinea.setPreferredSize(new Dimension(180, 200));
guidainlinea.add(getJTextPane(), gridBagConstraints1);
}
return guidainlinea;
}

/**
* This method initializes jTextPane
*
* @return javax.swing.JTextPane
*/
private JTextPane getJTextPane() {
if (jTextPane == null) {
jTextPane = new JTextPane();
jTextPane.setPreferredSize(new Dimension(160, 100));
}
return jTextPane;
}

/**
* This method initializes genStat
*
* @return javax.swing.JPanel
*/
private JPanel getGenStat() {
if (genStat == null) {
GridBagConstraints gridBagConstraints14 = new GridBagConstraints();
gridBagConstraints14.gridx = 2;
gridBagConstraints14.insets = new Insets(5, 5, 5, 5);
gridBagConstraints14.gridy = 3;
jLabel9 = new JLabel();
jLabel9.setText(&quot;Bells&quot;);
GridBagConstraints gridBagConstraints13 = new GridBagConstraints();
gridBagConstraints13.gridx = 1;
gridBagConstraints13.insets = new Insets(5, 5, 5, 5);
gridBagConstraints13.gridy = 3;
jLabel8 = new JLabel();
jLabel8.setText(&quot;3.5&quot;);
GridBagConstraints gridBagConstraints12 = new GridBagConstraints();
gridBagConstraints12.gridx = 0;
gridBagConstraints12.insets = new Insets(5, 5, 5, 5);
gridBagConstraints12.gridy = 3;
jLabel7 = new JLabel();
jLabel7.setText(&quot;Media Ratings:&quot;);
GridBagConstraints gridBagConstraints10 = new GridBagConstraints();
gridBagConstraints10.gridx = 1;
gridBagConstraints10.insets = new Insets(5, 5, 5, 5);
gridBagConstraints10.gridy = 2;
jLabel6 = new JLabel();
jLabel6.setText(&quot;90&quot;);
GridBagConstraints gridBagConstraints9 = new GridBagConstraints();
gridBagConstraints9.gridx = 0;
gridBagConstraints9.insets = new Insets(5, 5, 5, 5);
gridBagConstraints9.gridy = 2;
jLabel5 = new JLabel();
jLabel5.setText(&quot;Number of votes not enough&quot;);
GridBagConstraints gridBagConstraints8 = new GridBagConstraints();
gridBagConstraints8.gridx = 1;
gridBagConstraints8.insets = new Insets(5, 5, 5, 5);
gridBagConstraints8.gridy = 1;
jLabel4 = new JLabel();
jLabel4.setText(&quot;99&quot;);
GridBagConstraints gridBagConstraints7 = new GridBagConstraints();
gridBagConstraints7.gridx = 0;
gridBagConstraints7.insets = new Insets(5, 5, 5, 5);
gridBagConstraints7.gridy = 1;
jLabel3 = new JLabel();
jLabel3.setText(&quot;Number enough votes:&quot;);
GridBagConstraints gridBagConstraints6 = new GridBagConstraints();
gridBagConstraints6.gridx = 1;
gridBagConstraints6.insets = new Insets(5, 5, 5, 5);
gridBagConstraints6.gridy = 0;
jLabel2 = new JLabel();
jLabel2.setText(&quot;189&quot;);
GridBagConstraints gridBagConstraints5 = new GridBagConstraints();
gridBagConstraints5.gridx = 0;
gridBagConstraints5.insets = new Insets(5, 5, 5, 5);
gridBagConstraints5.anchor = GridBagConstraints.CENTER;
gridBagConstraints5.gridy = 0;
jLabel1 = new JLabel();
jLabel1.setText(&quot;Number of votes issued:&quot;);
genStat = new JPanel();
genStat.setLayout(new GridBagLayout());
genStat.add(jLabel1, gridBagConstraints5);
genStat.add(jLabel2, gridBagConstraints6);
genStat.add(jLabel3, gridBagConstraints7);
genStat.add(jLabel4, gridBagConstraints8);
genStat.add(jLabel5, gridBagConstraints9);
genStat.add(jLabel6, gridBagConstraints10);
genStat.add(jLabel7, gridBagConstraints12);
genStat.add(jLabel8, gridBagConstraints13);
genStat.add(jLabel9, gridBagConstraints14);
}
return genStat;
}

/**
* This method initializes evdStat
*
* @return javax.swing.JPanel
*/
private JPanel getEvdStat() {
if (evdStat == null) {
GridBagConstraints gridBagConstraints25 = new GridBagConstraints();
gridBagConstraints25.gridx = 2;
gridBagConstraints25.insets = new Insets(0, 80, 0, 5);
gridBagConstraints25.ipadx = 1;
gridBagConstraints25.gridy = 3;
GridBagConstraints gridBagConstraints28 = new GridBagConstraints();
gridBagConstraints28.gridx = 3;
gridBagConstraints28.anchor = GridBagConstraints.WEST;
gridBagConstraints28.insets = new Insets(0, 5, 0, 5);
gridBagConstraints28.gridy = 3;
jLabel22 = new JLabel();
jLabel22.setText(&quot;6&quot;);
GridBagConstraints gridBagConstraints27 = new GridBagConstraints();
gridBagConstraints27.gridx = 3;
gridBagConstraints27.anchor = GridBagConstraints.WEST;
gridBagConstraints27.insets = new Insets(5, 5, 5, 5);
gridBagConstraints27.gridy = 0;
jLabel21 = new JLabel();
jLabel21.setText(&quot;29&quot;);
GridBagConstraints gridBagConstraints26 = new GridBagConstraints();
gridBagConstraints26.gridx = 1;
gridBagConstraints26.anchor = GridBagConstraints.WEST;
gridBagConstraints26.gridwidth = 1;
gridBagConstraints26.insets = new Insets(5, 5, 5, 5);
gridBagConstraints26.gridy = 0;
jLabel20 = new JLabel();
jLabel20.setText(&quot;35&quot;);
jLabel19 = new JLabel();
jLabel19.setText(&quot;Feedback link under the sufficiency:&quot;);
GridBagConstraints gridBagConstraints24 = new GridBagConstraints();
gridBagConstraints24.gridx = 2;
gridBagConstraints24.insets = new Insets(5, 5, 5, 5);
gridBagConstraints24.anchor = GridBagConstraints.EAST;
gridBagConstraints24.gridy = 0;
jLabel18 = new JLabel();
jLabel18.setText(&quot;Feedback enough:&quot;);
GridBagConstraints gridBagConstraints23 = new GridBagConstraints();
gridBagConstraints23.gridx = 0;
gridBagConstraints23.gridwidth = 1;
gridBagConstraints23.insets = new Insets(5, 5, 5, 5);
gridBagConstraints23.gridy = 0;
jLabel17 = new JLabel();
jLabel17.setText(&quot;Feedback received in full:&quot;);
GridBagConstraints gridBagConstraints15 = new GridBagConstraints();
gridBagConstraints15.gridx = 0;
gridBagConstraints15.gridwidth = 4;
gridBagConstraints15.gridy = 4;
evdStat = new JPanel();
evdStat.setLayout(new GridBagLayout());
evdStat.setEnabled(false);
evdStat.add(getJPanel1(), gridBagConstraints15);
evdStat.add(jLabel17, gridBagConstraints23);
evdStat.add(jLabel18, gridBagConstraints24);
evdStat.add(jLabel20, gridBagConstraints26);
evdStat.add(jLabel21, gridBagConstraints27);
evdStat.add(jLabel22, gridBagConstraints28);
evdStat.add(jLabel19, gridBagConstraints25);
}
return evdStat;
}

/**
* This method initializes stat
*
* @return javax.swing.JPanel
*/
private JPanel getStat() {
if (stat == null) {
stat = new JPanel();
stat.setLayout(new GridBagLayout());
stat.setEnabled(false);
}
return stat;
}

/**
* This method initializes JPanel
*
* @return javax.swing.JPanel
*/
private JPanel getJPanel() {
if (jPanel == null) {
GridBagConstraints gridBagConstraints4 = new GridBagConstraints();
gridBagConstraints4.insets = new Insets(5, 5, 5, 5);
GridBagConstraints gridBagConstraints3 = new GridBagConstraints();
gridBagConstraints3.gridx = 0;
gridBagConstraints3.insets = new Insets(5, 5, 5, 5);
gridBagConstraints3.gridy = 2;
GridBagConstraints gridBagConstraints2 = new GridBagConstraints();
gridBagConstraints2.gridx = 0;
gridBagConstraints2.insets = new Insets(5, 5, 5, 5);
gridBagConstraints2.gridy = 1;
jPanel = new JPanel();
jPanel.setLayout(new GridBagLayout());
jPanel.setBorder(BorderFactory.createTitledBorder(BorderFactory.createLineBorder(new Color(0, 51, 255), 3), &quot;Show for:&quot;, TitledBorder.DEFAULT_JUSTIFICATION, TitledBorder.DEFAULT_POSITION, new Font(&quot;Dialog&quot;, Font.BOLD, 12), new Color(0, 51, 255)));
jPanel.add(getJButton(), gridBagConstraints4);
jPanel.add(getJButton1(), gridBagConstraints2);
jPanel.add(getJButton2(), gridBagConstraints3);
}
return jPanel;
}

/**
* This method initializes JButton
*
* @return javax.swing.JButton
*/
private JButton getJButton() {
if (jButton == null) {
jButton = new JButton();
jButton.setText(&quot;&lt;html&gt;Well&lt;br&gt;Cultural&lt;/html&gt;&quot;);
jButton.setIcon(new ImageIcon(getClass().getResource(&quot;/interfacceAgenzia/images/Sphinx-icon.gif&quot;)));
}
return jButton;
}

/**
* This method initializes jButton1
*
* @return javax.swing.JButton
*/
private JButton getJButton1() {
if (jButton1 == null) {
jButton1 = new JButton();
jButton1.setText(&quot;&lt;html&gt;point&lt;br&gt;Refreshments&lt;/html&gt;&quot;);
jButton1.setPreferredSize(new Dimension(121, 42));
jButton1.setIcon(new ImageIcon(getClass().getResource(&quot;/interfacceAgenzia/images/Java.png&quot;)));
}
return jButton1;
}

/**
* This method initializes jButton2
*
* @return javax.swing.JButton
*/
private JButton getJButton2() {
if (jButton2 == null) {
jButton2 = new JButton();
jButton2.setText(&quot;All&quot;);
jButton2.setPreferredSize(new Dimension(121, 42));
jButton2.setIcon(new ImageIcon(getClass().getResource(&quot;/interfacceAgenzia/immagini/Globe_32x32.png&quot;)));
}
return jButton2;
}

/**
* This method initializes jPanel1
*
* @return javax.swing.JPanel
*/
private JPanel getJPanel1() {
if (jPanel1 == null) {
GridBagConstraints gridBagConstraints29 = new GridBagConstraints();
gridBagConstraints29.gridx = 2;
gridBagConstraints29.gridy = 4;
GridBagConstraints gridBagConstraints22 = new GridBagConstraints();
gridBagConstraints22.gridx = 1;
gridBagConstraints22.insets = new Insets(5, 5, 5, 5);
gridBagConstraints22.gridy = 3;
jLabel16 = new JLabel();
jLabel16.setText(&quot;Comment deleted by moderator feedback&quot;);
GridBagConstraints gridBagConstraints21 = new GridBagConstraints();
gridBagConstraints21.gridx = 0;
gridBagConstraints21.insets = new Insets(5, 5, 5, 5);
gridBagConstraints21.gridy = 3;
jLabel15 = new JLabel();
jLabel15.setText(&quot;Bells&quot;);
GridBagConstraints gridBagConstraints20 = new GridBagConstraints();
gridBagConstraints20.gridx = 1;
gridBagConstraints20.insets = new Insets(5, 5, 5, 5);
gridBagConstraints20.anchor = GridBagConstraints.WEST;
gridBagConstraints20.gridy = 2;
jLabel14 = new JLabel();
jLabel14.setText(&quot;We eat good, bad beer&quot;);
GridBagConstraints gridBagConstraints19 = new GridBagConstraints();
gridBagConstraints19.gridx = 3;
gridBagConstraints19.gridy = 2;
jLabel13 = new JLabel();
jLabel13.setText(&quot;&quot;);
GridBagConstraints gridBagConstraints18 = new GridBagConstraints();
gridBagConstraints18.gridx = 0;
gridBagConstraints18.insets = new Insets(5, 5, 5, 5);
gridBagConstraints18.gridy = 2;
jLabel12 = new JLabel();
jLabel12.setText(&quot;Bells&quot;);
GridBagConstraints gridBagConstraints17 = new GridBagConstraints();
gridBagConstraints17.gridx = 1;
gridBagConstraints17.insets = new Insets(5, 5, 5, 5);
gridBagConstraints17.anchor = GridBagConstraints.WEST;
gridBagConstraints17.gridy = 0;
jLabel11 = new JLabel();
jLabel11.setText(&quot;Really a nice place, we'll be back!&quot;);
GridBagConstraints gridBagConstraints16 = new GridBagConstraints();
gridBagConstraints16.gridx = 0;
gridBagConstraints16.insets = new Insets(5, 5, 5, 5);
gridBagConstraints16.gridy = 0;
jLabel10 = new JLabel();
jLabel10.setText(&quot;Bells&quot;);
jPanel1 = new JPanel();
jPanel1.setLayout(new GridBagLayout());
jPanel1.setBorder(BorderFactory.createTitledBorder(BorderFactory.createLineBorder(new Color(0, 51, 255), 3), &quot;Last feedback issued:&quot;, TitledBorder.DEFAULT_JUSTIFICATION, TitledBorder.DEFAULT_POSITION, new Font(&quot;Dialog&quot;, Font.BOLD, 12), new Color(0, 102, 255)));
jPanel1.add(jLabel10, gridBagConstraints16);
jPanel1.add(jLabel11, gridBagConstraints17);
jPanel1.add(jLabel12, gridBagConstraints18);
jPanel1.add(jLabel13, gridBagConstraints19);
jPanel1.add(jLabel14, gridBagConstraints20);
jPanel1.add(jLabel15, gridBagConstraints21);
jPanel1.add(jLabel16, gridBagConstraints22);
jPanel1.add(getBtnVisualizza(), gridBagConstraints29);
}
return jPanel1;
}

/**
* This method initializes btnVisualizza
*
* @return javax.swing.JButton
*/
private JButton getBtnVisualizza() {
if (btnVisualizza == null) {
btnVisualizza = new JButton();
btnVisualizza.setText(&quot;View All&quot;);
btnVisualizza.setMnemonic(KeyEvent.VK_UNDEFINED);
btnVisualizza.setIcon(new ImageIcon(getClass().getResource(&quot;/interfacceAgenzia/images/Forward 216.png&quot;)));
}
return btnVisualizza;
}
} // @jve:decl-index=0:visual-constraint=&quot;-7, -61&quot;</content>
      <parent_id/>
    </artifact>
  </artifacts>
</artifacts_collection>
